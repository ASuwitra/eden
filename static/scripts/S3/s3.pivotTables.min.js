/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,e){c!=Array.prototype&&c!=Object.prototype&&(c[a]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,g={next:function(){if(e<c.length){var t=e++;return{value:a(t,c[t]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(c,a,e,g){if(a){e=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var t=c[g];t in e||(e[t]={});e=e[t]}c=c[c.length-1];g=e[c];a=a(g);a!=g&&null!=a&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.findInternal=function(c,a,e){c instanceof String&&(c=String(c));for(var g=c.length,t=0;t<g;t++){var l=c[t];if(a.call(e,l,t,c))return{i:t,v:l}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
!function(){function c(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function e(b){return null===b?NaN:+b}function g(b){return!isNaN(b)}function t(b){return{left:function(d,f,k,m){3>arguments.length&&(k=0);4>arguments.length&&(m=d.length);for(;k<m;){var z=k+m>>>1;0>b(d[z],f)?k=z+1:m=z}return k},right:function(d,f,k,m){3>arguments.length&&(k=0);4>arguments.length&&(m=d.length);for(;k<m;){var z=k+m>>>1;0<b(d[z],
f)?m=z:k=z+1}return k}}}function l(b){return b.length}function n(b,d){for(var f in d)Object.defineProperty(b.prototype,f,{value:d[f],enumerable:!1})}function p(){this._=Object.create(null)}function h(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function u(b){return"\x00"===(b+="")[0]?b.slice(1):b}function w(b){return h(b)in this._}function H(b){return(b=h(b))in this._&&delete this._[b]}function B(){var b=[],d;for(d in this._)b.push(u(d));return b}function C(){var b=0,d;for(d in this._)++b;
return b}function D(){for(var b in this._)return!1;return!0}function E(){this._=Object.create(null)}function A(b){return b}function L(b,d,f){return function(){var k=f.apply(d,arguments);return k===d?b:k}}function O(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var f=0,k=Zd.length;f<k;++f){var m=Zd[f]+d;if(m in b)return m}}function I(){}function v(){}function F(b){function d(){for(var d=f,k=-1,a=d.length,T;++k<a;)(T=d[k].on)&&T.apply(this,arguments);return b}var f=[],k=new p;d.on=
function(d,z){var m=k.get(d),T;if(2>arguments.length)return m&&m.on;m&&(m.on=null,f=f.slice(0,T=f.indexOf(m)).concat(f.slice(T+1)),k.remove(d));z&&f.push(k.set(d,{on:z}));return b};return d}function U(){y.event.preventDefault()}function P(){for(var b=y.event,d;d=b.sourceEvent;)b=d;return b}function R(b){for(var d=new v,f=0,k=arguments.length;++f<k;)d[arguments[f]]=F(d);d.of=function(f,k){return function(m){try{var z=m.sourceEvent=y.event;m.target=b;y.event=m;d[m.type].apply(f,k)}finally{y.event=z}}};
return d}function M(b){Tb(b,ma);return b}function r(b){return"function"===typeof b?b:function(){return Rc(b,this)}}function K(b){return"function"===typeof b?b:function(){return Sc(b,this)}}function Q(b,d){function f(){this.removeAttribute(b)}function k(){this.removeAttributeNS(b.space,b.local)}function m(){this.setAttribute(b,d)}function z(){this.setAttributeNS(b.space,b.local,d)}function a(){var f=d.apply(this,arguments);null==f?this.removeAttribute(b):this.setAttribute(b,f)}function T(){var f=d.apply(this,
arguments);null==f?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,f)}b=y.ns.qualify(b);return null==d?b.local?k:f:"function"===typeof d?b.local?T:a:b.local?z:m}function J(b){return new RegExp("(?:^|\\s+)"+y.requote(b)+"(?:\\s+|$)","g")}function q(b,d){function f(){for(var f=-1;++f<m;)b[f](this,d)}function k(){for(var f=-1,k=d.apply(this,arguments);++f<m;)b[f](this,k)}b=(b+"").trim().split(/^|\s+/).map(N);var m=b.length;return"function"===typeof d?k:f}function N(b){var d=
J(b);return function(f,k){if(m=f.classList)return k?m.add(b):m.remove(b);var m=f.getAttribute("class")||"";k?(d.lastIndex=0,d.test(m)||f.setAttribute("class",(m+" "+b).trim().replace(/\s+/g," "))):f.setAttribute("class",m.replace(d," ").trim().replace(/\s+/g," "))}}function x(b,d,f){function k(){this.style.removeProperty(b)}function m(){this.style.setProperty(b,d,f)}function z(){var k=d.apply(this,arguments);null==k?this.style.removeProperty(b):this.style.setProperty(b,k,f)}return null==d?k:"function"===
typeof d?z:m}function Z(b,d){function f(){delete this[b]}function k(){this[b]=d}function m(){var f=d.apply(this,arguments);null==f?delete this[b]:this[b]=f}return null==d?f:"function"===typeof d?m:k}function aa(b){function d(){var d=this.ownerDocument,f=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===f&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(f,b)}function f(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=y.ns.qualify(b)).local?f:d}function G(){var b=this.parentNode;b&&b.removeChild(this)}function S(b){return function(){return Ub(this,b)}}function W(b){arguments.length||(b=a);return function(d,f){return d&&f?b(d.__data__,f.__data__):!d-!f}}function la(b,d){for(var f=0,k=b.length;f<k;f++)for(var m=b[f],z=0,a=m.length,T;z<a;z++)(T=m[z])&&d(T,z,f);return b}function da(b){Tb(b,Ta);return b}function ta(b){var d,f;return function(k,m,z){k=b[z].update;var a=k.length;z!=f&&(f=z,d=0);for(m>=d&&
(d=m+1);!(m=k[d])&&++d<a;);return m}}function ka(b,d,f){function k(){var d=this[a];d&&(this.removeEventListener(b,d,d.$),delete this[a])}function m(){var m=Y(d,Qa(arguments));k.call(this);this.addEventListener(b,this[a]=m,m.$=f);m._=d}function z(){var d=new RegExp("^__on([^.]+)"+y.requote(b)+"$"),f,k;for(k in this)if(f=k.match(d)){var m=this[k];this.removeEventListener(f[1],m,m.$);delete this[k]}}var a="__on"+b,T=b.indexOf("."),Y=fa;0<T&&(b=b.slice(0,T));var c=Tc.get(b);c&&(b=c,Y=ia);return T?d?m:
k:d?I:z}function fa(b,d){return function(f){var k=y.event;y.event=f;d[0]=this.__data__;try{b.apply(this,d)}finally{y.event=k}}}function ia(b,d){var f=fa(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||f.call(this,b)}}function oa(b){var d=".dragsuppress-"+ ++pg,f="click"+d,k=y.select(c(b)).on("touchmove"+d,U).on("dragstart"+d,U).on("selectstart"+d,U);null==eb&&(eb="onselectstart"in b?!1:O(b.style,"userSelect"));if(eb){var m=(b&&(b.ownerDocument||b.document||
b).documentElement).style;var z=m[eb];m[eb]="none"}return function(b){k.on(d,null);eb&&(m[eb]=z);if(b){var a=function(){k.on(f,null)};k.on(f,function(){U();a()},!0);setTimeout(a,0)}}}function ga(b,d){d.changedTouches&&(d=d.changedTouches[0]);var f=b.ownerSVGElement||b;if(f.createSVGPoint){var k=f.createSVGPoint();if(0>Uc&&(f=c(b),f.scrollX||f.scrollY)){var f=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),m=f[0][0].getScreenCTM();
Uc=!(m.f||m.e);f.remove()}Uc?(k.x=d.pageX,k.y=d.pageY):(k.x=d.clientX,k.y=d.clientY);k=k.matrixTransform(b.getScreenCTM().inverse());return[k.x,k.y]}k=b.getBoundingClientRect();return[d.clientX-k.left-b.clientLeft,d.clientY-k.top-b.clientTop]}function ja(){return y.event.changedTouches[0].identifier}function qa(b,d,f){return(d[0]-b[0])*(f[1]-b[1])-(d[1]-b[1])*(f[0]-b[0])}function xa(b){return 1<b?0:-1>b?ba:Math.acos(b)}function na(b){return 1<b?va:-1>b?-va:Math.asin(b)}function Ia(b){return((b=Math.exp(b))+
1/b)/2}function Ja(b){return(b=Math.sin(b/2))*b}function Ca(){}function Ba(b,d,f){return this instanceof Ba?void(this.h=+b,this.s=+d,this.l=+f):2>arguments.length?b instanceof Ba?new Ba(b.h,b.s,b.l):$d(""+b,ae,Ba):new Ba(b,d,f)}function ya(b,d,f){function k(b){360<b?b-=360:0>b&&(b+=360);return 60>b?z+(m-z)*b/60:180>b?m:240>b?z+(m-z)*(240-b)/60:z}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;f=0>f?0:1<f?1:f;var m=.5>=f?f*(1+d):f+d-f*d;var z=2*f-m;return new Ga(Math.round(255*k(b+120)),
Math.round(255*k(b)),Math.round(255*k(b-120)))}function ra(b,d,f){return this instanceof ra?void(this.h=+b,this.c=+d,this.l=+f):2>arguments.length?b instanceof ra?new ra(b.h,b.c,b.l):b instanceof Da?be(b.l,b.a,b.b):be((b=ce((b=y.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ra(b,d,f)}function ua(b,d,f){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new Da(f,Math.cos(b*=ca)*d,Math.sin(b)*d)}function Da(b,d,f){return this instanceof Da?void(this.l=+b,this.a=+d,this.b=+f):2>arguments.length?b instanceof Da?new Da(b.l,
b.a,b.b):b instanceof ra?ua(b.h,b.c,b.l):ce((b=Ga(b)).r,b.g,b.b):new Da(b,d,f)}function Db(b,d,f){b=(b+16)/116;f=b-f/200;d=Vc(b+d/500)*de;b=Vc(b)*ee;f=Vc(f)*fe;return new Ga(Wc(3.2404542*d-1.5371385*b-.4985314*f),Wc(-.969266*d+1.8760108*b+.041556*f),Wc(.0556434*d-.2040259*b+1.0572252*f))}function be(b,d,f){return 0<b?new ra(Math.atan2(f,d)*sa,Math.sqrt(d*d+f*f),b):new ra(NaN,NaN,b)}function Vc(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Xc(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function Wc(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ga(b,d,f){return this instanceof Ga?void(this.r=~~b,this.g=~~d,this.b=~~f):2>arguments.length?b instanceof Ga?new Ga(b.r,b.g,b.b):$d(""+b,Ga,ya):new Ga(b,d,f)}function Vb(b){return new Ga(b>>16,b>>8&255,b&255)+""}function qb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function $d(b,d,f){var k=0,m=0,z=0,a;if(a=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var T=a[2].split(",");
switch(a[1]){case "hsl":return f(parseFloat(T[0]),parseFloat(T[1])/100,parseFloat(T[2])/100);case "rgb":return d(Yc(T[0]),Yc(T[1]),Yc(T[2]))}}if(f=Wb.get(b))return d(f.r,f.g,f.b);null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(k=(f&3840)>>4,k|=k>>4,m=f&240,m|=m>>4,z=f&15,z|=z<<4):7===b.length&&(k=(f&16711680)>>16,m=(f&65280)>>8,z=f&255));return d(k,m,z)}function ae(b,d,f){var k=Math.min(b/=255,d/=255,f/=255),m=Math.max(b,d,f),z=m-k,a=(m+k)/2;z?(k=.5>a?z/(m+k):z/(2-m-k),
b=60*(b==m?(d-f)/z+(d<f?6:0):d==m?(f-b)/z+2:(b-d)/z+4)):(b=NaN,k=0<a&&1>a?0:b);return new Ba(b,k,a)}function ce(b,d,f){b=Zc(b);d=Zc(d);f=Zc(f);var k=Xc((.4124564*b+.3575761*d+.1804375*f)/de),m=Xc((.2126729*b+.7151522*d+.072175*f)/ee);b=Xc((.0193339*b+.119192*d+.9503041*f)/fe);return Da(116*m-16,500*(k-m),200*(m-b))}function Zc(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Yc(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function pa(b){return"function"===
typeof b?b:function(){return b}}function $c(b){return function(d,f,k){2===arguments.length&&"function"===typeof f&&(k=f,f=null);return Xb(d,f,b,k)}}function Xb(b,d,f,k){function m(){var b=Y.status,d;if(d=!b)d=(d=Y.responseType)&&"text"!==d?Y.response:Y.responseText;if(d||200<=b&&300>b||304===b){try{var k=f.call(z,Y)}catch(og){a.error.call(z,og);return}a.load.call(z,k)}else a.error.call(z,Y)}var z={},a=y.dispatch("beforesend","progress","load","error"),T={},Y=new XMLHttpRequest,c=null;!this.XDomainRequest||
"withCredentials"in Y||!/^(http(s)?:)?\/\//.test(b)||(Y=new XDomainRequest);"onload"in Y?Y.onload=Y.onerror=m:Y.onreadystatechange=function(){3<Y.readyState&&m()};Y.onprogress=function(b){var d=y.event;y.event=b;try{a.progress.call(z,Y)}finally{y.event=d}};z.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return T[b];null==d?delete T[b]:T[b]=d+"";return z};z.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return z};z.responseType=function(b){if(!arguments.length)return c;
c=b;return z};z.response=function(b){f=b;return z};["get","post"].forEach(function(b){z[b]=function(){return z.send.apply(z,[b].concat(Qa(arguments)))}});z.send=function(f,k,m){2===arguments.length&&"function"===typeof k&&(m=k,k=null);Y.open(f,b,!0);null==d||"accept"in T||(T.accept=d+",*/*");if(Y.setRequestHeader)for(var e in T)Y.setRequestHeader(e,T[e]);null!=d&&Y.overrideMimeType&&Y.overrideMimeType(d);null!=c&&(Y.responseType=c);if(null!=m)z.on("error",m).on("load",function(b){m(null,b)});a.beforesend.call(z,
Y);Y.send(null==k?null:k);return z};z.abort=function(){Y.abort();return z};y.rebind(z,a,"on");return null==k?z:z.get(qg(k))}function qg(b){return 1===b.length?function(d,f){b(null==d?f:null)}:b}function Yb(b,d,f){var k=arguments.length;2>k&&(d=0);3>k&&(f=Date.now());k={c:b,t:f+d,n:null};Zb?Zb.n=k:$b=k;Zb=k;ac||(bc=clearTimeout(bc),ac=1,ge(ad));return k}function ad(){var b=he(),b=ie()-b;24<b?(isFinite(b)&&(clearTimeout(bc),bc=setTimeout(ad,b)),ac=0):(ac=1,ge(ad))}function he(){for(var b=Date.now(),
d=$b;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function ie(){for(var b,d=$b,f=Infinity;d;)d.c?(d.t<f&&(f=d.t),d=(b=d).n):d=b?b.n=d.n:$b=d.n;Zb=b;return f}function bd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function rg(b){var d=b.decimal,f=b.thousands,k=b.grouping,m=b.currency,z=k&&f?function(b,d){for(var m=b.length,z=[],a=0,T=k[0],c=0;0<m&&0<T;){c+T+1>d&&(T=Math.max(1,d-c));z.push(b.substring(m-=T,m+T));if((c+=T+1)>d)break;T=k[a=(a+1)%k.length]}return z.reverse().join(f)}:A;return function(b){b=
je.exec(b);var f=b[1]||" ",k=b[2]||">",a=b[3]||"-",c=b[4]||"",e=b[5],ha=+b[6],g=b[7],h=b[8],q=b[9],l=1,r="",n="",x=!1,t=!0;h&&(h=+h.substring(1));if(e||"0"===f&&"="===k)e=f="0",k="=";switch(q){case "n":g=!0;q="g";break;case "%":l=100;n="%";q="f";break;case "p":l=100;n="%";q="r";break;case "b":case "o":case "x":case "X":"#"===c&&(r="0"+q.toLowerCase());case "c":t=!1;case "d":x=!0;h=0;break;case "s":l=-1,q="r"}"$"===c&&(r=m[0],n=m[1]);"r"!=q||h||(q="g");if(null!=h)if("g"==q)h=Math.max(1,Math.min(21,
h));else if("e"==q||"f"==q)h=Math.max(0,Math.min(20,h));var q=sg.get(q)||tg,p=e&&g;return function(b){var m=n;if(x&&b%1)return"";var T=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===a?"":a;0>l?(m=y.formatPrefix(b,h),b=m.scale(b),m=m.symbol+n):b*=l;b=q(b,h);var c=b.lastIndexOf(".");if(0>c)if(c=t?b.lastIndexOf("e"):-1,0>c){var Y=b;b=""}else Y=b.substring(0,c),b=b.substring(c);else Y=b.substring(0,c),b=d+b.substring(c+1);!e&&g&&(Y=z(Y,Infinity));var c=r.length+Y.length+b.length+(p?0:T.length),V=c<ha?Array(c=ha-
c+1).join(f):"";p&&(Y=z(V+Y,V.length?ha-b.length:Infinity));T+=r;b=Y+b;return("<"===k?T+b+V:">"===k?V+T+b:"^"===k?V.substring(0,c>>=1)+T+b+V.substring(c):T+(p?b:V+b))+m}}}function tg(b){return b+""}function Ua(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function fb(b,d,f){function k(d){var f=b(d),k=z(f,1);return d-f<k-d?f:k}function m(f){d(f=b(new Ea(f-1)),1);return f}function z(b,f){d(b=new Ea(+b),f);return b}function a(b,k,z){b=m(b);var a=[];if(1<z)for(;b<k;)f(b)%
z||a.push(new Date(+b)),d(b,1);else for(;b<k;)a.push(new Date(+b)),d(b,1);return a}b.floor=b;b.round=k;b.ceil=m;b.offset=z;b.range=a;var T=b.utc=cc(b);T.floor=T;T.round=cc(k);T.ceil=cc(m);T.offset=cc(z);T.range=function(b,d,f){try{Ea=Ua;var k=new Ua;k._=b;return a(k,d,f)}finally{Ea=Date}};return b}function cc(b){return function(d,f){try{Ea=Ua;var k=new Ua;k._=d;return b(k,f)._}finally{Ea=Date}}}function ug(b){function d(b){function d(d){for(var f=[],m=-1,z=0,a,c;++m<k;)if(37===b.charCodeAt(m)){f.push(b.slice(z,
m));null!=(a=ke[z=b.charAt(++m)])&&(z=b.charAt(++m));if(c=J[z])z=c(d,null==a?"e"===z?" ":"0":a);f.push(z);z=m+1}f.push(b.slice(z,m));return f.join("")}var k=b.length;d.parse=function(d){var k={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(k,b,d,0)!=d.length)return null;"p"in k&&(k.H=k.H%12+12*k.p);d=null!=k.Z&&Ea!==Ua;var m=new (d?Ua:Ea);"j"in k?m.setFullYear(k.y,0,k.j):"W"in k||"U"in k?("w"in k||(k.w="W"in k?1:0),m.setFullYear(k.y,0,1),m.setFullYear(k.y,0,"W"in k?(k.w+6)%7+7*k.W-(m.getDay()+5)%7:k.w+
7*k.U-(m.getDay()+6)%7)):m.setFullYear(k.y,k.m,k.d);m.setHours(k.H+(k.Z/100|0),k.M+k.Z%100,k.S,k.L);return d?m._:m};d.toString=function(){return b};return d}function f(b,d,f,k){for(var m,z=0,a=d.length,c=f.length;z<a;){if(k>=c)return-1;m=d.charCodeAt(z++);if(37===m){if(m=d.charAt(z++),m=v[m in ke?d.charAt(z++):m],!m||0>(k=m(b,f,k)))return-1}else if(m!=f.charCodeAt(k++))return-1}return k}var k=b.dateTime,m=b.date,z=b.time,a=b.periods,T=b.days,c=b.shortDays,e=b.months,g=b.shortMonths;d.utc=function(b){function f(b){try{Ea=
Ua;var d=new Ea;d._=b;return k(d)}finally{Ea=Date}}var k=d(b);f.parse=function(b){try{Ea=Ua;var d=k.parse(b);return d&&d._}finally{Ea=Date}};f.toString=k.toString;return f};d.multi=d.utc.multi=vg;var h=y.map(),q=dc(T),l=ec(T),r=dc(c),n=ec(c),x=dc(e),t=ec(e),p=dc(g),G=ec(g);a.forEach(function(b,d){h.set(b.toLowerCase(),d)});var J={a:function(b){return c[b.getDay()]},A:function(b){return T[b.getDay()]},b:function(b){return g[b.getMonth()]},B:function(b){return e[b.getMonth()]},c:d(k),d:function(b,d){return Ha(b.getDate(),
d,2)},e:function(b,d){return Ha(b.getDate(),d,2)},H:function(b,d){return Ha(b.getHours(),d,2)},I:function(b,d){return Ha(b.getHours()%12||12,d,2)},j:function(b,d){return Ha(1+X.dayOfYear(b),d,3)},L:function(b,d){return Ha(b.getMilliseconds(),d,3)},m:function(b,d){return Ha(b.getMonth()+1,d,2)},M:function(b,d){return Ha(b.getMinutes(),d,2)},p:function(b){return a[+(12<=b.getHours())]},S:function(b,d){return Ha(b.getSeconds(),d,2)},U:function(b,d){return Ha(X.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Ha(X.mondayOfYear(b),d,2)},x:d(m),X:d(z),y:function(b,d){return Ha(b.getFullYear()%100,d,2)},Y:function(b,d){return Ha(b.getFullYear()%1E4,d,4)},Z:wg,"%":function(){return"%"}},v={a:function(b,d,f){r.lastIndex=0;return(d=r.exec(d.slice(f)))?(b.w=n.get(d[0].toLowerCase()),f+d[0].length):-1},A:function(b,d,f){q.lastIndex=0;return(d=q.exec(d.slice(f)))?(b.w=l.get(d[0].toLowerCase()),f+d[0].length):-1},b:function(b,d,f){p.lastIndex=0;return(d=p.exec(d.slice(f)))?(b.m=G.get(d[0].toLowerCase()),
f+d[0].length):-1},B:function(b,d,f){x.lastIndex=0;return(d=x.exec(d.slice(f)))?(b.m=t.get(d[0].toLowerCase()),f+d[0].length):-1},c:function(b,d,k){return f(b,J.c.toString(),d,k)},d:le,e:le,H:me,I:me,j:xg,L:yg,m:zg,M:Ag,p:function(b,d,f){d=h.get(d.slice(f,f+=2).toLowerCase());return null==d?-1:(b.p=d,f)},S:Bg,U:Cg,w:Dg,W:Eg,x:function(b,d,k){return f(b,J.x.toString(),d,k)},X:function(b,d,k){return f(b,J.X.toString(),d,k)},y:Fg,Y:Gg,Z:Hg,"%":Ig};return d}function Ha(b,d,f){var k=0>b?"-":"";b=(k?-b:
b)+"";var m=b.length;return k+(m<f?Array(f-m+1).join(d)+b:b)}function dc(b){return new RegExp("^(?:"+b.map(y.requote).join("|")+")","i")}function ec(b){for(var d=new p,f=-1,k=b.length;++f<k;)d.set(b[f].toLowerCase(),f);return d}function Dg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+1)))?(b.w=+d[0],f+d[0].length):-1}function Cg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f)))?(b.U=+d[0],f+d[0].length):-1}function Eg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f)))?(b.W=+d[0],f+d[0].length):
-1}function Gg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+4)))?(b.y=+d[0],f+d[0].length):-1}function Fg(b,d,f){wa.lastIndex=0;if(d=wa.exec(d.slice(f,f+2))){var k=+d[0];b=(b.y=k+(68<k?1900:2E3),f+d[0].length)}else b=-1;return b}function Hg(b,d,f){return/^[+-]\d{4}$/.test(d=d.slice(f,f+5))?(b.Z=-d,f+5):-1}function zg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.m=d[0]-1,f+d[0].length):-1}function le(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.d=+d[0],f+d[0].length):
-1}function xg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+3)))?(b.j=+d[0],f+d[0].length):-1}function me(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.H=+d[0],f+d[0].length):-1}function Ag(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.M=+d[0],f+d[0].length):-1}function Bg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.S=+d[0],f+d[0].length):-1}function yg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+3)))?(b.L=+d[0],f+d[0].length):-1}function wg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var f=ea(d)/60|0,d=ea(d)%60;return b+Ha(f,"0",2)+Ha(d,"0",2)}function Ig(b,d,f){ne.lastIndex=0;return(b=ne.exec(d.slice(f,f+1)))?f+b[0].length:-1}function vg(b){for(var d=b.length,f=-1;++f<d;)b[f][0]=this(b[f][0]);return function(d){for(var f=0,k=b[f];!k[1](d);)k=b[++f];return k[0](d)}}function cd(){}function oe(b,d,f){var k=f.s=b+d,m=k-b;f.t=b-(k-m)+(d-m)}function fc(b,d){if(b&&pe.hasOwnProperty(b.type))pe[b.type](b,d)}function dd(b,d,f){var k=-1;f=b.length-f;
for(d.lineStart();++k<f;){var m=b[k];d.point(m[0],m[1],m[2])}d.lineEnd()}function qe(b,d){var f=-1,k=b.length;for(d.polygonStart();++f<k;)dd(b[f],d,1);d.polygonEnd()}function Jg(){function b(b,d){b*=ca;d=d*ca/2+ba/4;var f=b-k,a=0<=f?1:-1,f=a*f,c=Math.cos(d),T=Math.sin(d),e=z*T;gb.add(Math.atan2(e*a*Math.sin(f),m*c+e*Math.cos(f)));k=b;m=c;z=T}var d,f,k,m,z;Ka.point=function(a,c){Ka.point=b;k=(d=a)*ca;m=Math.cos(c=(f=c)*ca/2+ba/4);z=Math.sin(c)};Ka.lineEnd=function(){b(d,f)}}function hb(b){var d=b[0];
b=b[1];var f=Math.cos(b);return[f*Math.cos(d),f*Math.sin(d),Math.sin(b)]}function gc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function rb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function ed(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function hc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function ic(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function jc(b){return[Math.atan2(b[1],b[0]),na(b[2])]}function kc(b,d){return 1E-6>ea(b[0]-d[0])&&1E-6>ea(b[1]-
d[1])}function fd(b,d){b*=ca;var f=Math.cos(d*=ca);Eb(f*Math.cos(b),f*Math.sin(b),Math.sin(d))}function Eb(b,d,f){++Fb;ib+=(b-ib)/Fb;jb+=(d-jb)/Fb;Va+=(f-Va)/Fb}function re(){function b(b,z){b*=ca;var m=Math.cos(z*=ca),a=m*Math.cos(b),m=m*Math.sin(b),c=Math.sin(z),e=Math.atan2(Math.sqrt((e=f*c-k*m)*e+(e=k*a-d*c)*e+(e=d*m-f*a)*e),d*a+f*m+k*c);lc+=e;Ya+=e*(d+(d=a));Za+=e*(f+(f=m));Ra+=e*(k+(k=c));Eb(d,f,k)}var d,f,k;Na.point=function(m,z){m*=ca;var a=Math.cos(z*=ca);d=a*Math.cos(m);f=a*Math.sin(m);
k=Math.sin(z);Na.point=b;Eb(d,f,k)}}function se(){Na.point=fd}function Kg(){function b(b,d){b*=ca;var f=Math.cos(d*=ca),a=f*Math.cos(b),f=f*Math.sin(b),c=Math.sin(d),T=m*c-z*f,e=z*a-k*c,ha=k*f-m*a,g=Math.sqrt(T*T+e*e+ha*ha),h=k*a+m*f+z*c,q=g&&-xa(h)/g,g=Math.atan2(g,h);sb+=q*T;tb+=q*e;$a+=q*ha;lc+=g;Ya+=g*(k+(k=a));Za+=g*(m+(m=f));Ra+=g*(z+(z=c));Eb(k,m,z)}var d,f,k,m,z;Na.point=function(a,c){d=a;f=c;Na.point=b;a*=ca;var T=Math.cos(c*=ca);k=T*Math.cos(a);m=T*Math.sin(a);z=Math.sin(c);Eb(k,m,z)};Na.lineEnd=
function(){b(d,f);Na.lineEnd=se;Na.point=fd}}function te(b,d){function f(f,m){return f=b(f,m),d(f[0],f[1])}b.invert&&d.invert&&(f.invert=function(f,m){return f=d.invert(f,m),f&&b.invert(f[0],f[1])});return f}function Gb(){return!0}function ue(b,d,f,k,m){var z=[],a=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,f=b[0],k=b[d];if(kc(f,k)){m.lineStart();for(k=0;k<d;++k)m.point((f=b[k])[0],f[1]);m.lineEnd()}else d=new mc(f,b,null,!0),f=new mc(f,null,d,!1),d.o=f,z.push(d),a.push(f),d=new mc(k,
b,null,!1),f=new mc(k,null,d,!0),d.o=f,z.push(d),a.push(f)}});a.sort(d);ve(z);ve(a);if(z.length){b=0;d=f;for(f=a.length;b<f;++b)a[b].e=d=!d;d=z[0];for(var c,e;;){for(var V=d,g=!0;V.v;)if((V=V.n)===d)return;c=V.z;m.lineStart();do{V.v=V.o.v=!0;if(V.e){if(g)for(b=0,f=c.length;b<f;++b)m.point((e=c[b])[0],e[1]);else k(V.x,V.n.x,1,m);V=V.n}else{if(g)for(c=V.p.z,b=c.length-1;0<=b;--b)m.point((e=c[b])[0],e[1]);else k(V.x,V.p.x,-1,m);V=V.p}V=V.o;c=V.z;g=!g}while(!V.v);m.lineEnd()}}}function ve(b){if(d=b.length){for(var d,
f=0,k=b[0],m;++f<d;)k.n=m=b[f],m.p=k,k=m;k.n=m=b[0];m.p=k}}function mc(b,d,f,k){this.x=b;this.z=d;this.o=f;this.e=k;this.v=!1;this.n=this.p=null}function we(b,d,f,k){return function(m,z){function a(d,f){var k=m(d,f);b(d=k[0],f=k[1])&&z.point(d,f)}function c(b,d){var f=m(b,d);l.point(f[0],f[1])}function e(){n.point=c;l.lineStart()}function V(){n.point=a;l.lineEnd()}function g(b,d){v.push([b,d]);var f=m(b,d);p.point(f[0],f[1])}function h(){p.lineStart();v=[]}function q(){g(v[0][0],v[0][1]);p.lineEnd();
var b=p.clean(),d=t.buffer();var f=d.length;v.pop();G.push(v);v=null;if(f)if(b&1){b=d[0];f=b.length-1;var d=-1,k;if(0<f){J||(z.polygonStart(),J=!0);for(z.lineStart();++d<f;)z.point((k=b[d])[0],k[1]);z.lineEnd()}}else 1<f&&b&2&&d.push(d.pop().concat(d.shift())),x.push(d.filter(Lg))}var l=d(z),r=m.invert(k[0],k[1]),n={point:a,lineStart:e,lineEnd:V,polygonStart:function(){n.point=g;n.lineStart=h;n.lineEnd=q;x=[];G=[]},polygonEnd:function(){n.point=a;n.lineStart=e;n.lineEnd=V;x=y.merge(x);var b=r;var d=
G;var k=b[0],m=b[1],c=[Math.sin(k),-Math.cos(k),0],T=0,Y=0;gb.reset();for(var ha=0,g=d.length;ha<g;++ha){var h=d[ha],q=h.length;if(q)for(var Aa=h[0],l=Aa[0],b=Aa[1]/2+ba/4,t=Math.sin(b),p=Math.cos(b),v=1;;){v===q&&(v=0);var b=h[v],pb=b[0],N=b[1]/2+ba/4,Cb=Math.sin(N),N=Math.cos(N),u=pb-l,S=0<=u?1:-1,W=S*u,F=W>ba,t=t*Cb;gb.add(Math.atan2(t*S*Math.sin(W),p*N+t*Math.cos(W)));T+=F?u+S*La:u;F^l>=k^pb>=k&&(Aa=rb(hb(Aa),hb(b)),ic(Aa),l=rb(c,Aa),ic(l),l=(F^0<=u?-1:1)*na(l[2]),m>l||m===l&&(Aa[0]||Aa[1]))&&
(Y+=F^0<=u?1:-1);if(!v++)break;l=pb;t=Cb;p=N;Aa=b}}d=(-1E-6>T||1E-6>T&&-1E-6>gb)^Y&1;x.length?(J||(z.polygonStart(),J=!0),ue(x,Mg,d,f,z)):d&&(J||(z.polygonStart(),J=!0),z.lineStart(),f(null,null,1,z),z.lineEnd());J&&(z.polygonEnd(),J=!1);x=G=null},sphere:function(){z.polygonStart();z.lineStart();f(null,null,1,z);z.lineEnd();z.polygonEnd()}},x,t=xe(),p=d(t),J=!1,G,v;return n}}function Lg(b){return 1<b.length}function xe(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,k){d.push([b,
k])},lineEnd:I,buffer:function(){var f=b;b=[];d=null;return f},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Mg(b,d){return(0>(b=b.x)[0]?b[1]-va-1E-6:va-b[1])-(0>(d=d.x)[0]?d[1]-va-1E-6:va-d[1])}function Ng(b){function d(b,d){return Math.cos(b)*Math.cos(d)>m}function f(b,d,f){var k=hb(b),z=hb(d),a=[1,0,0],z=rb(k,z),c=gc(z,z),k=z[0],T=c-k*k;if(!T)return!f&&b;c=m*c/T;T=-m*k/T;k=rb(a,z);a=hc(a,c);z=hc(z,T);ed(a,z);z=gc(a,k);c=gc(k,k);T=z*z-c*(gc(a,a)-1);if(!(0>T)){var e=
Math.sqrt(T),T=hc(k,(-z-e)/c);ed(T,a);T=jc(T);if(!f)return T;f=b[0];var Y=d[0];b=b[1];d=d[1];if(Y<f){var ha=f;f=Y;Y=ha}var V=Y-f,g=1E-6>ea(V-ba);!g&&d<b&&(ha=b,b=d,d=ha);if(g||1E-6>V?g?0<b+d^T[1]<(1E-6>ea(T[0]-f)?b:d):b<=T[1]&&T[1]<=d:V>ba^(f<=T[0]&&T[0]<=Y))return d=hc(k,(-z+e)/c),ed(d,a),[T,jc(d)]}}function k(d,f){var k=z?b:ba-b,m=0;d<-k?m|=1:d>k&&(m|=2);f<-k?m|=4:f>k&&(m|=8);return m}var m=Math.cos(b),z=0<m,a=1E-6<ea(m),c=gd(b,6*ca);return we(d,function(b){var m,c,T,e,Y;return{lineStart:function(){e=
T=!1;Y=1},point:function(ha,g){var V=[ha,g],h=d(ha,g),q=z?h?0:k(ha,g):h?k(ha+(0>ha?ba:-ba),g):0;!m&&(e=T=h)&&b.lineStart();if(h!==T){var l=f(m,V);if(kc(m,l)||kc(V,l))V[0]+=1E-6,V[1]+=1E-6,h=d(V[0],V[1])}if(h!==T)Y=0,h?(b.lineStart(),l=f(V,m),b.point(l[0],l[1])):(l=f(m,V),b.point(l[0],l[1]),b.lineEnd()),m=l;else if(a&&m&&z^h){var r;q&c||!(r=f(V,m,!0))||(Y=0,z?(b.lineStart(),b.point(r[0][0],r[0][1]),b.point(r[1][0],r[1][1]),b.lineEnd()):(b.point(r[1][0],r[1][1]),b.lineEnd(),b.lineStart(),b.point(r[0][0],
r[0][1])))}!h||m&&kc(m,V)||b.point(V[0],V[1]);m=V;T=h;c=q},lineEnd:function(){T&&b.lineEnd();m=null},clean:function(){return Y|(e&&T)<<1}}},c,z?[0,-b]:[-ba,b-ba])}function ye(b,d,f,k){return function(m){var z=m.a,a=m.b,c=z.x,z=z.y,e=0,V=1,g=a.x-c,a=a.y-z;var h=b-c;if(g||!(0<h)){h/=g;if(0>g){if(h<e)return;h<V&&(V=h)}else if(0<g){if(h>V)return;h>e&&(e=h)}h=f-c;if(g||!(0>h)){h/=g;if(0>g){if(h>V)return;h>e&&(e=h)}else if(0<g){if(h<e)return;h<V&&(V=h)}h=d-z;if(a||!(0<h)){h/=a;if(0>a){if(h<e)return;h<V&&
(V=h)}else if(0<a){if(h>V)return;h>e&&(e=h)}h=k-z;if(a||!(0>h)){h/=a;if(0>a){if(h>V)return;h>e&&(e=h)}else if(0<a){if(h<e)return;h<V&&(V=h)}0<e&&(m.a={x:c+e*g,y:z+e*a});1>V&&(m.b={x:c+V*g,y:z+V*a});return m}}}}}}function ze(b,d,f,k){function m(k,m){return 1E-6>ea(k[0]-b)?0<m?0:3:1E-6>ea(k[0]-f)?0<m?2:1:1E-6>ea(k[1]-d)?0<m?1:0:0<m?3:2}function z(b,d){return a(b.x,d.x)}function a(b,d){var f=m(b,1),k=m(d,1);return f!==k?f-k:0===f?d[1]-b[1]:1===f?b[0]-d[0]:2===f?b[1]-d[1]:d[0]-b[0]}return function(c){function e(z,
c,e,T){var Y=0,ha=0;if(null==z||(Y=m(z,e))!==(ha=m(c,e))||0>a(z,c)^0<e){do T.point(0===Y||3===Y?b:f,1<Y?k:d);while((Y=(Y+e+4)%4)!==ha)}else T.point(c[0],c[1])}function T(m,z){b<=m&&m<=f&&d<=z&&z<=k&&c.point(m,z)}function ha(m,z){m=Math.max(-1E9,Math.min(1E9,m));z=Math.max(-1E9,Math.min(1E9,z));var a=b<=m&&m<=f&&d<=z&&z<=k;r&&n.push([m,z]);if(u)t=m,p=z,J=a,u=!1,a&&(c.lineStart(),c.point(m,z));else if(a&&N)c.point(m,z);else{var e={a:{x:v,y:G},b:{x:m,y:z}};l(e)?(N||(c.lineStart(),c.point(e.a.x,e.a.y)),
c.point(e.b.x,e.b.y),a||c.lineEnd(),S=!1):a&&(c.lineStart(),c.point(m,z),S=!1)}v=m;G=z;N=a}var g=c,h=xe(),l=ye(b,d,f,k),q,r,n,x={point:T,lineStart:function(){x.point=ha;r&&r.push(n=[]);u=!0;N=!1;v=G=NaN},lineEnd:function(){q&&(ha(t,p),J&&N&&h.rejoin(),q.push(h.buffer()));x.point=T;N&&c.lineEnd()},polygonStart:function(){c=h;q=[];r=[];S=!0},polygonEnd:function(){c=g;q=y.merge(q);var d=[b,k];for(var f=0,m=r.length,a=d[1],T=0;T<m;++T)for(var Y=1,ha=r[T],V=ha.length,h=ha[0],l;Y<V;++Y)l=ha[Y],h[1]<=a?
l[1]>a&&0<qa(h,l,d)&&++f:l[1]<=a&&0>qa(h,l,d)&&--f,h=l;d=0!==f;f=S&&d;m=q.length;if(f||m)c.polygonStart(),f&&(c.lineStart(),e(null,null,1,c),c.lineEnd()),m&&ue(q,z,d,e,c),c.polygonEnd();q=r=n=null}},t,p,J,v,G,N,u,S;return x}}function hd(b){var d=0,f=ba/3,k=id(b);b=k(d,f);b.parallels=function(b){return arguments.length?k(d=b[0]*ba/180,f=b[1]*ba/180):[d/ba*180,f/ba*180]};return b}function Ae(b,d){function f(b,d){var f=Math.sqrt(z-2*m*Math.sin(d))/m;return[f*Math.sin(b*=m),a-f*Math.cos(b)]}var k=Math.sin(b),
m=(k+Math.sin(d))/2,z=1+k*(2*m-k),a=Math.sqrt(z)/m;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,na((z-(b*b+f*f)*m*m)/(2*m))]};return f}function Og(){function b(b,d){jd+=m*b-k*d;k=b;m=d}var d,f,k,m;ab.point=function(z,a){ab.point=b;d=k=z;f=m=a};ab.lineEnd=function(){b(d,f)}}function Pg(){function b(b,d){a.push("M",b,",",d,z)}function d(b,d){a.push("M",b,",",d);c.point=f}function f(b,d){a.push("L",b,",",d)}function k(){c.point=b}function m(){a.push("Z")}var z=Be(4.5),a=[],c={point:b,lineStart:function(){c.point=
d},lineEnd:k,polygonStart:function(){c.lineEnd=m},polygonEnd:function(){c.lineEnd=k;c.point=b},pointRadius:function(b){z=Be(b);return c},result:function(){if(a.length){var b=a.join("");a=[];return b}}};return c}function Be(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function kb(b,d){ib+=b;jb+=d;++Va}function Ce(){function b(b,m){var k=b-d,a=m-f,k=Math.sqrt(k*k+a*a);Ya+=k*(d+b)/2;Za+=k*(f+m)/2;Ra+=k;kb(d=b,f=m)}var d,f;Oa.point=function(k,m){Oa.point=b;kb(d=k,f=m)}}
function De(){Oa.point=kb}function Qg(){function b(b,d){var f=b-k,z=d-m,f=Math.sqrt(f*f+z*z);Ya+=f*(k+b)/2;Za+=f*(m+d)/2;Ra+=f;f=m*b-k*d;sb+=f*(k+b);tb+=f*(m+d);$a+=3*f;kb(k=b,m=d)}var d,f,k,m;Oa.point=function(z,a){Oa.point=b;kb(d=k=z,f=m=a)};Oa.lineEnd=function(){b(d,f)}}function Rg(b){function d(d,f){b.moveTo(d+a,f);b.arc(d,f,a,0,La)}function f(d,f){b.moveTo(d,f);c.point=k}function k(d,f){b.lineTo(d,f)}function m(){c.point=d}function z(){b.closePath()}var a=4.5,c={point:d,lineStart:function(){c.point=
f},lineEnd:m,polygonStart:function(){c.lineEnd=z},polygonEnd:function(){c.lineEnd=m;c.point=d},pointRadius:function(b){a=b;return c},result:I};return c}function Ee(b){function d(b){return(c?k:f)(b)}function f(d){return Fe(d,function(f,k){f=b(f,k);d.point(f[0],f[1])})}function k(d){function f(f,k){f=b(f,k);d.point(f[0],f[1])}function k(){x=NaN;G.point=z;d.lineStart()}function z(f,k){var z=hb([f,k]),a=b(f,k);m(x,t,n,p,J,v,x=a[0],t=a[1],n=f,p=z[0],J=z[1],v=z[2],c,d);d.point(x,t)}function a(){G.point=
f;d.lineEnd()}function e(){k();G.point=T;G.lineEnd=Y}function T(b,d){z(g=b,d);ha=x;h=t;l=p;q=J;r=v;G.point=z}function Y(){m(x,t,n,p,J,v,ha,h,g,l,q,r,c,d);G.lineEnd=a;a()}var g,ha,h,l,q,r,n,x,t,p,J,v,G={point:f,lineStart:k,lineEnd:a,polygonStart:function(){d.polygonStart();G.lineStart=e},polygonEnd:function(){d.polygonEnd();G.lineStart=k}};return G}function m(d,f,k,c,e,T,g,ha,h,l,q,r,n,x){var Y=g-d,V=ha-f,t=Y*Y+V*V;if(t>4*z&&n--){var Aa=c+l,p=e+q,G=T+r,J=Math.sqrt(Aa*Aa+p*p+G*G),v=Math.asin(G/=J),
N=1E-6>ea(ea(G)-1)||1E-6>ea(k-h)?(k+h)/2:Math.atan2(p,Aa),u=b(N,v),v=u[0],u=u[1],S=v-d,Cb=u-f,pb=V*S-Y*Cb;if(pb*pb/t>z||.3<ea((Y*S+V*Cb)/t-.5)||c*l+e*q+T*r<a)m(d,f,k,c,e,T,v,u,N,Aa/=J,p/=J,G,n,x),x.point(v,u),m(v,u,N,Aa,p,G,g,ha,h,l,q,r,n,x)}}var z=.5,a=Math.cos(30*ca),c=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(z);c=0<(z=b*b)&&16;return d};return d}function Sg(b){var d=Ee(function(d,k){return b([d*sa,k*sa])});return function(b){return Ge(d(b))}}function He(b){this.stream=b}
function Fe(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function bb(b){return id(function(){return b})()}function id(b){function d(b){b=c(b[0]*ca,b[1]*ca);return[b[0]*g+p,G-b[1]*g]}function f(b){return(b=c.invert((b[0]-p)/g,(G-b[1])/g))&&[b[0]*sa,b[1]*sa]}function k(){c=te(a=kd(n,x,t),z);var b=z(q,r);p=h-b[0]*g;G=l+b[1]*g;return m()}function m(){S&&
(S.valid=!1,S=null);return d}var z,a,c,e=Ee(function(b,d){b=z(b,d);return[b[0]*g+p,G-b[1]*g]}),g=150,h=480,l=250,q=0,r=0,n=0,x=0,t=0,p,G,v=Ie,J=A,N=null,u=null,S;d.stream=function(b){S&&(S.valid=!1);S=Ge(v(a,e(J(b))));S.valid=!0;return S};d.clipAngle=function(b){if(!arguments.length)return N;v=null==b?(N=b,Ie):Ng((N=+b)*ca);return m()};d.clipExtent=function(b){if(!arguments.length)return u;J=(u=b)?ze(b[0][0],b[0][1],b[1][0],b[1][1]):A;return m()};d.scale=function(b){if(!arguments.length)return g;
g=+b;return k()};d.translate=function(b){if(!arguments.length)return[h,l];h=+b[0];l=+b[1];return k()};d.center=function(b){if(!arguments.length)return[q*sa,r*sa];q=b[0]%360*ca;r=b[1]%360*ca;return k()};d.rotate=function(b){if(!arguments.length)return[n*sa,x*sa,t*sa];n=b[0]%360*ca;x=b[1]%360*ca;t=2<b.length?b[2]%360*ca:0;return k()};y.rebind(d,e,"precision");return function(){z=b.apply(this,arguments);d.invert=z.invert&&f;return k()}}function Ge(b){return Fe(b,function(d,f){b.point(d*ca,f*ca)})}function Hb(b,
d){return[b,d]}function Je(b,d){return[b>ba?b-La:b<-ba?b+La:b,d]}function kd(b,d,f){return b?d||f?te(Ke(b),Le(d,f)):Ke(b):d||f?Le(d,f):Je}function Me(b){return function(d,f){return d+=b,[d>ba?d-La:d<-ba?d+La:d,f]}}function Ke(b){var d=Me(b);d.invert=Me(-b);return d}function Le(b,d){function f(b,d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),T=e*k+c*m;return[Math.atan2(f*z-T*a,c*k-e*m),na(T*z+f*a)]}var k=Math.cos(b),m=Math.sin(b),z=Math.cos(d),a=Math.sin(d);f.invert=function(b,
d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),T=e*z-f*a;return[Math.atan2(f*z+e*a,c*k+T*m),na(T*k-c*m)]};return f}function gd(b,d){var f=Math.cos(b),k=Math.sin(b);return function(m,z,a,c){var e=a*d;if(null!=m){if(m=Ne(f,m),z=Ne(f,z),0<a?m<z:m>z)m+=a*La}else m=b+a*La,z=b-.5*e;for(var T;0<a?m>z:m<z;m-=e)c.point((T=jc([f,-k*Math.cos(m),-k*Math.sin(m)]))[0],T[1])}}function Ne(b,d){var f=hb(d);f[0]-=b;ic(f);var k=xa(-f[1]);return((0>-f[2]?-k:k)+2*Math.PI-1E-6)%(2*Math.PI)}function Oe(b,
d,f){var k=y.range(b,d-1E-6,f).concat(d);return function(b){return k.map(function(d){return[b,d]})}}function Pe(b,d,f){var k=y.range(b,d-1E-6,f).concat(d);return function(b){return k.map(function(d){return[d,b]})}}function ld(b){return b.source}function md(b){return b.target}function Tg(b,d,f,k){var m=Math.cos(d),z=Math.sin(d),a=Math.cos(k),c=Math.sin(k),e=m*Math.cos(b),g=m*Math.sin(b),h=a*Math.cos(f),l=a*Math.sin(f),q=2*Math.asin(Math.sqrt(Ja(k-d)+m*a*Ja(f-b))),r=1/Math.sin(q);f=q?function(b){var d=
Math.sin(b*=q)*r;b=Math.sin(q-b)*r;var f=b*e+d*h,k=b*g+d*l;return[Math.atan2(k,f)*sa,Math.atan2(b*z+d*c,Math.sqrt(f*f+k*k))*sa]}:function(){return[b*sa,d*sa]};f.distance=q;return f}function Ib(b,d){function f(d,f){var k=Math.cos(f),m=b(Math.cos(d)*k);return[m*k*Math.sin(d),m*Math.sin(f)]}f.invert=function(b,f){var k=Math.sqrt(b*b+f*f),m=d(k),a=Math.sin(m);return[Math.atan2(b*a,k*Math.cos(m)),Math.asin(k&&f*a/k)]};return f}function Qe(b,d){function f(b,d){0<a?d<-va+1E-6&&(d=-va+1E-6):d>va-1E-6&&(d=
va-1E-6);var f=a/Math.pow(Math.tan(ba/4+d/2),m);return[f*Math.sin(m*b),a-f*Math.cos(m*b)]}var k=Math.cos(b),m=b===d?Math.sin(b):Math.log(k/Math.cos(d))/Math.log(Math.tan(ba/4+d/2)/Math.tan(ba/4+b/2)),a=k*Math.pow(Math.tan(ba/4+b/2),m)/m;if(!m)return nc;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,2*Math.atan(Math.pow(a/((0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)),1/m))-va]};return f}function Re(b,d){function f(b,d){var f=a-d;return[f*Math.sin(m*b),a-f*Math.cos(m*b)]}var k=Math.cos(b),m=b===
d?Math.sin(b):(k-Math.cos(d))/(d-b),a=k/m+b;if(1E-6>ea(m))return Hb;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,a-(0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)]};return f}function nc(b,d){return[b,Math.log(Math.tan(ba/4+d/2))]}function Se(b){var d=bb(b),f=d.scale,k=d.translate,m=d.clipExtent,a;d.scale=function(){var b=f.apply(d,arguments);return b===d?a?d.clipExtent(null):d:b};d.translate=function(){var b=k.apply(d,arguments);return b===d?a?d.clipExtent(null):d:b};d.clipExtent=function(b){var z=
m.apply(d,arguments);if(z===d){if(a=null==b){var c=ba*f(),e=k();m([[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]])}}else a&&(z=null);return z};return d.clipExtent(null)}function nd(b,d){return[Math.log(Math.tan(ba/4+d/2)),-b]}function ub(b){return b[0]}function Jb(b){return b[1]}function Te(b){for(var d=b.length,f=[0,1],k=2,m=2;m<d;m++){for(;1<k&&0>=qa(b[f[k-2]],b[f[k-1]],b[m]);)--k;f[k++]=m}return f.slice(0,k)}function Ug(b,d){return b[0]-d[0]||b[1]-d[1]}function od(b,d,f){return(f[0]-d[0])*(b[1]-d[1])<(f[1]-
d[1])*(b[0]-d[0])}function pd(b,d,f,k){var m=b[0],a=f[0],c=d[0]-m,e=k[0]-a;b=b[1];f=f[1];d=d[1]-b;k=k[1]-f;a=(e*(b-f)-k*(m-a))/(k*c-e*d);return[m+a*c,b+a*d]}function Ue(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Vg(){oc(this);this.edge=this.site=this.circle=null}function Ve(b){var d=We.pop()||new Vg;d.site=b;return d}function qd(b){vb(b);wb.remove(b);We.push(b);oc(b)}function Xe(b,d){var f=b.site,k=f.x,m=f.y,a=m-d;if(!a)return k;var c=b.P;if(!c)return-Infinity;var f=c.site,
c=f.x,f=f.y,e=f-d;if(!e)return c;var g=c-k,V=1/a-1/e,h=g/e;return V?(-h+Math.sqrt(h*h-2*V*(g*g/(-2*e)-f+e/2+m-a/2)))/V+k:(k+c)/2}function Ye(b){this.site=b;this.edges=[]}function Ze(b,d){return d.angle-b.angle}function Wg(){oc(this);this.x=this.y=this.arc=this.site=this.cy=null}function xb(b){var d=b.P,f=b.N;if(d&&f){var k=d.site,d=b.site,m=f.site;if(k!==m){var f=d.x,a=d.y,c=k.x-f,e=k.y-a,k=m.x-f,m=m.y-a,g=2*(c*m-e*k);if(!(-1E-12<=g)){var h=c*c+e*e,q=k*k+m*m,e=(m*h-e*q)/g,c=(c*q-k*h)/g,m=c+a,a=$e.pop()||
new Wg;a.arc=b;a.site=d;a.x=e+f;a.y=m+Math.sqrt(e*e+c*c);a.cy=m;b.circle=a;b=null;for(d=Kb._;d;)if(a.y<d.y||a.y===d.y&&a.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Kb.insert(b,a);b||(rd=a)}}}}function vb(b){var d=b.circle;d&&(d.P||(rd=d.N),Kb.remove(d),$e.push(d),oc(d),b.circle=null)}function Xg(b,d){var f=b.b;if(f)return!0;var k=b.a,f=d[0][0],m=d[1][0],a=d[0][1],c=d[1][1],e=b.l,g=b.r,h=e.x,e=e.y,q=g.x,g=g.y,l=(h+q)/2;if(g===e){if(l<f||l>=m)return;if(h>q){if(!k)k={x:l,y:a};
else if(k.y>=c)return;f={x:l,y:c}}else{if(!k)k={x:l,y:c};else if(k.y<a)return;f={x:l,y:a}}}else{var r=(h-q)/(g-e);l=(e+g)/2-r*l;if(-1>r||1<r)if(h>q){if(!k)k={x:(a-l)/r,y:a};else if(k.y>=c)return;f={x:(c-l)/r,y:c}}else{if(!k)k={x:(c-l)/r,y:c};else if(k.y<a)return;f={x:(a-l)/r,y:a}}else if(e<g){if(!k)k={x:f,y:r*f+l};else if(k.x>=m)return;f={x:m,y:r*m+l}}else{if(!k)k={x:m,y:r*m+l};else if(k.x<f)return;f={x:f,y:r*f+l}}}b.a=k;b.b=f;return!0}function af(b,d){this.l=b;this.r=d;this.a=this.b=null}function Lb(b,
d,f,k){var m=new af(b,d);yb.push(m);f&&pc(m,b,d,f);k&&pc(m,d,b,k);lb[b.i].edges.push(new qc(m,b,d));lb[d.i].edges.push(new qc(m,d,b));return m}function Yg(b,d,f){b=new af(b,null);b.a=d;b.b=f;yb.push(b);return b}function pc(b,d,f,k){b.a||b.b?b.l===f?b.b=k:b.a=k:(b.a=k,b.l=d,b.r=f)}function qc(b,d,f){var k=b.a,m=b.b;this.edge=b;this.site=d;this.angle=f?Math.atan2(f.y-d.y,f.x-d.x):b.l===d?Math.atan2(m.x-k.x,k.y-m.y):Math.atan2(k.x-m.x,m.y-k.y)}function sd(){this._=null}function oc(b){b.U=b.C=b.L=b.R=
b.P=b.N=null}function Mb(b,d){var f=d.R,k=d.U;k?k.L===d?k.L=f:k.R=f:b._=f;f.U=k;d.U=f;d.R=f.L;d.R&&(d.R.U=d);f.L=d}function Nb(b,d){var f=d.L,k=d.U;k?k.L===d?k.L=f:k.R=f:b._=f;f.U=k;d.U=f;d.L=f.R;d.L&&(d.L.U=d);f.R=d}function bf(b){for(;b.L;)b=b.L;return b}function td(b,d){var f=b.sort(Zg).pop(),k;yb=[];lb=Array(b.length);wb=new sd;for(Kb=new sd;;){var m=rd;if(f&&(!m||f.y<m.y||f.y===m.y&&f.x<m.x)){if(f.x!==k||f.y!==a){lb[f.i]=new Ye(f);var a=k=void 0;m=f;for(var c=m.x,e=m.y,g=wb._;g;){var h=Xe(g,
e)-c;if(1E-6<h)g=g.L;else{var l=g;var q=e;var r=l.N;r?q=Xe(r,q):(l=l.site,q=l.y===q?l.x:Infinity);q=c-q;if(1E-6<q){if(!g.R){a=g;break}g=g.R}else{-1E-6<h?(a=g.P,k=g):-1E-6<q?(a=g,k=g.N):a=k=g;break}}}h=Ve(m);wb.insert(a,h);if(a||k)if(a===k)vb(a),k=Ve(a.site),wb.insert(h,k),h.edge=k.edge=Lb(a.site,h.site),xb(a),xb(k);else if(k){vb(a);vb(k);c=a.site;g=c.x;q=c.y;var l=m.x-g,r=m.y-q,e=k.site,n=e.x-g,x=e.y-q,t=2*(l*x-r*n),p=l*l+r*r,G=n*n+x*x,g={x:(x*p-r*G)/t+g,y:(l*G-n*p)/t+q};pc(k.edge,c,e,g);h.edge=Lb(c,
m,null,g);k.edge=Lb(m,e,null,g);xb(a);xb(k)}else h.edge=Lb(a.site,h.site);k=f.x;a=f.y}f=b.pop()}else if(m){e=m.arc;m=e.circle;c=m.x;g=m.cy;m={x:c,y:g};l=e.P;q=e.N;h=[e];qd(e);for(e=l;e.circle&&1E-6>ea(c-e.circle.x)&&1E-6>ea(g-e.circle.cy);)l=e.P,h.unshift(e),qd(e),e=l;h.unshift(e);vb(e);for(l=q;l.circle&&1E-6>ea(c-l.circle.x)&&1E-6>ea(g-l.circle.cy);)q=l.N,h.push(l),qd(l),l=q;h.push(l);vb(l);g=h.length;for(c=1;c<g;++c)l=h[c],e=h[c-1],pc(l.edge,e.site,l.site,m);e=h[0];l=h[g-1];l.edge=Lb(e.site,l.site,
null,m);xb(e);xb(l)}else break}if(d){f=yb;k=ye(d[0][0],d[0][1],d[1][0],d[1][1]);for(a=f.length;a--;)if(m=f[a],!Xg(m,d)||!k(m)||1E-6>ea(m.a.x-m.b.x)&&1E-6>ea(m.a.y-m.b.y))m.a=m.b=null,f.splice(a,1);f=d[0][0];k=d[1][0];a=d[0][1];m=d[1][1];g=lb;for(q=g.length;q--;)if((l=g[q])&&l.prepare())for(n=l.edges,x=n.length,r=0;r<x;)if(t=n[r].end(),c=t.x,e=t.y,p=n[++r%x].start(),h=p.x,p=p.y,1E-6<ea(c-h)||1E-6<ea(e-p))n.splice(r,0,new qc(Yg(l.site,t,1E-6>ea(c-f)&&1E-6<m-e?{x:f,y:1E-6>ea(h-f)?p:m}:1E-6>ea(e-m)&&
1E-6<k-c?{x:1E-6>ea(p-m)?h:k,y:m}:1E-6>ea(c-k)&&1E-6<e-a?{x:k,y:1E-6>ea(h-k)?p:a}:1E-6>ea(e-a)&&1E-6<c-f?{x:1E-6>ea(p-a)?h:f,y:a}:null),l.site,null)),++x}f={cells:lb,edges:yb};wb=Kb=yb=lb=null;return f}function Zg(b,d){return d.y-b.y||d.x-b.x}function $g(b){return b.x}function ah(b){return b.y}function cf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ob(b,d,f,k,m,a){if(!b(d,f,k,m,a)){var c=.5*(f+m),z=.5*(k+a);d=d.nodes;d[0]&&Ob(b,d[0],f,k,c,z);d[1]&&Ob(b,d[1],c,k,m,z);d[2]&&Ob(b,d[2],
f,z,c,a);d[3]&&Ob(b,d[3],c,z,m,a)}}function bh(b,d,f,k,m,a,c){var z=Infinity,e;(function Aa(b,g,T,h,l){var Y;if(!(g>a||T>c||h<k||l<m)){if(Y=b.point){var q=d-b.x,r=f-b.y,q=q*q+r*r;q<z&&(q=Math.sqrt(z=q),k=d-q,m=f-q,a=d+q,c=f+q,e=Y)}Y=b.nodes;for(var q=.5*(g+h),r=.5*(T+l),ha=(f>=r)<<1|d>=q,n=ha+4;ha<n;++ha)if(b=Y[ha&3])switch(ha&3){case 0:Aa(b,g,T,q,r);break;case 1:Aa(b,q,T,h,r);break;case 2:Aa(b,g,r,q,l);break;case 3:Aa(b,q,r,h,l)}}})(b,k,m,a,c);return e}function ud(b,d){b=y.rgb(b);d=y.rgb(d);var f=
b.r,k=b.g,m=b.b,a=d.r-f,c=d.g-k,e=d.b-m;return function(b){return"#"+qb(Math.round(f+a*b))+qb(Math.round(k+c*b))+qb(Math.round(m+e*b))}}function df(b,d){var f={},k={},m;for(m in b)m in d?f[m]=mb(b[m],d[m]):k[m]=b[m];for(m in d)m in b||(k[m]=d[m]);return function(b){for(m in f)k[m]=f[m](b);return k}}function Wa(b,d){b=+b;d=+d;return function(f){return b*(1-f)+d*f}}function ef(b,d){var f=vd.lastIndex=wd.lastIndex=0,k,m,a,c=-1,e=[],g=[];b+="";for(d+="";(k=vd.exec(b))&&(m=wd.exec(d));)(a=m.index)>f&&
(a=d.slice(f,a),e[c]?e[c]+=a:e[++c]=a),(k=k[0])===(m=m[0])?e[c]?e[c]+=m:e[++c]=m:(e[++c]=null,g.push({i:c,x:Wa(k,m)})),f=wd.lastIndex;f<d.length&&(a=d.slice(f),e[c]?e[c]+=a:e[++c]=a);return 2>e.length?g[0]?(d=g[0].x,function(b){return d(b)+""}):function(){return d}:(d=g.length,function(b){for(var f=0,k;f<d;++f)e[(k=g[f]).i]=k.x(b);return e.join("")})}function mb(b,d){for(var f=y.interpolators.length,k;0<=--f&&!(k=y.interpolators[f](b,d)););return k}function rc(b,d){var f=[],k=[],m=b.length,a=d.length,
c=Math.min(b.length,d.length),e;for(e=0;e<c;++e)f.push(mb(b[e],d[e]));for(;e<m;++e)k[e]=b[e];for(;e<a;++e)k[e]=d[e];return function(b){for(e=0;e<c;++e)k[e]=f[e](b);return k}}function ch(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function ff(b){return function(d){return 1-b(1-d)}}function gf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function dh(b){return b*b}function eh(b){return b*b*b}function fh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,f=d*b;return 4*(.5>b?f:3*(b-d)+f-
.75)}function gh(b){return 1-Math.cos(b*va)}function hh(b){return Math.pow(2,10*(b-1))}function ih(b){return 1-Math.sqrt(1-b*b)}function jh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function hf(b,d){d-=b;return function(f){return Math.round(b+d*f)}}function jf(b){var d=[b.a,b.b],f=[b.c,b.d],k=kf(d),m=d[0]*f[0]+d[1]*f[1],a=-m;f[0]+=a*d[0];f[1]+=a*d[1];a=kf(f)||0;d[0]*f[1]<f[0]*d[1]&&(d[0]*=-1,d[1]*=-1,
k*=-1,m*=-1);this.rotate=(k?Math.atan2(d[1],d[0]):Math.atan2(-f[0],f[1]))*sa;this.translate=[b.e,b.f];this.scale=[k,a];this.skew=a?Math.atan2(m,a)*sa:0}function kf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function zb(b){return b.length?b.pop()+",":""}function kh(b,d,f,k){b[0]!==d[0]||b[1]!==d[1]?(f=f.push("translate(",null,",",null,")"),k.push({i:f-4,x:Wa(b[0],d[0])},{i:f-2,x:Wa(b[1],d[1])})):(d[0]||d[1])&&f.push("translate("+d+")")}function lh(b,d,f,k){b!==d?(180<b-d?
d+=360:180<d-b&&(b+=360),k.push({i:f.push(zb(f)+"rotate(",null,")")-2,x:Wa(b,d)})):d&&f.push(zb(f)+"rotate("+d+")")}function mh(b,d,f,k){b!==d?k.push({i:f.push(zb(f)+"skewX(",null,")")-2,x:Wa(b,d)}):d&&f.push(zb(f)+"skewX("+d+")")}function nh(b,d,f,k){b[0]!==d[0]||b[1]!==d[1]?(f=f.push(zb(f)+"scale(",null,",",null,")"),k.push({i:f-4,x:Wa(b[0],d[0])},{i:f-2,x:Wa(b[1],d[1])})):1===d[0]&&1===d[1]||f.push(zb(f)+"scale("+d+")")}function lf(b,d){var f=[],k=[];b=y.transform(b);d=y.transform(d);kh(b.translate,
d.translate,f,k);lh(b.rotate,d.rotate,f,k);mh(b.skew,d.skew,f,k);nh(b.scale,d.scale,f,k);b=d=null;return function(b){for(var d=-1,m=k.length,a;++d<m;)f[(a=k[d]).i]=a.x(b);return f.join("")}}function oh(b,d){d=(d-=b=+b)||1/d;return function(f){return(f-b)/d}}function ph(b,d){d=(d-=b=+b)||1/d;return function(f){return Math.max(0,Math.min(1,(f-b)/d))}}function qh(b){var d=b.source;b=b.target;var f=b;if(d===f)var k=d;else{k=mf(d);for(var f=mf(f),m=k.pop(),a=f.pop(),c=null;m===a;)c=m,m=k.pop(),a=f.pop();
k=c}for(f=[d];d!==k;)d=d.parent,f.push(d);for(d=f.length;b!==k;)f.splice(d,0,b),b=b.parent;return f}function mf(b){for(var d=[],f=b.parent;null!=f;)d.push(b),b=f,f=f.parent;d.push(b);return d}function rh(b){b.fixed|=2}function sh(b){b.fixed&=-7}function th(b){b.fixed|=4;b.px=b.x;b.py=b.y}function uh(b){b.fixed&=-5}function nf(b,d,f){var k=0,m=0;b.charge=0;if(!b.leaf)for(var a=b.nodes,c=a.length,e=-1,g;++e<c;)g=a[e],null!=g&&(nf(g,d,f),b.charge+=g.charge,k+=g.charge*g.cx,m+=g.charge*g.cy);b.point&&
(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=f[b.point.index],b.charge+=b.pointCharge=d,k+=d*b.point.x,m+=d*b.point.y);b.cx=k/b.charge;b.cy=m/b.charge}function Pb(b,d){y.rebind(b,d,"sort","children","value");b.nodes=b;b.links=vh;return b}function Qb(b,d){for(var f,k,m=[b];null!=(b=m.pop());)if(d(b),(f=b.children)&&(k=f.length))for(;0<=--k;)m.push(f[k])}function Sa(b,d){for(var f,k,m=[b],a=[];null!=(b=m.pop());)if(a.push(b),(f=b.children)&&(k=f.length))for(var c=-1;++c<k;)m.push(f[c]);
for(;null!=(b=a.pop());)d(b)}function wh(b){return b.children}function xh(b){return b.value}function yh(b,d){return d.value-b.value}function vh(b){return y.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function zh(b){return b.x}function Ah(b){return b.y}function Bh(b,d,f){b.y0=d;b.y=f}function xd(b){return y.range(b.length)}function yd(b){var d=-1;b=b[0].length;for(var f=[];++d<b;)f[d]=0;return f}function Ch(b){for(var d=1,f=0,k=b[0][1],m,a=b.length;d<
a;++d)(m=b[d][1])>k&&(f=d,k=m);return f}function Dh(b){return b.reduce(Eh,0)}function Eh(b,d){return b+d[1]}function Fh(b,d){return of(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function of(b,d){for(var f=-1,k=+b[0],m=(b[1]-k)/d,a=[];++f<=d;)a[f]=m*f+k;return a}function Gh(b){return[y.min(b),y.max(b)]}function Hh(b,d){return b.value-d.value}function zd(b,d){var f=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=f;f._pack_prev=d}function pf(b,d){b._pack_next=d;d._pack_prev=b}function qf(b,
d){var f=d.x-b.x,k=d.y-b.y,m=b.r+d.r;return.999*m*m>f*f+k*k}function rf(b){function d(b){k=Math.min(b.x-b.r,k);m=Math.max(b.x+b.r,m);a=Math.min(b.y-b.r,a);c=Math.max(b.y+b.r,c)}if((f=b.children)&&(l=f.length)){var f,k=Infinity,m=-Infinity,a=Infinity,c=-Infinity,e,g,h,l;f.forEach(Ih);var q=f[0];q.x=-q.r;q.y=0;d(q);if(1<l){var r=f[1];r.x=r.r;r.y=0;d(r);if(2<l){var n=f[2];sf(q,r,n);d(n);zd(q,n);q._pack_prev=n;zd(n,r);r=q._pack_next;for(e=3;e<l;e++){sf(q,r,n=f[e]);var x=0,t=1,p=1;for(g=r._pack_next;g!==
r;g=g._pack_next,t++)if(qf(g,n)){x=1;break}if(1==x)for(h=q._pack_prev;h!==g._pack_prev&&!qf(h,n);h=h._pack_prev,p++);x?(t<p||t==p&&r.r<q.r?pf(q,r=g):pf(q=h,r),e--):(zd(q,n),r=n,d(n))}}}q=(k+m)/2;r=(a+c)/2;for(e=g=0;e<l;e++)n=f[e],n.x-=q,n.y-=r,g=Math.max(g,n.r+Math.sqrt(n.x*n.x+n.y*n.y));b.r=g;f.forEach(Jh)}}function Ih(b){b._pack_next=b._pack_prev=b}function Jh(b){delete b._pack_next;delete b._pack_prev}function tf(b,d,f,k){var m=b.children;b.x=d+=k*b.x;b.y=f+=k*b.y;b.r*=k;if(m){b=-1;for(var a=m.length;++b<
a;)tf(m[b],d,f,k)}}function sf(b,d,f){var k=b.r+f.r,m=d.x-b.x,a=d.y-b.y;if(k&&(m||a)){var c=d.r+f.r,e=m*m+a*a,c=c*c,k=k*k;d=.5+(k-c)/(2*e);c=Math.sqrt(Math.max(0,2*c*(k+e)-(k-=e)*k-c*c))/(2*e);f.x=b.x+d*m+c*a;f.y=b.y+d*a-c*m}else f.x=b.x+k,f.y=b.y}function uf(b,d){return b.parent==d.parent?1:2}function Ad(b){var d=b.children;return d.length?d[0]:b.t}function Bd(b){var d=b.children,f;return(f=d.length)?d[f-1]:b.t}function Kh(b){return 1+y.max(b,function(b){return b.y})}function Lh(b){return b.reduce(function(b,
f){return b+f.x},0)/b.length}function vf(b){var d=b.children;return d&&d.length?vf(d[0]):b}function wf(b){var d=b.children,f;return d&&(f=d.length)?wf(d[f-1]):b}function Cd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function xf(b,d){var f=b.x+d[3],k=b.y+d[0],m=b.dx-d[1]-d[3],a=b.dy-d[0]-d[2];0>m&&(f+=m/2,m=0);0>a&&(k+=a/2,a=0);return{x:f,y:k,dx:m,dy:a}}function Ab(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function sc(b){return b.rangeExtent?b.rangeExtent():Ab(b.range())}function Mh(b,d,f,k){var m=
f(b[0],b[1]),a=k(d[0],d[1]);return function(b){return a(m(b))}}function tc(b,d){var f=0,k=b.length-1,m=b[f],a=b[k];if(a<m){var c=f;f=k;k=c;c=m;m=a;a=c}b[f]=d.floor(m);b[k]=d.ceil(a);return b}function yf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Nh}function Oh(b,d,f,k){var m=[],a=[],c=0,e=Math.min(b.length,d.length)-1;b[e]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++c<=e;)m.push(f(b[c-1],b[c])),a.push(k(d[c-1],d[c]));return function(d){var f=
y.bisect(b,d,1,e)-1;return a[f](m[f](d))}}function zf(b,d,f,k){function m(){var m=2<Math.min(b.length,d.length)?Oh:Mh,z=k?ph:oh;c=m(b,d,z,f);e=m(d,b,z,mb);return a}function a(b){return c(b)}var c,e;a.invert=function(b){return e(b)};a.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return m()};a.range=function(b){if(!arguments.length)return d;d=b;return m()};a.rangeRound=function(b){return a.range(b).interpolate(hf)};a.clamp=function(b){if(!arguments.length)return k;k=b;return m()};
a.interpolate=function(b){if(!arguments.length)return f;f=b;return m()};a.ticks=function(d){return y.range.apply(y,cb(b,d))};a.tickFormat=function(d,f){return Dd(b,d,f)};a.nice=function(d){Af(b,d);return m()};a.copy=function(){return zf(b,d,f,k)};return m()}function Ed(b,d){return y.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Af(b,d){tc(b,yf(cb(b,d)[2]));tc(b,yf(cb(b,d)[2]));return b}function cb(b,d){null==d&&(d=10);var f=Ab(b),k=f[1]-f[0],m=Math.pow(10,Math.floor(Math.log(k/d)/
Math.LN10)),k=d/k*m;.15>=k?m*=10:.35>=k?m*=5:.75>=k&&(m*=2);f[0]=Math.ceil(f[0]/m)*m;f[1]=Math.floor(f[1]/m)*m+.5*m;f[2]=m;return f}function Dd(b,d,f){b=cb(b,d);if(f){d=je.exec(f);d.shift();if("s"===d[8]){var k=y.formatPrefix(Math.max(ea(b[0]),ea(b[1])));d[7]||(d[7]="."+uc(k.scale(b[2])));d[8]="f";f=y.format(d.join(""));return function(b){return f(k.scale(b))+k.symbol}}d[7]||(d[7]="."+Ph(d[8],b));f=d.join("")}else f=",."+uc(b[2])+"f";return y.format(f)}function uc(b){return-Math.floor(Math.log(b)/
Math.LN10+.01)}function Ph(b,d){var f=uc(d[2]);return b in Qh?Math.abs(f-uc(Math.max(ea(d[0]),ea(d[1]))))+ +("e"!==b):f-2*("%"===b)}function Bf(b,d,f,k){function m(b){return(f?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function a(b){return f?Math.pow(d,b):-Math.pow(d,-b)}function c(d){return b(m(d))}c.invert=function(d){return a(b.invert(d))};c.domain=function(d){if(!arguments.length)return k;f=0<=d[0];b.domain((k=d.map(Number)).map(m));return c};c.base=function(f){if(!arguments.length)return d;
d=+f;b.domain(k.map(m));return c};c.nice=function(){var d=tc(k.map(m),f?Math:Rh);b.domain(d);k=d.map(a);return c};c.ticks=function(){var b=Ab(k),c=[],e=b[0],b=b[1],z=Math.floor(m(e)),g=Math.ceil(m(b)),h=d%1?2:d;if(isFinite(g-z)){if(f){for(;z<g;z++)for(var l=1;l<h;l++)c.push(a(z)*l);c.push(a(z))}else for(c.push(a(z));z++<g;)for(l=h-1;0<l;l--)c.push(a(z)*l);for(z=0;c[z]<e;z++);for(g=c.length;c[g-1]>b;g--);c=c.slice(z,g)}return c};c.tickFormat=function(b,f){if(!arguments.length)return Cf;2>arguments.length?
f=Cf:"function"!==typeof f&&(f=y.format(f));var k=Math.max(1,d*b/c.ticks().length);return function(b){var c=b/a(Math.round(m(b)));c*d<d-.5&&(c*=d);return c<=k?f(b):""}};c.copy=function(){return Bf(b.copy(),d,f,k)};return Ed(c,b)}function Df(b,d,f){function k(d){return b(m(d))}var m=vc(d),a=vc(1/d);k.invert=function(d){return a(b.invert(d))};k.domain=function(d){if(!arguments.length)return f;b.domain((f=d.map(Number)).map(m));return k};k.ticks=function(b){return y.range.apply(y,cb(f,b))};k.tickFormat=
function(b,d){return Dd(f,b,d)};k.nice=function(b){return k.domain(Af(f,b))};k.exponent=function(c){if(!arguments.length)return d;m=vc(d=c);a=vc(1/d);b.domain(f.map(m));return k};k.copy=function(){return Df(b.copy(),d,f)};return Ed(k,b)}function vc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ef(b,d){function f(f){return c[((a.get(f)||("range"===d.t?a.set(f,b.push(f)):NaN))-1)%c.length]}function k(d,f){return y.range(b.length).map(function(b){return d+f*b})}var a,c,e;f.domain=
function(k){if(!arguments.length)return b;b=[];a=new p;for(var m=-1,c=k.length,e;++m<c;)a.has(e=k[m])||a.set(e,b.push(e));return f[d.t].apply(f,d.a)};f.range=function(b){if(!arguments.length)return c;c=b;e=0;d={t:"range",a:arguments};return f};f.rangePoints=function(a,m){2>arguments.length&&(m=0);var z=a[0],g=a[1],g=2>b.length?(z=(z+g)/2,0):(g-z)/(b.length-1+m);c=k(z+g*m/2,g);e=0;d={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(a,m){2>arguments.length&&(m=0);var z=a[0],g=a[1],
h=2>b.length?(z=g=Math.round((z+g)/2),0):(g-z)/(b.length-1+m)|0;c=k(z+Math.round(h*m/2+(g-z-(b.length-1+m)*h)/2),h);e=0;d={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(a,m,z){2>arguments.length&&(m=0);3>arguments.length&&(z=m);var g=a[1]<a[0],h=a[g-0],l=(a[1-g]-h)/(b.length-m+2*z);c=k(h+l*z,l);g&&c.reverse();e=l*(1-m);d={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(a,m,z){2>arguments.length&&(m=0);3>arguments.length&&(z=m);var g=a[1]<a[0],h=a[g-0],l=a[1-g],
q=Math.floor((l-h)/(b.length-m+2*z));c=k(h+Math.round((l-h-(b.length-m)*q)/2),q);g&&c.reverse();e=Math.round(q*(1-m));d={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return e};f.rangeExtent=function(){return Ab(d.a[0])};f.copy=function(){return Ef(b,d)};return f.domain(b)}function Ff(b,d){function f(){var f=0,a=d.length;for(m=[];++f<a;)m[f-1]=y.quantile(b,f/a);return k}function k(b){if(!isNaN(b=+b))return d[y.bisect(m,b)]}var m;k.domain=function(d){if(!arguments.length)return b;
b=d.map(e).filter(g).sort(a);return f()};k.range=function(b){if(!arguments.length)return d;d=b;return f()};k.quantiles=function(){return m};k.invertExtent=function(f){f=d.indexOf(f);return 0>f?[NaN,NaN]:[0<f?m[f-1]:b[0],f<m.length?m[f]:b[b.length-1]]};k.copy=function(){return Ff(b,d)};return f()}function Gf(b,d,f){function k(d){return f[Math.max(0,Math.min(e,Math.floor(c*(d-b))))]}function a(){c=f.length/(d-b);e=f.length-1;return k}var c,e;k.domain=function(f){if(!arguments.length)return[b,d];b=+f[0];
d=+f[f.length-1];return a()};k.range=function(b){if(!arguments.length)return f;f=b;return a()};k.invertExtent=function(d){d=f.indexOf(d);d=0>d?NaN:d/c+b;return[d,d+1/c]};k.copy=function(){return Gf(b,d,f)};return a()}function Hf(b,d){function f(f){if(f<=f)return d[y.bisect(b,f)]}f.domain=function(d){if(!arguments.length)return b;b=d;return f};f.range=function(b){if(!arguments.length)return d;d=b;return f};f.invertExtent=function(f){f=d.indexOf(f);return[b[f-1],b[f]]};f.copy=function(){return Hf(b,
d)};return f}function If(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(f){if(!arguments.length)return b;b=f.map(d);return d};d.ticks=function(d){return y.range.apply(y,cb(b,d))};d.tickFormat=function(d,k){return Dd(b,d,k)};d.copy=function(){return If(b)};return d}function Sh(){return 0}function Th(b){return b.innerRadius}function Uh(b){return b.outerRadius}function Jf(b){return b.startAngle}function Kf(b){return b.endAngle}function Vh(b){return b&&b.padAngle}function wc(b,d,f,k){return 0<
(b-f)*d-(d-k)*b?0:1}function xc(b,d,f,k,a){var m=b[0]-d[0],c=b[1]-d[1];a=(a?k:-k)/Math.sqrt(m*m+c*c);var c=a*c,m=-a*m,e=b[0]+c,g=b[1]+m,h=d[0]+c,l=d[1]+m;b=(e+h)/2;d=(g+l)/2;a=h-e;var q=l-g,r=a*a+q*q;k=f-k;var l=e*l-h*g,n=(0>q?-1:1)*Math.sqrt(Math.max(0,k*k*r-l*l)),e=(l*q-a*n)/r,g=(-l*a-q*n)/r,h=(l*q+a*n)/r;a=(-l*a+q*n)/r;q=e-b;r=g-d;b=h-b;d=a-d;q*q+r*r>b*b+d*d&&(e=h,g=a);return[[e-c,g-m],[e*f/k,g*f/k]]}function Lf(b){function d(d){function m(){e.push("M",c(b(z),g))}for(var e=[],z=[],h=-1,l=d.length,
q,r=pa(f),n=pa(k);++h<l;)a.call(this,q=d[h],h)?z.push([+r.call(this,q,h),+n.call(this,q,h)]):z.length&&(m(),z=[]);z.length&&m();return e.length?e.join(""):null}var f=ub,k=Jb,a=Gb,c=Pa,e=c.key,g=.7;d.x=function(b){if(!arguments.length)return f;f=b;return d};d.y=function(b){if(!arguments.length)return k;k=b;return d};d.defined=function(b){if(!arguments.length)return a;a=b;return d};d.interpolate=function(b){if(!arguments.length)return e;e="function"===typeof b?c=b:(c=Fd.get(b)||Pa).key;return d};d.tension=
function(b){if(!arguments.length)return g;g=b;return d};return d}function Pa(b){return 1<b.length?b.join("L"):b+"Z"}function Mf(b){return b.join("L")+"Z"}function Gd(b){for(var d=0,f=b.length,k=b[0],a=[k[0],",",k[1]];++d<f;)a.push("V",(k=b[d])[1],"H",k[0]);return a.join("")}function Hd(b){for(var d=0,f=b.length,k=b[0],a=[k[0],",",k[1]];++d<f;)a.push("H",(k=b[d])[0],"V",k[1]);return a.join("")}function yc(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Pa(b);var f=b.length!=d.length,
k="",a=b[0],c=b[1],e=d[0],g=e,h=1;f&&(k+="Q"+(c[0]-2*e[0]/3)+","+(c[1]-2*e[1]/3)+","+c[0]+","+c[1],a=b[1],h=2);if(1<d.length)for(g=d[1],c=b[h],h++,k+="C"+(a[0]+e[0])+","+(a[1]+e[1])+","+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1],a=2;a<d.length;a++,h++)c=b[h],g=d[a],k+="S"+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1];f&&(f=b[h],k+="Q"+(c[0]+2*g[0]/3)+","+(c[1]+2*g[1]/3)+","+f[0]+","+f[1]);return k}function Id(b,d){for(var f=[],k=(1-d)/2,a,c=b[0],e=b[1],g=1,h=b.length;++g<h;)a=c,c=e,e=b[g],f.push([k*
(e[0]-a[0]),k*(e[1]-a[1])]);return f}function Nf(b){if(3>b.length)return Pa(b);var d=1,f=b.length,k=b[0],a=k[0],c=k[1],e=[a,a,a,(k=b[1])[0]],g=[c,c,c,k[1]],a=[a,",",c,"L",Ma(db,e),",",Ma(db,g)];for(b.push(b[f-1]);++d<=f;)k=b[d],e.shift(),e.push(k[0]),g.shift(),g.push(k[1]),Jd(a,e,g);b.pop();a.push("L",k);return a.join("")}function Ma(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Jd(b,d,f){b.push("C",Ma(Of,d),",",Ma(Of,f),",",Ma(Pf,d),",",Ma(Pf,f),",",Ma(db,d),",",Ma(db,f))}function Kd(b,
d){return(d[1]-b[1])/(d[0]-b[0])}function Qf(b){for(var d,f=-1,k=b.length,a,c;++f<k;)d=b[f],a=d[0],c=d[1]-va,d[0]=a*Math.cos(c),d[1]=a*Math.sin(c);return b}function Rf(b){function d(d){function m(){z.push("M",g(b(n),r),q,l(b(h.reverse()),r),"Z")}for(var z=[],h=[],n=[],x=-1,T=d.length,t,V=pa(f),p=pa(a),G=f===k?function(){return Y}:pa(k),v=a===c?function(){return J}:pa(c),Y,J;++x<T;)e.call(this,t=d[x],x)?(h.push([Y=+V.call(this,t,x),J=+p.call(this,t,x)]),n.push([+G.call(this,t,x),+v.call(this,t,x)])):
h.length&&(m(),h=[],n=[]);h.length&&m();return z.length?z.join(""):null}var f=ub,k=ub,a=0,c=Jb,e=Gb,g=Pa,h=g.key,l=g,q="L",r=.7;d.x=function(b){if(!arguments.length)return k;f=k=b;return d};d.x0=function(b){if(!arguments.length)return f;f=b;return d};d.x1=function(b){if(!arguments.length)return k;k=b;return d};d.y=function(b){if(!arguments.length)return c;a=c=b;return d};d.y0=function(b){if(!arguments.length)return a;a=b;return d};d.y1=function(b){if(!arguments.length)return c;c=b;return d};d.defined=
function(b){if(!arguments.length)return e;e=b;return d};d.interpolate=function(b){if(!arguments.length)return h;h="function"===typeof b?g=b:(g=Fd.get(b)||Pa).key;l=g.reverse||g;q=g.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return r;r=b;return d};return d}function Wh(b){return b.radius}function Sf(b){return[b.x,b.y]}function Xh(b){return function(){var d=b.apply(this,arguments),f=d[0],d=d[1]-va;return[f*Math.cos(d),f*Math.sin(d)]}}function Yh(){return 64}function Zh(){return"circle"}
function Tf(b){b=Math.sqrt(b/ba);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Uf(b){return function(){var d,f,k;(d=this[b])&&(k=d[f=d.active])&&(k.timer.c=null,k.timer.t=NaN,--d.count?delete d[f]:delete this[b],d.active+=.5,k.event&&k.event.interrupt.call(this,this.__data__,k.index))}}function Rb(b,d,f){Tb(b,za);b.namespace=d;b.id=f;return b}function Ld(b,d,f,k){var a=b.id,c=b.namespace;return la(b,"function"===typeof f?function(b,m,e){b[c][a].tween.set(d,k(f.call(b,
b.__data__,m,e)))}:(f=k(f),function(b){b[c][a].tween.set(d,f)}))}function $h(b){null==b&&(b="");return function(){this.textContent=b}}function Md(b){return null==b?"__transition__":"__transition_"+b+"__"}function zc(b,d,f,k,a){function c(b){var d=h.delay;x.t=d+n;if(d<=b)return m(b-d);x.c=m}function m(f){var a=g.active,c=g[a];c&&(c.timer.c=null,c.timer.t=NaN,--g.count,delete g[a],c.event&&c.event.interrupt.call(b,b.__data__,c.index));for(var m in g)+m<k&&(a=g[m],a.timer.c=null,a.timer.t=NaN,--g.count,
delete g[m]);x.c=e;Yb(function(){x.c&&e(f||1)&&(x.c=null,x.t=NaN);return 1},0,n);g.active=k;h.event&&h.event.start.call(b,b.__data__,d);r=[];h.tween.forEach(function(f,k){(k=k.call(b,b.__data__,d))&&r.push(k)});q=h.ease;l=h.duration}function e(a){a/=l;for(var c=q(a),m=r.length;0<m;)r[--m].call(b,c);if(1<=a)return h.event&&h.event.end.call(b,b.__data__,d),--g.count?delete g[k]:delete b[f],1}var g=b[f]||(b[f]={active:0,count:0}),h=g[k],l,q,r;if(!h){var n=a.time;var x=Yb(c,0,n);h=g[k]={tween:new p,time:n,
timer:x,delay:a.delay,duration:a.duration,ease:a.ease,index:d};a=null;++g.count}}function ai(b,d,f){b.attr("transform",function(b){var k=d(b);return"translate("+(isFinite(k)?k:f(b))+",0)"})}function bi(b,d,f){b.attr("transform",function(b){var k=d(b);return"translate(0,"+(isFinite(k)?k:f(b))+")"})}function Nd(b){return b.toISOString()}function Od(b,d,f){function k(d){return b(d)}function a(b,f){var k=(b[1]-b[0])/f,a=y.bisect(Ac,k);return a==Ac.length?[d.year,cb(b.map(function(b){return b/31536E6}),
f)[2]]:a?d[k/Ac[a-1]<Ac[a]/k?a-1:a]:[ci,cb(b,f)[2]]}k.invert=function(d){return nb(b.invert(d))};k.domain=function(d){if(!arguments.length)return b.domain().map(nb);b.domain(d);return k};k.nice=function(b,d){function f(f){return!isNaN(f)&&!b.range(f,nb(+f+1),d).length}var c=k.domain(),m=Ab(c);if(m=null==b?a(m,10):"number"===typeof b&&a(m,b))b=m[0],d=m[1];return k.domain(tc(c,1<d?{floor:function(d){for(;f(d=b.floor(d));)d=nb(d-1);return d},ceil:function(d){for(;f(d=b.ceil(d));)d=nb(+d+1);return d}}:
b))};k.ticks=function(b,d){var f=Ab(k.domain()),c=null==b?a(f,10):"number"===typeof b?a(f,b):!b.range&&[{range:b},d];c&&(b=c[0],d=c[1]);return b.range(f[0],nb(+f[1]+1),1>d?1:d)};k.tickFormat=function(){return f};k.copy=function(){return Od(b.copy(),d,f)};return Ed(k,b)}function nb(b){return new Date(b)}function di(b){return JSON.parse(b.responseText)}function ei(b){var d=Fa.createRange();d.selectNode(Fa.body);return d.createContextualFragment(b.responseText)}var y={version:"3.5.17"},Vf=[].slice,Qa=
function(b){return Vf.call(b)},Fa=this.document;if(Fa)try{Qa(Fa.documentElement.childNodes)[0].nodeType}catch(b){Qa=function(b){for(var d=b.length,k=Array(d);d--;)k[d]=b[d];return k}}Date.now||(Date.now=function(){return+new Date});if(Fa)try{Fa.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Bc=this.Element.prototype,fi=Bc.setAttribute,gi=Bc.setAttributeNS,Wf=this.CSSStyleDeclaration.prototype,hi=Wf.setProperty;Bc.setAttribute=function(b,f){fi.call(this,b,f+"")};Bc.setAttributeNS=
function(b,f,k){gi.call(this,b,f,k+"")};Wf.setProperty=function(b,f,k){hi.call(this,b,f+"",k)}}y.ascending=a;y.descending=function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};y.min=function(b,d){var f=-1,k=b.length,a;if(1===arguments.length){for(;++f<k;)if(null!=(a=b[f])&&a>=a){var c=a;break}for(;++f<k;)null!=(a=b[f])&&c>a&&(c=a)}else{for(;++f<k;)if(null!=(a=d.call(b,b[f],f))&&a>=a){c=a;break}for(;++f<k;)null!=(a=d.call(b,b[f],f))&&c>a&&(c=a)}return c};y.max=function(b,d){var f=-1,k=b.length,a;if(1===arguments.length){for(;++f<
k;)if(null!=(a=b[f])&&a>=a){var c=a;break}for(;++f<k;)null!=(a=b[f])&&a>c&&(c=a)}else{for(;++f<k;)if(null!=(a=d.call(b,b[f],f))&&a>=a){c=a;break}for(;++f<k;)null!=(a=d.call(b,b[f],f))&&a>c&&(c=a)}return c};y.extent=function(b,d){var f=-1,a=b.length,c,e;if(1===arguments.length){for(;++f<a;)if(null!=(c=b[f])&&c>=c){var g=e=c;break}for(;++f<a;)null!=(c=b[f])&&(g>c&&(g=c),e<c&&(e=c))}else{for(;++f<a;)if(null!=(c=d.call(b,b[f],f))&&c>=c){g=e=c;break}for(;++f<a;)null!=(c=d.call(b,b[f],f))&&(g>c&&(g=c),
e<c&&(e=c))}return[g,e]};y.sum=function(b,d){var f=0,a=b.length,c,e=-1;if(1===arguments.length)for(;++e<a;)isNaN(c=+b[e])||(f+=c);else for(;++e<a;)isNaN(c=+d.call(b,b[e],e))||(f+=c);return f};y.mean=function(b,d){var f=0,a=b.length,c,g=-1,h=a;if(1===arguments.length)for(;++g<a;)isNaN(c=e(b[g]))?--h:f+=c;else for(;++g<a;)isNaN(c=e(d.call(b,b[g],g)))?--h:f+=c;if(h)return f/h};y.quantile=function(b,d){var f=(b.length-1)*d+1,a=Math.floor(f),c=+b[a-1];return(f-=a)?c+f*(b[a]-c):c};y.median=function(b,d){var f=
[],k=b.length,c,g=-1;if(1===arguments.length)for(;++g<k;)isNaN(c=e(b[g]))||f.push(c);else for(;++g<k;)isNaN(c=e(d.call(b,b[g],g)))||f.push(c);if(f.length)return y.quantile(f.sort(a),.5)};y.variance=function(b,d){var f=b.length,a=0,c,g=0,h=-1,l=0;if(1===arguments.length)for(;++h<f;){if(!isNaN(c=e(b[h]))){var q=c-a;a+=q/++l;g+=q*(c-a)}}else for(;++h<f;)isNaN(c=e(d.call(b,b[h],h)))||(q=c-a,a+=q/++l,g+=q*(c-a));if(1<l)return g/(l-1)};y.deviation=function(){var b=y.variance.apply(this,arguments);return b?
Math.sqrt(b):b};var Xf=t(a);y.bisectLeft=Xf.left;y.bisect=y.bisectRight=Xf.right;y.bisector=function(b){return t(1===b.length?function(d,f){return a(b(d),f)}:b)};y.shuffle=function(b,d,f){3>(a=arguments.length)&&(f=b.length,2>a&&(d=0));for(var a=f-d,c,e;a;)e=Math.random()*a--|0,c=b[a+d],b[a+d]=b[e+d],b[e+d]=c;return b};y.permute=function(b,d){for(var f=d.length,a=Array(f);f--;)a[f]=b[d[f]];return a};y.pairs=function(b){for(var d=0,f=b.length-1,a=b[0],c=Array(0>f?0:f);d<f;)c[d]=[a,a=b[++d]];return c};
y.transpose=function(b){if(!(e=b.length))return[];for(var d=-1,f=y.min(b,l),a=Array(f);++d<f;)for(var c=-1,e,g=a[d]=Array(e);++c<e;)g[c]=b[c][d];return a};y.zip=function(){return y.transpose(arguments)};y.keys=function(b){var d=[],f;for(f in b)d.push(f);return d};y.values=function(b){var d=[],f;for(f in b)d.push(b[f]);return d};y.entries=function(b){var d=[],f;for(f in b)d.push({key:f,value:b[f]});return d};y.merge=function(b){var d=b.length;var f=-1;for(var a=0,c,e;++f<d;)a+=b[f].length;for(c=Array(a);0<=
--d;)for(e=b[d],f=e.length;0<=--f;)c[--a]=e[f];return c};var ea=Math.abs;y.range=function(b,d,f){3>arguments.length&&(f=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/f)throw Error("infinite range");var a=[];var c=ea(f);for(var e=1;c*e%1;)e*=10;c=e;var e=-1,g;b*=c;d*=c;f*=c;if(0>f)for(;(g=b+f*++e)>d;)a.push(g/c);else for(;(g=b+f*++e)<d;)a.push(g/c);return a};y.map=function(b,d){var f=new p;if(b instanceof p)b.forEach(function(b,d){f.set(b,d)});else if(Array.isArray(b)){var a=-1,c=b.length,e;
if(1===arguments.length)for(;++a<c;)f.set(a,b[a]);else for(;++a<c;)f.set(d.call(b,e=b[a],a),e)}else for(a in b)f.set(a,b[a]);return f};n(p,{has:w,get:function(b){return this._[h(b)]},set:function(b,d){return this._[h(b)]=d},remove:H,keys:B,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:u(d),value:this._[d]});return b},size:C,empty:D,forEach:function(b){for(var d in this._)b.call(this,u(d),this._[d])}});y.nest=function(){function b(d,
c,k){if(k>=a.length)return g?g.call(f,c):e?c.sort(e):c;for(var m=-1,h=c.length,z=a[k++],l,q,r=new p,n;++m<h;)(n=r.get(l=z(q=c[m])))?n.push(q):r.set(l,[q]);d?(q=d(),c=function(f,a){q.set(f,b(d,a,k))}):(q={},c=function(f,a){q[f]=b(d,a,k)});r.forEach(c);return q}function d(b,f){if(f>=a.length)return b;var k=[],e=c[f++];b.forEach(function(b,a){k.push({key:b,values:d(a,f)})});return e?k.sort(function(b,d){return e(b.key,d.key)}):k}var f={},a=[],c=[],e,g;f.map=function(d,f){return b(f,d,0)};f.entries=function(f){return d(b(y.map,
f,0),0)};f.key=function(b){a.push(b);return f};f.sortKeys=function(b){c[a.length-1]=b;return f};f.sortValues=function(b){e=b;return f};f.rollup=function(b){g=b;return f};return f};y.set=function(b){var d=new E;if(b)for(var f=0,a=b.length;f<a;++f)d.add(b[f]);return d};n(E,{has:w,add:function(b){this._[h(b+="")]=!0;return b},remove:H,values:B,size:C,empty:D,forEach:function(b){for(var d in this._)b.call(this,u(d))}});y.behavior={};y.rebind=function(b,d){for(var f=1,a=arguments.length,c;++f<a;)b[c=arguments[f]]=
L(b,d,d[c]);return b};var Zd="webkit ms moz Moz o O".split(" ");y.dispatch=function(){for(var b=new v,d=-1,f=arguments.length;++d<f;)b[arguments[d]]=F(b);return b};v.prototype.on=function(b,d){var f=b.indexOf("."),a="";0<=f&&(a=b.slice(f+1),b=b.slice(0,f));if(b)return 2>arguments.length?this[b].on(a):this[b].on(a,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(a,null);return this}};y.event=null;y.requote=function(b){return b.replace(ii,"\\$&")};var ii=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
Tb={}.__proto__?function(b,d){b.__proto__=d}:function(b,d){for(var f in d)b[f]=d[f]},Rc=function(b,d){return d.querySelector(b)},Sc=function(b,d){return d.querySelectorAll(b)},Ub=function(b,d){var f=b.matches||b[O(b,"matchesSelector")];Ub=function(b,d){return f.call(b,d)};return Ub(b,d)};"function"===typeof Sizzle&&(Rc=function(b,d){return Sizzle(b,d)[0]||null},Sc=Sizzle,Ub=Sizzle.matchesSelector);y.selection=function(){return y.select(Fa.documentElement)};var ma=y.selection.prototype=[];ma.select=
function(b){var d=[],f,a,c,e;b=r(b);for(var g=-1,h=this.length;++g<h;){d.push(f=[]);f.parentNode=(c=this[g]).parentNode;for(var l=-1,q=c.length;++l<q;)(e=c[l])?(f.push(a=b.call(e,e.__data__,l,g)),a&&"__data__"in e&&(a.__data__=e.__data__)):f.push(null)}return M(d)};ma.selectAll=function(b){var d=[],f,a;b=K(b);for(var c=-1,e=this.length;++c<e;)for(var g=this[c],h=-1,l=g.length;++h<l;)if(a=g[h])d.push(f=Qa(b.call(a,a.__data__,h,c))),f.parentNode=a;return M(d)};var Pd={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:Pd,qualify:function(b){var d=b.indexOf(":"),f=b;0<=d&&"xmlns"!==(f=b.slice(0,d))&&(b=b.slice(d+1));return Pd.hasOwnProperty(f)?{space:Pd[f],local:b}:b}};ma.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node();b=y.ns.qualify(b);return b.local?f.getAttributeNS(b.space,b.local):f.getAttribute(b)}for(d in b)this.each(Q(d,
b[d]));return this}return this.each(Q(b,d))};ma.classed=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node(),a=(b=(b+"").trim().split(/^|\s+/)).length,c=-1;if(d=f.classList)for(;++c<a;){if(!d.contains(b[c]))return!1}else for(d=f.getAttribute("class");++c<a;)if(!J(b[c]).test(d))return!1;return!0}for(d in b)this.each(q(d,b[d]));return this}return this.each(q(b,d))};ma.style=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d="");for(f in b)this.each(x(f,
b[f],d));return this}if(2>a)return a=this.node(),c(a).getComputedStyle(a,null).getPropertyValue(b);f=""}return this.each(x(b,d,f))};ma.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(Z(d,b[d]));return this}return this.each(Z(b,d))};ma.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=
b}):this.node().textContent};ma.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};ma.append=function(b){b=aa(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};ma.insert=function(b,d){b=aa(b);d=r(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,
arguments)||null)})};ma.remove=function(){return this.each(G)};ma.data=function(b,d){function f(b,f){var a,c=b.length,k=f.length,e=Math.min(c,k),m=Array(k),g=Array(k),z=Array(c),r,n;if(d){var e=new p,x=Array(c),t;for(a=-1;++a<c;)if(r=b[a])e.has(t=d.call(r,r.__data__,a))?z[a]=r:e.set(t,r),x[a]=t;for(a=-1;++a<k;)(r=e.get(t=d.call(f,n=f[a],a)))?!0!==r&&(m[a]=r,r.__data__=n):g[a]={__data__:n},e.set(t,!0);for(a=-1;++a<c;)a in x&&!0!==e.get(x[a])&&(z[a]=b[a])}else{for(a=-1;++a<e;)r=b[a],n=f[a],r?(r.__data__=
n,m[a]=r):g[a]={__data__:n};for(;a<k;++a)g[a]={__data__:f[a]};for(;a<c;++a)z[a]=b[a]}g.update=m;g.parentNode=m.parentNode=z.parentNode=b.parentNode;h.push(g);l.push(m);q.push(z)}var a=-1,c=this.length,e,g;if(!arguments.length){for(b=Array(c=(e=this[0]).length);++a<c;)if(g=e[a])b[a]=g.__data__;return b}var h=da([]),l=M([]),q=M([]);if("function"===typeof b)for(;++a<c;)f(e=this[a],b.call(e,e.parentNode.__data__,a));else for(;++a<c;)f(e=this[a],b);l.enter=function(){return h};l.exit=function(){return q};
return l};ma.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};ma.filter=function(b){var d=[],f,a,c;"function"!==typeof b&&(b=S(b));for(var e=0,g=this.length;e<g;e++){d.push(f=[]);f.parentNode=(a=this[e]).parentNode;for(var h=0,l=a.length;h<l;h++)(c=a[h])&&b.call(c,c.__data__,h,e)&&f.push(c)}return M(d)};ma.order=function(){for(var b=-1,d=this.length;++b<d;)for(var f=this[b],a=f.length-1,c=f[a],e;0<=--a;)if(e=f[a])c&&c!==e.nextSibling&&c.parentNode.insertBefore(e,
c),c=e;return this};ma.sort=function(b){b=W.apply(this,arguments);for(var d=-1,f=this.length;++d<f;)this[d].sort(b);return this.order()};ma.each=function(b){return la(this,function(d,f,a){b.call(d,d.__data__,f,a)})};ma.call=function(b){var d=Qa(arguments);b.apply(d[0]=this,d);return this};ma.empty=function(){return!this.node()};ma.node=function(){for(var b=0,d=this.length;b<d;b++)for(var f=this[b],a=0,c=f.length;a<c;a++){var e=f[a];if(e)return e}return null};ma.size=function(){var b=0;la(this,function(){++b});
return b};var Ta=[];y.selection.enter=da;y.selection.enter.prototype=Ta;Ta.append=ma.append;Ta.empty=ma.empty;Ta.node=ma.node;Ta.call=ma.call;Ta.size=ma.size;Ta.select=function(b){for(var d=[],f,a,c,e,g,h=-1,l=this.length;++h<l;){c=(e=this[h]).update;d.push(f=[]);f.parentNode=e.parentNode;for(var q=-1,r=e.length;++q<r;)(g=e[q])?(f.push(c[q]=a=b.call(e.parentNode,g.__data__,q,h)),a.__data__=g.__data__):f.push(null)}return M(d)};Ta.insert=function(b,d){2>arguments.length&&(d=ta(this));return ma.insert.call(this,
b,d)};y.select=function(b){if("string"===typeof b){var d=[Rc(b,Fa)];d.parentNode=Fa.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return M([d])};y.selectAll=function(b){"string"===typeof b?(b=Qa(Sc(b,Fa)),b.parentNode=Fa.documentElement):(b=Qa(b),b.parentNode=null);return M([b])};ma.on=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d=!1);for(f in b)this.each(ka(f,b[f],d));return this}if(2>a)return(a=this.node()["__on"+b])&&
a._;f=!1}return this.each(ka(b,d,f))};var Tc=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});Fa&&Tc.forEach(function(b){"on"+b in Fa&&Tc.remove(b)});var eb,pg=0;y.mouse=function(b){return ga(b,P())};var Uc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;y.touch=function(b,d,f){3>arguments.length&&(f=d,d=P().changedTouches);if(d)for(var a=0,c=d.length,e;a<c;++a)if((e=d[a]).identifier===f)return ga(b,e)};y.behavior.drag=function(){function b(){this.on("mousedown.drag",e).on("touchstart.drag",
g)}function d(b,d,c,k,e){return function(){var m=y.event.target.correspondingElement||y.event.target,g=this.parentNode,h=f.of(this,arguments),l=0,q=b(),z=".drag"+(null==q?"":"-"+q),r=y.select(c(m)).on(k+z,function(){var b=d(g,q);if(b){var f=b[0]-x[0];var a=b[1]-x[1];l|=f|a;x=b;h({type:"drag",x:b[0]+t[0],y:b[1]+t[1],dx:f,dy:a})}}).on(e+z,function(){d(g,q)&&(r.on(k+z,null).on(e+z,null),n(l),h({type:"dragend"}))}),n=oa(m),x=d(g,q);if(a){var t=a.apply(this,arguments);t=[t.x-x[0],t.y-x[1]]}else t=[0,0];
h({type:"dragstart"})}}var f=R(b,"drag","dragstart","dragend"),a=null,e=d(I,y.mouse,c,"mousemove","mouseup"),g=d(ja,y.touch,A,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return a;a=d;return b};return y.rebind(b,f,"on")};y.touches=function(b,d){2>arguments.length&&(d=P().touches);return d?Qa(d).map(function(d){var f=ga(b,d);f.identifier=d.identifier;return f}):[]};var ba=Math.PI,La=2*ba,ji=La-1E-6,va=ba/2,ca=ba/180,sa=180/ba,Sb=Math.SQRT2;y.interpolateZoom=function(b,d){var f=
b[0],a=b[1],c=b[2],e=d[2],g=d[0]-f,h=d[1]-a,l=g*g+h*h;if(1E-12>l){var q=Math.log(e/c)/Sb;var r=function(b){return[f+b*g,a+b*h,c*Math.exp(Sb*b*q)]}}else{var n=Math.sqrt(l);r=(e*e-c*c+4*l)/(4*c*n);var e=(e*e-c*c-4*l)/(4*e*n),x=Math.log(Math.sqrt(r*r+1)-r);q=(Math.log(Math.sqrt(e*e+1)-e)-x)/Sb;r=function(b){b*=q;var d=Ia(x),k=c/(2*n),e=Sb*b+x;var m=((e=Math.exp(2*e))-1)/(e+1);var l=x,e=((l=Math.exp(l))-1/l)/2,k=k*(d*m-e);return[f+k*g,a+k*h,c*d/Ia(Sb*b+x)]}}r.duration=1E3*q;return r};y.behavior.zoom=
function(){function b(b){b.on("mousedown.zoom",r).on(Qd+".zoom",x).on("dblclick.zoom",t).on("touchstart.zoom",n)}function d(b){return[(b[0]-p.x)/p.k,(b[1]-p.y)/p.k]}function f(b){p.k=Math.max(u[0],Math.min(u[1],b))}function a(b,d){d=[d[0]*p.k+p.x,d[1]*p.k+p.y];p.x+=b[0]-d[0];p.y+=b[1]-d[1]}function e(d,c,k,e){d.__chart__={x:p.x,y:p.y,k:p.k};f(Math.pow(2,e));a(J=c,k);d=y.select(d);0<S&&(d=d.transition().duration(S));d.call(b.event)}function g(){K&&K.domain(E.range().map(function(b){return(b-p.x)/p.k}).map(E.invert));
Q&&Q.domain(aa.range().map(function(b){return(b-p.y)/p.k}).map(aa.invert))}function h(b){W++||b({type:"zoomstart"})}function l(b){g();b({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function q(b){--W||(b({type:"zoomend"}),J=null)}function r(){var b=this,f=A.of(b,arguments),k=0,e=y.select(c(b)).on("mousemove.zoom",function(){k=1;a(y.mouse(b),m);l(f)}).on("mouseup.zoom",function(){e.on("mousemove.zoom",null).on("mouseup.zoom",null);g(k);q(f)}),m=d(y.mouse(b)),g=oa(b);Cc.call(b);h(f)}function n(){function b(){var b=
y.touches(g);G=p.k;b.forEach(function(b){b.identifier in x&&(x[b.identifier]=d(b))});return b}function c(){var d=y.event.target;y.select(d).on(v,k).on(V,m);N.push(d);d=y.event.changedTouches;for(var f=0,a=d.length;f<a;++f)x[d[f].identifier]=null;f=b();a=Date.now();1===f.length?(500>a-w&&(d=f[0],e(g,d,x[d.identifier],Math.floor(Math.log(p.k)/Math.LN2)+1),U()),w=a):1<f.length&&(d=f[0],a=f[1],f=d[0]-a[0],d=d[1]-a[1],t=f*f+d*d)}function k(){var b=y.touches(g),d;Cc.call(g);for(var c=0,k=b.length;c<k;++c,
d=null){var e=b[c];if(d=x[e.identifier]){if(h)break;var m=e;var h=d}}if(d){var q=(q=e[0]-m[0])*q+(q=e[1]-m[1])*q,b=t&&Math.sqrt(q/t);m=[(m[0]+e[0])/2,(m[1]+e[1])/2];h=[(h[0]+d[0])/2,(h[1]+d[1])/2];f(b*G)}w=null;a(m,h);l(z)}function m(){if(y.event.touches.length){for(var d=y.event.changedTouches,f=0,a=d.length;f<a;++f)delete x[d[f].identifier];for(var c in x)return void b()}y.selectAll(N).on(J,null);T.on("mousedown.zoom",r).on("touchstart.zoom",n);u();q(z)}var g=this,z=A.of(g,arguments),x={},t=0,G,
J=".zoom-"+y.event.changedTouches[0].identifier,v="touchmove"+J,V="touchend"+J,N=[],T=y.select(g),u=oa(g);c();h(z);T.on("mousedown.zoom",null).on("touchstart.zoom",c)}function x(){var b=A.of(this,arguments);F?clearTimeout(F):(Cc.call(this),G=d(J=v||y.mouse(this)),h(b));F=setTimeout(function(){F=null;q(b)},50);U();f(Math.pow(2,.002*Dc())*p.k);a(J,G);l(b)}function t(){var b=y.mouse(this),f=Math.log(p.k)/Math.LN2;e(this,b,d(b),y.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)}var p={x:0,y:0,k:1},G,J,
v,N=[960,500],u=Yf,S=250,W=0,F,w,A=R(b,"zoomstart","zoom","zoomend"),E,K,aa,Q;Qd||(Qd="onwheel"in Fa?(Dc=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Fa?(Dc=function(){return y.event.wheelDelta},"mousewheel"):(Dc=function(){return-y.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=A.of(this,arguments),d=p;ob?y.select(this).transition().each("start.zoom",function(){p=this.__chart__||{x:0,y:0,k:1};h(b)}).tween("zoom:zoom",function(){var f=
N[0],a=N[1],c=J?J[0]:f/2,k=J?J[1]:a/2,e=y.interpolateZoom([(c-p.x)/p.k,(k-p.y)/p.k,f/p.k],[(c-d.x)/d.k,(k-d.y)/d.k,f/d.k]);return function(d){d=e(d);var a=f/d[2];this.__chart__=p={x:c-d[0]*a,y:k-d[1]*a,k:a};l(b)}}).each("interrupt.zoom",function(){q(b)}).each("end.zoom",function(){q(b)}):(this.__chart__=p,h(b),l(b),q(b))})};b.translate=function(d){if(!arguments.length)return[p.x,p.y];p={x:+d[0],y:+d[1],k:p.k};g();return b};b.scale=function(d){if(!arguments.length)return p.k;p={x:p.x,y:p.y,k:null};
f(+d);g();return b};b.scaleExtent=function(d){if(!arguments.length)return u;u=null==d?Yf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return v;v=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return N;N=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return S;S=+d;return b};b.x=function(d){if(!arguments.length)return K;K=d;E=d.copy();p={x:0,y:0,k:1};return b};b.y=function(d){if(!arguments.length)return Q;Q=d;aa=d.copy();p={x:0,y:0,k:1};
return b};return y.rebind(b,A,"on")};var Yf=[0,Infinity],Dc,Qd;y.color=Ca;Ca.prototype.toString=function(){return this.rgb()+""};y.hsl=Ba;var Rd=Ba.prototype=new Ca;Rd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ba(this.h,this.s,this.l/b)};Rd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ba(this.h,this.s,b*this.l)};Rd.rgb=function(){return ya(this.h,this.s,this.l)};y.hcl=ra;var Sd=ra.prototype=new Ca;Sd.brighter=function(b){return new ra(this.h,this.c,Math.min(100,
this.l+Ec*(arguments.length?b:1)))};Sd.darker=function(b){return new ra(this.h,this.c,Math.max(0,this.l-Ec*(arguments.length?b:1)))};Sd.rgb=function(){return ua(this.h,this.c,this.l).rgb()};y.lab=Da;var Ec=18,de=.95047,ee=1,fe=1.08883,Td=Da.prototype=new Ca;Td.brighter=function(b){return new Da(Math.min(100,this.l+Ec*(arguments.length?b:1)),this.a,this.b)};Td.darker=function(b){return new Da(Math.max(0,this.l-Ec*(arguments.length?b:1)),this.a,this.b)};Td.rgb=function(){return Db(this.l,this.a,this.b)};
y.rgb=Ga;var Fc=Ga.prototype=new Ca;Fc.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var d=this.r,f=this.g,a=this.b;if(!d&&!f&&!a)return new Ga(30,30,30);d&&30>d&&(d=30);f&&30>f&&(f=30);a&&30>a&&(a=30);return new Ga(Math.min(255,d/b),Math.min(255,f/b),Math.min(255,a/b))};Fc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ga(b*this.r,b*this.g,b*this.b)};Fc.hsl=function(){return ae(this.r,this.g,this.b)};Fc.toString=function(){return"#"+qb(this.r)+qb(this.g)+qb(this.b)};
var Wb=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,
teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wb.forEach(function(b,d){Wb.set(b,new Ga(d>>16,d>>8&255,d&255))});y.functor=pa;y.xhr=$c(A);y.dsv=function(b,d){function f(b,f,k){3>arguments.length&&(k=f,f=null);var e=Xb(b,d,null==f?a:c(f),k);e.row=function(b){return arguments.length?e.response(null==(f=b)?a:c(b)):f};return e}function a(b){return f.parse(b.responseText)}function c(b){return function(d){return f.parse(d.responseText,
b)}}function e(d){return d.map(g).join(b)}function g(b){return h.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var h=new RegExp('["'+b+"\n]"),l=b.charCodeAt(0);f.parse=function(b,d){var a;return f.parseRows(b,function(b,f){if(a)return a(b,f-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");a=d?function(b,f){return d(c(b),f)}:c})};f.parseRows=function(b,d){function f(){var d;if(m>=e)return c;if(q)return q=!1,a;var f=m;if(34===b.charCodeAt(f)){for(d=
f;d++<e;)if(34===b.charCodeAt(d)){if(34!==b.charCodeAt(d+1))break;++d}m=d+2;var k=b.charCodeAt(d+1);13===k?(q=!0,10===b.charCodeAt(d+2)&&++m):10===k&&(q=!0);return b.slice(f+1,d).replace(/""/g,'"')}for(;m<e;){k=b.charCodeAt(m++);d=1;if(10===k)q=!0;else if(13===k)q=!0,10===b.charCodeAt(m)&&(++m,++d);else if(k!==l)continue;return b.slice(f,m-d)}return b.slice(f)}for(var a={},c={},k=[],e=b.length,m=0,g=0,h,q;(h=f())!==c;){for(var z=[];h!==a&&h!==c;)z.push(h),h=f();d&&null==(z=d(z,g++))||k.push(z)}return k};
f.format=function(d){if(Array.isArray(d[0]))return f.formatRows(d);var a=new E,c=[];d.forEach(function(b){for(var d in b)a.has(d)||c.push(a.add(d))});return[c.map(g).join(b)].concat(d.map(function(d){return c.map(function(b){return g(d[b])}).join(b)})).join("\n")};f.formatRows=function(b){return b.map(e).join("\n")};return f};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t","text/tab-separated-values");var $b,Zb,ac,bc,ge=this[O(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};y.timer=function(){Yb.apply(this,
arguments)};y.timer.flush=function(){he();ie()};y.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var f=Math.pow(10,3*ea(8-d));return{scale:8<d?function(b){return b/f}:function(b){return b*f},symbol:b}});y.formatPrefix=function(b,d){var f=0;if(b=+b)0>b&&(b*=-1),d&&(b=y.round(b,bd(b,d))),f=1+Math.floor(1E-12+Math.log(b)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3)));return ki[8+
f/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sg=y.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=y.round(b,bd(b,d))).toFixed(Math.max(0,Math.min(20,bd(b*
(1+1E-15),d))))}}),X=y.time={},Ea=Date;Ua.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xa.setUTCDate.apply(this._,arguments)},setDay:function(){Xa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Xa.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Xa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xa.setTime.apply(this._,arguments)}};var Xa=Date.prototype;X.year=fb(function(b){b=X.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});X.years=X.year.range;X.years.utc=X.year.utc.range;X.day=fb(function(b){var d=new Ea(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-
1});X.days=X.day.range;X.days.utc=X.day.utc.range;X.dayOfYear=function(b){var d=X.year(b);return Math.floor((b-d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var f=X[b]=fb(function(b){(b=X.day(b)).setDate(b.getDate()-(b.getDay()+d)%7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var f=X.year(b).getDay();return Math.floor((X.dayOfYear(b)+(f+d)%7)/7)-(f!==d)});
X[b+"s"]=f.range;X[b+"s"].utc=f.utc.range;X[b+"OfYear"]=function(b){var f=X.year(b).getDay();return Math.floor((X.dayOfYear(b)+(f+d)%7)/7)}});X.week=X.sunday;X.weeks=X.sunday.range;X.weeks.utc=X.sunday.utc.range;X.weekOfYear=X.sundayOfYear;var ke={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,ne=/^%/;y.locale=function(b){return{numberFormat:rg(b),timeFormat:ug(b)}};var Zf=y.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM",
"PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});y.format=Zf.numberFormat;y.geo={};cd.prototype={s:0,t:0,add:function(b){oe(b,this.t,Gc);oe(Gc.s,this.s,this);this.s?this.t+=Gc.t:this.s=Gc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};
var Gc=new cd;y.geo.stream=function(b,d){if(b&&$f.hasOwnProperty(b.type))$f[b.type](b,d);else fc(b,d)};var $f={Feature:function(b,d){fc(b.geometry,d)},FeatureCollection:function(b,d){for(var f=b.features,a=-1,c=f.length;++a<c;)fc(f[a].geometry,d)}},pe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)b=f[a],d.point(b[0],b[1],b[2])},LineString:function(b,d){dd(b.coordinates,d,0)},MultiLineString:function(b,
d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)dd(f[a],d,0)},Polygon:function(b,d){qe(b.coordinates,d)},MultiPolygon:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)qe(f[a],d)},GeometryCollection:function(b,d){for(var f=b.geometries,a=-1,c=f.length;++a<c;)fc(f[a],d)}};y.geo.area=function(b){Hc=0;y.geo.stream(b,Ka);return Hc};var Hc,gb=new cd,Ka={sphere:function(){Hc+=4*ba},point:I,lineStart:I,lineEnd:I,polygonStart:function(){gb.reset();Ka.lineStart=Jg},polygonEnd:function(){var b=
2*gb;Hc+=0>b?4*ba+b:b;Ka.lineStart=Ka.lineEnd=Ka.point=I}};y.geo.bounds=function(){function b(b,d){u.push(S=[r=b,x=b]);d<n&&(n=d);d>p&&(p=d)}function d(d,f){var a=hb([d*ca,f*ca]);if(v){var c=rb(v,a);var k=[c[1],-c[0],0];k=rb(k,c);ic(k);k=jc(k);var e=d-t;c=0<e?1:-1;var m=k[0]*sa*c,e=180<ea(e);e^(c*t<m&&m<c*d)?(k=k[1]*sa,k>p&&(p=k)):(m=(m+360)%360-180,e^(c*t<m&&m<c*d))?(k=-k[1]*sa,k<n&&(n=k)):(f<n&&(n=f),f>p&&(p=f));e?d<t?h(r,d)>h(r,x)&&(x=d):h(d,x)>h(r,x)&&(r=d):x>=r?(d<r&&(r=d),d>x&&(x=d)):d>t?h(r,
d)>h(r,x)&&(x=d):h(d,x)>h(r,x)&&(r=d)}else b(d,f);v=a;t=d}function f(){F.point=d}function a(){S[0]=r;S[1]=x;F.point=b;v=null}function c(b,f){if(v){var a=b-t;N+=180<ea(a)?a+(0<a?360:-360):a}else G=b,J=f;Ka.point(b,f);d(b,f)}function e(){Ka.lineStart()}function g(){c(G,J);Ka.lineEnd();1E-6<ea(N)&&(r=-(x=180));S[0]=r;S[1]=x;v=null}function h(b,d){return 0>(d-=b)?d+360:d}function q(b,d){return b[0]-d[0]}function l(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var r,n,x,p,t,G,J,v,N,u,S,F={point:b,
lineStart:f,lineEnd:a,polygonStart:function(){F.point=c;F.lineStart=e;F.lineEnd=g;N=0;Ka.polygonStart()},polygonEnd:function(){Ka.polygonEnd();F.point=b;F.lineStart=f;F.lineEnd=a;0>gb?(r=-(x=180),n=-(p=90)):1E-6<N?p=90:-1E-6>N&&(n=-90);S[0]=r;S[1]=x}};return function(b){p=x=-(r=n=Infinity);u=[];y.geo.stream(b,F);if(b=u.length){u.sort(q);for(var d=1,f=u[0],a,c=[f];d<b;++d)a=u[d],l(a[0],f)||l(a[1],f)?(h(f[0],a[1])>h(f[0],f[1])&&(f[1]=a[1]),h(a[0],f[1])>h(f[0],f[1])&&(f[0]=a[0])):c.push(f=a);var k=-Infinity,
e;b=c.length-1;d=0;for(f=c[b];d<=b;f=a,++d)a=c[d],(e=h(f[1],a[0]))>k&&(k=e,r=a[0],x=f[1])}u=S=null;return Infinity===r||Infinity===n?[[NaN,NaN],[NaN,NaN]]:[[r,n],[x,p]]}}();y.geo.centroid=function(b){Fb=lc=ib=jb=Va=Ya=Za=Ra=sb=tb=$a=0;y.geo.stream(b,Na);b=sb;var d=tb,f=$a,a=b*b+d*d+f*f;return 1E-12>a&&(b=Ya,d=Za,f=Ra,1E-6>lc&&(b=ib,d=jb,f=Va),a=b*b+d*d+f*f,1E-12>a)?[NaN,NaN]:[Math.atan2(d,b)*sa,na(f/Math.sqrt(a))*sa]};var Fb,lc,ib,jb,Va,Ya,Za,Ra,sb,tb,$a,Na={sphere:I,point:fd,lineStart:re,lineEnd:se,
polygonStart:function(){Na.lineStart=Kg},polygonEnd:function(){Na.lineStart=re}},Ie=we(Gb,function(b){var d=NaN,f=NaN,a=NaN,c;return{lineStart:function(){b.lineStart();c=1},point:function(k,e){var m=0<k?ba:-ba,g=ea(k-d);if(1E-6>ea(g-ba))b.point(d,f=0<(f+e)/2?va:-va),b.point(a,f),b.lineEnd(),b.lineStart(),b.point(m,f),b.point(k,f),c=0;else if(a!==m&&g>=ba){1E-6>ea(d-a)&&(d-=1E-6*a);1E-6>ea(k-m)&&(k-=1E-6*m);var g=d,h=f,q=k,l,r,z=Math.sin(g-q);f=1E-6<ea(z)?Math.atan((Math.sin(h)*(r=Math.cos(e))*Math.sin(q)-
Math.sin(e)*(l=Math.cos(h))*Math.sin(g))/(l*r*z)):(h+e)/2;b.point(a,f);b.lineEnd();b.lineStart();b.point(m,f);c=0}b.point(d=k,f=e);a=m},lineEnd:function(){b.lineEnd();d=f=NaN},clean:function(){return 2-c}}},function(b,d,f,a){null==b?(f*=va,a.point(-ba,f),a.point(0,f),a.point(ba,f),a.point(ba,0),a.point(ba,-f),a.point(0,-f),a.point(-ba,-f),a.point(-ba,0),a.point(-ba,f)):1E-6<ea(b[0]-d[0])?(b=b[0]<d[0]?ba:-ba,f=f*b/2,a.point(-b,f),a.point(0,f),a.point(b,f)):a.point(d[0],d[1])},[-ba,-ba/2]);y.geo.clipExtent=
function(){var b,d,f,a,c,e,g={stream:function(b){c&&(c.valid=!1);c=e(b);c.valid=!0;return c},extent:function(k){if(!arguments.length)return[[b,d],[f,a]];e=ze(b=+k[0][0],d=+k[0][1],f=+k[1][0],a=+k[1][1]);c&&(c.valid=!1,c=null);return g}};return g.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return hd(Ae)}).raw=Ae;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function b(b){var d=b[0];
b=b[1];c=null;(g(d,b),c)||(h(d,b),c)||q(d,b);return c}var d=y.geo.albers(),f=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=y.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,e={point:function(b,d){c=[b,d]}},g,h,q;b.invert=function(b){var c=d.scale(),e=d.translate(),k=(b[0]-e[0])/c,c=(b[1]-e[1])/c;return(.12<=c&&.234>c&&-.425<=k&&-.214>k?f:.166<=c&&.234>c&&-.214<=k&&-.115>k?a:d).invert(b)};b.stream=function(b){var c=d.stream(b),e=f.stream(b),
k=a.stream(b);return{point:function(b,d){c.point(b,d);e.point(b,d);k.point(b,d)},sphere:function(){c.sphere();e.sphere();k.sphere()},lineStart:function(){c.lineStart();e.lineStart();k.lineStart()},lineEnd:function(){c.lineEnd();e.lineEnd();k.lineEnd()},polygonStart:function(){c.polygonStart();e.polygonStart();k.polygonStart()},polygonEnd:function(){c.polygonEnd();e.polygonEnd();k.polygonEnd()}}};b.precision=function(c){if(!arguments.length)return d.precision();d.precision(c);f.precision(c);a.precision(c);
return b};b.scale=function(c){if(!arguments.length)return d.scale();d.scale(c);f.scale(.35*c);a.scale(c);return b.translate(d.translate())};b.translate=function(c){if(!arguments.length)return d.translate();var k=d.scale(),m=+c[0],l=+c[1];g=d.translate(c).clipExtent([[m-.455*k,l-.238*k],[m+.455*k,l+.238*k]]).stream(e).point;h=f.translate([m-.307*k,l+.201*k]).clipExtent([[m-.425*k+1E-6,l+.12*k+1E-6],[m-.214*k-1E-6,l+.234*k-1E-6]]).stream(e).point;q=a.translate([m-.205*k,l+.212*k]).clipExtent([[m-.214*
k+1E-6,l+.166*k+1E-6],[m-.115*k-1E-6,l+.234*k-1E-6]]).stream(e).point;return b};return b.scale(1070)};var Ud,jd,ab={point:I,lineStart:I,lineEnd:I,polygonStart:function(){jd=0;ab.lineStart=Og},polygonEnd:function(){ab.lineStart=ab.lineEnd=ab.point=I;Ud+=ea(jd/2)}},Ic,Jc,Kc,Lc,li={point:function(b,d){b<Ic&&(Ic=b);b>Kc&&(Kc=b);d<Jc&&(Jc=d);d>Lc&&(Lc=d)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I},Oa={point:kb,lineStart:Ce,lineEnd:De,polygonStart:function(){Oa.lineStart=Qg},polygonEnd:function(){Oa.point=
kb;Oa.lineStart=Ce;Oa.lineEnd=De}};y.geo.path=function(){function b(b){b&&("function"===typeof f&&g.pointRadius(+f.apply(this,arguments)),h&&h.valid||(h=e(g)),y.geo.stream(b,h));return g.result()}function d(){h=null;return b}var f=4.5,a,c,e,g,h;b.area=function(b){Ud=0;y.geo.stream(b,e(ab));return Ud};b.centroid=function(b){ib=jb=Va=Ya=Za=Ra=sb=tb=$a=0;y.geo.stream(b,e(Oa));return $a?[sb/$a,tb/$a]:Ra?[Ya/Ra,Za/Ra]:Va?[ib/Va,jb/Va]:[NaN,NaN]};b.bounds=function(b){Kc=Lc=-(Ic=Jc=Infinity);y.geo.stream(b,
e(li));return[[Ic,Jc],[Kc,Lc]]};b.projection=function(b){if(!arguments.length)return a;e=(a=b)?b.stream||Sg(b):A;return d()};b.context=function(b){if(!arguments.length)return c;g=null==(c=b)?new Pg:new Rg(b);"function"!==typeof f&&g.pointRadius(f);return d()};b.pointRadius=function(d){if(!arguments.length)return f;f="function"===typeof d?d:(g.pointRadius(+d),+d);return b};return b.projection(y.geo.albersUsa()).context(null)};y.geo.transform=function(b){return{stream:function(d){d=new He(d);for(var f in b)d[f]=
b[f];return d}}};He.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};y.geo.projection=bb;y.geo.projectionMutator=id;(y.geo.equirectangular=function(){return bb(Hb)}).raw=Hb.invert=Hb;y.geo.rotation=function(b){function d(d){d=b(d[0]*ca,d[1]*ca);return d[0]*=sa,d[1]*=
sa,d}b=kd(b[0]%360*ca,b[1]*ca,2<b.length?b[2]*ca:0);d.invert=function(d){d=b.invert(d[0]*ca,d[1]*ca);return d[0]*=sa,d[1]*=sa,d};return d};Je.invert=Hb;y.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,f=kd(-b[0]*ca,-b[1]*ca,0).invert,a=[];c(null,null,1,{point:function(b,d){a.push(b=f(b,d));b[0]*=sa;b[1]*=sa}});return{type:"Polygon",coordinates:[a]}}var d=[0,0],f,a=6,c;b.origin=function(f){if(!arguments.length)return d;d=f;return b};b.angle=function(d){if(!arguments.length)return f;
c=gd((f=+d)*ca,a*ca);return b};b.precision=function(d){if(!arguments.length)return a;c=gd(f*ca,(a=+d)*ca);return b};return b.angle(90)};y.geo.distance=function(b,d){var f=(d[0]-b[0])*ca,a=b[1]*ca,c=d[1]*ca,e=Math.cos(f),g=Math.sin(a),a=Math.cos(a),h=Math.sin(c),c=Math.cos(c),l;return Math.atan2(Math.sqrt((l=c*Math.sin(f))*l+(l=a*h-g*c*e)*l),g*h+a*c*e)};y.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return y.range(Math.ceil(e/x)*x,c,x).map(J).concat(y.range(Math.ceil(q/
p)*p,l,p).map(v)).concat(y.range(Math.ceil(a/r)*r,f,r).filter(function(b){return 1E-6<ea(b%x)}).map(t)).concat(y.range(Math.ceil(h/n)*n,g,n).filter(function(b){return 1E-6<ea(b%p)}).map(G))}var f,a,c,e,g,h,l,q,r=10,n=r,x=90,p=360,t,G,J,v,N=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[J(e).concat(v(l).slice(1),J(c).reverse().slice(1),v(q).reverse().slice(1))]}};b.extent=function(d){return arguments.length?
b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[e,q],[c,l]];e=+d[0][0];c=+d[1][0];q=+d[0][1];l=+d[1][1];e>c&&(d=e,e=c,c=d);q>l&&(d=q,q=l,l=d);return b.precision(N)};b.minorExtent=function(d){if(!arguments.length)return[[a,h],[f,g]];a=+d[0][0];f=+d[1][0];h=+d[0][1];g=+d[1][1];a>f&&(d=a,a=f,f=d);h>g&&(d=h,h=g,g=d);return b.precision(N)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[x,
p];x=+d[0];p=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[r,n];r=+d[0];n=+d[1];return b};b.precision=function(d){if(!arguments.length)return N;N=+d;t=Oe(h,g,90);G=Pe(a,f,N);J=Oe(q,l,90);v=Pe(e,c,N);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};y.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[f||d.apply(this,arguments),c||a.apply(this,arguments)]}}var d=ld,f,a=md,c;b.distance=
function(){return y.geo.distance(f||d.apply(this,arguments),c||a.apply(this,arguments))};b.source=function(a){if(!arguments.length)return d;d=a;f="function"===typeof a?null:a;return b};b.target=function(d){if(!arguments.length)return a;a=d;c="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?b:0};return b};y.geo.interpolate=function(b,d){return Tg(b[0]*ca,b[1]*ca,d[0]*ca,d[1]*ca)};y.geo.length=function(b){Vd=0;y.geo.stream(b,Bb);return Vd};var Vd,Bb={sphere:I,point:I,
lineStart:function(){function b(b,c){var e=Math.sin(c*=ca),k=Math.cos(c),m=ea((b*=ca)-d),g=Math.cos(m);Vd+=Math.atan2(Math.sqrt((m=k*Math.sin(m))*m+(m=a*e-f*k*g)*m),f*e+a*k*g);d=b;f=e;a=k}var d,f,a;Bb.point=function(c,e){d=c*ca;f=Math.sin(e*=ca);a=Math.cos(e);Bb.point=b};Bb.lineEnd=function(){Bb.point=Bb.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I},ag=Ib(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(y.geo.azimuthalEqualArea=function(){return bb(ag)}).raw=ag;var bg=
Ib(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},A);(y.geo.azimuthalEquidistant=function(){return bb(bg)}).raw=bg;(y.geo.conicConformal=function(){return hd(Qe)}).raw=Qe;(y.geo.conicEquidistant=function(){return hd(Re)}).raw=Re;var cg=Ib(function(b){return 1/b},Math.atan);(y.geo.gnomonic=function(){return bb(cg)}).raw=cg;nc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-va]};(y.geo.mercator=function(){return Se(nc)}).raw=nc;var dg=Ib(function(){return 1},Math.asin);(y.geo.orthographic=
function(){return bb(dg)}).raw=dg;var eg=Ib(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(y.geo.stereographic=function(){return bb(eg)}).raw=eg;nd.invert=function(b,d){return[-d,2*Math.atan(Math.exp(b))-va]};(y.geo.transverseMercator=function(){var b=Se(nd),d=b.center,f=b.rotate;b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?f([b[0],b[1],2<b.length?b[2]+90:90]):(b=f(),[b[0],b[1],b[2]-90])};return f([0,0,90])}).raw=nd;y.geom={};
y.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=pa(f),c=pa(a),e,k=b.length,m=[],g=[];for(e=0;e<k;e++)m.push([+d.call(this,b[e],e),+c.call(this,b[e],e),e]);m.sort(Ug);for(e=0;e<k;e++)g.push([m[e][0],-m[e][1]]);var d=Te(m),g=Te(g),c=g[0]===d[0],k=g[g.length-1]===d[d.length-1],h=[];for(e=d.length-1;0<=e;--e)h.push(b[m[d[e]][2]]);for(e=+c;e<g.length-k;++e)h.push(b[m[g[e]][2]]);return h}var f=ub,a=Jb;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(f=b,d):f};
d.y=function(b){return arguments.length?(a=b,d):a};return d};y.geom.polygon=function(b){Tb(b,Mc);return b};var Mc=y.geom.polygon.prototype=[];Mc.area=function(){for(var b=-1,d=this.length,f,a=this[d-1],c=0;++b<d;)f=a,a=this[b],c+=f[1]*a[0]-f[0]*a[1];return.5*c};Mc.centroid=function(b){var d=-1,f=this.length,a=0,c=0,e=this[f-1];for(arguments.length||(b=-1/(6*this.area()));++d<f;){var g=e;e=this[d];var h=g[0]*e[1]-e[0]*g[1];a+=(g[0]+e[0])*h;c+=(g[1]+e[1])*h}return[a*b,c*b]};Mc.clip=function(b){for(var d,
f=Ue(b),a=-1,c=this.length-Ue(this),e,g,h=this[c-1],l,q,r;++a<c;){d=b.slice();b.length=0;l=this[a];q=d[(g=d.length-f)-1];for(e=-1;++e<g;)r=d[e],od(r,h,l)?(od(q,h,l)||b.push(pd(q,r,h,l)),b.push(r)):od(q,h,l)&&b.push(pd(q,r,h,l)),q=r;f&&b.push(b[0]);h=l}return b};var yb,lb,wb,We=[],rd,Kb,$e=[];Ye.prototype.prepare=function(){for(var b=this.edges,d=b.length,f;d--;)f=b[d].edge,f.b&&f.a||b.splice(d,1);b.sort(Ze);return b.length};qc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:
this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};sd.prototype={insert:function(b,d){var f;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var a=b}else this._?(b=bf(this._),d.P=null,d.N=b,b.P=b.L=d,a=b):(d.P=d.N=null,this._=d,a=null);d.L=d.R=null;d.U=a;d.C=!0;for(b=d;a&&a.C;){var c=a.U;a===c.L?(f=c.R)&&f.C?(a.C=f.C=!1,c.C=!0,b=c):(b===a.R&&(Mb(this,a),b=a,a=b.U),a.C=!1,c.C=!0,Nb(this,c)):(f=c.L)&&f.C?(a.C=f.C=!1,c.C=!0,b=c):(b===
a.L&&(Nb(this,a),b=a,a=b.U),a.C=!1,c.C=!0,Mb(this,c));a=b.U}this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,f=b.L,a=b.R;var c=f?a?bf(a):f:a;d?d.L===b?d.L=c:d.R=c:this._=c;if(f&&a){var e=c.C;c.C=b.C;c.L=f;f.U=c;c!==a?(d=c.U,c.U=b.U,b=c.R,d.L=b,c.R=a,a.U=c):(c.U=d,d=c,b=c.R)}else e=b.C,b=c;b&&(b.U=d);if(!e)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Mb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=
!0,Nb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Mb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Nb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Mb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Nb(this,d);b=this._;break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};y.geom.voronoi=function(b){function d(b){var d=Array(b.length),a=h[0][0],c=h[0][1],e=h[1][0],k=h[1][1];td(f(b),h).cells.forEach(function(f,g){var m=f.edges,h=f.site;(d[g]=m.length?m.map(function(b){b=b.start();return[b.x,
b.y]}):h.x>=a&&h.x<=e&&h.y>=c&&h.y<=k?[[a,k],[e,k],[e,c],[a,c]]:[]).point=b[g]});return d}function f(b){return b.map(function(b,d){return{x:1E-6*Math.round(e(b,d)/1E-6),y:1E-6*Math.round(g(b,d)/1E-6),i:d}})}var a=ub,c=Jb,e=a,g=c,h=Nc;if(b)return d(b);d.links=function(b){return td(f(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})};d.triangles=function(b){var d=[];td(f(b)).cells.forEach(function(f,a){for(var c=f.site,e=f.edges.sort(Ze),k=-1,g=
e.length,m,h=e[g-1].edge,h=h.l===c?h.r:h.l;++k<g;)m=h,h=e[k].edge,h=h.l===c?h.r:h.l,a<m.i&&a<h.i&&0>(c.x-h.x)*(m.y-c.y)-(c.x-m.x)*(h.y-c.y)&&d.push([b[a],b[m.i],b[h.i]])});return d};d.x=function(b){return arguments.length?(e=pa(a=b),d):a};d.y=function(b){return arguments.length?(g=pa(c=b),d):c};d.clipExtent=function(b){if(!arguments.length)return h===Nc?null:h;h=null==b?Nc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):h===Nc?null:h&&h[1]};return d};var Nc=[[-1E6,
-1E6],[1E6,1E6]];y.geom.delaunay=function(b){return y.geom.voronoi().triangles(b)};y.geom.quadtree=function(b,d,f,a,c){function e(b){function e(b,d,f,a,c,e,k,g){if(!isNaN(f)&&!isNaN(a))if(b.leaf){var m=b.x,l=b.y;if(null!=m){if(!(.01>ea(m-f)+ea(l-a))){var q=b.point;b.x=b.y=b.point=null;h(b,q,m,l,c,e,k,g)}h(b,d,f,a,c,e,k,g)}else b.x=f,b.y=a,b.point=d}else h(b,d,f,a,c,e,k,g)}function h(b,d,f,a,c,k,g,m){var h=.5*(c+g),l=.5*(k+m),q=f>=h,r=a>=l,n=r<<1|q;b.leaf=!1;b=b.nodes[n]||(b.nodes[n]=cf());q?c=h:g=
h;r?k=l:m=l;e(b,d,f,a,c,k,g,m)}var l=pa(k),q=pa(g),r;if(null!=d){var n=d;var x=f;var z=a;var p=c}else{z=p=-(n=x=Infinity);var t=[];var J=[];var G=b.length;if(m)for(r=0;r<G;++r){var v=b[r];v.x<n&&(n=v.x);v.y<x&&(x=v.y);v.x>z&&(z=v.x);v.y>p&&(p=v.y);t.push(v.x);J.push(v.y)}else for(r=0;r<G;++r){var N=+l(v=b[r],r);v=+q(v,r);N<n&&(n=N);v<x&&(x=v);N>z&&(z=N);v>p&&(p=v);t.push(N);J.push(v)}}N=z-n;v=p-x;N>v?p=x+N:z=n+v;var u=cf();u.add=function(b){e(u,b,+l(b,++r),+q(b,r),n,x,z,p)};u.visit=function(b){Ob(b,
u,n,x,z,p)};u.find=function(b){return bh(u,b[0],b[1],n,x,z,p)};r=-1;if(null==d){for(;++r<G;)e(u,b[r],t[r],J[r],n,x,z,p);--r}else b.forEach(u.add);t=J=b=v=null;return u}var k=ub,g=Jb,m;if(m=arguments.length)return k=$g,g=ah,3===m&&(c=f,a=d,f=d=0),e(b);e.x=function(b){return arguments.length?(k=b,e):k};e.y=function(b){return arguments.length?(g=b,e):g};e.extent=function(b){if(!arguments.length)return null==d?null:[[d,f],[a,c]];null==b?d=f=a=c=null:(d=+b[0][0],f=+b[0][1],a=+b[1][0],c=+b[1][1]);return e};
e.size=function(b){if(!arguments.length)return null==d?null:[a-d,c-f];null==b?d=f=a=c=null:(d=f=0,a=+b[0],c=+b[1]);return e};return e};y.interpolateRgb=ud;y.interpolateObject=df;y.interpolateNumber=Wa;y.interpolateString=ef;var vd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wd=new RegExp(vd.source,"g");y.interpolate=mb;y.interpolators=[function(b,d){var f=typeof d;return("string"===f?Wb.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?ud:ef:d instanceof Ca?ud:Array.isArray(d)?rc:"object"===f&&
isNaN(d)?df:Wa)(b,d)}];y.interpolateArray=rc;var fg=function(){return A},mi=y.map({linear:fg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return dh},cubic:function(){return eh},sin:function(){return gh},exp:function(){return hh},circle:function(){return ih},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var f=d/La*Math.asin(1/b);else b=1,f=d/4;return function(a){return 1+b*Math.pow(2,-10*a)*Math.sin((a-f)*La/d)}},back:function(b){b||(b=1.70158);
return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return jh}}),ni=y.map({"in":A,out:ff,"in-out":gf,"out-in":function(b){return gf(ff(b))}});y.ease=function(b){var d=b.indexOf("-"),f=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):"in",f=mi.get(f)||fg,d=ni.get(d)||A;return ch(d(f.apply(null,Vf.call(arguments,1))))};y.interpolateHcl=function(b,d){b=y.hcl(b);d=y.hcl(d);var f=b.h,a=b.c,c=b.l,e=d.h-f,g=d.c-a,h=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.c:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>
e&&(e+=360);return function(b){return ua(f+e*b,a+g*b,c+h*b)+""}};y.interpolateHsl=function(b,d){b=y.hsl(b);d=y.hsl(d);var f=b.h,a=b.s,c=b.l,e=d.h-f,g=d.s-a,h=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.s:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>e&&(e+=360);return function(b){return ya(f+e*b,a+g*b,c+h*b)+""}};y.interpolateLab=function(b,d){b=y.lab(b);d=y.lab(d);var f=b.l,a=b.a,c=b.b,e=d.l-f,g=d.a-a,h=d.b-c;return function(b){return Db(f+e*b,a+g*b,c+h*b)+""}};y.interpolateRound=hf;y.transform=function(b){var d=
Fa.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(b){if(null!=b){d.setAttribute("transform",b);var f=d.transform.baseVal.consolidate()}return new jf(f?f.matrix:oi)})(b)};jf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=lf;y.layout={};y.layout.bundle=function(){return function(b){for(var d=[],f=-1,a=b.length;++f<a;)d.push(qh(b[f]));return d}};
y.layout.chord=function(){function b(){var b={},f=[],k=y.range(g),m=[],n,x;a=[];c=[];var p=0;for(n=-1;++n<g;){var t=0;for(x=-1;++x<g;)t+=e[n][x];f.push(t);m.push(y.range(g));p+=t}l&&k.sort(function(b,d){return l(f[b],f[d])});q&&m.forEach(function(b,d){b.sort(function(b,f){return q(e[d][b],e[d][f])})});p=(La-h*g)/p;t=0;for(n=-1;++n<g;){var z=t;for(x=-1;++x<g;){var v=k[n];var J=m[v][x],G=e[v][J],N=t,u=t+=G*p;b[v+"-"+J]={index:v,subindex:J,startAngle:N,endAngle:u,value:G}}c[v]={index:v,startAngle:z,
endAngle:t,value:f[v]};t+=h}for(n=-1;++n<g;)for(x=n-1;++x<g;)v=b[n+"-"+x],k=b[x+"-"+n],(v.value||k.value)&&a.push(v.value<k.value?{source:k,target:v}:{source:v,target:k});r&&d()}function d(){a.sort(function(b,d){return r((b.source.value+b.target.value)/2,(d.source.value+d.target.value)/2)})}var f={},a,c,e,g,h=0,l,q,r;f.matrix=function(b){if(!arguments.length)return e;g=(e=b)&&e.length;a=c=null;return f};f.padding=function(b){if(!arguments.length)return h;h=b;a=c=null;return f};f.sortGroups=function(b){if(!arguments.length)return l;
l=b;a=c=null;return f};f.sortSubgroups=function(b){if(!arguments.length)return q;q=b;a=null;return f};f.sortChords=function(b){if(!arguments.length)return r;r=b;a&&d();return f};f.chords=function(){a||b();return a};f.groups=function(){c||b();return c};return f};y.layout.force=function(){function b(b){return function(d,f,a,c){if(d.point!==b){var e=d.cx-b.x;a=d.cy-b.y;c-=f;f=e*e+a*a;if(c*c/t<f)return f<x&&(f=d.charge/f,b.px-=e*f,b.py-=a*f),!0;d.point&&f&&f<x&&(f=d.pointCharge/f,b.px-=e*f,b.py-=a*f)}return!d.charge}}
function d(b){b.px=y.event.x;b.py=y.event.y;f.resume()}var f={},a=y.dispatch("start","tick","end"),c,e=[1,1],g,h,l=.9,q=pi,r=qi,n=-30,x=ri,p=.1,t=.64,v=[],J=[],G,N,u;f.tick=function(){if(.005>(h*=.99))return c=null,a.end({type:"end",alpha:h=0}),!0;var d=v.length,f=J.length,k,g;for(k=0;k<f;++k){var m=J[k];var q=m.source;var r=m.target;var x=r.x-q.x;var t=r.y-q.y;if(g=x*x+t*t)g=h*N[k]*((g=Math.sqrt(g))-G[k])/g,x*=g,t*=g,r.x-=x*(g=q.weight+r.weight?q.weight/(q.weight+r.weight):.5),r.y-=t*g,q.x+=x*(g=
1-g),q.y+=t*g}if(g=h*p)if(x=e[0]/2,t=e[1]/2,k=-1,g)for(;++k<d;)m=v[k],m.x+=(x-m.x)*g,m.y+=(t-m.y)*g;if(n)for(nf(f=y.geom.quadtree(v),h,u),k=-1;++k<d;)(m=v[k]).fixed||f.visit(b(m));for(k=-1;++k<d;)m=v[k],m.fixed?(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*l,m.y-=(m.py-(m.py=m.y))*l);a.tick({type:"tick",alpha:h})};f.nodes=function(b){if(!arguments.length)return v;v=b;return f};f.links=function(b){if(!arguments.length)return J;J=b;return f};f.size=function(b){if(!arguments.length)return e;e=b;return f};
f.linkDistance=function(b){if(!arguments.length)return q;q="function"===typeof b?b:+b;return f};f.distance=f.linkDistance;f.linkStrength=function(b){if(!arguments.length)return r;r="function"===typeof b?b:+b;return f};f.friction=function(b){if(!arguments.length)return l;l=+b;return f};f.charge=function(b){if(!arguments.length)return n;n="function"===typeof b?b:+b;return f};f.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(x);x=b*b;return f};f.gravity=function(b){if(!arguments.length)return p;
p=+b;return f};f.theta=function(b){if(!arguments.length)return Math.sqrt(t);t=b*b;return f};f.alpha=function(b){if(!arguments.length)return h;b=+b;h?0<b?h=b:(c.c=null,c.t=NaN,c=null,a.end({type:"end",alpha:h=0})):0<b&&(a.start({type:"start",alpha:h=b}),c=Yb(f.tick));return f};f.start=function(){function b(b,f){if(!m){m=Array(a);for(k=0;k<a;++k)m[k]=[];for(k=0;k<c;++k){var e=J[k];m[e.source.index].push(e.target);m[e.target.index].push(e.source)}}for(var e=m[d],k=-1,g=e.length,h;++k<g;)if(!isNaN(h=
e[k][b]))return h;return Math.random()*f}var d,a=v.length,c=J.length,k=e[0],g=e[1],m,h;for(d=0;d<a;++d)(h=v[d]).index=d,h.weight=0;for(d=0;d<c;++d)h=J[d],"number"==typeof h.source&&(h.source=v[h.source]),"number"==typeof h.target&&(h.target=v[h.target]),++h.source.weight,++h.target.weight;for(d=0;d<a;++d)h=v[d],isNaN(h.x)&&(h.x=b("x",k)),isNaN(h.y)&&(h.y=b("y",g)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);G=[];if("function"===typeof q)for(d=0;d<c;++d)G[d]=+q.call(this,J[d],d);else for(d=0;d<
c;++d)G[d]=q;N=[];if("function"===typeof r)for(d=0;d<c;++d)N[d]=+r.call(this,J[d],d);else for(d=0;d<c;++d)N[d]=r;u=[];if("function"===typeof n)for(d=0;d<a;++d)u[d]=+n.call(this,v[d],d);else for(d=0;d<a;++d)u[d]=n;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){g||(g=y.behavior.drag().origin(A).on("dragstart.force",rh).on("drag.force",d).on("dragend.force",sh));if(!arguments.length)return g;this.on("mouseover.force",th).on("mouseout.force",
uh).call(g)};return y.rebind(f,a,"on")};var pi=20,qi=1,ri=Infinity;y.layout.hierarchy=function(){function b(c){var e,k,g=[c],m=[],h;for(c.depth=0;null!=(h=g.pop());)if(m.push(h),(e=f.call(b,h,h.depth))&&(k=e.length)){for(var l;0<=--k;)g.push(l=e[k]),l.parent=h,l.depth=h.depth+1;a&&(h.value=0);h.children=e}else a&&(h.value=+a.call(b,h,h.depth)||0),delete h.children;Sa(c,function(b){var f,c;d&&(f=b.children)&&f.sort(d);a&&(c=b.parent)&&(c.value+=b.value)});return m}var d=yh,f=wh,a=xh;b.sort=function(f){if(!arguments.length)return d;
d=f;return b};b.children=function(d){if(!arguments.length)return f;f=d;return b};b.value=function(d){if(!arguments.length)return a;a=d;return b};b.revalue=function(d){a&&(Qb(d,function(b){b.children&&(b.value=0)}),Sa(d,function(d){var f;d.children||(d.value=+a.call(b,d,d.depth)||0);if(f=d.parent)f.value+=d.value}));return d};return b};y.layout.partition=function(){function b(d,f,a,c){var e,k=d.children;d.x=f;d.y=d.depth*c;d.dx=a;d.dy=c;if(k&&(e=k.length)){var g=-1,m;for(a=d.value?a/d.value:0;++g<
e;)b(m=k[g],f,d=m.value*a,c),f+=d}}function d(b){var f;b=b.children;var a=0;if(b&&(f=b.length))for(var c=-1;++c<f;)a=Math.max(a,d(b[c]));return 1+a}function f(f,e){var k=a.call(this,f,e);b(k[0],0,c[0],c[1]/d(k[0]));return k}var a=y.layout.hierarchy(),c=[1,1];f.size=function(b){if(!arguments.length)return c;c=b;return f};return Pb(f,a)};y.layout.pie=function(){function b(k){var g=k.length,m=k.map(function(f,a){return+d.call(b,f,a)}),h=+("function"===typeof a?a.apply(this,arguments):a),l=("function"===
typeof c?c.apply(this,arguments):c)-h,q=Math.min(Math.abs(l)/g,+("function"===typeof e?e.apply(this,arguments):e)),r=q*(0>l?-1:1),n=y.sum(m),x=n?(l-g*r)/n:0,g=y.range(g),p=[],t;null!=f&&g.sort(f===gg?function(b,d){return m[d]-m[b]}:function(b,d){return f(k[b],k[d])});g.forEach(function(b){p[b]={data:k[b],value:t=m[b],startAngle:h,endAngle:h+=t*x+r,padAngle:q}});return p}var d=Number,f=gg,a=0,c=La,e=0;b.value=function(f){if(!arguments.length)return d;d=f;return b};b.sort=function(d){if(!arguments.length)return f;
f=d;return b};b.startAngle=function(d){if(!arguments.length)return a;a=d;return b};b.endAngle=function(d){if(!arguments.length)return c;c=d;return b};b.padAngle=function(d){if(!arguments.length)return e;e=d;return b};return b};var gg={};y.layout.stack=function(){function b(k,m){if(!(n=k.length))return k;var h=k.map(function(f,a){return d.call(b,f,a)}),l=h.map(function(d){return d.map(function(d,f){return[e.call(b,d,f),g.call(b,d,f)]})}),q=f.call(b,l,m),h=y.permute(h,q),l=y.permute(l,q),q=a.call(b,
l,m),r=h[0].length,n,x,p,t;for(p=0;p<r;++p)for(c.call(b,h[0][p],t=q[p],l[0][p][1]),x=1;x<n;++x)c.call(b,h[x][p],t+=l[x-1][p][1],l[x][p][1]);return k}var d=A,f=xd,a=yd,c=Bh,e=zh,g=Ah;b.values=function(f){if(!arguments.length)return d;d=f;return b};b.order=function(d){if(!arguments.length)return f;f="function"===typeof d?d:si.get(d)||xd;return b};b.offset=function(d){if(!arguments.length)return a;a="function"===typeof d?d:ti.get(d)||yd;return b};b.x=function(d){if(!arguments.length)return e;e=d;return b};
b.y=function(d){if(!arguments.length)return g;g=d;return b};b.out=function(d){if(!arguments.length)return c;c=d;return b};return b};var si=y.map({"inside-out":function(b){var d=b.length,f=b.map(Ch),a=b.map(Dh),c=y.range(d).sort(function(b,d){return f[b]-f[d]}),e=0,g=0,h=[],l=[];for(b=0;b<d;++b){var q=c[b];e<g?(e+=a[q],h.push(q)):(g+=a[q],l.push(q))}return l.reverse().concat(h)},reverse:function(b){return y.range(b.length).reverse()},"default":xd}),ti=y.map({silhouette:function(b){var d=b.length,f=
b[0].length,a=[],c=0,e,g,h,l=[];for(g=0;g<f;++g){for(h=e=0;e<d;e++)h+=b[e][g][1];h>c&&(c=h);a.push(h)}for(g=0;g<f;++g)l[g]=(c-a[g])/2;return l},wiggle:function(b){var d=b.length,f=b[0],a=f.length,c,e,g,h,l,q,r,n=[];n[0]=q=r=0;for(e=1;e<a;++e){for(g=c=0;c<d;++c)g+=b[c][e][1];var x=c=0;for(l=f[e][0]-f[e-1][0];c<d;++c){var p=0;for(h=(b[c][e][1]-b[c][e-1][1])/(2*l);p<c;++p)h+=(b[p][e][1]-b[p][e-1][1])/l;x+=h*b[c][e][1]}n[e]=q-=g?x/g*l:0;q<r&&(r=q)}for(e=0;e<a;++e)n[e]-=r;return n},expand:function(b){var d=
b.length,f=b[0].length,a=1/d,c,e,g,h=[];for(e=0;e<f;++e){for(g=c=0;c<d;c++)g+=b[c][e][1];if(g)for(c=0;c<d;c++)b[c][e][1]/=g;else for(c=0;c<d;c++)b[c][e][1]=a}for(e=0;e<f;++e)h[e]=0;return h},zero:yd});y.layout.histogram=function(){function b(b,e){var k=[],g=b.map(f,this),h=a.call(this,g,e),m=c.call(this,h,g,e);e=-1;for(var l=g.length,q=m.length-1,r=d?1:1/l;++e<q;){var n=k[e]=[];n.dx=m[e+1]-(n.x=m[e]);n.y=0}if(0<q)for(e=-1;++e<l;)n=g[e],n>=h[0]&&n<=h[1]&&(n=k[y.bisect(m,n,1,q)-1],n.y+=r,n.push(b[e]));
return k}var d=!0,f=Number,a=Gh,c=Fh;b.value=function(d){if(!arguments.length)return f;f=d;return b};b.range=function(d){if(!arguments.length)return a;a=pa(d);return b};b.bins=function(d){if(!arguments.length)return c;c="number"===typeof d?function(b){return of(b,d)}:pa(d);return b};b.frequency=function(f){if(!arguments.length)return d;d=!!f;return b};return b};y.layout.pack=function(){function b(b,e){var k=d.call(this,b,e),g=k[0],h=a[0],m=a[1],l=null==c?Math.sqrt:"function"===typeof c?c:function(){return c};
g.x=g.y=0;Sa(g,function(b){b.r=+l(b.value)});Sa(g,rf);if(f){var q=f*(c?1:Math.max(2*g.r/h,2*g.r/m))/2;Sa(g,function(b){b.r+=q});Sa(g,rf);Sa(g,function(b){b.r-=q})}tf(g,h/2,m/2,c?1:1/Math.max(2*g.r/h,2*g.r/m));return k}var d=y.layout.hierarchy().sort(Hh),f=0,a=[1,1],c;b.size=function(d){if(!arguments.length)return a;a=d;return b};b.radius=function(d){if(!arguments.length)return c;c=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return f;f=+d;return b};return Pb(b,
d)};y.layout.tree=function(){function b(b,k){var m=e.call(this,b,k),q=m[0],r=d(q);Sa(r,f);r.parent.m=-r.z;Qb(r,a);if(l)Qb(q,c);else{var n=q,x=q,p=q;Qb(q,function(b){b.x<n.x&&(n=b);b.x>x.x&&(x=b);b.depth>p.depth&&(p=b)});var t=g(n,x)/2-n.x,v=h[0]/(x.x+g(x,n)/2+t),J=h[1]/(p.depth||1);Qb(q,function(b){b.x=(b.x+t)*v;b.y=b.depth*J})}return m}function d(b){b={A:null,children:[b]};for(var d=[b],f;null!=(f=d.pop());)for(var a=f.children,c,e=0,g=a.length;e<g;++e)d.push((a[e]=c={_:a[e],parent:f,children:(c=
a[e].children)&&c.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=c);return b.children[0]}function f(b){var d=b.children,f=b.parent.children,a=b.i?f[b.i-1]:null;if(d.length){for(var c=0,e=0,k=b.children,h=k.length,m;0<=--h;)m=k[h],m.z+=c,m.m+=c,c+=m.s+(e+=m.c);d=(d[0].z+d[d.length-1].z)/2;a?(b.z=a.z+g(b._,a._),b.m=b.z-d):b.z=d}else a&&(b.z=a.z+g(b._,a._));d=b.parent;f=b.parent.A||f[0];if(a){e=c=b;k=c.parent.children[0];h=c.m;m=e.m;for(var l=a.m,q=k.m,r;a=Bd(a),c=Ad(c),a&&c;){k=Ad(k);e=Bd(e);
e.a=b;r=a.z+l-c.z-h+g(a._,c._);if(0<r){var n=a.a.parent===b.parent?a.a:f,x=b,p=r,t=p/(x.i-n.i);x.c-=t;x.s+=p;n.c+=t;x.z+=p;x.m+=p;h+=r;m+=r}l+=a.m;h+=c.m;q+=k.m;m+=e.m}a&&!Bd(e)&&(e.t=a,e.m+=l-m);c&&!Ad(k)&&(k.t=c,k.m+=h-q,f=b)}d.A=f}function a(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function c(b){b.x*=h[0];b.y=b.depth*h[1]}var e=y.layout.hierarchy().sort(null).value(null),g=uf,h=[1,1],l=null;b.separation=function(d){if(!arguments.length)return g;g=d;return b};b.size=function(d){if(!arguments.length)return l?
null:h;l=null==(h=d)?c:null;return b};b.nodeSize=function(d){if(!arguments.length)return l?h:null;l=null==(h=d)?null:c;return b};return Pb(b,e)};y.layout.cluster=function(){function b(b,e){var g=d.call(this,b,e),k=g[0],h,m=0;Sa(k,function(b){var d=b.children;d&&d.length?(b.x=Lh(d),b.y=Kh(d)):(b.x=h?m+=f(b,h):0,b.y=0,h=b)});var l=vf(k),q=wf(k),r=l.x-f(l,q)/2,n=q.x+f(q,l)/2;Sa(k,c?function(b){b.x=(b.x-k.x)*a[0];b.y=(k.y-b.y)*a[1]}:function(b){b.x=(b.x-r)/(n-r)*a[0];b.y=(1-(k.y?b.y/k.y:1))*a[1]});return g}
var d=y.layout.hierarchy().sort(null).value(null),f=uf,a=[1,1],c=!1;b.separation=function(d){if(!arguments.length)return f;f=d;return b};b.size=function(d){if(!arguments.length)return c?null:a;c=null==(a=d);return b};b.nodeSize=function(d){if(!arguments.length)return c?a:null;c=null!=(a=d);return b};return Pb(b,d)};y.layout.treemap=function(){function b(b,d){for(var f=-1,a=b.length,c,e;++f<a;)e=(c=b[f]).value*(0>d?0:d),c.area=isNaN(e)||0>=e?0:e}function d(f){var c=f.children;if(c&&c.length){var e=
q(f),g=[],k=c.slice(),h=Infinity,m,l="slice"===x?e.dx:"dice"===x?e.dy:"slice-dice"===x?f.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);b(k,e.dx*e.dy/f.value);for(g.area=0;0<(f=k.length);){g.push(f=k[f-1]);g.area+=f.area;if(!(f="squarify"!==x)){f=l;for(var r=g.area,n=0,t=Infinity,v=-1,J=g.length;++v<J;)if(m=g[v].area)m<t&&(t=m),m>n&&(n=m);r*=r;f*=f;f=(m=r?Math.max(f*n*p/r,r/(f*t*p)):Infinity)<=h}f?(k.pop(),h=m):(g.area-=g.pop().area,a(g,l,e,!1),l=Math.min(e.dx,e.dy),g.length=g.area=0,h=Infinity)}g.length&&
(a(g,l,e,!0),g.length=g.area=0);c.forEach(d)}}function f(d){var c=d.children;if(c&&c.length){var e=q(d),g=c.slice(),k=[];b(g,e.dx*e.dy/d.value);for(k.area=0;d=g.pop();)k.push(d),k.area+=d.area,null!=d.z&&(a(k,d.z?e.dx:e.dy,e,!g.length),k.length=k.area=0);c.forEach(f)}}function a(b,d,f,a){var c=-1,e=b.length,k=f.x,h=f.y,m=d?g(b.area/d):0;if(d==f.dx){if(a||m>f.dy)m=f.dy;for(;++c<e;){var l=b[c];l.x=k;l.y=h;l.dy=m;k+=l.dx=Math.min(f.x+f.dx-k,m?g(l.area/m):0)}l.z=!0;l.dx+=f.x+f.dx-k;f.y+=m;f.dy-=m}else{if(a||
m>f.dx)m=f.dx;for(;++c<e;)l=b[c],l.x=k,l.y=h,l.dx=m,h+=l.dy=Math.min(f.y+f.dy-h,m?g(l.area/m):0);l.z=!1;l.dy+=f.y+f.dy-h;f.x+=m;f.dx-=m}}function c(a){a=n||e(a);var c=a[0];c.x=c.y=0;c.value?(c.dx=h[0],c.dy=h[1]):c.dx=c.dy=0;n&&e.revalue(c);b([c],c.dx*c.dy/c.value);(n?f:d)(c);r&&(n=a);return a}var e=y.layout.hierarchy(),g=Math.round,h=[1,1],l=null,q=Cd,r=!1,n,x="squarify",p=.5*(1+Math.sqrt(5));c.size=function(b){if(!arguments.length)return h;h=b;return c};c.padding=function(b){function d(d){var f=
b.call(c,d,d.depth);return null==f?Cd(d):xf(d,"number"===typeof f?[f,f,f,f]:f)}function f(d){return xf(d,b)}if(!arguments.length)return l;var a;q=null==(l=b)?Cd:"function"===(a=typeof b)?d:"number"===a?(b=[b,b,b,b],f):f;return c};c.round=function(b){if(!arguments.length)return g!=Number;g=b?Math.round:Number;return c};c.sticky=function(b){if(!arguments.length)return r;r=b;n=null;return c};c.ratio=function(b){if(!arguments.length)return p;p=b;return c};c.mode=function(b){if(!arguments.length)return x;
x=b+"";return c};return Pb(c,e)};y.random={normal:function(b,d){var f=arguments.length;2>f&&(d=1);1>f&&(b=0);return function(){do{var f=2*Math.random()-1;var a=2*Math.random()-1;a=f*f+a*a}while(!a||1<a);return b+d*f*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var b=y.random.normal.apply(y,arguments);return function(){return Math.exp(b())}},bates:function(b){var d=y.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,f=0;f<b;f++)d+=Math.random();
return d}}};y.scale={};var Nh={floor:A,ceil:A};y.scale.linear=function(){return zf([0,1],[0,1],mb,!1)};var Qh={s:1,g:1,p:1,r:1,e:1};y.scale.log=function(){return Bf(y.scale.linear().domain([0,1]),10,!0,[1,10])};var Cf=y.format(".0e"),Rh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};y.scale.pow=function(){return Df(y.scale.linear(),1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(.5)};y.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};y.scale.category10=
function(){return y.scale.ordinal().range(ui)};y.scale.category20=function(){return y.scale.ordinal().range(vi)};y.scale.category20b=function(){return y.scale.ordinal().range(wi)};y.scale.category20c=function(){return y.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Vb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Vb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Vb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Vb);y.scale.quantile=function(){return Ff([],[])};y.scale.quantize=function(){return Gf(0,1,[0,1])};y.scale.threshold=
function(){return Hf([.5],[0,1])};y.scale.identity=function(){return If([0,1])};y.svg={};y.svg.arc=function(){function b(){var b=Math.max(0,+f.apply(this,arguments)),k=Math.max(0,+a.apply(this,arguments)),m=g.apply(this,arguments)-va,q=h.apply(this,arguments)-va,r=Math.abs(q-m),n=m>q?0:1;if(k<b){var x=k;k=b;b=x}if(r>=ji)return d(k,n)+(b?d(b,1-n):"")+"Z";var p,t=0,v=0,J=[];if(p=(+l.apply(this,arguments)||0)/2){var G=e===Oc?Math.sqrt(b*b+k*k):+e.apply(this,arguments);n||(v*=-1);k&&(v=na(G/k*Math.sin(p)));
b&&(t=na(G/b*Math.sin(p)))}if(k){G=k*Math.cos(m+v);p=k*Math.sin(m+v);var N=k*Math.cos(q-v);var u=k*Math.sin(q-v);var z=Math.abs(q-m-2*v)<=ba?0:1;v&&wc(G,p,N,u)===n^z&&(N=(m+q)/2,G=k*Math.cos(N),p=k*Math.sin(N),N=u=null)}else G=p=0;if(b){v=b*Math.cos(q-t);var S=b*Math.sin(q-t);var F=b*Math.cos(m+t);var W=b*Math.sin(m+t);var y=Math.abs(m-q+2*t)<=ba?0:1;t&&wc(v,S,F,W)===1-n^y&&(F=(m+q)/2,v=b*Math.cos(F),S=b*Math.sin(F),F=W=null)}else v=S=0;1E-6<r&&.001<(x=Math.min(Math.abs(k-b)/2,+c.apply(this,arguments)))?
(y=b<k^n?0:1,z=m=x,r<ba&&(r=null==F?[v,S]:null==N?[G,p]:pd([G,p],[F,W],[N,u],[v,S]),z=G-r[0],m=p-r[1],q=N-r[0],t=u-r[1],m=1/Math.sin(Math.acos((z*q+m*t)/(Math.sqrt(z*z+m*m)*Math.sqrt(q*q+t*t)))/2),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),z=Math.min(x,(b-r)/(m-1)),m=Math.min(x,(k-r)/(m+1))),null!=N?(r=xc(null==F?[v,S]:[F,W],[G,p],k,m,n),q=xc([N,u],[v,S],k,m,n),x===m?J.push("M",r[0],"A",m,",",m," 0 0,",y," ",r[1],"A",k,",",k," 0 ",1-n^wc(r[1][0],r[1][1],q[1][0],q[1][1]),",",n," ",q[1],"A",m,",",m," 0 0,",y,
" ",q[0]):J.push("M",r[0],"A",m,",",m," 0 1,",y," ",q[0])):J.push("M",G,",",p),null!=F?(k=xc([G,p],[F,W],b,-z,n),N=xc([v,S],null==N?[G,p]:[N,u],b,-z,n),x===z?J.push("L",N[0],"A",z,",",z," 0 0,",y," ",N[1],"A",b,",",b," 0 ",n^wc(N[1][0],N[1][1],k[1][0],k[1][1]),",",1-n," ",k[1],"A",z,",",z," 0 0,",y," ",k[0]):J.push("L",N[0],"A",z,",",z," 0 0,",y," ",k[0])):J.push("L",v,",",S)):(J.push("M",G,",",p),null!=N&&J.push("A",k,",",k," 0 ",z,",",n," ",N,",",u),J.push("L",v,",",S),null!=F&&J.push("A",b,",",
b," 0 ",y,",",1-n," ",F,",",W));J.push("Z");return J.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var f=Th,a=Uh,c=Sh,e=Oc,g=Jf,h=Kf,l=Vh;b.innerRadius=function(d){if(!arguments.length)return f;f=pa(d);return b};b.outerRadius=function(d){if(!arguments.length)return a;a=pa(d);return b};b.cornerRadius=function(d){if(!arguments.length)return c;c=pa(d);return b};b.padRadius=function(d){if(!arguments.length)return e;e=d==Oc?Oc:pa(d);return b};b.startAngle=
function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=pa(d);return b};b.padAngle=function(d){if(!arguments.length)return l;l=pa(d);return b};b.centroid=function(){var b=(+f.apply(this,arguments)+ +a.apply(this,arguments))/2,d=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-va;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Oc="auto";y.svg.line=function(){return Lf(A)};var Fd=y.map({linear:Pa,"linear-closed":Mf,step:function(b){for(var d=
0,f=b.length,a=b[0],c=[a[0],",",a[1]];++d<f;)c.push("H",(a[0]+(a=b[d])[0])/2,"V",a[1]);1<f&&c.push("H",a[0]);return c.join("")},"step-before":Gd,"step-after":Hd,basis:Nf,"basis-open":function(b){if(4>b.length)return Pa(b);for(var d=[],f=-1,a=b.length,c,e=[0],g=[0];3>++f;)c=b[f],e.push(c[0]),g.push(c[1]);d.push(Ma(db,e)+","+Ma(db,g));for(--f;++f<a;)c=b[f],e.shift(),e.push(c[0]),g.shift(),g.push(c[1]),Jd(d,e,g);return d.join("")},"basis-closed":function(b){for(var d,f=-1,a=b.length,c=a+4,e,g=[],h=[];4>
++f;)e=b[f%a],g.push(e[0]),h.push(e[1]);d=[Ma(db,g),",",Ma(db,h)];for(--f;++f<c;)e=b[f%a],g.shift(),g.push(e[0]),h.shift(),h.push(e[1]),Jd(d,g,h);return d.join("")},bundle:function(b,d){var f=b.length-1;if(f)for(var a=b[0][0],c=b[0][1],e=b[f][0]-a,g=b[f][1]-c,h=-1,l,q;++h<=f;)l=b[h],q=h/f,l[0]=d*l[0]+(1-d)*(a+q*e),l[1]=d*l[1]+(1-d)*(c+q*g);return Nf(b)},cardinal:function(b,d){return 3>b.length?Pa(b):b[0]+yc(b,Id(b,d))},"cardinal-open":function(b,d){return 4>b.length?Pa(b):b[1]+yc(b.slice(1,-1),Id(b,
d))},"cardinal-closed":function(b,d){return 3>b.length?Mf(b):b[0]+yc((b.push(b[0]),b),Id([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Pa(b);else{var d=b[0],f=[],a;var c=0;var e=b.length-1;var g=[];var h=b[1];for(a=g[0]=Kd(b[0],h);++c<e;)g[c]=(a+(a=Kd(h,h=b[c+1])))/2;g[c]=a;for(var l=-1,q=b.length-1;++l<q;)c=Kd(b[l],b[l+1]),1E-6>ea(c)?g[l]=g[l+1]=0:(e=g[l]/c,h=g[l+1]/c,a=e*e+h*h,9<a&&(a=3*c/Math.sqrt(a),g[l]=a*e,g[l+1]=a*h));for(l=-1;++l<=q;)a=(b[Math.min(q,l+1)][0]-b[Math.max(0,
l-1)][0])/(6*(1+g[l]*g[l])),f.push([a||0,g[l]*a||0]);b=d+yc(b,f)}return b}});Fd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],db=[0,1/6,2/3,1/6];y.svg.line.radial=function(){var b=Lf(Qf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Gd.reverse=Hd;Hd.reverse=Gd;y.svg.area=function(){return Rf(A)};y.svg.area.radial=function(){var b=Rf(Qf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;
b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};y.svg.chord=function(){function b(b,e){var g=d(this,a,b,e),k=d(this,c,b,e);return"M"+g.p0+f(g.r,g.p1,g.a1-g.a0)+(g.a0==k.a0&&g.a1==k.a1?"Q 0,0 "+g.p0:"Q 0,0 "+k.p0+f(k.r,k.p1,k.a1-k.a0)+("Q 0,0 "+g.p0))+"Z"}function d(b,d,f,a){var c=d.call(b,f,a);d=e.call(b,c,a);f=g.call(b,c,a)-va;b=h.call(b,c,a)-va;return{r:d,a0:f,a1:b,p0:[d*Math.cos(f),d*Math.sin(f)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function f(b,d,f){return"A"+b+","+b+" 0 "+ +(f>
ba)+",1 "+d}var a=ld,c=md,e=Wh,g=Jf,h=Kf;b.radius=function(d){if(!arguments.length)return e;e=pa(d);return b};b.source=function(d){if(!arguments.length)return a;a=pa(d);return b};b.target=function(d){if(!arguments.length)return c;c=pa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=pa(d);return b};return b};y.svg.diagonal=function(){function b(b,c){var e=d.call(this,b,c),g=f.call(this,b,c),k=(e.y+g.y)/2,e=
[e,{x:e.x,y:k},{x:g.x,y:k},g],e=e.map(a);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var d=ld,f=md,a=Sf;b.source=function(f){if(!arguments.length)return d;d=pa(f);return b};b.target=function(d){if(!arguments.length)return f;f=pa(d);return b};b.projection=function(d){if(!arguments.length)return a;a=d;return b};return b};y.svg.diagonal.radial=function(){var b=y.svg.diagonal(),d=Sf,f=b.projection;b.projection=function(b){return arguments.length?f(Xh(d=b)):d};return b};y.svg.symbol=function(){function b(b,
a){return(hg.get(d.call(this,b,a))||Tf)(f.call(this,b,a))}var d=Zh,f=Yh;b.type=function(f){if(!arguments.length)return d;d=pa(f);return b};b.size=function(d){if(!arguments.length)return f;f=pa(d);return b};return b};var hg=y.map({circle:Tf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*ig));var d=b*ig;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=
Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Pc);var d=b*Pc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=Math.sqrt(b/Pc);var d=b*Pc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});y.svg.symbolTypes=hg.keys();var Pc=Math.sqrt(3),ig=Math.tan(30*ca);ma.transition=function(b){var d=ob||++jg;b=Md(b);for(var f=[],a,c,e=Qc||{time:Date.now(),ease:fh,delay:0,duration:250},g=-1,h=this.length;++g<h;){f.push(a=
[]);for(var l=this[g],q=-1,r=l.length;++q<r;)(c=l[q])&&zc(c,q,b,d,e),a.push(c)}return Rb(f,b,d)};ma.interrupt=function(b){return this.each(null==b?Cc:Uf(Md(b)))};var Cc=Uf(Md()),za=[],jg=0,ob,Qc;za.call=ma.call;za.empty=ma.empty;za.node=ma.node;za.size=ma.size;y.transition=function(b,d){return b&&b.transition?ob?b.transition(d):b:y.selection().transition(b)};y.transition.prototype=za;za.select=function(b){var d=this.id,f=this.namespace,a=[],c,e,g;b=r(b);for(var h=-1,l=this.length;++h<l;){a.push(c=
[]);for(var q=this[h],n=-1,x=q.length;++n<x;)(g=q[n])&&(e=b.call(g,g.__data__,n,h))?("__data__"in g&&(e.__data__=g.__data__),zc(e,n,f,d,g[f][d]),c.push(e)):c.push(null)}return Rb(a,f,d)};za.selectAll=function(b){var d=this.id,f=this.namespace,a=[],c,e;b=K(b);for(var g=-1,h=this.length;++g<h;)for(var l=this[g],q=-1,r=l.length;++q<r;)if(c=l[q]){var n=c[f][d];var x=b.call(c,c.__data__,q,g);a.push(c=[]);for(var p=-1,t=x.length;++p<t;)(e=x[p])&&zc(e,p,f,d,n),c.push(e)}return Rb(a,f,d)};za.filter=function(b){var d=
[],a,c;"function"!==typeof b&&(b=S(b));for(var e=0,g=this.length;e<g;e++){d.push(a=[]);var h=this[e];for(var l=0,q=h.length;l<q;l++)(c=h[l])&&b.call(c,c.__data__,l,e)&&a.push(c)}return Rb(d,this.namespace,this.id)};za.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][a].tween.get(b):la(this,null==d?function(d){d[c][a].tween.remove(b)}:function(f){f[c][a].tween.set(b,d)})};za.attr=function(b,d){function a(){this.removeAttribute(l)}function c(){this.removeAttributeNS(l.space,
l.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(l),a;return d!==b&&(a=h(d,b),function(b){this.setAttribute(l,a(b))})})}function g(b){return null==b?c:(b+="",function(){var d=this.getAttributeNS(l.space,l.local),a;return d!==b&&(a=h(d,b),function(b){this.setAttributeNS(l.space,l.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var h="transform"==b?lf:mb,l=y.ns.qualify(b);return Ld(this,"attr."+b,d,l.local?g:e)};za.attrTween=function(b,
d){function a(b,a){var f=d.call(this,b,a,this.getAttribute(e));return f&&function(b){this.setAttribute(e,f(b))}}function c(b,a){var f=d.call(this,b,a,this.getAttributeNS(e.space,e.local));return f&&function(b){this.setAttributeNS(e.space,e.local,f(b))}}var e=y.ns.qualify(b);return this.tween("attr."+b,e.local?c:a)};za.style=function(b,d,a){function f(){this.style.removeProperty(b)}var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Ld(this,
"style."+b,d,function(d){return null==d?f:(d+="",function(){var f=c(this).getComputedStyle(this,null).getPropertyValue(b),e;return f!==d&&(e=mb(f,d),function(d){this.style.setProperty(b,e(d),a)})})})};za.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(f,e){var g=d.call(this,f,e,c(this).getComputedStyle(this,null).getPropertyValue(b));return g&&function(d){this.style.setProperty(b,g(d),a)}})};za.text=function(b){return Ld(this,"text",b,$h)};za.remove=function(){var b=
this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};za.ease=function(b){var d=this.id,a=this.namespace;if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=y.ease.apply(y,arguments));return la(this,function(f){f[a][d].ease=b})};za.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:la(this,"function"===typeof b?function(f,c,e){f[a][d].delay=+b.call(f,f.__data__,
c,e)}:(b=+b,function(f){f[a][d].delay=b}))};za.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:la(this,"function"===typeof b?function(f,c,e){f[a][d].duration=Math.max(1,b.call(f,f.__data__,c,e))}:(b=Math.max(1,b),function(f){f[a][d].duration=b}))};za.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=Qc,g=ob;try{ob=a,la(this,function(d,f,e){Qc=d[c][a];b.call(d,d.__data__,f,e)})}finally{Qc=e,ob=g}}else la(this,function(f){f=
f[c][a];(f.event||(f.event=y.dispatch("start","end","interrupt"))).on(b,d)});return this};za.transition=function(){for(var b=this.id,d=++jg,a=this.namespace,c=[],e,g,h,l,q=0,r=this.length;q<r;q++){c.push(e=[]);g=this[q];for(var n=0,x=g.length;n<x;n++){if(h=g[n])l=h[a][b],zc(h,n,a,d,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration});e.push(h)}}return Rb(c,a,d)};y.svg.axis=function(){function b(b){b.each(function(){var b=y.select(this),f=this.__chart__||d,k=this.__chart__=d.copy(),
m=null==l?k.ticks?k.ticks.apply(k,h):k.domain():l,r=null==q?k.tickFormat?k.tickFormat.apply(k,h):A:q,n=b.selectAll(".tick").data(m,k),m=n.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),x=y.transition(n.exit()).style("opacity",1E-6).remove(),p=y.transition(n.order()).style("opacity",1),t=Math.max(c,0)+g,v=sc(k),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),y.transition(b));m.append("line");m.append("text");var J=m.select("line"),G=p.select("line"),
n=n.select("text").text(r),N=m.select("text"),u=p.select("text"),S="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){r=ai;var F="x";var W="y";var z="x2";var w="y2";n.attr("dy",0>S?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+v[0]+","+S*e+"V0H"+v[1]+"V"+S*e)}else r=bi,F="y",W="x",z="y2",w="x2",n.attr("dy",".32em").style("text-anchor",0>S?"end":"start"),b.attr("d","M"+S*e+","+v[0]+"H0V"+v[1]+"H"+S*e);J.attr(w,S*c);N.attr(W,S*t);G.attr(z,0).attr(w,S*c);u.attr(F,0).attr(W,S*t);if(k.rangeBand)var E=
k,K=E.rangeBand()/2,f=k=function(b){return E(b)+K};else f.rangeBand?f=k:x.call(r,k,f);m.call(r,f,k);p.call(r,k,k)})}var d=y.scale.linear(),a=kg,c=6,e=6,g=3,h=[10],l=null,q;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;a=d in yi?d+"":kg;return b};b.ticks=function(){if(!arguments.length)return h;h=Qa(arguments);return b};b.tickValues=function(d){if(!arguments.length)return l;l=d;return b};b.tickFormat=function(d){if(!arguments.length)return q;
q=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return g;g=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var kg="bottom",yi={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function b(f){f.each(function(){var f=
y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),c=f.selectAll(".background").data([0]);c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var k=f.selectAll(".resize").data(J,A);k.exit().remove();k.enter().append("g").attr("class",function(b){return"resize "+
b}).style("cursor",function(b){return zi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");k.style("display",b.empty()?"none":null);f=y.transition(f);c=y.transition(c);l&&(k=sc(l),c.attr("x",k[0]).attr("width",k[1]-k[0]),a(f));q&&(k=sc(q),c.attr("y",k[0]).attr("height",k[1]-k[0]),e(f));d(f)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+
r[+/e$/.test(b)]+","+n[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",r[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function e(b){b.select(".extent").attr("y",n[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",n[1]-n[0])}function g(){function f(){var b=y.mouse(m),f=!1;aa&&(b[0]+=aa[0],b[1]+=aa[1]);W||(y.event.altKey?(w||(w=[(r[0]+r[1])/2,(n[0]+n[1])/2]),A[0]=r[+(b[0]<w[0])],A[1]=n[+(b[1]<w[1])]):w=null);S&&g(b,l,0)&&(a(N),f=!0);F&&g(b,q,1)&&(e(N),f=
!0);f&&(d(N),G({type:"brush",mode:W?"move":"resize"}))}function g(b,d,a){var f=sc(d);d=f[0];var c=f[1],f=A[a],e=a?n:r,g=e[1]-e[0];W&&(d-=f,c-=g+f);b=(a?v:t)?Math.max(d,Math.min(c,b[a])):b[a];W?d=(b+=f)+g:(w&&(f=Math.max(d,Math.min(c,2*w[a]-b))),f<b?(d=b,b=f):d=f);if(e[0]!=b||e[1]!=d)return a?p=null:x=null,e[0]=b,e[1]=d,!0}function k(){f();N.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);y.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",
null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);z();G({type:"brushend"})}var m=this,J=y.select(y.event.target),G=h.of(m,arguments),N=y.select(m),u=J.datum(),S=!/^(n|s)$/.test(u)&&l,F=!/^(e|w)$/.test(u)&&q,W=J.classed("extent"),z=oa(m),w,A=y.mouse(m),E=y.select(c(m)).on("keydown.brush",function(){32==y.event.keyCode&&(W||(w=null,A[0]-=r[1],A[1]-=n[1],W=2),U())}).on("keyup.brush",function(){32==y.event.keyCode&&2==W&&(A[0]+=r[1],A[1]+=n[1],
W=0,U())});if(y.event.changedTouches)E.on("touchmove.brush",f).on("touchend.brush",k);else E.on("mousemove.brush",f).on("mouseup.brush",k);N.interrupt().selectAll("*").interrupt();if(W)A[0]=r[0]-A[0],A[1]=n[0]-A[1];else if(u){var K=+/w$/.test(u),u=+/^n/.test(u);var aa=[r[1-K]-A[0],n[1-u]-A[1]];A[0]=r[K];A[1]=n[u]}else y.event.altKey&&(w=A.slice());N.style("pointer-events","none").selectAll(".resize").style("display",null);y.select("body").style("cursor",J.style("cursor"));G({type:"brushstart"});f()}
var h=R(b,"brushstart","brush","brushend"),l=null,q=null,r=[0,0],n=[0,0],x,p,t=!0,v=!0,J=Wd[0];b.event=function(b){b.each(function(){var b=h.of(this,arguments),d={x:r,y:n,i:x,j:p},a=this.__chart__||d;this.__chart__=d;ob?y.select(this).transition().each("start.brush",function(){x=a.i;p=a.j;r=a.x;n=a.y;b({type:"brushstart"})}).tween("brush:brush",function(){var a=rc(r,d.x),f=rc(n,d.y);x=p=null;return function(c){r=d.x=a(c);n=d.y=f(c);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){x=
d.i;p=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return l;l=d;J=Wd[!l<<1|!q];return b};b.y=function(d){if(!arguments.length)return q;q=d;J=Wd[!l<<1|!q];return b};b.clamp=function(d){if(!arguments.length)return l&&q?[t,v]:l?t:q?v:null;l&&q?(t=!!d[0],v=!!d[1]):l?t=!!d:q&&(v=!!d);return b};b.extent=function(d){if(!arguments.length){if(l)if(x){var a=x[0];var f=x[1]}else if(a=
r[0],f=r[1],l.invert&&(a=l.invert(a),f=l.invert(f)),f<a){var c=a;a=f;f=c}if(q)if(p){var e=p[0];var g=p[1]}else e=n[0],g=n[1],q.invert&&(e=q.invert(e),g=q.invert(g)),g<e&&(c=e,e=g,g=c);return l&&q?[[a,e],[f,g]]:l?[a,f]:q&&[e,g]}l&&(a=d[0],f=d[1],q&&(a=a[0],f=f[0]),x=[a,f],l.invert&&(a=l(a),f=l(f)),f<a&&(c=a,a=f,f=c),a!=r[0]||f!=r[1])&&(r=[a,f]);q&&(e=d[0],g=d[1],l&&(e=e[1],g=g[1]),p=[e,g],q.invert&&(e=q(e),g=q(g)),g<e&&(c=e,e=g,g=c),e!=n[0]||g!=n[1])&&(n=[e,g]);return b};b.clear=function(){b.empty()||
(r=[0,0],n=[0,0],x=p=null);return b};b.empty=function(){return!!l&&r[0]==r[1]||!!q&&n[0]==n[1]};return y.rebind(b,h,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Xd=X.format=Zf.timeFormat,lg=Xd.utc,mg=lg("%Y-%m-%dT%H:%M:%S.%LZ");Xd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nd:mg;Nd.parse=function(b){b=new Date(b);return isNaN(b)?
null:b};Nd.toString=mg.toString;X.second=fb(function(b){return new Ea(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});X.seconds=X.second.range;X.seconds.utc=X.second.utc.range;X.minute=fb(function(b){return new Ea(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*Math.floor(d))},function(b){return b.getMinutes()});X.minutes=X.minute.range;X.minutes.utc=X.minute.utc.range;X.hour=fb(function(b){var d=b.getTimezoneOffset()/
60;return new Ea(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});X.hours=X.hour.range;X.hours.utc=X.hour.utc.range;X.month=fb(function(b){b=X.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});X.months=X.month.range;X.months.utc=X.month.utc.range;var Ac=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Yd=[[X.second,1],
[X.second,5],[X.second,15],[X.second,30],[X.minute,1],[X.minute,5],[X.minute,15],[X.minute,30],[X.hour,1],[X.hour,3],[X.hour,6],[X.hour,12],[X.day,1],[X.day,2],[X.week,1],[X.month,1],[X.month,3],[X.year,1]],Ai=Xd.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],
["%B",function(b){return b.getMonth()}],["%Y",Gb]]),ci={range:function(b,d,a){return y.range(Math.ceil(b/a)*a,+d,a).map(nb)},floor:A,ceil:A};Yd.year=X.year;X.scale=function(){return Od(y.scale.linear(),Yd,Ai)};var ng=Yd.map(function(b){return[b[0].utc,b[1]]}),Bi=lg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&
1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Gb]]);ng.year=X.year.utc;X.scale.utc=function(){return Od(y.scale.linear(),ng,Bi)};y.text=$c(function(b){return b.responseText});y.json=function(b,d){return Xb(b,"application/json",di,d)};y.html=function(b,d){return Xb(b,"text/html",ei,d)};y.xml=$c(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=y,define(y)):"object"===typeof module&&module.exports?
module.exports=y:this.d3=y}();
(function(){var c={dev:!1};c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.logs={};c.dom={};c.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),g=this,t=function(){},l=function(){return g.apply(this instanceof t&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};
t.prototype=this.prototype;l.prototype=new t;return l});c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(a){c.logs.endTime=+new Date;c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)}));c.log=function(){c.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):c.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,
console).apply(console,arguments);return arguments[arguments.length-1]};c.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};c.render=function(a){a=a||1;c.render.active=!0;c.dispatch.render_start();var e=function(){for(var g,t,l=0;l<a&&(t=c.render.queue[l]);l++)g=t.generate(),typeof t.callback==typeof Function&&t.callback(g);c.render.queue.splice(0,l);c.render.queue.length?setTimeout(e):(c.dispatch.render_end(),c.render.active=!1)};setTimeout(e)};
c.render.active=!1;c.render.queue=[];c.addGraph=function(a,e){typeof a===typeof Function&&(a={generate:a,callback:e});c.render.queue.push(a);c.render.active||c.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=c);"undefined"!==typeof window&&(window.nv=c);c.dom.write=function(a){return void 0!==window.fastdom?fastdom.write(a):a()};c.dom.read=function(a){return void 0!==window.fastdom?fastdom.read(a):a()};c.interactiveGuideline=function(){function a(H){H.each(function(B){function C(){var c=
d3.mouse(this),g=c[0],c=c[1],h=!0,t=!1;w&&(g=d3.event.offsetX,c=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(h=!1),d3.event.target.className.baseVal.match("nv-legend")&&(t=!0));h&&(g-=l.left,c-=l.top);0>g||0>c||g>E||c>A||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||t?w&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(e.nvPointerEventsClass))||(p.elementMouseout({mouseX:g,
mouseY:c}),a.renderGuideLine(null),e.hidden(!0)):(e.hidden(!1),h=n.invert(g),p.elementMousemove({mouseX:g,mouseY:c,pointXValue:h}),"dblclick"===d3.event.type&&p.elementDblclick({mouseX:g,mouseY:c,pointXValue:h}),"click"===d3.event.type&&p.elementClick({mouseX:g,mouseY:c,pointXValue:h}))}var H=d3.select(this),E=g||960,A=t||400,L=H.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([B]);L.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");
u&&(u.on("touchmove",C).on("mousemove",C,!0).on("mouseout",C,!0).on("dblclick",C).on("click",C),a.guideLine=null,a.renderGuideLine=function(e){h&&(a.guideLine&&a.guideLine.attr("x1")===e||c.dom.write(function(){var a=L.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[c.utils.NaNtoZero(e)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",A).attr("y2",0);a.exit().remove()}))})})}var e=c.models.tooltip();
e.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var g=null,t=null,l={left:0,top:0},n=d3.scale.linear(),p=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),h=!0,u=null,w="ActiveXObject"in window;a.dispatch=p;a.tooltip=e;a.margin=function(c){if(!arguments.length)return l;l.top="undefined"!=typeof c.top?c.top:l.top;l.left="undefined"!=typeof c.left?c.left:l.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.height=function(c){if(!arguments.length)return t;
t=c;return a};a.xScale=function(c){if(!arguments.length)return n;n=c;return a};a.showGuideLine=function(c){if(!arguments.length)return h;h=c;return a};a.svgContainer=function(c){if(!arguments.length)return u;u=c;return a};return a};c.interactiveBisect=function(a,c,g){if(!(a instanceof Array))return null;var e="function"!==typeof g?function(a){return a.x}:g;g=d3.bisector(function(a,c){return e(a)-c}).left;g=d3.max([0,g(a,c)-1]);var l=e(a[g]);"undefined"===typeof l&&(l=g);if(l===c)return g;var n=d3.min([g+
1,a.length-1]);a=e(a[n]);"undefined"===typeof a&&(a=n);return Math.abs(a-c)>=Math.abs(l-c)?g:n};c.nearestValueIndex=function(a,c,g){var e=Infinity,l=null;a.forEach(function(a,p){var h=Math.abs(c-a);null!=a&&h<=e&&h<g&&(e=h,l=p)});return l};(function(){c.models.tooltip=function(){function a(){if(u){var a=d3.select(u);"svg"!==a.node().tagName&&(a=a.select("svg"));var c=a.node()?a.attr("viewBox"):null;c&&(c=c.split(" "),a=parseInt(a.style("width"),10)/c[2],D.left*=a,D.top*=a)}}function e(){if(A){a:{if(g&&
g.series){if(g.series instanceof Array){var l=!!g.series.length;break a}if(g.series instanceof Object){g.series=[g.series];l=!0;break a}}l=!1}if(l){a();var t=D.left,F=null!==p?p:D.top;c.dom.write(function(){B||(B=d3.select(u?u:document.body).append("div").attr("class","nvtooltip "+(h?h:"xy-tooltip")).attr("id",v),B.style("top",0).style("left",0),B.style("opacity",0),B.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0),B.classed("nv-pointer-events-none",!0),C=B.node());var a=R(g);
a&&(C.innerHTML=a);u&&I?c.dom.read(function(){var a=u.getElementsByTagName("svg")[0],c=0,e=0;if(a){a=a.getBoundingClientRect();c=u.getBoundingClientRect();e=a.top;if(0>e)var g=u.getBoundingClientRect(),e=Math.abs(e)>g.height?0:e;e=Math.abs(e-c.top);c=Math.abs(a.left-c.left)}t+=u.offsetLeft+c-2*u.scrollLeft;F+=u.offsetTop+e-2*u.scrollTop;n&&0<n&&(F=Math.floor(F/n)*n);M([t,F])}):M([t,F])});return e}}}var g=null,t="w",l=25,n=0,p=null,h=null,u=null,w=!0,H=400,B=null,C=null,D={left:null,top:null},E={left:0,
top:0},A=!0,L=100,O=!0,I=!1,v="nvtooltip-"+Math.floor(1E5*Math.random()),F=function(a,c){return a},U=function(a){return a},P=function(a,c){return a},R=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));O&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(U(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",
function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});e.append("td").classed("key",!0).html(function(a,c){return P(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return F(a.value,c)});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;
void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},M=function(a){C&&c.dom.read(function(){var e=parseInt(C.offsetHeight,10),g=parseInt(C.offsetWidth,10),h=c.utils.windowSize().width,q=c.utils.windowSize().height,r=window.pageYOffset,n=window.pageXOffset,q=window.innerWidth>=document.body.scrollWidth?q:q-16,h=window.innerHeight>=document.body.scrollHeight?h:h-16,p=function(a){var c=u;do isNaN(a.offsetTop)||(c+=a.offsetTop),a=a.offsetParent;while(a);return c},v=function(a){var c=
G;do isNaN(a.offsetLeft)||(c+=a.offsetLeft),a=a.offsetParent;while(a);return c};switch(t){case "e":var G=a[0]-g-l;var u=a[1]-e/2;v=v(C);p=p(C);v<n&&(G=a[0]+l>n?a[0]+l:n-v+G);p<r&&(u=r-p+u);p+e>r+q&&(u=r+q-p+u-e);break;case "w":G=a[0]+l;u=a[1]-e/2;v=v(C);p=p(C);v+g>h&&(G=a[0]-g-l);p<r&&(u=r+5);p+e>r+q&&(u=r+q-p+u-e);break;case "n":G=a[0]-g/2-5;u=a[1]+l;v=v(C);p=p(C);v<n&&(G=n+5);v+g>h&&(G=G-g/2+5);p+e>r+q&&(u=r+q-p+u-e);break;case "s":G=a[0]-g/2;u=a[1]-e-l;v=v(C);p=p(C);v<n&&(G=n+5);v+g>h&&(G=G-g/
2+5);r>p&&(u=r);break;case "none":G=a[0],u=a[1]-l,v=v(C),p=p(C)}G-=E.left;u-=E.top;var g=C.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft,e="translate("+G+"px, "+u+"px)",F=d3.interpolateString("translate("+(g.left+n)+"px, "+(g.top+r)+"px)",e),r=.1>B.style("opacity");w?B.transition().delay(H).duration(0).style("opacity",0):B.interrupt().transition().duration(r?0:L).styleTween("transform",function(a){return F},
"important").style("-webkit-transform",e).style("opacity",1)})};e.nvPointerEventsClass="nv-pointer-events-none";e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{duration:{get:function(){return L},set:function(a){L=a}},gravity:{get:function(){return t},set:function(a){t=a}},distance:{get:function(){return l},set:function(a){l=a}},snapDistance:{get:function(){return n},set:function(a){n=a}},classes:{get:function(){return h},set:function(a){h=a}},chartContainer:{get:function(){return u},
set:function(a){u=a}},fixedTop:{get:function(){return p},set:function(a){p=a}},enabled:{get:function(){return A},set:function(a){A=a}},hideDelay:{get:function(){return H},set:function(a){H=a}},contentGenerator:{get:function(){return R},set:function(a){R=a}},valueFormatter:{get:function(){return F},set:function(a){F=a}},headerFormatter:{get:function(){return U},set:function(a){U=a}},keyFormatter:{get:function(){return P},set:function(a){P=a}},headerEnabled:{get:function(){return O},set:function(a){O=
a}},_isInteractiveLayer:{get:function(){return I},set:function(a){I=!!a}},position:{get:function(){return D},set:function(a){D.left=void 0!==a.left?a.left:D.left;D.top=void 0!==a.top?a.top:D.top}},offset:{get:function(){return E},set:function(a){E.left=void 0!==a.left?a.left:E.left;E.top=void 0!==a.top?a.top:E.top}},hidden:{get:function(){return w},set:function(a){w!=a&&(w=!!a,e())}},data:{get:function(){return g},set:function(a){a.point&&(a.value=a.point.x,a.series=a.series||{},a.series.value=a.point.y,
a.series.color=a.point.color||a.series.color);g=a}},tooltipElem:{get:function(){return C},set:function(a){}},id:{get:function(){return v},set:function(a){}}});c.utils.initOptions(e);return e}})();c.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=document.documentElement.offsetWidth,
a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};c.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):c.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};c.utils.getColor=function(a){if(void 0===a)return c.utils.defaultColor();if(Array.isArray(a)){var e=d3.scale.ordinal().range(a);
return function(a,c){return a.color||e(void 0===c?a:c)}}return a};c.utils.defaultColor=function(){return c.utils.getColor(d3.scale.category20().range())};c.utils.customTheme=function(a,c,g){c=c||function(a){return a.key};g=g||d3.scale.category20().range();var e=g.length;return function(l,n){var p=c(l);if("function"===typeof a[p])return a[p]();if(void 0!==a[p])return a[p];e||(e=g.length);--e;return g[e]}};c.utils.pjax=function(a,e){var g=function(g){d3.html(g,function(g){var l=d3.select(e).node();
l.parentNode.replaceChild(d3.select(g).select(e).node(),l);c.utils.pjax(a,e)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href);g(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&g(d3.event.state)})};c.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var c=parseInt(a.style("font-size").replace("px",""),10);return a.text().length*c*.5}return 0};c.utils.NaNtoZero=
function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};c.utils.renderWatch=function(a,e){if(!(this instanceof c.utils.renderWatch))return new c.utils.renderWatch(a,e);var g=void 0!==e?e:250,t=[],l=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=
!0;l.renderEnd("model")})})(a);0>t.indexOf(a)&&t.push(a)});return this};this.reset=function(a){void 0!==a&&(g=a);t=[]};this.transition=function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==g?g:250;a.__rendered=!1;0>t.indexOf(a)&&t.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var h=0;return a.transition().duration(e).each(function(){++h}).each("end",
function(e,g){0===--h&&(a.__rendered=!0,l.renderEnd.apply(this,c))})};this.renderEnd=function(){t.every(function(a){return a.__rendered})&&(t.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};c.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(e){for(var g in e){var t=a[g]instanceof Array,l="object"===typeof e[g];"object"===typeof a[g]&&!t&&l?c.utils.deepExtend(a[g],e[g]):a[g]=e[g]}})};c.utils.state=function(){if(!(this instanceof
c.utils.state))return new c.utils.state;var a={},e=function(){},g=function(){return{}},t=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){e(a,!0)});this.getter=function(a){g=a;return this};this.setter=function(a,c){c||(c=function(){});e=function(e,g){a(e);g&&c()};return this};this.init=function(a){t=t||{};c.utils.deepExtend(t,a)};this.update=function(){t&&(e(t,!1),t=null);var c=g();if(JSON.stringify(c)===JSON.stringify(a))c=!1;else{for(var n in c)void 0===a[n]&&(a[n]=
{}),a[n]=c[n];c=!0}c&&this.dispatch.change(a)}};c.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,c){if("function"===typeof this[a])this[a](c)}.bind(this));return this};c.utils.calcTicksX=function(a,e){var g=1,t=0;for(t;t<e.length;t+=1)var l=e[t]&&e[t].values?e[t].values.length:0,g=l>g?l:g;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.calcTicksY=function(a,e){var g=
1,t=0;for(t;t<e.length;t+=1)for(var l=e[t]&&e[t].values?e[t].values:[],n,p=0;p<l.length;p+=1)n=l[p]&&l[p].value?l[p].value:0,g=n>g?n:g;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];
a._overrides[c]||(a._options[c]=e);return a})};c.utils.initOptions=function(a){a._overrides=a._overrides||{};var e=Object.getOwnPropertyNames(a._options||{}),g=Object.getOwnPropertyNames(a._calls||{}),e=e.concat(g),t;for(t in e)c.utils.initOption(a,e[t])};c.utils.inheritOptionsD3=function(a,c,g){a._d3options=g.concat(a._d3options||[]);g.unshift(c);g.unshift(a);d3.rebind.apply(this,g)};c.utils.arrayUnique=function(a){return a.sort().filter(function(c,g){return!g||c!=a[g-1]})};c.utils.symbolMap=d3.map();
c.utils.symbol=function(){function a(a,l){var n=e.call(this,a,l),p=g.call(this,a,l);return-1!==d3.svg.symbolTypes.indexOf(n)?d3.svg.symbol().type(n).size(p)():c.utils.symbolMap.get(n)(p)}var e,g=64;a.type=function(c){if(!arguments.length)return e;e=d3.functor(c);return a};a.size=function(c){if(!arguments.length)return g;g=d3.functor(c);return a};return a};c.utils.inheritOptions=function(a,e){var g=Object.getOwnPropertyNames(e._options||{}),t=Object.getOwnPropertyNames(e._calls||{}),l=e._inherited||
[],n=e._d3options||[],p=g.concat(t).concat(l).concat(n);p.unshift(e);p.unshift(a);d3.rebind.apply(this,p);a._inherited=c.utils.arrayUnique(g.concat(t).concat(l).concat(g).concat(a._inherited||[]));a._d3options=c.utils.arrayUnique(n.concat(a._d3options||[]))};c.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};c.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};c.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};c.utils.availableHeight=
function(a,e,g){return c.utils.sanitizeHeight(a,e)-g.top-g.bottom};c.utils.availableWidth=function(a,e,g){return c.utils.sanitizeWidth(a,e)-g.left-g.right};c.utils.noData=function(a,e){var g=a.options(),t=g.margin(),l=g.noData(),l=null==l?["No Data Available."]:[l],n=c.utils.availableHeight(g.height(),e,t),g=c.utils.availableWidth(g.width(),e,t),g=t.left+g/2,t=t.top+n/2;e.selectAll("g").remove();l=e.selectAll(".nv-noData").data(l);l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle");l.attr("x",g).attr("y",t).text(function(a){return a})};c.models.axis=function(){function a(n){O.reset();n.each(function(a){var n=d3.select(this);c.utils.initSVG(n);a=n.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");n=a.select("g");null!==C?e.ticks(C):"top"!=e.orient()&&"bottom"!=e.orient()||e.ticks(Math.abs(g.range()[1]-g.range()[0])/100);n.watchTransition(O,"axis").call(e);L=L||e.scale();var v=
e.tickFormat();null==v&&(v=L.tickFormat());var A=n.selectAll("text.nv-axislabel").data([p||null]);A.exit().remove();switch(e.orient()){case "top":A.enter().append("text").attr("class","nv-axislabel");var E=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);A.attr("text-anchor","middle").attr("y",0).attr("x",E/2);if(h){var I=a.selectAll("g.nv-axisMaxMin").data(g.domain());I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",
0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");I.exit().remove();I.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":e});I.watchTransition(O,"min-max top").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g.range()[e])+",0)"})}break;case "bottom":I=D+36;var r=30,K=0,Q=n.selectAll("g").select("text"),
J="";u%360&&(Q.each(function(a,c){var e=this.getBoundingClientRect(),g=e.width;K=e.height;g>r&&(r=g)}),J="rotate("+u+" 0,"+(K/2+e.tickPadding())+")",I=Math.abs(Math.sin(u*Math.PI/180)),I=(I?I*r:r)+30,Q.attr("transform",J).style("text-anchor",0<u%360?"start":"end"));A.enter().append("text").attr("class","nv-axislabel");E=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);A.attr("text-anchor","middle").attr("y",I).attr("x",E/2);h&&(I=a.selectAll("g.nv-axisMaxMin").data([g.domain()[0],
g.domain()[g.domain().length-1]]),I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),I.exit().remove(),I.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a)+(B?g.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",J).style("text-anchor",u?0<u%360?"start":"end":"middle").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":
e}),I.watchTransition(O,"min-max bottom").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a)+(B?g.rangeBand()/2:0))+",0)"}));H&&Q.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"});break;case "right":A.enter().append("text").attr("class","nv-axislabel");A.style("text-anchor",w?"middle":"begin").attr("transform",w?"rotate(90)":"").attr("y",w?-Math.max(t.right,l)+12:-10).attr("x",w?d3.max(g.range())/2:e.tickPadding());h&&(I=a.selectAll("g.nv-axisMaxMin").data(g.domain()),
I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),I.exit().remove(),I.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(g(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":e}),I.watchTransition(O,"min-max right").attr("transform",function(a,
e){return"translate(0,"+c.utils.NaNtoZero(g.range()[e])+")"}).select("text").style("opacity",1));break;case "left":A.enter().append("text").attr("class","nv-axislabel"),A.style("text-anchor",w?"middle":"end").attr("transform",w?"rotate(-90)":"").attr("y",w?-Math.max(t.left,l)+25-(D||0):-10).attr("x",w?-d3.max(g.range())/2:-e.tickPadding()),h&&(I=a.selectAll("g.nv-axisMaxMin").data(g.domain()),I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":
"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),I.exit().remove(),I.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(L(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":e}),I.watchTransition(O,"min-max right").attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(g.range()[e])+")"}).select("text").style("opacity",1))}A.text(function(a){return a});
!h||"left"!==e.orient()&&"right"!==e.orient()||(n.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(g(a)<g.range()[1]+10||g(a)>g.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),g.domain()[0]==g.domain()[1]&&0==g.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(h&&("top"===e.orient()||"bottom"===e.orient())){var q=[];a.selectAll("g.nv-axisMaxMin").each(function(a,
c){try{c?q.push(g(a)-this.getBoundingClientRect().width-4):q.push(g(a)+this.getBoundingClientRect().width+4)}catch(Z){c?q.push(g(a)-4):q.push(g(a)+4)}});n.selectAll("g").each(function(a,c){if(g(a)<q[0]||g(a)>q[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}n.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);L=g.copy()});O.renderEnd("axis immediate");return a}var e=d3.svg.axis(),g=d3.scale.linear(),
t={top:0,right:0,bottom:0,left:0},l=75,n=60,p=null,h=!0,u=0,w=!0,H=!1,B=!1,C=null,D=0,E=250,A=d3.dispatch("renderEnd");e.scale(g).orient("bottom").tickFormat(function(a){return a});var L,O=c.utils.renderWatch(A,E);a.axis=e;a.dispatch=A;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return D},set:function(a){D=a}},staggerLabels:{get:function(){return H},set:function(a){H=a}},rotateLabels:{get:function(){return u},set:function(a){u=a}},rotateYLabel:{get:function(){return w},
set:function(a){w=a}},showMaxMin:{get:function(){return h},set:function(a){h=a}},axisLabel:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return n},set:function(a){n=a}},ticks:{get:function(){return C},set:function(a){C=a}},width:{get:function(){return l},set:function(a){l=a}},margin:{get:function(){return t},set:function(a){t.top=void 0!==a.top?a.top:t.top;t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},
duration:{get:function(){return E},set:function(a){E=a;O.reset(E)}},scale:{get:function(){return g},set:function(h){g=h;e.scale(g);B="function"===typeof g.rangeBands;c.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"])}}});c.utils.initOptions(a);c.utils.inheritOptionsD3(a,e,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));c.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"]);return a};c.models.boxPlot=function(){function a(l){v.reset();
l.each(function(a){var l=g-e.left-e.right,u=t-e.top-e.bottom;H=d3.select(this);c.utils.initSVG(H);n.domain(B||a.map(function(a,c){return h(a,c)})).rangeBands(D||[0,l],.1);l=[];if(!C)var l=d3.min(a.map(function(a){var c=[];c.push(a.values.Q1);a.values.hasOwnProperty("whisker_low")&&null!==a.values.whisker_low&&c.push(a.values.whisker_low);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.min(c)})),F=d3.max(a.map(function(a){var c=[];c.push(a.values.Q3);
a.values.hasOwnProperty("whisker_high")&&null!==a.values.whisker_high&&c.push(a.values.whisker_high);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.max(c)})),l=[l,F];p.domain(C||l);p.range(E||[u,0]);I=I||p.copy().range([p(0),p(0)]);u=H.selectAll("g.nv-wrap").data([a]);u.enter().append("g").attr("class","nvd3 nv-wrap");u.attr("transform","translate("+e.left+","+e.top+")");var r=u.selectAll(".nv-boxplot").data(function(a){return a}),K=r.enter().append("g").style("stroke-opacity",
1E-6).style("fill-opacity",1E-6);r.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(n(h(a,c))+.05*n.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});r.watchTransition(v,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(c,e){return e*L/a.length}).attr("transform",function(a,c){return"translate("+(n(h(a,c))+.05*n.rangeBand())+", 0)"});r.exit().remove();K.each(function(a,c){var e=d3.select(this);["low","high"].forEach(function(g){a.values.hasOwnProperty("whisker_"+
g)&&null!==a.values["whisker_"+g]&&(e.append("line").style("stroke",a.color?a.color:w(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+g),e.append("line").style("stroke",a.color?a.color:w(a,c)).attr("class","nv-boxplot-tick nv-boxplot-"+g))})});u=r.selectAll(".nv-boxplot-outlier").data(function(a){return a.values.hasOwnProperty("outliers")&&null!==a.values.outliers?a.values.outliers:[]});u.enter().append("circle").style("fill",function(a,c,e){return w(a,e)}).style("stroke",function(a,c,e){return w(a,
e)}).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);A.elementMouseover({series:{key:a,color:w(a,e)},e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);A.elementMouseout({series:{key:a,color:w(a,e)},e:d3.event})}).on("mousemove",function(a,c){A.elementMousemove({e:d3.event})});u.attr("class","nv-boxplot-outlier");u.watchTransition(v,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*n.rangeBand()).attr("cy",function(a,c,e){return p(a)}).attr("r","3");
u.exit().remove();var Q=function(){return null===O?.9*n.rangeBand():Math.min(75,.9*n.rangeBand())},J=function(){return.45*n.rangeBand()-Q()/2},q=function(){return.45*n.rangeBand()+Q()/2};["low","high"].forEach(function(a){var c="low"===a?"Q1":"Q3";r.select("line.nv-boxplot-whisker.nv-boxplot-"+a).watchTransition(v,"nv-boxplot: boxplots").attr("x1",.45*n.rangeBand()).attr("y1",function(c,e){return p(c.values["whisker_"+a])}).attr("x2",.45*n.rangeBand()).attr("y2",function(a,e){return p(a.values[c])});
r.select("line.nv-boxplot-tick.nv-boxplot-"+a).watchTransition(v,"nv-boxplot: boxplots").attr("x1",J).attr("y1",function(c,e){return p(c.values["whisker_"+a])}).attr("x2",q).attr("y2",function(c,e){return p(c.values["whisker_"+a])})});["low","high"].forEach(function(a){K.selectAll(".nv-boxplot-"+a).on("mouseover",function(c,e,g){d3.select(this).classed("hover",!0);A.elementMouseover({series:{key:c.values["whisker_"+a],color:w(c,g)},e:d3.event})}).on("mouseout",function(c,e,g){d3.select(this).classed("hover",
!1);A.elementMouseout({series:{key:c.values["whisker_"+a],color:w(c,g)},e:d3.event})}).on("mousemove",function(a,c){A.elementMousemove({e:d3.event})})});K.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);A.elementMouseover({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||w(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||w(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||w(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",
function(a,c){d3.select(this).classed("hover",!1);A.elementMouseout({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||w(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||w(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||w(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){A.elementMousemove({e:d3.event})});r.select("rect.nv-boxplot-box").watchTransition(v,"nv-boxplot: boxes").attr("y",function(a,c){return p(a.values.Q3)}).attr("width",Q).attr("x",J).attr("height",
function(a,c){return Math.abs(p(a.values.Q3)-p(a.values.Q1))||1}).style("fill",function(a,c){return a.color||w(a,c)}).style("stroke",function(a,c){return a.color||w(a,c)});K.append("line").attr("class","nv-boxplot-median");r.select("line.nv-boxplot-median").watchTransition(v,"nv-boxplot: boxplots line").attr("x1",J).attr("y1",function(a,c){return p(a.values.Q2)}).attr("x2",q).attr("y2",function(a,c){return p(a.values.Q2)});n.copy();I=p.copy()});v.renderEnd("nv-boxplot immediate");return a}var e={top:0,
right:0,bottom:0,left:0},g=960,t=500,l=Math.floor(1E4*Math.random()),n=d3.scale.ordinal(),p=d3.scale.linear(),h=function(a){return a.x},u=function(a){return a.y},w=c.utils.defaultColor(),H=null,B,C,D,E,A=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=250,O=null,I,v=c.utils.renderWatch(A,L);a.dispatch=A;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=
a}},maxBoxWidth:{get:function(){return O},set:function(a){O=a}},x:{get:function(){return h},set:function(a){h=a}},y:{get:function(){return u},set:function(a){u=a}},xScale:{get:function(){return n},set:function(a){n=a}},yScale:{get:function(){return p},set:function(a){p=a}},xDomain:{get:function(){return B},set:function(a){B=a}},yDomain:{get:function(){return C},set:function(a){C=a}},xRange:{get:function(){return D},set:function(a){D=a}},yRange:{get:function(){return E},set:function(a){E=a}},id:{get:function(){return l},
set:function(a){l=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return w},set:function(a){w=c.utils.getColor(a)}},duration:{get:function(){return L},set:function(a){L=a;v.reset(L)}}});c.utils.initOptions(a);return a};c.models.boxPlotChart=function(){function a(h){I.reset();I.models(e);u&&I.models(g);w&&I.models(t);
h.each(function(h){var v=d3.select(this);c.utils.initSVG(v);var F=(n||parseInt(v.style("width"))||960)-l.left-l.right,C=(p||parseInt(v.style("height"))||400)-l.top-l.bottom;a.update=function(){L.beforeUpdate();v.transition().duration(O).call(a)};a.container=this;if(h&&h.length&&h.filter(function(a){return a.values.hasOwnProperty("Q1")&&a.values.hasOwnProperty("Q2")&&a.values.hasOwnProperty("Q3")}).length)v.selectAll(".nv-noData").remove();else return h=v.selectAll(".nv-noData").data([A]),h.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),h.attr("x",l.left+F/2).attr("y",l.top+C/2).text(function(a){return a}),a;D=e.xScale();E=e.yScale().clamp(!0);var I=v.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([h]),r=I.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),K=r.append("defs"),I=I.select("g");r.append("g").attr("class","nv-x nv-axis");r.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");r.append("g").attr("class",
"nv-barsWrap");I.attr("transform","translate("+l.left+","+l.top+")");H&&I.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)");e.width(F).height(C);I.select(".nv-barsWrap").datum(h.filter(function(a){return!a.disabled})).transition().call(e);K.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");I.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",D.rangeBand()*(B?2:1)).attr("height",16).attr("x",-D.rangeBand()/(B?1:2));u&&(g.scale(D).ticks(c.utils.calcTicksX(F/100,
h)).tickSize(-C,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")"),I.select(".nv-x.nv-axis").call(g),h=I.select(".nv-x.nv-axis").selectAll("g"),B&&h.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));w&&(t.scale(E).ticks(Math.floor(C/36)).tickSize(-F,0),I.select(".nv-y.nv-axis").call(t));I.select(".nv-zeroLine line").attr("x1",0).attr("x2",F).attr("y1",E(0)).attr("y2",E(0))});I.renderEnd("nv-boxplot chart immediate");return a}
var e=c.models.boxPlot(),g=c.models.axis(),t=c.models.axis(),l={top:15,right:10,bottom:50,left:60},n=null,p=null,h=c.utils.getColor(),u=!0,w=!0,H=!1,B=!1,C=c.models.tooltip(),D,E,A="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),O=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});t.orient(H?"right":"left").tickFormat(d3.format(",.1f"));C.duration(0);var I=c.utils.renderWatch(L,O);e.dispatch.on("elementMouseover.tooltip",function(a){C.data(a).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){C.data(a).hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){C.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=L;a.boxplot=e;a.xAxis=g;a.yAxis=t;a.tooltip=C;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return p},set:function(a){p=a}},staggerLabels:{get:function(){return B},set:function(a){B=a}},showXAxis:{get:function(){return u},
set:function(a){u=a}},showYAxis:{get:function(){return w},set:function(a){w=a}},tooltips:{get:function(){return tooltips},set:function(a){tooltips=a}},tooltipContent:{get:function(){return C},set:function(a){C=a}},noData:{get:function(){return A},set:function(a){A=a}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return O},
set:function(a){O=a;I.reset(O);e.duration(O);g.duration(O);t.duration(O)}},color:{get:function(){return h},set:function(a){h=c.utils.getColor(a);e.color(h)}},rightAlignYAxis:{get:function(){return H},set:function(a){H=a;t.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.bullet=function(){function a(g){g.each(function(a,g){var A=u-e.left-e.right,E=w-e.top-e.bottom;H=d3.select(this);c.utils.initSVG(H);var v=l.call(this,a,g).slice().sort(d3.descending),
F=n.call(this,a,g).slice().sort(d3.descending),B=p.call(this,a,g).slice().sort(d3.descending),L=(a.rangeLabels?a.rangeLabels:[]).slice(),R=(a.markerLabels?a.markerLabels:[]).slice(),M=(a.measureLabels?a.measureLabels:[]).slice(),r=d3.scale.linear().domain(d3.extent(d3.merge([h,v]))).range(t?[A,0]:[0,A]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(r.range());this.__chart__=r;var K=d3.min(v),Q=d3.max(v),J=v[1],v=H.selectAll("g.nv-wrap.nv-bullet").data([a]),A=v.enter().append("g").attr("class",
"nvd3 nv-wrap nv-bullet").append("g"),q=v.select("g");A.append("rect").attr("class","nv-range nv-rangeMax");A.append("rect").attr("class","nv-range nv-rangeAvg");A.append("rect").attr("class","nv-range nv-rangeMin");A.append("rect").attr("class","nv-measure");v.attr("transform","translate("+e.left+","+e.top+")");var N=function(a){return Math.abs(r(a)-r(0))},x=function(a){return 0>a?r(a):r(0)};q.select("rect.nv-rangeMax").attr("height",E).attr("width",N(0<Q?Q:K)).attr("x",x(0<Q?Q:K)).datum(0<Q?Q:K);
q.select("rect.nv-rangeAvg").attr("height",E).attr("width",N(J)).attr("x",x(J)).datum(J);q.select("rect.nv-rangeMin").attr("height",E).attr("width",N(Q)).attr("x",x(Q)).attr("width",N(0<Q?K:Q)).attr("x",x(0<Q?K:Q)).datum(0<Q?K:Q);q.select("rect.nv-measure").style("fill",C).attr("height",E/3).attr("y",E/3).attr("width",0>B?r(0)-r(B[0]):r(B[0])-r(0)).attr("x",x(B)).on("mouseover",function(){D.elementMouseover({value:B[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){D.elementMousemove({value:B[0],
label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){D.elementMouseout({value:B[0],label:M[0]||"Current",color:d3.select(this).style("fill")})});K=E/6;F=F.map(function(a,c){return{value:a,label:R[c]}});A.selectAll("path.nv-markerTriangle").data(F).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(a){return"translate("+r(a.value)+","+E/2+")"}).attr("d","M0,"+K+"L"+K+","+-K+" "+-K+","+-K+"Z").on("mouseover",function(a){D.elementMouseover({value:a.value,
label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[r(a.value),E/2]})}).on("mousemove",function(a){D.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});v.selectAll(".nv-range").on("mouseover",function(a,c){D.elementMouseover({value:a,label:L[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",
function(){D.elementMousemove({value:B[0],label:M[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a,label:L[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})});return a}var e={top:0,right:0,bottom:0,left:0},g="left",t=!1,l=function(a){return a.ranges},n=function(a){return a.markers?a.markers:[0]},p=function(a){return a.measures},h=[0],u=380,w=30,H=null,B=null,C=c.utils.getColor(["#1f77b4"]),D=d3.dispatch("elementMouseover",
"elementMouseout","elementMousemove");a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return l},set:function(a){l=a}},markers:{get:function(){return n},set:function(a){n=a}},measures:{get:function(){return p},set:function(a){p=a}},forceX:{get:function(){return h},set:function(a){h=a}},width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return w},set:function(a){w=a}},tickFormat:{get:function(){return B},set:function(a){B=
a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},orient:{get:function(){return g},set:function(a){g=a;t="right"==g||"bottom"==g}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.bulletChart=function(){function a(g){g.each(function(t,A){var E=d3.select(this);c.utils.initSVG(E);
var v=c.utils.availableWidth(w,E,n),F=H-n.top-n.bottom;a.update=function(){a(g)};a.container=this;if(t&&p.call(this,t,A))E.selectAll(".nv-noData").remove();else return c.utils.noData(a,E),a;var D=p.call(this,t,A).slice().sort(d3.descending),L=h.call(this,t,A).slice().sort(d3.descending),O=u.call(this,t,A).slice().sort(d3.descending),M=E.selectAll("g.nv-wrap.nv-bulletChart").data([t]),r=M.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),E=M.select("g");r.append("g").attr("class",
"nv-bulletWrap");r.append("g").attr("class","nv-titles");M.attr("transform","translate("+n.left+","+n.top+")");var K=d3.scale.linear().domain([0,Math.max(D[0],L[0],O[0])]).range(l?[v,0]:[0,v]),Q=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(K.range());this.__chart__=K;D=r.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(H-n.top-n.bottom)/2+")");D.append("text").attr("class","nv-title").text(function(a){return a.title});D.append("text").attr("class",
"nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});e.width(v).height(F);D=E.select(".nv-bulletWrap");d3.transition(D).call(e);var J=B||K.tickFormat(v/100),v=E.selectAll("g.nv-tick").data(K.ticks(C?C:v/50),function(a){return this.textContent||J(a)}),E=v.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+Q(a)+",0)"}).style("opacity",1E-6);E.append("line").attr("y1",F).attr("y2",7*F/6);E.append("text").attr("text-anchor","middle").attr("dy",
"1em").attr("y",7*F/6).text(J);E=d3.transition(v).attr("transform",function(a){return"translate("+K(a)+",0)"}).style("opacity",1);E.select("line").attr("y1",F).attr("y2",7*F/6);E.select("text").attr("y",7*F/6);d3.transition(v.exit()).attr("transform",function(a){return"translate("+K(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var e=c.models.bullet(),g=c.models.tooltip(),t="left",l=!1,n={top:5,right:40,bottom:20,left:120},p=function(a){return a.ranges},h=function(a){return a.markers?
a.markers:[0]},u=function(a){return a.measures},w=null,H=55,B=null,C=null,D=null,E=d3.dispatch("tooltipShow","tooltipHide");g.duration(0).headerEnabled(!1);e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};g.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});a.bullet=e;a.dispatch=E;a.tooltip=g;a.options=
c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return p},set:function(a){p=a}},markers:{get:function(){return h},set:function(a){h=a}},measures:{get:function(){return u},set:function(a){u=a}},width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return H},set:function(a){H=a}},tickFormat:{get:function(){return B},set:function(a){B=a}},ticks:{get:function(){return C},set:function(a){C=a}},noData:{get:function(){return D},set:function(a){D=a}},
tooltips:{get:function(){return g.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");g.enabled(!!a)}},tooltipContent:{get:function(){return g.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");g.contentGenerator(a)}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==
a.left?a.left:n.left}},orient:{get:function(){return t},set:function(a){t=a;l="right"==t||"bottom"==t}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.candlestickBar=function(){function a(r){r.each(function(a){n=d3.select(this);var r=c.utils.availableWidth(g,n,e),v=c.utils.availableHeight(t,n,e);c.utils.initSVG(n);var q=r/a[0].values.length*.45;p.domain(F||d3.extent(a[0].values.map(u).concat(E)));L?p.range(P||[.5*r/a[0].values.length,r*(a[0].values.length-.5)/a[0].values.length]):
p.range(P||[5+q/2,r-q/2-5]);h.domain(U||[d3.min(a[0].values.map(D).concat(A)),d3.max(a[0].values.map(C).concat(A))]).range(R||[v,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var N=a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-candlestickBar"),x=N.append("defs"),N=N.append("g"),K=a.select("g");N.append("g").attr("class","nv-ticks");a.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){M.chartClick({data:a,index:c,pos:d3.event,id:l})});x.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");a.select("#nv-chart-clip-path-"+l+" rect").attr("width",r).attr("height",v);K.attr("clip-path",O?"url(#nv-chart-clip-path-"+l+")":"");r=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});
r.exit().remove();r=r.enter().append("g").attr("class",function(a,c,e){return(H(a,c)>B(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});r.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+p(u(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return h(C(a,c))}).attr("x2",0).attr("y2",function(a,c){return h(D(a,c))});r.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(p(u(a,
c))-q/2)+","+(h(w(a,c))-(H(a,c)>B(a,c)?h(B(a,c))-h(H(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",q).attr("height",function(a,c){var e=H(a,c),g=B(a,c);return e>g?h(g)-h(e):h(e)-h(g)});n.selectAll(".nv-candlestick-lines").transition().attr("transform",function(a,c){return"translate("+p(u(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return h(C(a,c))}).attr("x2",0).attr("y2",function(a,c){return h(D(a,c))});n.selectAll(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+
(p(u(a,c))-q/2)+","+(h(w(a,c))-(H(a,c)>B(a,c)?h(B(a,c))-h(H(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",q).attr("height",function(a,c){var e=H(a,c),g=B(a,c);return e>g?h(g)-h(e):h(e)-h(g)})});return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l=Math.floor(1E4*Math.random()),n,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},H=function(a){return a.open},B=function(a){return a.close},C=function(a){return a.high},D=function(a){return a.low},
E=[],A=[],L=!1,O=!0,I=c.utils.defaultColor(),v=!1,F,U,P,R,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=M;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return F},set:function(a){F=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceX:{get:function(){return E},
set:function(a){E=a}},forceY:{get:function(){return A},set:function(a){A=a}},padData:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return O},set:function(a){O=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return v},set:function(a){v=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},open:{get:function(){return H()},set:function(a){H=a}},close:{get:function(){return B()},set:function(a){B=
a}},high:{get:function(){return C},set:function(a){C=a}},low:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.cumulativeLineChart=function(){function a(q){Z.reset();Z.models(g);E&&Z.models(t);
A&&Z.models(l);q.each(function(q){function r(){na.data([x]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var u=d3.select(this);c.utils.initSVG(u);u.classed("nv-chart-"+P,!0);var S=this,W=c.utils.availableWidth(B,u,w),Z=c.utils.availableHeight(C,u,w);a.update=function(){0===J?u.call(a):u.transition().duration(J).call(a)};a.container=this;R.setter(G(q),a.update).getter(aa(q)).update();R.disabled=q.map(function(a){return!!a.disabled});if(!M)for(la in M={},R)M[la]=R[la]instanceof Array?R[la].slice(0):
R[la];var la=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,c){x.x=d3.event.x;x.i=Math.round(N.invert(x.x));r()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");R.index=x.i;Q.stateChange(R)});if(q&&q.length&&q.filter(function(a){return a.values.length}).length)u.selectAll(".nv-noData").remove();else return c.utils.noData(a,u),a;F=g.xScale();U=g.yScale();if(v)g.yDomain(null);else{var ga=q.filter(function(a){return!a.disabled}).map(function(a,
c){var e=d3.extent(a.values,g.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),ga=[d3.min(ga,function(a){return a[0]}),d3.max(ga,function(a){return a[1]})];g.yDomain(ga)}N.domain([0,q[0].values.length-1]).range([0,W]).clamp(!0);q=e(x.i,q);var ja=I?"none":"all",qa=u.selectAll("g.nv-wrap.nv-cumulativeLine").data([q]),xa=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ga=qa.select("g");xa.append("g").attr("class","nv-interactive");xa.append("g").attr("class",
"nv-x nv-axis").style("pointer-events","none");xa.append("g").attr("class","nv-y nv-axis");xa.append("g").attr("class","nv-background");xa.append("g").attr("class","nv-linesWrap").style("pointer-events",ja);xa.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");xa.append("g").attr("class","nv-legendWrap");xa.append("g").attr("class","nv-controlsWrap");D&&(n.width(W),ga.select(".nv-legendWrap").datum(q).call(n),w.top!=n.height()&&(w.top=n.height(),Z=c.utils.availableHeight(C,
u,w)),ga.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")"));O&&(ja=[{key:"Re-scale y-axis",disabled:!v}],p.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ga.select(".nv-controlsWrap").datum(ja).attr("transform","translate(0,"+-w.top+")").call(p));qa.attr("transform","translate("+w.left+","+w.top+")");L&&ga.select(".nv-y.nv-axis").attr("transform","translate("+W+",0)");ja=q.filter(function(a){return a.tempDisabled});qa.select(".tempDisabled").remove();
ja.length&&qa.append("text").attr("class","tempDisabled").attr("x",W/2).attr("y","-.71em").style("text-anchor","end").text(ja.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");I&&(h.width(W).height(Z).margin({left:w.left,top:w.top}).svgContainer(u).xScale(F),qa.select(".nv-interactive").call(h));xa.select(".nv-background").append("rect");ga.select(".nv-background rect").attr("width",W).attr("height",Z);g.y(function(a){return a.display.y}).width(W).height(Z).color(q.map(function(a,
c){return a.color||H(a,c)}).filter(function(a,c){return!q[c].disabled&&!q[c].tempDisabled}));qa=ga.select(".nv-linesWrap").datum(q.filter(function(a){return!a.disabled&&!a.tempDisabled}));qa.call(g);q.forEach(function(a,c){a.seriesIndex=c});xa=q.filter(function(a){return!a.disabled&&!!K(a)});xa=ga.select(".nv-avgLinesWrap").selectAll("line").data(xa,function(a){return a.key});ja=function(a){a=U(K(a));return 0>a?0:a>Z?Z:a};xa.enter().append("line").style("stroke-width",2).style("stroke-dasharray",
"10,10").style("stroke",function(a,c){return g.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",W).attr("y1",ja).attr("y2",ja);xa.style("stroke-opacity",function(a){a=U(K(a));return 0>a||a>Z?0:1}).attr("x1",0).attr("x2",W).attr("y1",ja).attr("y2",ja);xa.exit().remove();var na=qa.selectAll(".nv-indexLine").data([x]);na.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(la);na.attr("transform",
function(a){return"translate("+N(a.i)+",0)"}).attr("height",Z);E&&(t.scale(F)._ticks(c.utils.calcTicksX(W/70,q)).tickSize(-Z,0),ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")"),ga.select(".nv-x.nv-axis").call(t));A&&(l.scale(U)._ticks(c.utils.calcTicksY(Z/36,q)).tickSize(-W,0),ga.select(".nv-y.nv-axis").call(l));ga.select(".nv-background rect").on("click",function(){x.x=d3.mouse(this)[0];x.i=Math.round(N.invert(x.x));R.index=x.i;Q.stateChange(R);r()});g.dispatch.on("elementClick",
function(a){x.i=a.pointIndex;x.x=N(x.i);R.index=x.i;Q.stateChange(R);r()});p.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;v=!c.disabled;R.rescaleY=v;Q.stateChange(R);a.update()});n.dispatch.on("stateChange",function(c){for(var e in c)R[e]=c[e];Q.stateChange(R);a.update()});h.dispatch.on("elementMousemove",function(e){g.clearHighlights();var n,r,p,x=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){r=c.interactiveBisect(h.values,e.pointXValue,a.x());
g.highlightPoint(l,r,!0);var q=h.values[r];"undefined"!==typeof q&&("undefined"===typeof n&&(n=q),"undefined"===typeof p&&(p=a.xScale()(a.x()(q,r))),x.push({key:h.key,value:a.y()(q,r),color:H(h,h.seriesIndex)}))});if(2<x.length){var v=a.yScale().invert(e.mouseY),J=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),v=c.nearestValueIndex(x.map(function(a){return a.value}),v,J);null!==v&&(x[v].highlight=!0)}v=t.tickFormat()(a.x()(n,r),r);h.tooltip.position({left:p+w.left,top:e.mouseY+w.top}).chartContainer(S.parentNode).valueFormatter(function(a,
c){return l.tickFormat()(a)}).data({value:v,series:x})();h.renderGuideLine(p)});h.dispatch.on("elementMouseout",function(a){g.clearHighlights()});Q.on("changeState",function(c){"undefined"!==typeof c.disabled&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),R.disabled=c.disabled);"undefined"!==typeof c.index&&(x.i=c.index,x.x=N(x.i),R.index=c.index,na.data([x]));"undefined"!==typeof c.rescaleY&&(v=c.rescaleY);a.update()})});Z.renderEnd("cumulativeLineChart immediate");return a}function e(a,c){S||
(S=g.y());return c.map(function(c,e){if(!c.values)return c;var g=c.values[a];if(null==g)return c;var h=S(g,a);if(-.95>h&&!q)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display={y:(S(a,c)-h)/(1+h)};return a});return c})}var g=c.models.line(),t=c.models.axis(),l=c.models.axis(),n=c.models.legend(),p=c.models.legend(),h=c.interactiveGuideline(),u=c.models.tooltip(),w={top:30,right:30,bottom:50,left:60},H=c.utils.defaultColor(),B=null,C=null,D=!0,E=!0,A=!0,L=!1,
O=!0,I=!1,v=!0,F,U,P=g.id(),R=c.utils.state(),M=null,r=null,K=function(a){return a.average},Q=d3.dispatch("stateChange","changeState","renderEnd"),J=250,q=!1;R.index=0;R.rescaleY=v;t.orient("bottom").tickPadding(7);l.orient(L?"right":"left");u.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return t.tickFormat()(a,c)});p.updateState(!1);var N=d3.scale.linear(),x={i:0,x:0},Z=c.utils.renderWatch(Q,J),aa=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
index:x.i,rescaleY:v}}},G=function(a){return function(c){void 0!==c.index&&(x.i=c.index);void 0!==c.rescaleY&&(v=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};g.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;u.data(c).position(c.pos).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){u.hidden(!0)});var S=null;a.dispatch=Q;a.lines=g;a.legend=n;a.controls=p;a.xAxis=t;a.yAxis=
l;a.interactiveLayer=h;a.state=R;a.tooltip=u;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return C},set:function(a){C=a}},rescaleY:{get:function(){return v},set:function(a){v=a}},showControls:{get:function(){return O},set:function(a){O=a}},showLegend:{get:function(){return D},set:function(a){D=a}},average:{get:function(){return K},set:function(a){K=a}},defaultState:{get:function(){return M},set:function(a){M=
a}},noData:{get:function(){return r},set:function(a){r=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},noErrorCheck:{get:function(){return q},set:function(a){q=a}},tooltips:{get:function(){return u.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");u.enabled(!!a)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
u.contentGenerator(a)}},margin:{get:function(){return w},set:function(a){w.top=void 0!==a.top?a.top:w.top;w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a);n.color(H)}},useInteractiveGuideline:{get:function(){return I},set:function(c){I=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;l.orient(a?
"right":"left")}},duration:{get:function(){return J},set:function(a){J=a;g.duration(J);t.duration(J);l.duration(J);Z.reset(J)}}});c.utils.inheritOptions(a,g);c.utils.initOptions(a);return a};c.models.discreteBar=function(){function a(l){P.reset();l.each(function(a){var l=g-e.left-e.right,F=t-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var Q=E&&A?[]:a.map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:w(a,
c),y0:a.y0}})});p.domain(E||d3.merge(Q).map(function(a){return a.x})).rangeBands(L||[0,l],.1);h.domain(A||d3.extent(d3.merge(Q).map(function(a){return a.y}).concat(H)));C?h.range(O||[F-(0>h.domain()[0]?12:0),0<h.domain()[1]?12:0]):h.range(O||[F,0]);U=U||h.copy().range([h(0),h(0)]);l=n.selectAll("g.nv-wrap.nv-discretebar").data([a]);F=l.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");l.select("g");F.append("g").attr("class","nv-groups");l.attr("transform","translate("+e.left+
","+e.top+")");l=l.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);l.exit().watchTransition(P,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();l.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});l.watchTransition(P,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",
.75);l=l.selectAll("g.nv-bar").data(function(a){return a.values});l.exit().remove();F=l.enter().append("g").attr("transform",function(a,c,e){return"translate("+(p(u(a,c))+.05*p.rangeBand())+", "+h(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,
c){I.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){I.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){I.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});F.append("rect").attr("height",0).attr("width",.9*p.rangeBand()/a.length);C?(F.append("text").attr("text-anchor","middle"),l.select("text").text(function(a,c){return D(w(a,
c))}).watchTransition(P,"discreteBar: bars text").attr("x",.9*p.rangeBand()/2).attr("y",function(a,c){return 0>w(a,c)?h(w(a,c))-h(0)+12:-4})):l.selectAll("text").remove();l.attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||B(a,c)}).style("stroke",function(a,c){return a.color||B(a,c)}).select("rect").attr("class",v).watchTransition(P,"discreteBar: bars rect").attr("width",.9*p.rangeBand()/a.length);l.watchTransition(P,"discreteBar: bars").attr("transform",
function(a,c){var e=p(u(a,c))+.05*p.rangeBand(),g=0>w(a,c)?h(0):1>h(0)-h(w(a,c))?h(0)-1:h(w(a,c));return"translate("+e+", "+g+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(h(w(a,c))-h(A&&A[0]||0))||1)});p.copy();U=h.copy()});P.renderEnd("discreteBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=Math.floor(1E4*Math.random()),n,p=d3.scale.ordinal(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},H=[0],B=c.utils.defaultColor(),
C=!1,D=d3.format(",.2f"),E,A,L,O,I=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v="discreteBar",F=250,U,P=c.utils.renderWatch(I,F);a.dispatch=I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},forceY:{get:function(){return H},set:function(a){H=a}},showValues:{get:function(){return C},set:function(a){C=
a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return E},set:function(a){E=a}},yDomain:{get:function(){return A},set:function(a){A=a}},xRange:{get:function(){return L},set:function(a){L=a}},yRange:{get:function(){return O},set:function(a){O=a}},valueFormat:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return l},
set:function(a){l=a}},rectClass:{get:function(){return v},set:function(a){v=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a)}},duration:{get:function(){return F},set:function(a){F=a;P.reset(F)}}});c.utils.initOptions(a);return a};c.models.discreteBarChart=function(){function a(l){I.reset();
I.models(e);w&&I.models(g);H&&I.models(t);l.each(function(l){var v=d3.select(this);c.utils.initSVG(v);var u=c.utils.availableWidth(p,v,n),F=c.utils.availableHeight(h,v,n);a.update=function(){L.beforeUpdate();v.transition().duration(O).call(a)};a.container=this;if(l&&l.length&&l.filter(function(a){return a.values.length}).length)v.selectAll(".nv-noData").remove();else return c.utils.noData(a,v),a;D=e.xScale();E=e.yScale().clamp(!0);var A=v.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),r=
A.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),K=r.append("defs"),A=A.select("g");r.append("g").attr("class","nv-x nv-axis");r.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");r.append("g").attr("class","nv-barsWrap");A.attr("transform","translate("+n.left+","+n.top+")");B&&A.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)");e.width(u).height(F);A.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(e);
K.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");A.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",D.rangeBand()*(C?2:1)).attr("height",16).attr("x",-D.rangeBand()/(C?1:2));w&&(g.scale(D)._ticks(c.utils.calcTicksX(u/100,l)).tickSize(-F,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+(E.range()[0]+(e.showValues()&&0>E.domain()[0]?16:0))+")"),A.select(".nv-x.nv-axis").call(g),r=A.select(".nv-x.nv-axis").selectAll("g"),C&&r.selectAll("text").attr("transform",
function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));H&&(t.scale(E)._ticks(c.utils.calcTicksY(F/36,l)).tickSize(-u,0),A.select(".nv-y.nv-axis").call(t));A.select(".nv-zeroLine line").attr("x1",0).attr("x2",u).attr("y1",E(0)).attr("y2",E(0))});I.renderEnd("discreteBar chart immediate");return a}var e=c.models.discreteBar(),g=c.models.axis(),t=c.models.axis(),l=c.models.tooltip(),n={top:15,right:10,bottom:50,left:60},p=null,h=null,u=c.utils.getColor(),w=!0,H=!0,B=!1,C=!1,D,E,A=null,L=d3.dispatch("beforeUpdate",
"renderEnd"),O=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});t.orient(B?"right":"left").tickFormat(d3.format(",.1f"));l.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return t.tickFormat()(a,c)}).keyFormatter(function(a,c){return g.tickFormat()(a,c)});var I=c.utils.renderWatch(L,O);e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};l.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});
e.dispatch.on("elementMousemove.tooltip",function(a){l.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=L;a.discretebar=e;a.xAxis=g;a.yAxis=t;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return h},set:function(a){h=a}},staggerLabels:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return w},set:function(a){w=a}},showYAxis:{get:function(){return H},
set:function(a){H=a}},noData:{get:function(){return A},set:function(a){A=a}},tooltips:{get:function(){return l.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!a)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(a)}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?
a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},duration:{get:function(){return O},set:function(a){O=a;I.reset(O);e.duration(O);g.duration(O);t.duration(O)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);e.color(u)}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;t.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.distribution=function(){function a(g){B.reset();
g.each(function(a){var g="x"==l?"y":"x",u=d3.select(this);c.utils.initSVG(u);H=H||h;a=u.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");u=a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");a=u.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return p(a,c)});u=a.selectAll("line.nv-dist"+
l).data(function(a){return a.values});u.enter().append("line").attr(l+"1",function(a,c){return H(n(a,c))}).attr(l+"2",function(a,c){return H(n(a,c))});B.transition(a.exit().selectAll("line.nv-dist"+l),"dist exit").attr(l+"1",function(a,c){return h(n(a,c))}).attr(l+"2",function(a,c){return h(n(a,c))}).style("stroke-opacity",0).remove();u.attr("class",function(a,c){return"nv-dist"+l+" nv-dist"+l+"-"+c}).attr(g+"1",0).attr(g+"2",t);B.transition(u,"dist").attr(l+"1",function(a,c){return h(n(a,c))}).attr(l+
"2",function(a,c){return h(n(a,c))});H=h.copy()});B.renderEnd("distribution immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=400,t=8,l="x",n=function(a){return a[l]},p=c.utils.defaultColor(),h=d3.scale.linear(),u=250,w=d3.dispatch("renderEnd"),H,B=c.utils.renderWatch(w,u);a.options=c.utils.optionsFunc.bind(a);a.dispatch=w;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:e.top;e.right="undefined"!=typeof c.right?c.right:e.right;e.bottom="undefined"!=
typeof c.bottom?c.bottom:e.bottom;e.left="undefined"!=typeof c.left?c.left:e.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.axis=function(c){if(!arguments.length)return l;l=c;return a};a.size=function(c){if(!arguments.length)return t;t=c;return a};a.getData=function(c){if(!arguments.length)return n;n=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return h;h=c;return a};a.color=function(e){if(!arguments.length)return p;p=c.utils.getColor(e);return a};
a.duration=function(c){if(!arguments.length)return u;u=c;B.reset(u);return a};return a};c.models.furiousLegend=function(){function a(E){function A(a,c){if("furious"!=D)return"#000";if(B)return a.disengaged?n(a,c):"#fff";if(!B)return a.disabled?n(a,c):"#fff"}function L(a,c){return B&&"furious"==D?a.disengaged?"#fff":n(a,c):a.disabled?"#fff":n(a,c)}E.each(function(a){var E=g-e.left-e.right,v=d3.select(this);c.utils.initSVG(v);v=v.selectAll("g.nv-legend").data([a]);v.enter().append("g").attr("class",
"nvd3 nv-legend").append("g");a=v.select("g");v.attr("transform","translate("+e.left+","+e.top+")");var F=a.selectAll(".nv-series").data(function(a){return"furious"!=D?a:a.filter(function(a){return B?!0:!a.disengaged})}),v=F.enter().append("g").attr("class","nv-series");if("classic"==D){v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var O=F.select("circle")}else"furious"==D&&(v.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",
3).attr("ry",3),O=F.select("rect"),v.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),F.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",A(a,c))}));v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",
".32em").attr("dx","8");var P=F.select("text.nv-legend-text");F.on("mouseover",function(a,c){C.legendMouseover(a,c)}).on("mouseout",function(a,c){C.legendMouseout(a,c)}).on("click",function(a,c){C.legendClick(a,c);var e=F.data();w&&("classic"==D?H?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==D&&(B?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:
a.userDisabled,a.disabled=a.disengaged||a.userDisabled):B||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),C.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=D||!B)if(C.legendDblclick(a,c),w){var e=F.data();e.forEach(function(a){a.disabled=!0;"furious"==
D&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==D&&(a.userDisabled=a.disabled);C.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});F.classed("nv-disabled",function(a){return a.userDisabled});F.exit().remove();P.attr("fill",A).text(l);switch(D){case "furious":var R=23;break;case "classic":R=20}if(p){var M=[];F.each(function(a,e){var g=d3.select(this).select("text");try{var l=g.node().getComputedTextLength();if(0>=l)throw Error();}catch(la){l=c.utils.calcApproxTextWidth(g)}M.push(l+
h)});for(var r=0,K=0,v=[];K<E&&r<M.length;)v[r]=M[r],K+=M[r++];for(0===r&&(r=1);K>E&&1<r;){v=[];r--;for(K=0;K<M.length;K++)M[K]>(v[K%r]||0)&&(v[K%r]=M[K]);K=v.reduce(function(a,c,e,g){return a+c})}for(var Q=[],J=E=0;E<r;E++)Q[E]=J,J+=v[E];F.attr("transform",function(a,c){return"translate("+Q[c%r]+","+(5+Math.floor(c/r)*R)+")"});u?a.attr("transform","translate("+(g-e.right-K)+","+e.top+")"):a.attr("transform","translate(0,"+e.top+")");t=e.top+e.bottom+Math.ceil(M.length/r)*R}else{var q=5,N=5,x=0,Z;
F.attr("transform",function(a,c){var l=d3.select(this).select("text").node().getComputedTextLength()+h;Z=N;g<e.left+e.right+Z+l&&(N=Z=5,q+=R);N+=l;N>x&&(x=N);return"translate("+Z+","+q+")"});a.attr("transform","translate("+(g-e.right-x)+","+e.top+")");t=e.top+e.bottom+q+15}"furious"==D&&O.attr("width",function(a,c){return P[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);O.style("fill",L).style("stroke",function(a,c){return a.color||n(a,c)})});return a}var e={top:5,
right:0,bottom:5,left:0},g=400,t=20,l=function(a){return a.key},n=c.utils.getColor(),p=!0,h=28,u=!0,w=!0,H=!1,B=!1,C=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),D="classic";a.dispatch=C;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},key:{get:function(){return l},set:function(a){l=a}},align:{get:function(){return p},set:function(a){p=
a}},rightAlign:{get:function(){return u},set:function(a){u=a}},padding:{get:function(){return h},set:function(a){h=a}},updateState:{get:function(){return w},set:function(a){w=a}},radioButtonMode:{get:function(){return H},set:function(a){H=a}},expanded:{get:function(){return B},set:function(a){B=a}},vers:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?
a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBar=function(){function a(P){P.each(function(a){U.reset();n=d3.select(this);var P=c.utils.availableWidth(g,n,e),r=c.utils.availableHeight(t,n,e);c.utils.initSVG(n);p.domain(A||d3.extent(a[0].values.map(u).concat(H)));C?p.range(O||[.5*P/a[0].values.length,P*(a[0].values.length-.5)/a[0].values.length]):p.range(O||[0,P]);
h.domain(L||d3.extent(a[0].values.map(w).concat(B))).range(I||[r,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var K=n.selectAll("g.nv-wrap.nv-historicalBar-"+l).data([a[0].values]),Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+l),J=Q.append("defs"),
Q=Q.append("g"),q=K.select("g");Q.append("g").attr("class","nv-bars");K.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){v.chartClick({data:a,index:c,pos:d3.event,id:l})});J.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");K.select("#nv-chart-clip-path-"+l+" rect").attr("width",P).attr("height",r);q.attr("clip-path",D?"url(#nv-chart-clip-path-"+l+")":"");r=K.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,c){return u(a,
c)});r.exit().remove();r.enter().append("rect").attr("x",0).attr("y",function(a,e){return c.utils.NaNtoZero(h(Math.max(0,w(a,e))))}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.abs(h(w(a,e))-h(0)))}).attr("transform",function(c,e){return"translate("+(p(u(c,e))-P/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){F&&(d3.select(this).classed("hover",!0),v.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,c){F&&(d3.select(this).classed("hover",
!1),v.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){F&&v.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){F&&(v.elementClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(a,c){F&&(v.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});r.attr("fill",function(a,c){return E(a,c)}).attr("class",
function(a,c,e){return(0>w(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(U,"bars").attr("transform",function(c,e){return"translate("+(p(u(c,e))-P/a[0].values.length*.45)+",0)"}).attr("width",P/a[0].values.length*.9);r.watchTransition(U,"bars").attr("y",function(a,e){var g=0>w(a,e)?h(0):1>h(0)-h(w(a,e))?h(0)-1:h(w(a,e));return c.utils.NaNtoZero(g)}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.max(Math.abs(h(w(a,e))-h(0)),1))})});U.renderEnd("historicalBar immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l=Math.floor(1E4*Math.random()),n=null,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},H=[],B=[0],C=!1,D=!0,E=c.utils.defaultColor(),A,L,O,I,v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=!0,U=c.utils.renderWatch(v,0);a.highlightPoint=function(a,c){n.select(".nv-bars .nv-bar-0-"+a).classed("hover",c)};a.clearHighlights=
function(){n.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=v;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},forceX:{get:function(){return H},set:function(a){H=a}},forceY:{get:function(){return B},set:function(a){B=a}},padData:{get:function(){return C},set:function(a){C=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=
a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return A},set:function(a){A=a}},yDomain:{get:function(){return L},set:function(a){L=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return I},set:function(a){I=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return F},set:function(a){F=a}},
margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBarChart=function(a){function e(a){a.each(function(h){M.reset();M.models(g);D&&M.models(t);E&&M.models(l);var r=d3.select(this),J=this;c.utils.initSVG(r);var q=c.utils.availableWidth(H,
r,u),N=c.utils.availableHeight(B,r,u);e.update=function(){r.transition().duration(R).call(e)};e.container=this;v.disabled=h.map(function(a){return!!a.disabled});if(!F)for(K in F={},v)F[K]=v[K]instanceof Array?v[K].slice(0):v[K];if(h&&h.length&&h.filter(function(a){return a.values.length}).length)r.selectAll(".nv-noData").remove();else return c.utils.noData(e,r),e;O=g.xScale();I=g.yScale();var x=r.selectAll("g.nv-wrap.nv-historicalBarChart").data([h]);var K=x.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var aa=x.select("g");K.append("g").attr("class","nv-x nv-axis");K.append("g").attr("class","nv-y nv-axis");K.append("g").attr("class","nv-barsWrap");K.append("g").attr("class","nv-legendWrap");K.append("g").attr("class","nv-interactive");C&&(n.width(q),aa.select(".nv-legendWrap").datum(h).call(n),u.top!=n.height()&&(u.top=n.height(),N=c.utils.availableHeight(B,r,u)),x.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));x.attr("transform","translate("+u.left+","+u.top+")");A&&aa.select(".nv-y.nv-axis").attr("transform",
"translate("+q+",0)");L&&(p.width(q).height(N).margin({left:u.left,top:u.top}).svgContainer(r).xScale(O),x.select(".nv-interactive").call(p));g.width(q).height(N).color(h.map(function(a,c){return a.color||w(a,c)}).filter(function(a,c){return!h[c].disabled}));aa.select(".nv-barsWrap").datum(h.filter(function(a){return!a.disabled})).transition().call(g);D&&(t.scale(O)._ticks(c.utils.calcTicksX(q/100,h)).tickSize(-N,0),aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")"),aa.select(".nv-x.nv-axis").transition().call(t));
E&&(l.scale(I)._ticks(c.utils.calcTicksY(N/36,h)).tickSize(-q,0),aa.select(".nv-y.nv-axis").transition().call(l));p.dispatch.on("elementMousemove",function(a){g.clearHighlights();var q,n,r,x=[];h.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){n=c.interactiveBisect(h.values,a.pointXValue,e.x());g.highlightPoint(n,!0);var p=h.values[n];void 0!==p&&(void 0===q&&(q=p),void 0===r&&(r=e.xScale()(e.x()(p,n))),x.push({key:h.key,value:e.y()(p,n),color:w(h,h.seriesIndex),data:h.values[n]}))});
var v=t.tickFormat()(e.x()(q,n));p.tooltip.position({left:r+u.left,top:a.mouseY+u.top}).chartContainer(J.parentNode).valueFormatter(function(a,c){return l.tickFormat()(a)}).data({value:v,index:n,series:x})();p.renderGuideLine(r)});p.dispatch.on("elementMouseout",function(a){P.tooltipHide();g.clearHighlights()});n.dispatch.on("legendClick",function(c,g){c.disabled=!c.disabled;h.filter(function(a){return!a.disabled}).length||h.map(function(a){a.disabled=!1;x.selectAll(".nv-series").classed("disabled",
!1);return a});v.disabled=h.map(function(a){return!!a.disabled});P.stateChange(v);a.transition().call(e)});n.dispatch.on("legendDblclick",function(a){h.forEach(function(a){a.disabled=!0});a.disabled=!1;v.disabled=h.map(function(a){return!!a.disabled});P.stateChange(v);e.update()});P.on("changeState",function(a){"undefined"!==typeof a.disabled&&(h.forEach(function(c,e){c.disabled=a.disabled[e]}),v.disabled=a.disabled);e.update()})});M.renderEnd("historicalBarChart immediate");return e}var g=a||c.models.historicalBar(),
t=c.models.axis(),l=c.models.axis(),n=c.models.legend(),p=c.interactiveGuideline(),h=c.models.tooltip(),u={top:30,right:90,bottom:50,left:90},w=c.utils.defaultColor(),H=null,B=null,C=!1,D=!0,E=!0,A=!1,L=!1,O,I,v={},F=null,U=null,P=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),R=250;t.orient("bottom").tickPadding(7);l.orient(A?"right":"left");h.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return t.tickFormat()(a,
c)});var M=c.utils.renderWatch(P,0);g.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:e.x()(a.data),value:e.y()(a.data),color:a.color};h.data(a).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0)});g.dispatch.on("elementMousemove.tooltip",function(a){h.position({top:d3.event.pageY,left:d3.event.pageX})()});e.dispatch=P;e.bars=g;e.legend=n;e.xAxis=t;e.yAxis=l;e.interactiveLayer=p;e.tooltip=h;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},
{width:{get:function(){return H},set:function(a){H=a}},height:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},defaultState:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return U},set:function(a){U=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");
h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},color:{get:function(){return w},set:function(a){w=c.utils.getColor(a);n.color(w);g.color(w)}},duration:{get:function(){return R},
set:function(a){R=a;M.reset(R);l.duration(R);t.duration(R)}},rightAlignYAxis:{get:function(){return A},set:function(a){A=a;l.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return L},set:function(a){L=a;!0===a&&e.interactive(!1)}}});c.utils.inheritOptions(e,g);c.utils.initOptions(e);return e};c.models.ohlcBarChart=function(){var a=c.models.historicalBarChart(c.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;
return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.candlestickBarChart=function(){var a=c.models.historicalBarChart(c.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=
c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.legend=function(){function a(E){function A(a,c){if("furious"!=D)return"#000";if(B)return a.disengaged?"#000":
"#fff";if(!B)return a.color||(a.color=n(a,c)),a.disabled?a.color:"#fff"}function L(a,c){return B&&"furious"==D?a.disengaged?"#eee":a.color||n(a,c):a.color||n(a,c)}function O(a,c){return B&&"furious"==D?1:a.disabled?0:1}E.each(function(a){var n=g-e.left-e.right,F=d3.select(this);c.utils.initSVG(F);var E=F.selectAll("g.nv-legend").data([a]);a=E.enter().append("g").attr("class","nvd3 nv-legend").append("g");F=E.select("g");E.attr("transform","translate("+e.left+","+e.top+")");var I=F.selectAll(".nv-series").data(function(a){return"furious"!=
D?a:a.filter(function(a){return B?!0:!a.disengaged})}),E=I.enter().append("g").attr("class","nv-series");switch(D){case "furious":var R=23;break;case "classic":R=20}if("classic"==D){E.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var M=I.select("circle")}else"furious"==D&&(E.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),M=I.select(".nv-legend-symbol"),E.append("g").attr("class","nv-check-box").property("innerHTML",
'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),I.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",A(a,c))}));E.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var r=I.select("text.nv-legend-text");I.on("mouseover",function(a,c){C.legendMouseover(a,
c)}).on("mouseout",function(a,c){C.legendMouseout(a,c)}).on("click",function(a,c){C.legendClick(a,c);var e=I.data();w&&("classic"==D?H?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==D&&(B?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):B||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&
e.forEach(function(a){a.disabled=a.userDisabled=!1}))),C.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=D||!B)if(C.legendDblclick(a,c),w){var e=I.data();e.forEach(function(a){a.disabled=!0;"furious"==D&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==D&&(a.userDisabled=a.disabled);C.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});I.classed("nv-disabled",function(a){return a.userDisabled});
I.exit().remove();r.attr("fill",A).text(l);var K=0;if(p){var Q=[];I.each(function(a,e){var g=d3.select(this).select("text");try{var l=g.node().getComputedTextLength();if(0>=l)throw Error();}catch(ta){l=c.utils.calcApproxTextWidth(g)}Q.push(l+h)});for(var J=0,E=[],K=0;K<n&&J<Q.length;)E[J]=Q[J],K+=Q[J++];for(0===J&&(J=1);K>n&&1<J;){E=[];J--;for(var q=0;q<Q.length;q++)Q[q]>(E[q%J]||0)&&(E[q%J]=Q[q]);K=E.reduce(function(a,c,e,g){return a+c})}for(var N=[],q=n=0;n<J;n++)N[n]=q,q+=E[n];I.attr("transform",
function(a,c){return"translate("+N[c%J]+","+(5+Math.floor(c/J)*R)+")"});u?F.attr("transform","translate("+(g-e.right-K)+","+e.top+")"):F.attr("transform","translate(0,"+e.top+")");t=e.top+e.bottom+Math.ceil(Q.length/J)*R}else{var x=5,Z=5,aa=0,G;I.attr("transform",function(a,c){var l=d3.select(this).select("text").node().getComputedTextLength()+h;G=Z;g<e.left+e.right+G+l&&(Z=G=5,x+=R);Z+=l;Z>aa&&(aa=Z);K<G+aa&&(K=G+aa);return"translate("+G+","+x+")"});F.attr("transform","translate("+(g-e.right-aa)+
","+e.top+")");t=e.top+e.bottom+x+15}"furious"==D&&(M.attr("width",function(a,c){return r[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),F.select(".nv-legend-bg").transition().duration(300).attr("x",-R).attr("width",K+R-12).attr("height",t+10).attr("y",-e.top-10).attr("opacity",B?1:0));M.style("fill",L).style("fill-opacity",O).style("stroke",L)});return a}var e={top:5,
right:0,bottom:5,left:0},g=400,t=20,l=function(a){return a.key},n=c.utils.getColor(),p=!0,h=32,u=!0,w=!0,H=!1,B=!1,C=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),D="classic";a.dispatch=C;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},key:{get:function(){return l},set:function(a){l=a}},align:{get:function(){return p},set:function(a){p=
a}},rightAlign:{get:function(){return u},set:function(a){u=a}},padding:{get:function(){return h},set:function(a){h=a}},updateState:{get:function(){return w},set:function(a){w=a}},radioButtonMode:{get:function(){return H},set:function(a){H=a}},expanded:{get:function(){return B},set:function(a){B=a}},vers:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?
a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.line=function(){function a(A){v.reset();v.models(e);A.each(function(a){n=d3.select(this);var A=c.utils.availableWidth(t,n,g),F=c.utils.availableHeight(l,n,g);c.utils.initSVG(n);C=e.xScale();D=e.yScale();O=O||C;I=I||D;a=n.selectAll("g.nv-wrap.nv-line").data([a]);var L=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),r=
L.append("defs"),K=L.append("g"),L=a.select("g");K.append("g").attr("class","nv-groups");K.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+g.left+","+g.top+")");e.width(A).height(F);K=a.select(".nv-scatterWrap");K.call(e);r.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect");a.select("#nv-edge-clip-"+e.id()+" rect").attr("width",A).attr("height",0<F?F:0);L.attr("clip-path",B?"url(#nv-edge-clip-"+e.id()+")":"");K.attr("clip-path",B?"url(#nv-edge-clip-"+e.id()+
")":"");A=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});A.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);A.exit().remove();A.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return p(a,c)}).style("stroke",function(a,c){return p(a,c)});A.watchTransition(v,"line: groups").style("stroke-opacity",
1).style("fill-opacity",function(a){return a.fillOpacity||.5});F=A.selectAll("path.nv-area").data(function(a){return H(a)?[a]:[]});F.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(E).defined(w).x(function(a,e){return c.utils.NaNtoZero(O(h(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(I(u(a,e)))}).y1(function(a,c){return I(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});A.exit().selectAll("path.nv-area").remove();
F.watchTransition(v,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(E).defined(w).x(function(a,e){return c.utils.NaNtoZero(C(h(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(D(u(a,e)))}).y1(function(a,c){return D(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});A=A.selectAll("path.nv-line").data(function(a){return[a.values]});A.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(E).defined(w).x(function(a,
e){return c.utils.NaNtoZero(O(h(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(I(u(a,e)))}));A.watchTransition(v,"line: linePaths").attr("d",d3.svg.line().interpolate(E).defined(w).x(function(a,e){return c.utils.NaNtoZero(C(h(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(D(u(a,e)))}));O=C.copy();I=D.copy()});v.renderEnd("line immediate");return a}var e=c.models.scatter(),g={top:0,right:0,bottom:0,left:0},t=960,l=500,n=null,p=c.utils.defaultColor(),h=function(a){return a.x},u=function(a){return a.y},
w=function(a,c){return!isNaN(u(a,c))&&null!==u(a,c)},H=function(a){return a.area},B=!1,C,D,E="linear",A=250,L=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");e.pointSize(16).pointDomain([16,256]);var O,I,v=c.utils.renderWatch(L,A);a.dispatch=L;a.scatter=e;e.dispatch.on("elementClick",function(){L.elementClick.apply(this,arguments)});e.dispatch.on("elementMouseover",function(){L.elementMouseover.apply(this,arguments)});e.dispatch.on("elementMouseout",function(){L.elementMouseout.apply(this,
arguments)});a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return l},set:function(a){l=a}},defined:{get:function(){return w},set:function(a){w=a}},interpolate:{get:function(){return E},set:function(a){E=a}},clipEdge:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==
a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}},duration:{get:function(){return A},set:function(a){A=a;v.reset(A);e.duration(A)}},isArea:{get:function(){return H},set:function(a){H=d3.functor(a)}},x:{get:function(){return h},set:function(a){h=a;e.x(a)}},y:{get:function(){return u},set:function(a){u=a;e.y(a)}},color:{get:function(){return p},set:function(a){p=c.utils.getColor(a);e.color(p)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineChart=function(){function a(p){R.reset();
R.models(e);C&&R.models(g);D&&R.models(t);p.each(function(p){var J=d3.select(this),q=this;c.utils.initSVG(J);var F=c.utils.availableWidth(w,J,h),x=c.utils.availableHeight(H,J,h);a.update=function(){0===P?J.call(a):J.transition().duration(P).call(a)};a.container=this;I.setter(r(p),a.update).getter(M(p)).update();I.disabled=p.map(function(a){return!!a.disabled});if(!v)for(K in v={},I)v[K]=I[K]instanceof Array?I[K].slice(0):I[K];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();
else return c.utils.noData(a,J),a;L=e.xScale();O=e.yScale();var K=J.selectAll("g.nv-wrap.nv-lineChart").data([p]);var aa=K.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),G=K.select("g");aa.append("rect").style("opacity",0);aa.append("g").attr("class","nv-x nv-axis");aa.append("g").attr("class","nv-y nv-axis");aa.append("g").attr("class","nv-linesWrap");aa.append("g").attr("class","nv-legendWrap");aa.append("g").attr("class","nv-interactive");G.select("rect").attr("width",
F).attr("height",0<x?x:0);B&&(l.width(F),G.select(".nv-legendWrap").datum(p).call(l),h.top!=l.height()&&(h.top=l.height(),x=c.utils.availableHeight(H,J,h)),K.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")"));K.attr("transform","translate("+h.left+","+h.top+")");E&&G.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)");A&&(n.width(F).height(x).margin({left:h.left,top:h.top}).svgContainer(J).xScale(L),K.select(".nv-interactive").call(n));e.width(F).height(x).color(p.map(function(a,
c){return a.color||u(a,c)}).filter(function(a,c){return!p[c].disabled}));G.select(".nv-linesWrap").datum(p.filter(function(a){return!a.disabled})).call(e);C&&(g.scale(L)._ticks(c.utils.calcTicksX(F/100,p)).tickSize(-x,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")"),G.select(".nv-x.nv-axis").call(g));D&&(t.scale(O)._ticks(c.utils.calcTicksY(x/36,p)).tickSize(-F,0),G.select(".nv-y.nv-axis").call(t));l.dispatch.on("stateChange",function(c){for(var e in c)I[e]=c[e];U.stateChange(I);
a.update()});n.dispatch.on("elementMousemove",function(l){e.clearHighlights();var r,x,v,G=[];p.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,h){x=c.interactiveBisect(g.values,l.pointXValue,a.x());var q=g.values[x],n=a.y()(q,x);null!=n&&e.highlightPoint(h,x,!0);void 0!==q&&(void 0===r&&(r=q),void 0===v&&(v=a.xScale()(a.x()(q,x))),G.push({key:g.key,value:n,color:u(g,g.seriesIndex)}))});if(2<G.length){var J=a.yScale().invert(l.mouseY),w=.03*Math.abs(a.yScale().domain()[0]-
a.yScale().domain()[1]),J=c.nearestValueIndex(G.map(function(a){return a.value}),J,w);null!==J&&(G[J].highlight=!0)}J=g.tickFormat()(a.x()(r,x));n.tooltip.position({left:l.mouseX+h.left,top:l.mouseY+h.top}).chartContainer(q.parentNode).valueFormatter(function(a,c){return null==a?"N/A":t.tickFormat()(a)}).data({value:J,index:x,series:G})();n.renderGuideLine(v)});n.dispatch.on("elementClick",function(g){var h,l=[];p.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(e){var q=
c.interactiveBisect(e.values,g.pointXValue,a.x()),n=e.values[q];if("undefined"!==typeof n){"undefined"===typeof h&&(h=a.xScale()(a.x()(n,q)));var p=a.yScale()(a.y()(n,q));l.push({point:n,pointIndex:q,pos:[h,p],seriesIndex:e.seriesIndex,series:e})}});e.dispatch.elementClick(l)});n.dispatch.on("elementMouseout",function(a){e.clearHighlights()});U.on("changeState",function(c){"undefined"!==typeof c.disabled&&p.length===c.disabled.length&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),I.disabled=
c.disabled);a.update()})});R.renderEnd("lineChart immediate");return a}var e=c.models.line(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend(),n=c.interactiveGuideline(),p=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=c.utils.defaultColor(),w=null,H=null,B=!0,C=!0,D=!0,E=!1,A=!1,L,O,I=c.utils.state(),v=null,F=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),P=250;g.orient("bottom").tickPadding(7);t.orient(E?"right":"left");p.valueFormatter(function(a,
c){return t.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});var R=c.utils.renderWatch(U,P),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},r=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){p.data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});a.dispatch=U;a.lines=e;a.legend=
l;a.xAxis=g;a.yAxis=t;a.interactiveLayer=n;a.tooltip=p;a.dispatch=U;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return H},set:function(a){H=a}},showLegend:{get:function(){return B},set:function(a){B=a}},showXAxis:{get:function(){return C},set:function(a){C=a}},showYAxis:{get:function(){return D},set:function(a){D=a}},defaultState:{get:function(){return v},set:function(a){v=a}},noData:{get:function(){return F},
set:function(a){F=a}},tooltips:{get:function(){return p.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");p.enabled(!!a)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");p.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;
h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return P},set:function(a){P=a;R.reset(P);e.duration(P);g.duration(P);t.duration(P)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);l.color(u);e.color(u)}},rightAlignYAxis:{get:function(){return E},set:function(a){E=a;t.orient(E?"right":"left")}},useInteractiveGuideline:{get:function(){return A},set:function(a){if(A=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};
c.models.linePlusBarChart=function(){function a(G){G.each(function(G){function D(){C.empty()||C.extent(Q);Db.data([C.empty()?q.domain():Q]).each(function(a,c){var e=q(a[0])-q.range()[0],g=q.range()[1]-q(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",q(a[1])).attr("width",0>g?0:g)})}function ga(){Q=C.empty()?null:C.extent();K=C.empty()?q.domain():C.extent();S.brush({extent:K,brush:C});D();t.width(na).height(Ia).color(G.map(function(a,c){return a.color||
F(a,c)}).filter(function(a,c){return!G[c].disabled&&G[c].bar}));e.width(na).height(Ia).color(G.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!G[c].disabled&&!G[c].bar}));var a=ua.select(".nv-focus .nv-barsWrap").datum(Ca.length?Ca.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return t.x()(a,c)>=K[0]&&t.x()(a,c)<=K[1]})}}):[{values:[]}]),g=ua.select(".nv-focus .nv-linesWrap").datum(Ba[0].disabled?[{values:[]}]:Ba.map(function(a,c){return{area:a.area,
fillOpacity:a.fillOpacity,key:a.key,values:a.values.filter(function(a,c){return e.x()(a,c)>=K[0]&&e.x()(a,c)<=K[1]})}}));J=Ca.length?t.xScale():e.xScale();n.scale(J)._ticks(c.utils.calcTicksX(na/100,G)).tickSize(-Ia,0);n.domain([Math.ceil(K[0]),Math.floor(K[1])]);ua.select(".nv-x.nv-axis").transition().duration(W).call(n);a.transition().duration(W).call(t);g.transition().duration(W).call(e);ua.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");h.scale(N)._ticks(c.utils.calcTicksY(Ia/
36,G)).tickSize(-na,0);u.scale(x)._ticks(c.utils.calcTicksY(Ia/36,G)).tickSize(Ca.length?0:-na,0);ua.select(".nv-focus .nv-y1.nv-axis").style("opacity",Ca.length?1:0);ua.select(".nv-focus .nv-y2.nv-axis").style("opacity",Ba.length&&!Ba[0].disabled?1:0).attr("transform","translate("+J.range()[1]+",0)");ua.select(".nv-focus .nv-y1.nv-axis").transition().duration(W).call(h);ua.select(".nv-focus .nv-y2.nv-axis").transition().duration(W).call(u)}var oa=d3.select(this);c.utils.initSVG(oa);var na=c.utils.availableWidth(L,
oa,E),Ia=c.utils.availableHeight(O,oa,E)-(P?r:0),Ja=r-A.top-A.bottom;a.update=function(){oa.transition().duration(W).call(a)};a.container=this;la.setter(ia(G),a.update).getter(fa(G)).update();la.disabled=G.map(function(a){return!!a.disabled});if(!da)for(ya in da={},la)da[ya]=la[ya]instanceof Array?la[ya].slice(0):la[ya];if(G&&G.length&&G.filter(function(a){return a.values.length}).length)oa.selectAll(".nv-noData").remove();else return c.utils.noData(a,oa),a;var Ca=G.filter(function(a){return!a.disabled&&
a.bar}),Ba=G.filter(function(a){return!a.bar});J=t.xScale();q=p.scale();N=t.yScale();x=e.yScale();Z=l.yScale();aa=g.yScale();var ya=G.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:v(a,c)}})});var ra=G.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:v(a,c)}})});J.range([0,na]);q.domain(d3.extent(d3.merge(ya.concat(ra)),function(a){return a.x})).range([0,na]);ya=oa.selectAll("g.nv-wrap.nv-linePlusBar").data([G]);
var ra=ya.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ua=ya.select("g");ra.append("g").attr("class","nv-legendWrap");var Da=ra.append("g").attr("class","nv-focus");Da.append("g").attr("class","nv-x nv-axis");Da.append("g").attr("class","nv-y1 nv-axis");Da.append("g").attr("class","nv-y2 nv-axis");Da.append("g").attr("class","nv-barsWrap");Da.append("g").attr("class","nv-linesWrap");ra=ra.append("g").attr("class","nv-context");ra.append("g").attr("class","nv-x nv-axis");
ra.append("g").attr("class","nv-y1 nv-axis");ra.append("g").attr("class","nv-y2 nv-axis");ra.append("g").attr("class","nv-barsWrap");ra.append("g").attr("class","nv-linesWrap");ra.append("g").attr("class","nv-brushBackground");ra.append("g").attr("class","nv-x nv-brush");U&&(ra=B.align()?na/2:na,Da=B.align()?ra:0,B.width(ra),ua.select(".nv-legendWrap").datum(G.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?ta:ka);return a})).call(B),E.top!=B.height()&&
(E.top=B.height(),Ia=c.utils.availableHeight(O,oa,E)-r),ua.select(".nv-legendWrap").attr("transform","translate("+Da+","+-E.top+")"));ya.attr("transform","translate("+E.left+","+E.top+")");ua.select(".nv-context").style("display",P?"initial":"none");l.width(na).height(Ja).color(G.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!G[c].disabled&&G[c].bar}));g.width(na).height(Ja).color(G.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!G[c].disabled&&!G[c].bar}));
ya=ua.select(".nv-context .nv-barsWrap").datum(Ca.length?Ca:[{values:[]}]);ra=ua.select(".nv-context .nv-linesWrap").datum(Ba[0].disabled?[{values:[]}]:Ba);ua.select(".nv-context").attr("transform","translate(0,"+(Ia+E.bottom+A.top)+")");ya.transition().call(l);ra.transition().call(g);M&&(p._ticks(c.utils.calcTicksX(na/100,G)).tickSize(-Ja,0),ua.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+Z.range()[0]+")"),ua.select(".nv-context .nv-x.nv-axis").transition().call(p));R&&(w.scale(Z)._ticks(Ja/
36).tickSize(-na,0),H.scale(aa)._ticks(Ja/36).tickSize(Ca.length?0:-na,0),ua.select(".nv-context .nv-y3.nv-axis").style("opacity",Ca.length?1:0).attr("transform","translate(0,"+q.range()[0]+")"),ua.select(".nv-context .nv-y2.nv-axis").style("opacity",Ba.length?1:0).attr("transform","translate("+q.range()[1]+",0)"),ua.select(".nv-context .nv-y1.nv-axis").transition().call(w),ua.select(".nv-context .nv-y2.nv-axis").transition().call(H));C.x(q).on("brush",ga);Q&&C.extent(Q);var Db=ua.select(".nv-brushBackground").selectAll("g").data([Q||
C.extent()]);ya=Db.enter().append("g");ya.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Ja);ya.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Ja);ya=ua.select(".nv-x.nv-brush").call(C);ya.selectAll("rect").attr("height",Ja);ya.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=Ja/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+
"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});B.dispatch.on("stateChange",function(c){for(var e in c)la[e]=c[e];S.stateChange(la);a.update()});S.on("changeState",function(c){"undefined"!==typeof c.disabled&&(G.forEach(function(a,e){a.disabled=c.disabled[e]}),la.disabled=c.disabled);a.update()});ga()});return a}var e=c.models.line(),g=c.models.line(),t=c.models.historicalBar(),l=c.models.historicalBar(),n=c.models.axis(),p=c.models.axis(),h=c.models.axis(),u=c.models.axis(),w=c.models.axis(),H=c.models.axis(),
B=c.models.legend(),C=d3.svg.brush(),D=c.models.tooltip(),E={top:30,right:30,bottom:30,left:60},A={top:0,right:30,bottom:20,left:60},L=null,O=null,I=function(a){return a.x},v=function(a){return a.y},F=c.utils.defaultColor(),U=!0,P=!0,R=!1,M=!0,r=50,K,Q=null,J,q,N,x,Z,aa,G=null,S=d3.dispatch("brush","stateChange","changeState"),W=0,la=c.utils.state(),da=null,ta=" (left axis)",ka=" (right axis)";e.clipEdge(!0);g.interactive(!1);n.orient("bottom").tickPadding(5);h.orient("left");u.orient("right");p.orient("bottom").tickPadding(5);
w.orient("left");H.orient("right");D.headerEnabled(!0).headerFormatter(function(a,c){return n.tickFormat()(a,c)});var fa=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},ia=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){D.duration(100).valueFormatter(function(a,c){return u.tickFormat()(a,c)}).data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",
function(a){D.hidden(!0)});t.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};D.duration(0).valueFormatter(function(a,c){return h.tickFormat()(a,c)}).data(c).hidden(!1)});t.dispatch.on("elementMouseout.tooltip",function(a){D.hidden(!0)});t.dispatch.on("elementMousemove.tooltip",function(a){D.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=S;a.legend=B;a.lines=e;a.lines2=g;a.bars=t;a.bars2=l;a.xAxis=n;a.x2Axis=p;
a.y1Axis=h;a.y2Axis=u;a.y3Axis=w;a.y4Axis=H;a.tooltip=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return L},set:function(a){L=a}},height:{get:function(){return O},set:function(a){O=a}},showLegend:{get:function(){return U},set:function(a){U=a}},brushExtent:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return G},set:function(a){G=a}},focusEnable:{get:function(){return P},set:function(a){P=a}},focusHeight:{get:function(){return r},
set:function(a){r=a}},focusShowAxisX:{get:function(){return M},set:function(a){M=a}},focusShowAxisY:{get:function(){return R},set:function(a){R=a}},legendLeftAxisHint:{get:function(){return ta},set:function(a){ta=a}},legendRightAxisHint:{get:function(){return ka},set:function(a){ka=a}},tooltips:{get:function(){return D.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");D.enabled(!!a)}},tooltipContent:{get:function(){return D.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");D.contentGenerator(a)}},margin:{get:function(){return E},set:function(a){E.top=void 0!==a.top?a.top:E.top;E.right=void 0!==a.right?a.right:E.right;E.bottom=void 0!==a.bottom?a.bottom:E.bottom;E.left=void 0!==a.left?a.left:E.left}},duration:{get:function(){return W},set:function(a){W=a}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a);B.color(F)}},x:{get:function(){return I},set:function(a){I=a;e.x(a);g.x(a);t.x(a);l.x(a)}},y:{get:function(){return v},
set:function(a){v=a;e.y(a);g.y(a);t.y(a);l.y(a)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineWithFocusChart=function(){function a(x){x.each(function(x){function w(){u.empty()||u.extent(R);ga.data([u.empty()?F.domain():R]).each(function(a,c){var e=F(a[0])-I.range()[0],g=Z-F(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",F(a[1])).attr("width",0>g?0:g)})}function G(){R=u.empty()?null:u.extent();var a=u.empty()?F.domain():
u.extent();1>=Math.abs(a[0]-a[1])||(r.brush({extent:a,brush:u}),w(),ia.select(".nv-focus .nv-linesWrap").datum(x.filter(function(a){return!a.disabled}).map(function(c,g){return{key:c.key,area:c.area,values:c.values.filter(function(c,g){return e.x()(c,g)>=a[0]&&e.x()(c,g)<=a[1]})}})).transition().duration(K).call(e),ia.select(".nv-focus .nv-x.nv-axis").transition().duration(K).call(t),ia.select(".nv-focus .nv-y.nv-axis").transition().duration(K).call(l))}var S=d3.select(this),W=this;c.utils.initSVG(S);
var Z=c.utils.availableWidth(E,S,B),da=c.utils.availableHeight(A,S,B)-L,M=L-C.top-C.bottom;a.update=function(){S.transition().duration(K).call(a)};a.container=this;Q.setter(N(x),a.update).getter(q(x)).update();Q.disabled=x.map(function(a){return!!a.disabled});if(!J)for(ka in J={},Q)J[ka]=Q[ka]instanceof Array?Q[ka].slice(0):Q[ka];if(x&&x.length&&x.filter(function(a){return a.values.length}).length)S.selectAll(".nv-noData").remove();else return c.utils.noData(a,S),a;I=e.xScale();v=e.yScale();F=g.xScale();
U=g.yScale();var ka=S.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([x]);var fa=ka.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ia=ka.select("g");fa.append("g").attr("class","nv-legendWrap");var oa=fa.append("g").attr("class","nv-focus");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y nv-axis");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-interactive");fa=fa.append("g").attr("class","nv-context");
fa.append("g").attr("class","nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-linesWrap");fa.append("g").attr("class","nv-brushBackground");fa.append("g").attr("class","nv-x nv-brush");P&&(h.width(Z),ia.select(".nv-legendWrap").datum(x).call(h),B.top!=h.height()&&(B.top=h.height(),da=c.utils.availableHeight(A,S,B)-L),ia.select(".nv-legendWrap").attr("transform","translate(0,"+-B.top+")"));ka.attr("transform","translate("+B.left+","+B.top+")");O&&(H.width(Z).height(da).margin({left:B.left,
top:B.top}).svgContainer(S).xScale(I),ka.select(".nv-interactive").call(H));e.width(Z).height(da).color(x.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!x[c].disabled}));g.defined(e.defined()).width(Z).height(M).color(x.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!x[c].disabled}));ia.select(".nv-context").attr("transform","translate(0,"+(da+B.bottom+C.top)+")");ka=ia.select(".nv-context .nv-linesWrap").datum(x.filter(function(a){return!a.disabled}));
d3.transition(ka).call(g);t.scale(I)._ticks(c.utils.calcTicksX(Z/100,x)).tickSize(-da,0);l.scale(v)._ticks(c.utils.calcTicksY(da/36,x)).tickSize(-Z,0);ia.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+da+")");u.x(F).on("brush",function(){G()});R&&u.extent(R);var ga=ia.select(".nv-brushBackground").selectAll("g").data([R||u.extent()]),da=ga.enter().append("g");da.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M);da.append("rect").attr("class","right").attr("x",
0).attr("y",0).attr("height",M);da=ia.select(".nv-x.nv-brush").call(u);da.selectAll("rect").attr("height",M);da.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=M/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});G();n.scale(F)._ticks(c.utils.calcTicksX(Z/100,x)).tickSize(-M,0);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+
U.range()[0]+")");d3.transition(ia.select(".nv-context .nv-x.nv-axis")).call(n);p.scale(U)._ticks(c.utils.calcTicksY(M/36,x)).tickSize(-Z,0);d3.transition(ia.select(".nv-context .nv-y.nv-axis")).call(p);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")");h.dispatch.on("stateChange",function(c){for(var e in c)Q[e]=c[e];r.stateChange(Q);a.update()});H.dispatch.on("elementMousemove",function(g){e.clearHighlights();var h,q,n,p=[];x.filter(function(a,c){a.seriesIndex=
c;return!a.disabled}).forEach(function(l,r){var t=u.empty()?F.domain():u.extent(),x=l.values.filter(function(a,c){return e.x()(a,c)>=t[0]&&e.x()(a,c)<=t[1]});q=c.interactiveBisect(x,g.pointXValue,e.x());x=x[q];null!=a.y()(x,q)&&e.highlightPoint(r,q,!0);void 0!==x&&(void 0===h&&(h=x),void 0===n&&(n=a.xScale()(a.x()(x,q))),p.push({key:l.key,value:a.y()(x,q),color:D(l,l.seriesIndex)}))});if(2<p.length){var r=a.yScale().invert(g.mouseY),v=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),r=
c.nearestValueIndex(p.map(function(a){return a.value}),r,v);null!==r&&(p[r].highlight=!0)}r=t.tickFormat()(a.x()(h,q));H.tooltip.position({left:g.mouseX+B.left,top:g.mouseY+B.top}).chartContainer(W.parentNode).valueFormatter(function(a,c){return null==a?"N/A":l.tickFormat()(a)}).data({value:r,index:q,series:p})();H.renderGuideLine(n)});H.dispatch.on("elementMouseout",function(a){e.clearHighlights()});r.on("changeState",function(c){"undefined"!==typeof c.disabled&&x.forEach(function(a,e){a.disabled=
c.disabled[e]});a.update()})});return a}var e=c.models.line(),g=c.models.line(),t=c.models.axis(),l=c.models.axis(),n=c.models.axis(),p=c.models.axis(),h=c.models.legend(),u=d3.svg.brush(),w=c.models.tooltip(),H=c.interactiveGuideline(),B={top:30,right:30,bottom:30,left:60},C={top:0,right:30,bottom:20,left:60},D=c.utils.defaultColor(),E=null,A=null,L=50,O=!1,I,v,F,U,P=!0,R=null,M=null,r=d3.dispatch("brush","stateChange","changeState"),K=250,Q=c.utils.state(),J=null;e.clipEdge(!0).duration(0);g.interactive(!1);
t.orient("bottom").tickPadding(5);l.orient("left");n.orient("bottom").tickPadding(5);p.orient("left");w.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return t.tickFormat()(a,c)});var q=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},N=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){w.data(a).position(a.pos).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){w.hidden(!0)});a.dispatch=r;a.legend=h;a.lines=e;a.lines2=g;a.xAxis=t;a.yAxis=l;a.x2Axis=n;a.y2Axis=p;a.interactiveLayer=H;a.tooltip=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return E},set:function(a){E=a}},height:{get:function(){return A},set:function(a){A=a}},focusHeight:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return P},set:function(a){P=a}},brushExtent:{get:function(){return R},
set:function(a){R=a}},defaultState:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return M},set:function(a){M=a}},tooltips:{get:function(){return w.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");w.enabled(!!a)}},tooltipContent:{get:function(){return w.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");w.contentGenerator(a)}},margin:{get:function(){return B},set:function(a){B.top=
void 0!==a.top?a.top:B.top;B.right=void 0!==a.right?a.right:B.right;B.bottom=void 0!==a.bottom?a.bottom:B.bottom;B.left=void 0!==a.left?a.left:B.left}},color:{get:function(){return D},set:function(a){D=c.utils.getColor(a);h.color(D)}},interpolate:{get:function(){return e.interpolate()},set:function(a){e.interpolate(a);g.interpolate(a)}},xTickFormat:{get:function(){return t.tickFormat()},set:function(a){t.tickFormat(a);n.tickFormat(a)}},yTickFormat:{get:function(){return l.tickFormat()},set:function(a){l.tickFormat(a);
p.tickFormat(a)}},duration:{get:function(){return K},set:function(a){K=a;l.duration(K);p.duration(K);t.duration(K);n.duration(K)}},x:{get:function(){return e.x()},set:function(a){e.x(a);g.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);g.y(a)}},useInteractiveGuideline:{get:function(){return O},set:function(a){if(O=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBar=function(){function a(J){K.reset();J.each(function(a){var q=
g-e.left-e.right,x=t-e.top-e.bottom;h=d3.select(this);c.utils.initSVG(h);var J=0;A&&a.length&&(A=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(C){var aa=d3.layout.stack().offset(D).values(function(a){return a.values}).y(w)(!a.length&&A?A:a);aa.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=J++,aa[e]=a[e]):0<e&&aa[e-1].nonStackable&&aa[e].values.map(function(a,c){a.y0-=aa[e-1].values[c].y;a.y1=a.y0+a.y})});a=aa}a.forEach(function(a,c){a.values.forEach(function(e){e.series=
c;e.key=a.key})});C&&a[0].values.map(function(c,e){var g=0,h=0;a.map(function(c,l){if(!a[l].nonStackable){var q=c.values[e];q.size=Math.abs(q.y);0>q.y?(q.y1=h,h-=q.size):(q.y1=q.size+g,g+=q.size)}})});var G=v&&F?[]:a.map(function(a,c){return a.values.map(function(a,e){return{x:u(a,e),y:w(a,e),y0:a.y0,y1:a.y1,idx:c}})});l.domain(v||d3.merge(G).map(function(a){return a.x})).rangeBands(U||[0,q],R);n.domain(F||d3.extent(d3.merge(G).map(function(c){var e=c.y;C&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+
c.y);return e}).concat(H))).range(P||[x,0]);l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1]));n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]+.01*n.domain()[0],n.domain()[1]-.01*n.domain()[1]]):n.domain([-1,1]));r=r||n;var G=h.selectAll("g.nv-wrap.nv-multibar").data([a]),S=G.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),W=S.append("defs"),S=S.append("g"),la=G.select("g");
S.append("g").attr("class","nv-groups");G.attr("transform","translate("+e.left+","+e.top+")");W.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect");G.select("#nv-edge-clip-"+p+" rect").attr("width",q).attr("height",x);la.attr("clip-path",B?"url(#nv-edge-clip-"+p+")":"");q=G.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});q.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);x=K.transition(q.exit().selectAll("rect.nv-bar"),
"multibarExit",Math.min(100,I)).attr("y",function(c,e,g){e=r(0)||0;C&&a[c.series]&&!a[c.series].nonStackable&&(e=r(c.y0));return e}).attr("height",0).remove();x.delay&&x.delay(function(a,c){return I/(Q+1)*c-c});q.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return E(a,c)}).style("stroke",function(a,c){return E(a,c)});q.style("stroke-opacity",1).style("fill-opacity",.75);q=q.selectAll("rect.nv-bar").data(function(c){return A&&
!a.length?A.values:c.values});q.exit().remove();q.enter().append("rect").attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,g){return C&&!a[g].nonStackable?0:g*l.rangeBand()/a.length}).attr("y",function(c,e,g){return r(C&&!a[g].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,g){return l.rangeBand()/(C&&!a[g].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+l(u(a,c))+",0)"});q.style("fill",function(a,
c,e){return E(a,e,c)}).style("stroke",function(a,c,e){return E(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);M.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);M.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){M.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){M.elementClick({data:a,
index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){M.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});q.attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+l(u(a,c))+",0)"});L&&(O||(O=a.map(function(){return!0})),q.style("fill",function(a,c,e){return d3.rgb(L(a,c)).darker(O.map(function(a,c){return c}).filter(function(a,
c){return!O[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(L(a,c)).darker(O.map(function(a,c){return c}).filter(function(a,c){return!O[c]})[e]).toString()}));q=q.watchTransition(K,"multibar",Math.min(250,I)).delay(function(c,e){return e*I/a[0].values.length});C?q.attr("y",function(c,e,g){return a[g].nonStackable?0>w(c,e)?n(0):-1>n(0)-n(w(c,e))?n(0)-1:n(w(c,e))||0:n(c.y1)}).attr("height",function(c,e,g){return a[g].nonStackable?Math.max(Math.abs(n(w(c,e))-n(0)),1)||0:Math.max(Math.abs(n(c.y+
c.y0)-n(c.y0)),1)}).attr("x",function(c,e,g){e=0;a[g].nonStackable&&(e=c.series*l.rangeBand()/a.length,a.length!==J&&(e=a[g].nonStackableSeries*l.rangeBand()/(2*J)));return e}).attr("width",function(c,e,g){return a[g].nonStackable?(c=l.rangeBand()/J,a.length!==J&&(c=l.rangeBand()/(2*J)),c):l.rangeBand()}):q.attr("x",function(c,e){return c.series*l.rangeBand()/a.length}).attr("width",l.rangeBand()/a.length).attr("y",function(a,c){return 0>w(a,c)?n(0):1>n(0)-n(w(a,c))?n(0)-1:n(w(a,c))||0}).attr("height",
function(a,c){return Math.max(Math.abs(n(w(a,c))-n(0)),1)||0});l.copy();r=n.copy();a[0]&&a[0].values&&(Q=a[0].values.length)});K.renderEnd("multibar immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=d3.scale.ordinal(),n=d3.scale.linear(),p=Math.floor(1E4*Math.random()),h=null,u=function(a){return a.x},w=function(a){return a.y},H=[0],B=!0,C=!1,D="zero",E=c.utils.defaultColor(),A=!1,L=null,O,I=500,v,F,U,P,R=.1,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover",
"elementMouseout","elementMousemove","renderEnd"),r,K=c.utils.renderWatch(M,I),Q=0;a.dispatch=M;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return v},
set:function(a){v=a}},yDomain:{get:function(){return F},set:function(a){F=a}},xRange:{get:function(){return U},set:function(a){U=a}},yRange:{get:function(){return P},set:function(a){P=a}},forceY:{get:function(){return H},set:function(a){H=a}},stacked:{get:function(){return C},set:function(a){C=a}},stackOffset:{get:function(){return D},set:function(a){D=a}},clipEdge:{get:function(){return B},set:function(a){B=a}},disabled:{get:function(){return O},set:function(a){O=a}},id:{get:function(){return p},
set:function(a){p=a}},hideable:{get:function(){return A},set:function(a){A=a}},groupSpacing:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return I},set:function(a){I=a;K.reset(I)}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a)}},barColor:{get:function(){return L},
set:function(a){L=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarChart=function(){function a(p){Q.reset();Q.models(e);E&&Q.models(g);A&&Q.models(t);p.each(function(p){var x=d3.select(this);c.utils.initSVG(x);var G=c.utils.availableWidth(u,x,h),S=c.utils.availableHeight(w,x,h);a.update=function(){0===K?x.call(a):x.transition().duration(K).call(a)};a.container=this;P.setter(N(p),a.update).getter(q(p)).update();P.disabled=p.map(function(a){return!!a.disabled});if(!R)for(M in R=
{},P)R[M]=P[M]instanceof Array?P[M].slice(0):P[M];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)x.selectAll(".nv-noData").remove();else return c.utils.noData(a,x),a;F=e.xScale();U=e.yScale();var W=x.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([p]),Q=W.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var M=W.select("g");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis");Q.append("g").attr("class","nv-barsWrap");
Q.append("g").attr("class","nv-legendWrap");Q.append("g").attr("class","nv-controlsWrap");D&&(l.width(G-(B?180:0)),M.select(".nv-legendWrap").datum(p).call(l),h.top!=l.height()&&(h.top=l.height(),S=c.utils.availableHeight(w,x,h)),M.select(".nv-legendWrap").attr("transform","translate("+(B?180:0)+","+-h.top+")"));if(B){var Z=[{key:C.grouped||"Grouped",disabled:e.stacked()},{key:C.stacked||"Stacked",disabled:!e.stacked()}];n.width(B?180:0).color(["#444","#444","#444"]);M.select(".nv-controlsWrap").datum(Z).attr("transform",
"translate(0,"+-h.top+")").call(n)}W.attr("transform","translate("+h.left+","+h.top+")");L&&M.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");e.disabled(p.map(function(a){return a.disabled})).width(G).height(S).color(p.map(function(a,c){return a.color||H(a,c)}).filter(function(a,c){return!p[c].disabled}));M.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).call(e);if(E){g.scale(F)._ticks(c.utils.calcTicksX(G/100,p)).tickSize(-S,0);M.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+U.range()[0]+")");M.select(".nv-x.nv-axis").call(g);W=M.select(".nv-x.nv-axis > g").selectAll("g");W.selectAll("line, text").style("opacity",1);if(I){W.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var ka=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;M.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==ka%2?17:5)+")"})}O&&W.filter(function(a,c){return 0!==c%Math.ceil(p[0].values.length/
(G/100))}).selectAll("text, line").style("opacity",0);v&&W.selectAll(".tick text").attr("transform","rotate("+v+" 0,0)").style("text-anchor",0<v?"start":"end");M.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}A&&(t.scale(U)._ticks(c.utils.calcTicksY(S/36,p)).tickSize(-G,0),M.select(".nv-y.nv-axis").call(t));l.dispatch.on("stateChange",function(c){for(var e in c)P[e]=c[e];r.stateChange(P);a.update()});n.dispatch.on("legendClick",function(c,g){if(c.disabled){Z=Z.map(function(a){a.disabled=
!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case C.grouped:e.stacked(!1);break;case "Stacked":case C.stacked:e.stacked(!0)}P.stacked=e.stacked();r.stateChange(P);a.update()}});r.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),P.disabled=c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),J=P.stacked=c.stacked);a.update()})});Q.renderEnd("multibarchart immediate");return a}var e=c.models.multiBar(),g=c.models.axis(),
t=c.models.axis(),l=c.models.legend(),n=c.models.legend(),p=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=null,w=null,H=c.utils.defaultColor(),B=!0,C={},D=!0,E=!0,A=!0,L=!1,O=!0,I=!1,v=0,F,U,P=c.utils.state(),R=null,M=null,r=d3.dispatch("stateChange","changeState","renderEnd"),K=250;P.stacked=!1;e.stacked(!1);g.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});t.orient(L?"right":"left").tickFormat(d3.format(",.1f"));p.duration(0).valueFormatter(function(a,
c){return t.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});n.updateState(!1);var Q=c.utils.renderWatch(r),J=!1,q=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:J}}},N=function(a){return function(c){void 0!==c.stacked&&(J=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};
p.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){p.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=r;a.multibar=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=t;a.state=P;a.tooltip=p;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return w},set:function(a){w=a}},showLegend:{get:function(){return D},
set:function(a){D=a}},showControls:{get:function(){return B},set:function(a){B=a}},controlLabels:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return R},set:function(a){R=a}},noData:{get:function(){return M},set:function(a){M=a}},reduceXTicks:{get:function(){return O},set:function(a){O=a}},rotateLabels:{get:function(){return v},set:function(a){v=a}},staggerLabels:{get:function(){return I},
set:function(a){I=a}},tooltips:{get:function(){return p.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");p.enabled(!!a)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");p.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;
h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return K},set:function(a){K=a;e.duration(K);g.duration(K);t.duration(K);Q.reset(K)}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a);l.color(H)}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;t.orient(L?"right":"left")}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);l.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);
return a};c.models.multiBarHorizontal=function(){function a(l){Q.reset();l.each(function(a){var l=g-e.left-e.right,q=t-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);A&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(w)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});A&&a[0].values.map(function(c,e){var g=0,h=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=h-a.size,h-=a.size):(a.y1=g,g+=a.size)})});var J=F&&U?[]:
a.map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:w(a,c),y0:a.y0,y1:a.y1}})});p.domain(F||d3.merge(J).map(function(a){return a.x})).rangeBands(P||[0,q],I);h.domain(U||d3.extent(d3.merge(J).map(function(a){return A?0<a.y?a.y1+a.y:a.y1:a.y}).concat(B)));L&&!A?h.range(R||[0>h.domain()[0]?O:0,l-(0<h.domain()[1]?O:0)]):h.range(R||[0,l]);K=K||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);l=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);q=l.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multibarHorizontal");q.append("defs");q=q.append("g");l.select("g");q.append("g").attr("class","nv-groups");l.attr("transform","translate("+e.left+","+e.top+")");l=l.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);l.exit().watchTransition(Q,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();l.attr("class",function(a,
c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return C(a,c)}).style("stroke",function(a,c){return C(a,c)});l.watchTransition(Q,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);l=l.selectAll("g.nv-bar").data(function(a){return a.values});l.exit().remove();q=l.enter().append("g").attr("transform",function(c,e,g){return"translate("+K(A?c.y0:0)+","+(A?0:g*p.rangeBand()/a.length+p(u(c,e)))+")"});q.append("rect").attr("width",
0).attr("height",p.rangeBand()/(A?1:a.length));l.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);r.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);r.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){r.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){r.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){r.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){r.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});H(a[0],0)&&(q.append("polyline"),l.select("polyline").attr("fill","none").attr("points",function(c,e){var g=H(c,e),l=.8*p.rangeBand()/(2*(A?1:a.length)),g=g.length?g:[-Math.abs(g),Math.abs(g)],g=g.map(function(a){return h(a)-h(0)});return[[g[0],-l],[g[0],l],[g[0],
0],[g[1],0],[g[1],-l],[g[1],l]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var g=p.rangeBand()/(2*(A?1:a.length));return"translate("+(0>w(c,e)?0:h(w(c,e))-h(0))+", "+g+")"}));q.append("text");L&&!A?(l.select("text").attr("text-anchor",function(a,c){return 0>w(a,c)?"end":"start"}).attr("y",p.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=v(w(a,c)),g=H(a,c);return void 0===g?e:g.length?e+"+"+v(Math.abs(g[1]))+"-"+v(Math.abs(g[0])):e+"\u00b1"+
v(Math.abs(g))}),l.watchTransition(Q,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>w(a,c)?-4:h(w(a,c))-h(0)+4})):l.selectAll("text").text("");l.selectAll("text.nv-bar-label").text("");l.attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"});D&&(E||(E=a.map(function(){return!0})),l.style("fill",function(a,c,e){return d3.rgb(D(a,c)).darker(E.map(function(a,c){return c}).filter(function(a,c){return!E[c]})[e]).toString()}).style("stroke",function(a,
c,e){return d3.rgb(D(a,c)).darker(E.map(function(a,c){return c}).filter(function(a,c){return!E[c]})[e]).toString()}));A?l.watchTransition(Q,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+h(a.y1)+","+p(u(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(h(w(a,c)+a.y0)-h(a.y0))}).attr("height",p.rangeBand()):l.watchTransition(Q,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>w(c,e)?h(w(c,e)):h(0))+","+(c.series*p.rangeBand()/
a.length+p(u(c,e)))+")"}).select("rect").attr("height",p.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(h(w(a,c))-h(0)),1)});p.copy();K=h.copy()});Q.renderEnd("multibarHorizontal immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=Math.floor(1E4*Math.random()),n=null,p=d3.scale.ordinal(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},H=function(a){return a.yErr},B=[0],C=c.utils.defaultColor(),D=null,E,A=!1,L=!1,O=60,I=.1,v=d3.format(",.2f"),
F,U,P,R,M=250,r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K,Q=c.utils.renderWatch(r,M);a.dispatch=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},yErr:{get:function(){return H},set:function(a){H=
a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return F},set:function(a){F=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceY:{get:function(){return B},set:function(a){B=a}},stacked:{get:function(){return A},set:function(a){A=a}},showValues:{get:function(){return L},set:function(a){L=
a}},disabled:{get:function(){return E},set:function(a){E=a}},id:{get:function(){return l},set:function(a){l=a}},valueFormat:{get:function(){return v},set:function(a){v=a}},valuePadding:{get:function(){return O},set:function(a){O=a}},groupSpacing:{get:function(){return I},set:function(a){I=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},
duration:{get:function(){return M},set:function(a){M=a;Q.reset(M)}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a)}},barColor:{get:function(){return D},set:function(a){D=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarHorizontalChart=function(){function a(p){K.reset();K.models(e);E&&K.models(g);A&&K.models(t);p.each(function(p){var q=d3.select(this);c.utils.initSVG(q);var J=c.utils.availableWidth(u,q,h),x=c.utils.availableHeight(w,q,h);a.update=
function(){q.transition().duration(R).call(a)};a.container=this;L=e.stacked();v.setter(r(p),a.update).getter(M(p)).update();v.disabled=p.map(function(a){return!!a.disabled});if(!F)for(K in F={},v)F[K]=v[K]instanceof Array?v[K].slice(0):v[K];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return c.utils.noData(a,q),a;O=e.xScale();I=e.yScale();var K=q.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([p]);var Q=K.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),G=K.select("g");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");Q.append("g").attr("class","nv-barsWrap");Q.append("g").attr("class","nv-legendWrap");Q.append("g").attr("class","nv-controlsWrap");D&&(l.width(J-(B?180:0)),G.select(".nv-legendWrap").datum(p).call(l),h.top!=l.height()&&(h.top=l.height(),x=c.utils.availableHeight(w,q,h)),G.select(".nv-legendWrap").attr("transform",
"translate("+(B?180:0)+","+-h.top+")"));if(B){var S=[{key:C.grouped||"Grouped",disabled:e.stacked()},{key:C.stacked||"Stacked",disabled:!e.stacked()}];n.width(B?180:0).color(["#444","#444","#444"]);G.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+-h.top+")").call(n)}K.attr("transform","translate("+h.left+","+h.top+")");e.disabled(p.map(function(a){return a.disabled})).width(J).height(x).color(p.map(function(a,c){return a.color||H(a,c)}).filter(function(a,c){return!p[c].disabled}));
G.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).transition().call(e);E&&(g.scale(O)._ticks(c.utils.calcTicksX(x/24,p)).tickSize(-J,0),G.select(".nv-x.nv-axis").call(g),G.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));A&&(t.scale(I)._ticks(c.utils.calcTicksY(J/100,p)).tickSize(-x,0),G.select(".nv-y.nv-axis").attr("transform","translate(0,"+x+")"),G.select(".nv-y.nv-axis").call(t));G.select(".nv-zeroLine line").attr("x1",I(0)).attr("x2",I(0)).attr("y1",0).attr("y2",
-x);l.dispatch.on("stateChange",function(c){for(var e in c)v[e]=c[e];P.stateChange(v);a.update()});n.dispatch.on("legendClick",function(c,g){if(c.disabled){S=S.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":e.stacked(!1);break;case "Stacked":e.stacked(!0)}v.stacked=e.stacked();P.stateChange(v);L=e.stacked();a.update()}});P.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),v.disabled=c.disabled);"undefined"!==
typeof c.stacked&&(e.stacked(c.stacked),L=v.stacked=c.stacked);a.update()})});K.renderEnd("multibar horizontal chart immediate");return a}var e=c.models.multiBarHorizontal(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend().height(30),n=c.models.legend().height(30),p=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=null,w=null,H=c.utils.defaultColor(),B=!0,C={},D=!0,E=!0,A=!0,L=!1,O,I,v=c.utils.state(),F=null,U=null,P=d3.dispatch("stateChange","changeState","renderEnd"),R=250;v.stacked=
!1;e.stacked(L);g.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});t.orient("bottom").tickFormat(d3.format(",.1f"));p.duration(0).valueFormatter(function(a,c){return t.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});n.updateState(!1);var M=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:L}}},r=function(a){return function(c){void 0!==c.stacked&&(L=c.stacked);void 0!==c.active&&a.forEach(function(a,
e){a.disabled=!c.active[e]})}},K=c.utils.renderWatch(P,R);e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};p.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){p.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=P;a.multibar=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=t;a.state=v;a.tooltip=p;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return w},set:function(a){w=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showControls:{get:function(){return B},set:function(a){B=a}},controlLabels:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return U},
set:function(a){U=a}},tooltips:{get:function(){return p.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");p.enabled(!!a)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");p.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;
h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return R},set:function(a){R=a;K.reset(R);e.duration(R);g.duration(R);t.duration(R)}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a);l.color(H)}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);l.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiChart=function(){function a(p){p.each(function(q){function p(a){var c=
2===q[a.seriesIndex].yAxis?M:R;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color};K.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function x(a){var c=2===q[a.seriesIndex].yAxis?M:R;a.point.x=F.x()(a.point);a.point.y=F.y()(a.point);K.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function w(a){var c=2===q[a.data.series].yAxis?M:R;a.value=I.x()(a.data);a.series={value:I.y()(a.data),
color:a.color};K.duration(0).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}var J=d3.select(this);c.utils.initSVG(J);a.update=function(){J.transition().call(a)};a.container=this;var G=c.utils.availableWidth(t,J,e),C=c.utils.availableHeight(l,J,e),H=q.filter(function(a){return"line"==a.type&&1==a.yAxis}),Q=q.filter(function(a){return"line"==a.type&&2==a.yAxis}),da=q.filter(function(a){return"bar"==a.type&&1==a.yAxis}),ta=q.filter(function(a){return"bar"==a.type&&2==a.yAxis}),
ka=q.filter(function(a){return"area"==a.type&&1==a.yAxis}),fa=q.filter(function(a){return"area"==a.type&&2==a.yAxis});if(q&&q.length&&q.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();else return c.utils.noData(a,J),a;var ia=q.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,y:a.y}})}),oa=q.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,
y:a.y}})});D.domain(d3.extent(d3.merge(ia.concat(oa)),function(a){return a.x})).range([0,G]);var ga=J.selectAll("g.wrap.multiChart").data([q]),ja=ga.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ja.append("g").attr("class","nv-x nv-axis");ja.append("g").attr("class","nv-y1 nv-axis");ja.append("g").attr("class","nv-y2 nv-axis");ja.append("g").attr("class","lines1Wrap");ja.append("g").attr("class","lines2Wrap");ja.append("g").attr("class","bars1Wrap");ja.append("g").attr("class",
"bars2Wrap");ja.append("g").attr("class","stack1Wrap");ja.append("g").attr("class","stack2Wrap");ja.append("g").attr("class","legendWrap");ga=ga.select("g");ja=q.map(function(a,c){return q[c].color||g(a,c)});if(n){var qa=r.align()?G/2:G,xa=r.align()?qa:0;r.width(qa);r.color(ja);ga.select(".legendWrap").datum(q.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(r);e.top!=r.height()&&(e.top=r.height(),C=c.utils.availableHeight(l,
J,e));ga.select(".legendWrap").attr("transform","translate("+xa+","+-e.top+")")}L.width(G).height(C).interpolate(B).color(ja.filter(function(a,c){return!q[c].disabled&&1==q[c].yAxis&&"line"==q[c].type}));O.width(G).height(C).interpolate(B).color(ja.filter(function(a,c){return!q[c].disabled&&2==q[c].yAxis&&"line"==q[c].type}));I.width(G).height(C).color(ja.filter(function(a,c){return!q[c].disabled&&1==q[c].yAxis&&"bar"==q[c].type}));v.width(G).height(C).color(ja.filter(function(a,c){return!q[c].disabled&&
2==q[c].yAxis&&"bar"==q[c].type}));F.width(G).height(C).color(ja.filter(function(a,c){return!q[c].disabled&&1==q[c].yAxis&&"area"==q[c].type}));U.width(G).height(C).color(ja.filter(function(a,c){return!q[c].disabled&&2==q[c].yAxis&&"area"==q[c].type}));ga.attr("transform","translate("+e.left+","+e.top+")");var ja=ga.select(".lines1Wrap").datum(H.filter(function(a){return!a.disabled})),qa=ga.select(".bars1Wrap").datum(da.filter(function(a){return!a.disabled})),xa=ga.select(".stack1Wrap").datum(ka.filter(function(a){return!a.disabled})),
na=ga.select(".lines2Wrap").datum(Q.filter(function(a){return!a.disabled})),Ia=ga.select(".bars2Wrap").datum(ta.filter(function(a){return!a.disabled})),Ja=ga.select(".stack2Wrap").datum(fa.filter(function(a){return!a.disabled})),Ca=ka.length?ka.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[],Ba=fa.length?fa.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,
y:0}]):[];E.domain(h||d3.extent(d3.merge(ia).concat(Ca),function(a){return a.y})).range([0,C]);A.domain(u||d3.extent(d3.merge(oa).concat(Ba),function(a){return a.y})).range([0,C]);L.yDomain(E.domain());I.yDomain(E.domain());F.yDomain(E.domain());O.yDomain(A.domain());v.yDomain(A.domain());U.yDomain(A.domain());ka.length&&d3.transition(xa).call(F);fa.length&&d3.transition(Ja).call(U);da.length&&d3.transition(qa).call(I);ta.length&&d3.transition(Ia).call(v);H.length&&d3.transition(ja).call(L);Q.length&&
d3.transition(na).call(O);P._ticks(c.utils.calcTicksX(G/100,q)).tickSize(-C,0);ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+C+")");d3.transition(ga.select(".nv-x.nv-axis")).call(P);R._ticks(c.utils.calcTicksY(C/36,q)).tickSize(-G,0);d3.transition(ga.select(".nv-y1.nv-axis")).call(R);M._ticks(c.utils.calcTicksY(C/36,q)).tickSize(-G,0);d3.transition(ga.select(".nv-y2.nv-axis")).call(M);ga.select(".nv-y1.nv-axis").classed("nv-disabled",ia.length?!1:!0).attr("transform","translate("+D.range()[0]+
",0)");ga.select(".nv-y2.nv-axis").classed("nv-disabled",oa.length?!1:!0).attr("transform","translate("+D.range()[1]+",0)");r.dispatch.on("stateChange",function(c){a.update()});L.dispatch.on("elementMouseover.tooltip",p);O.dispatch.on("elementMouseover.tooltip",p);L.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});O.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});F.dispatch.on("elementMouseover.tooltip",x);U.dispatch.on("elementMouseover.tooltip",x);F.dispatch.on("elementMouseout.tooltip",
function(a){K.hidden(!0)});U.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});I.dispatch.on("elementMouseover.tooltip",w);v.dispatch.on("elementMouseover.tooltip",w);I.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});v.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});I.dispatch.on("elementMousemove.tooltip",function(a){K.position({top:d3.event.pageY,left:d3.event.pageX})()});v.dispatch.on("elementMousemove.tooltip",function(a){K.position({top:d3.event.pageY,
left:d3.event.pageX})()})});return a}var e={top:30,right:20,bottom:50,left:60},g=c.utils.defaultColor(),t=null,l=null,n=!0,p=null,h,u,w=function(a){return a.x},H=function(a){return a.y},B="monotone",C=!0,D=d3.scale.linear(),E=d3.scale.linear(),A=d3.scale.linear(),L=c.models.line().yScale(E),O=c.models.line().yScale(A),I=c.models.multiBar().stacked(!1).yScale(E),v=c.models.multiBar().stacked(!1).yScale(A),F=c.models.stackedArea().yScale(E),U=c.models.stackedArea().yScale(A),P=c.models.axis().scale(D).orient("bottom").tickPadding(5),
R=c.models.axis().scale(E).orient("left"),M=c.models.axis().scale(A).orient("right"),r=c.models.legend().height(30),K=c.models.tooltip(),Q=d3.dispatch();a.dispatch=Q;a.lines1=L;a.lines2=O;a.bars1=I;a.bars2=v;a.stack1=F;a.stack2=U;a.xAxis=P;a.yAxis1=R;a.yAxis2=M;a.tooltip=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return n},set:function(a){n=
a}},yDomain1:{get:function(){return h},set:function(a){h=a}},yDomain2:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return p},set:function(a){p=a}},interpolate:{get:function(){return B},set:function(a){B=a}},tooltips:{get:function(){return K.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");K.enabled(!!a)}},tooltipContent:{get:function(){return K.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
K.contentGenerator(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return g},set:function(a){g=c.utils.getColor(a)}},x:{get:function(){return w},set:function(a){w=a;L.x(a);O.x(a);I.x(a);v.x(a);F.x(a);U.x(a)}},y:{get:function(){return H},set:function(a){H=a;L.y(a);O.y(a);F.y(a);U.y(a);I.y(a);v.y(a)}},useVoronoi:{get:function(){return C},
set:function(a){C=a;L.useVoronoi(a);O.useVoronoi(a);F.useVoronoi(a);U.useVoronoi(a)}}});c.utils.initOptions(a);return a};c.models.ohlcBar=function(){function a(r){r.each(function(a){n=d3.select(this);var r=c.utils.availableWidth(g,n,e),v=c.utils.availableHeight(t,n,e);c.utils.initSVG(n);var q=r/a[0].values.length*.9;p.domain(F||d3.extent(a[0].values.map(u).concat(E)));L?p.range(P||[.5*r/a[0].values.length,r*(a[0].values.length-.5)/a[0].values.length]):p.range(P||[5+q/2,r-q/2-5]);h.domain(U||[d3.min(a[0].values.map(D).concat(A)),
d3.max(a[0].values.map(C).concat(A))]).range(R||[v,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var K=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),x=K.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),Z=x.append("defs"),x=x.append("g"),
aa=K.select("g");x.append("g").attr("class","nv-ticks");K.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){M.chartClick({data:a,index:c,pos:d3.event,id:l})});Z.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");K.select("#nv-chart-clip-path-"+l+" rect").attr("width",r).attr("height",v);aa.attr("clip-path",O?"url(#nv-chart-clip-path-"+l+")":"");v=K.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});v.exit().remove();v.enter().append("path").attr("class",
function(a,c,e){return(H(a,c)>B(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+(h(H(a,c))-h(C(a,c)))+"l"+-q/2+",0l"+q/2+",0l0,"+(h(D(a,c))-h(H(a,c)))+"l0,"+(h(B(a,c))-h(D(a,c)))+"l"+q/2+",0l"+-q/2+",0z"}).attr("transform",function(a,c){return"translate("+p(u(a,c))+","+h(C(a,c))+")"}).attr("fill",function(a,c){return I[0]}).attr("stroke",function(a,c){return I[0]}).attr("x",0).attr("y",function(a,c){return h(Math.max(0,w(a,c)))}).attr("height",
function(a,c){return Math.abs(h(w(a,c))-h(0))});v.attr("class",function(a,c,e){return(H(a,c)>B(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});d3.transition(v).attr("transform",function(a,c){return"translate("+p(u(a,c))+","+h(C(a,c))+")"}).attr("d",function(c,e){var g=r/a[0].values.length*.9;return"m0,0l0,"+(h(H(c,e))-h(C(c,e)))+"l"+-g/2+",0l"+g/2+",0l0,"+(h(D(c,e))-h(H(c,e)))+"l0,"+(h(B(c,e))-h(D(c,e)))+"l"+g/2+",0l"+-g/2+",0z"})});return a}var e={top:0,right:0,bottom:0,left:0},
g=null,t=null,l=Math.floor(1E4*Math.random()),n=null,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},H=function(a){return a.open},B=function(a){return a.close},C=function(a){return a.high},D=function(a){return a.low},E=[],A=[],L=!1,O=!0,I=c.utils.defaultColor(),v=!1,F,U,P,R,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");
a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)};a.dispatch=M;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return F},
set:function(a){F=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceX:{get:function(){return E},set:function(a){E=a}},forceY:{get:function(){return A},set:function(a){A=a}},padData:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return O},set:function(a){O=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return v},set:function(a){v=
a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},open:{get:function(){return H()},set:function(a){H=a}},close:{get:function(){return B()},set:function(a){B=a}},high:{get:function(){return C},set:function(a){C=a}},low:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?
a.left:e.left}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinates=function(){function a(E){E.each(function(a){function A(a){return M(p.map(function(c){if(isNaN(a[c])||isNaN(parseFloat(a[c]))){var e=n[c].domain(),g=n[c].range(),h=e[0]-(e[1]-e[0])/9;0>Q.indexOf(c)&&(e=d3.scale.linear().domain([h,e[1]]).range([U-12,g[1]]),n[c].brush.y(e),Q.push(c));return[l(c),n[c](h)]}0<Q.length?(q.style("display","inline"),N.style("display",
"inline")):(q.style("display","none"),N.style("display","none"));return[l(c),n[c](a[c])]}))}function E(){var a=p.filter(function(a){return!n[a].brush.empty()}),c=a.map(function(a){return n[a].brush.extent()});w=[];a.forEach(function(a,e){w[e]={dimension:a,extent:c[e]}});H=[];Z.style("display",function(e){var g=a.every(function(a,g){return isNaN(e[a])&&c[g][0]==n[a].brush.y().domain()[0]?!0:c[g][0]<=e[a]&&e[a]<=c[g][1]});g&&H.push(e);return g?null:"none"});D.brush({filters:w,active:H})}function I(a){var c=
B[a];return null==c?l(a):c}var v=d3.select(this),F=c.utils.availableWidth(g,v,e),U=c.utils.availableHeight(t,v,e);c.utils.initSVG(v);H=a;l.rangePoints([0,F],1).domain(p);p.forEach(function(c){var e=d3.extent(a,function(a){return+a[c]});void 0===e[0]&&(e[0]=0,e[1]=0);e[0]===e[1]&&(--e[0],e[1]+=1);n[c]=d3.scale.linear().domain(e).range([.9*(U-12),0]);n[c].brush=d3.svg.brush().y(n[c]).on("brush",E);return"name"!=c});var v=v.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),P=v.enter().append("g").attr("class",
"nvd3 nv-wrap nv-parallelCoordinates").append("g"),R=v.select("g");P.append("g").attr("class","nv-parallelCoordinates background");P.append("g").attr("class","nv-parallelCoordinates foreground");P.append("g").attr("class","nv-parallelCoordinates missingValuesline");v.attr("transform","translate("+e.left+","+e.top+")");var M=d3.svg.line().interpolate("cardinal").tension(C),r=d3.svg.axis().orient("left"),P=d3.behavior.drag().on("dragstart",function(a,c){B[a]=this.parentNode.__origin__=l(a);x.attr("visibility",
"hidden")}).on("drag",function(a,c){B[a]=Math.min(F,Math.max(0,this.parentNode.__origin__+=d3.event.x));Z.attr("d",A);p.sort(function(a,c){return I(a)-I(c)});l.domain(p);aa.attr("transform",function(a){return"translate("+I(a)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete B[a];d3.select(this.parentNode).attr("transform","translate("+l(a)+")");Z.attr("d",A);x.attr("d",A).attr("visibility",null)}),K=l.range()[1]-l.range()[0],Q=[],J=[0+K/2,U-12,F-K/2,U-12];var q=v.select(".missingValuesline").selectAll("line").data([J]);
q.enter().append("line");q.exit().remove();q.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var N=v.select(".missingValuesline").selectAll("text").data(["undefined values"]);N.append("text").data(["undefined values"]);N.enter().append("text");N.exit().remove();N.attr("y",U).attr("x",F-92-K/2).text(function(a){return a});var x=v.select(".background").selectAll("path").data(a);x.enter().append("path");x.exit().remove();
x.attr("d",A);var Z=v.select(".foreground").selectAll("path").data(a);Z.enter().append("path");Z.exit().remove();Z.attr("d",A).attr("stroke",u);Z.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);D.elementMouseover({label:a.name,data:a.data,index:c,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});Z.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);D.elementMouseout({label:a.name,data:a.data,index:c})});var aa=R.selectAll(".dimension").data(p),v=aa.enter().append("g").attr("class",
"nv-parallelCoordinates dimension");v.append("g").attr("class","nv-parallelCoordinates nv-axis");v.append("g").attr("class","nv-parallelCoordinates-brush");v.append("text").attr("class","nv-parallelCoordinates nv-label");aa.attr("transform",function(a){return"translate("+l(a)+",0)"});aa.exit().remove();aa.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(a,c){D.elementMouseover({dim:a,pos:[d3.mouse(this.parentNode.parentNode)[0],
d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(a,c){D.elementMouseout({dim:a})}).call(P);aa.select(".nv-axis").each(function(a,c){d3.select(this).call(r.scale(n[a]).tickFormat(d3.format(h[c])))});aa.select(".nv-parallelCoordinates-brush").each(function(a){d3.select(this).call(n[a].brush)}).selectAll("rect").attr("x",-8).attr("width",16)});return a}var e={top:30,right:0,bottom:10,left:0},g=null,t=null,l=d3.scale.ordinal(),n={},p=[],h=[],u=c.utils.defaultColor(),w=[],H=[],B=[],
C=1,D=d3.dispatch("brush","elementMouseover","elementMouseout");a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},dimensionNames:{get:function(){return p},set:function(a){p=a}},dimensionFormats:{get:function(){return h},set:function(a){h=a}},lineTension:{get:function(){return C},set:function(a){C=a}},dimensions:{get:function(){return p},set:function(a){c.deprecated("dimensions",
"use dimensionNames instead");p=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.pie=function(){function a(q){J.reset();q.each(function(a){var q=g-e.left-e.right,N=t-e.top-e.bottom,aa=Math.min(q,N)/2,G=[],S=[];h=d3.select(this);
if(0===M.length)for(var W=aa-aa/5,la=R*aa,da=0;da<a[0].length;da++)G.push(W),S.push(la);else G=M.map(function(a){return(a.outer-a.outer/5)*aa}),S=M.map(function(a){return(a.inner-a.inner/5)*aa}),R=d3.min(M.map(function(a){return a.inner-a.inner/5}));c.utils.initSVG(h);var W=h.selectAll(".nv-wrap.nv-pie").data(a),da=W.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+p).append("g"),ta=W.select("g"),la=da.append("g").attr("class","nv-pie");da.append("g").attr("class","nv-pieLabels");
W.attr("transform","translate("+e.left+","+e.top+")");ta.select(".nv-pie").attr("transform","translate("+q/2+","+N/2+")");ta.select(".nv-pieLabels").attr("transform","translate("+q/2+","+N/2+")");h.on("click",function(a,c){r.chartClick({data:a,index:c,pos:d3.event,id:p})});K=[];Q=[];for(da=0;da<a[0].length;da++){var ta=d3.svg.arc().outerRadius(G[da]),ka=d3.svg.arc().outerRadius(G[da]+5);!1!==v&&(ta.startAngle(v),ka.startAngle(v));!1!==U&&(ta.endAngle(U),ka.endAngle(U));E&&(ta.innerRadius(S[da]),ka.innerRadius(S[da]));
ta.cornerRadius&&P&&(ta.cornerRadius(P),ka.cornerRadius(P));K.push(ta);Q.push(ka)}S=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:n(a)});S.padAngle&&F&&S.padAngle(F);E&&A&&(la.append("text").attr("class","nv-pie-title"),W.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return A}).style("font-size",Math.min(q,N)*R*2/(A.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+O+")"}));q=W.select(".nv-pie").selectAll(".nv-slice").data(S);
N=W.select(".nv-pieLabels").selectAll(".nv-label").data(S);q.exit().remove();N.exit().remove();S=q.enter().append("g");S.attr("class","nv-slice");S.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);L&&d3.select(this).select("path").transition().duration(70).attr("d",Q[c]);r.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill")})});S.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);L&&d3.select(this).select("path").transition().duration(50).attr("d",
K[c]);r.elementMouseout({data:a.data,index:c})});S.on("mousemove",function(a,c){r.elementMousemove({data:a.data,index:c})});S.on("click",function(a,c){r.elementClick({data:a.data,index:c,color:d3.select(this).style("fill")})});S.on("dblclick",function(a,c){r.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});q.attr("fill",function(a,c){return u(a.data,c)});q.attr("stroke",function(a,c){return u(a.data,c)});S.append("path").each(function(a){this._current=a});q.select("path").transition().attr("d",
function(a,c){return K[c](a)}).attrTween("d",function(a,c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;E||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return K[c](e(a))}});if(H){for(var fa=[],da=0;da<a[0].length;da++)fa.push(K[da]),B?E&&(fa[da]=d3.svg.arc().outerRadius(K[da].outerRadius()),!1!==v&&fa[da].startAngle(v),!1!==U&&fa[da].endAngle(U)):E||fa[da].innerRadius(0);N.enter().append("g").classed("nv-label",
!0).each(function(a,c){var e=d3.select(this);e.attr("transform",function(a,c){if(I){a.outerRadius=G[c]+10;a.innerRadius=G[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+fa[c].centroid(a)+") rotate("+e+")"}a.outerRadius=aa+10;a.innerRadius=aa+15;return"translate("+fa[c].centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",I?(a.startAngle+
a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var ia={},oa=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};N.watchTransition(J,"pie labels").attr("transform",function(a,c){if(I){a.outerRadius=G[c]+10;a.innerRadius=G[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+fa[c].centroid(a)+") rotate("+e+")"}a.outerRadius=aa+10;a.innerRadius=aa+15;e=fa[c].centroid(a);if(a.value){var g=oa(e);
ia[g]&&(e[1]-=14);ia[oa(e)]=!0}return"translate("+e+")"});N.select(".nv-label text").style("text-anchor",function(a,c){return I?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),g="";if(!a.value||e<D)return"";if("function"===typeof C)g=C(a,c,{key:l(a.data),value:n(a.data),percent:w(e)});else switch(C){case "key":g=l(a.data);break;case "value":g=w(n(a.data));break;case "percent":g=d3.format("%")(e)}return g})}});J.renderEnd("pie immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=500,t=500,l=function(a){return a.x},n=function(a){return a.y},p=Math.floor(1E4*Math.random()),h=null,u=c.utils.defaultColor(),w=d3.format(",.2f"),H=!0,B=!1,C="key",D=.02,E=!1,A=!1,L=!0,O=0,I=!1,v=!1,F=!1,U=!1,P=0,R=.5,M=[],r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K=[],Q=[],J=c.utils.renderWatch(r);a.dispatch=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return M},set:function(a){M=a}},width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},showLabels:{get:function(){return H},set:function(a){H=a}},title:{get:function(){return A},set:function(a){A=a}},titleOffset:{get:function(){return O},set:function(a){O=a}},labelThreshold:{get:function(){return D},set:function(a){D=a}},valueFormat:{get:function(){return w},set:function(a){w=a}},x:{get:function(){return l},set:function(a){l=
a}},id:{get:function(){return p},set:function(a){p=a}},endAngle:{get:function(){return U},set:function(a){U=a}},startAngle:{get:function(){return v},set:function(a){v=a}},padAngle:{get:function(){return F},set:function(a){F=a}},cornerRadius:{get:function(){return P},set:function(a){P=a}},donutRatio:{get:function(){return R},set:function(a){R=a}},labelsOutside:{get:function(){return B},set:function(a){B=a}},labelSunbeamLayout:{get:function(){return I},set:function(a){I=a}},donut:{get:function(){return E},
set:function(a){E=a}},growOnHover:{get:function(){return L},set:function(a){L=a}},pieLabelsOutside:{get:function(){return B},set:function(a){B=a;c.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return B},set:function(a){B=a;c.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return w},set:function(a){w=a;c.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(a){e.top=
"undefined"!=typeof a.top?a.top:e.top;e.right="undefined"!=typeof a.right?a.right:e.right;e.bottom="undefined"!=typeof a.bottom?a.bottom:e.bottom;e.left="undefined"!=typeof a.left?a.left:e.left}},y:{get:function(){return n},set:function(a){n=d3.functor(a)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}},labelType:{get:function(){return C},set:function(a){C=a||"key"}}});c.utils.initOptions(a);return a};c.models.pieChart=function(){function a(h){D.reset();D.models(e);h.each(function(h){var t=
d3.select(this);c.utils.initSVG(t);var v=c.utils.availableWidth(null,t,l),B=c.utils.availableHeight(null,t,l);a.update=function(){t.transition().call(a)};a.container=this;u.setter(A(h),a.update).getter(E(h)).update();u.disabled=h.map(function(a){return!!a.disabled});if(!w)for(H in w={},u)w[H]=u[H]instanceof Array?u[H].slice(0):u[H];if(h&&h.length)t.selectAll(".nv-noData").remove();else return c.utils.noData(a,t),a;var H=t.selectAll("g.nv-wrap.nv-pieChart").data([h]);var D=H.enter().append("g").attr("class",
"nvd3 nv-wrap nv-pieChart").append("g"),L=H.select("g");D.append("g").attr("class","nv-pieWrap");D.append("g").attr("class","nv-legendWrap");n&&("top"===p?(g.width(v).key(e.x()),H.select(".nv-legendWrap").datum(h).call(g),l.top!=g.height()&&(l.top=g.height(),B=c.utils.availableHeight(null,t,l)),H.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")):"right"===p&&(D=c.models.legend().width(),v/2<D&&(D=v/2),g.height(B).key(e.x()),g.width(D),v-=g.width(),H.select(".nv-legendWrap").datum(h).call(g).attr("transform",
"translate("+v+",0)")));H.attr("transform","translate("+l.left+","+l.top+")");e.width(v).height(B);v=L.select(".nv-pieWrap").datum([h]);d3.transition(v).call(e);g.dispatch.on("stateChange",function(c){for(var e in c)u[e]=c[e];C.stateChange(u);a.update()});C.on("changeState",function(c){"undefined"!==typeof c.disabled&&(h.forEach(function(a,e){a.disabled=c.disabled[e]}),u.disabled=c.disabled);a.update()})});D.renderEnd("pieChart immediate");return a}var e=c.models.pie(),g=c.models.legend(),t=c.models.tooltip(),
l={top:30,right:20,bottom:20,left:20},n=!0,p="top",h=c.utils.defaultColor(),u=c.utils.state(),w=null,H=null,B=250,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");t.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return e.valueFormat()(a,c)});var D=c.utils.renderWatch(C),E=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},A=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};
e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};t.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){t.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){t.position({top:d3.event.pageY,left:d3.event.pageX})()});a.legend=g;a.dispatch=C;a.pie=e;a.tooltip=t;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return H},set:function(a){H=a}},showLegend:{get:function(){return n},
set:function(a){n=a}},legendPosition:{get:function(){return p},set:function(a){p=a}},defaultState:{get:function(){return w},set:function(a){w=a}},tooltips:{get:function(){return t.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");t.enabled(!!a)}},tooltipContent:{get:function(){return t.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");t.contentGenerator(a)}},color:{get:function(){return h},set:function(a){h=
a;g.color(h);e.color(h)}},duration:{get:function(){return B},set:function(a){B=a;D.reset(B)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.scatter=function(){function a(G){ta.reset();G.each(function(a){p=d3.select(this);var G=c.utils.availableWidth(g,p,e),fa=c.utils.availableHeight(t,
p,e);c.utils.initSVG(p);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var ja=r&&K&&q?[]:d3.merge(a.map(function(a){return a.values.map(function(a,c){return{x:H(a,c),y:B(a,c),size:C(a,c)}})}));h.domain(r||d3.extent(ja.map(function(a){return a.x}).concat(E)));v&&a[0]?h.range(Q||[(G*F+G)/(2*a[0].values.length),G-G*(1+F)/(2*a[0].values.length)]):h.range(Q||[0,G]);u.domain(K||d3.extent(ja.map(function(a){return a.y}).concat(A))).range(J||[fa,0]);w.domain(q||d3.extent(ja.map(function(a){return a.size}).concat(L))).range(N||
ka);x=h.domain()[0]===h.domain()[1]||u.domain()[0]===u.domain()[1];h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):u.domain([-1,1]));isNaN(h.domain()[0])&&h.domain([-1,1]);isNaN(u.domain()[0])&&u.domain([-1,1]);S=S||h;W=W||u;var qa=p.selectAll("g.nv-wrap.nv-scatter").data([a]),ja=qa.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+n),ia=ja.append("defs"),na=ja.append("g"),Ia=qa.select("g");qa.classed("nv-single-point",x);na.append("g").attr("class","nv-groups");na.append("g").attr("class","nv-point-paths");ja.append("g").attr("class","nv-point-clips");qa.attr("transform","translate("+e.left+","+e.top+")");ia.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");qa.select("#nv-edge-clip-"+n+" rect").attr("width",G).attr("height",0<fa?fa:0);Ia.attr("clip-path",U?"url(#nv-edge-clip-"+
n+")":"");da=!0;G=qa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});G.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);G.exit().remove();G.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});G.watchTransition(ta,"scatter: groups").style("fill",function(a,c){return l(a,c)}).style("stroke",function(a,c){return l(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);fa=
G.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return I(a[0],c)})});fa.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a){return"translate("+S(H(a[0],a[1]))+","+W(B(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return D(a[0])}).size(function(a){return w(C(a[0],a[1]))}));fa.exit().remove();G.exit().selectAll("path.nv-point").watchTransition(ta,
"scatter exit").attr("transform",function(a){return"translate("+h(H(a[0],a[1]))+","+u(B(a[0],a[1]))+")"}).remove();fa.each(function(a){d3.select(this).classed("nv-point",!0).classed("nv-point-"+a[1],!0).classed("nv-noninteractive",!O).classed("hover",!1)});fa.watchTransition(ta,"scatter points").attr("transform",function(a){return"translate("+h(H(a[0],a[1]))+","+u(B(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return D(a[0])}).size(function(a){return w(C(a[0],a[1]))}));clearTimeout(la);
la=setTimeout(function(){da=!1;if(!O)return!1;if(!0===aa){var c=d3.merge(a.map(function(a,c){return a.values.map(function(a,e){var g=H(a,e),l=B(a,e);return[h(g)+1E-4*Math.random(),u(l)+1E-4*Math.random(),c,e,a]}).filter(function(a,c){return I(a[4],c)})}));if(0==c.length)return!1;3>c.length&&(c.push([h.range()[0]-20,u.range()[0]-20,null,null]),c.push([h.range()[1]+20,u.range()[1]+20,null,null]),c.push([h.range()[0]-20,u.range()[0]+20,null,null]),c.push([h.range()[1]+20,u.range()[1]-20,null,null]));
var q=d3.geom.polygon([[-10,-10],[-10,t+10],[g+10,t+10],[g+10,-10]]),n=d3.geom.voronoi(c).map(function(a,e){return{data:q.clip(a),series:c[e][2],point:c[e][3]}});qa.select(".nv-point-paths").selectAll("path").remove();var n=qa.select(".nv-point-paths").selectAll("path").data(n),r=n.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+c+
")"});R&&r.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));P&&(qa.select(".nv-point-clips").selectAll("clipPath").remove(),qa.select(".nv-point-clips").selectAll("clipPath").data(c).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",M));var v=function(c,g){if(da)return 0;var q=a[c.series];if(void 0!==
q){var n=q.values[c.point];n.color=l(q,c.series);n.x=H(n);n.y=B(n);var t=p.node().getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,v=window.pageXOffset||document.documentElement.scrollLeft,t={left:h(H(n,c.point))+t.left+v+e.left+10,top:u(B(n,c.point))+t.top+r+e.top+10};g({point:n,series:q,pos:t,seriesIndex:c.series,pointIndex:c.point})}};n.on("click",function(a){v(a,Z.elementClick)}).on("dblclick",function(a){v(a,Z.elementDblClick)}).on("mouseover",function(a){v(a,
Z.elementMouseover)}).on("mouseout",function(a,c){v(a,Z.elementMouseout)})}else qa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(c,g){if(da||!a[c.series])return 0;var l=a[c.series],q=l.values[g];Z.elementClick({point:q,series:l,pos:[h(H(q,g))+e.left,u(B(q,g))+e.top],seriesIndex:c.series,pointIndex:g})}).on("dblclick",function(c,g){if(da||!a[c.series])return 0;var l=a[c.series],q=l.values[g];Z.elementDblClick({point:q,series:l,pos:[h(H(q,g))+e.left,u(B(q,g))+
e.top],seriesIndex:c.series,pointIndex:g})}).on("mouseover",function(c,g){if(da||!a[c.series])return 0;var q=a[c.series],n=q.values[g];Z.elementMouseover({point:n,series:q,pos:[h(H(n,g))+e.left,u(B(n,g))+e.top],seriesIndex:c.series,pointIndex:g,color:l(c,g)})}).on("mouseout",function(c,e){if(da||!a[c.series])return 0;var g=a[c.series];Z.elementMouseout({point:g.values[e],series:g,seriesIndex:c.series,pointIndex:e,color:l(c,e)})})},300);S=h.copy();W=u.copy();w.copy()});ta.renderEnd("scatter immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),p=null,h=d3.scale.linear(),u=d3.scale.linear(),w=d3.scale.linear(),H=function(a){return a.x},B=function(a){return a.y},C=function(a){return a.size||1},D=function(a){return a.shape||"circle"},E=[],A=[],L=[],O=!0,I=function(a){return!a.notActive},v=!1,F=.1,U=!1,P=!0,R=!1,M=function(){return 25},r=null,K=null,Q=null,J=null,q=null,N=null,x=!1,Z=d3.dispatch("elementClick","elementDblClick",
"elementMouseover","elementMouseout","renderEnd"),aa=!0,G=250,S,W,la,da=!1,ta=c.utils.renderWatch(Z,G),ka=[16,256];a.dispatch=Z;a.options=c.utils.optionsFunc.bind(a);a._calls=new function(){this.clearHighlights=function(){c.dom.write(function(){p.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=function(a,e,g){c.dom.write(function(){p.select(" .nv-series-"+a+" .nv-point-"+e).classed("hover",g)})}};Z.on("elementMouseover.point",function(c){O&&a._calls.highlightPoint(c.seriesIndex,
c.pointIndex,!0)});Z.on("elementMouseout.point",function(c){O&&a._calls.highlightPoint(c.seriesIndex,c.pointIndex,!1)});a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xScale:{get:function(){return h},set:function(a){h=a}},yScale:{get:function(){return u},set:function(a){u=a}},pointScale:{get:function(){return w},set:function(a){w=a}},xDomain:{get:function(){return r},set:function(a){r=a}},yDomain:{get:function(){return K},
set:function(a){K=a}},pointDomain:{get:function(){return q},set:function(a){q=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return J},set:function(a){J=a}},pointRange:{get:function(){return N},set:function(a){N=a}},forceX:{get:function(){return E},set:function(a){E=a}},forceY:{get:function(){return A},set:function(a){A=a}},forcePoint:{get:function(){return L},set:function(a){L=a}},interactive:{get:function(){return O},set:function(a){O=a}},pointActive:{get:function(){return I},
set:function(a){I=a}},padDataOuter:{get:function(){return F},set:function(a){F=a}},padData:{get:function(){return v},set:function(a){v=a}},clipEdge:{get:function(){return U},set:function(a){U=a}},clipVoronoi:{get:function(){return P},set:function(a){P=a}},clipRadius:{get:function(){return M},set:function(a){M=a}},showVoronoi:{get:function(){return R},set:function(a){R=a}},id:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return H},set:function(a){H=d3.functor(a)}},y:{get:function(){return B},
set:function(a){B=d3.functor(a)}},pointSize:{get:function(){return C},set:function(a){C=d3.functor(a)}},pointShape:{get:function(){return D},set:function(a){D=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return G},set:function(a){G=a;ta.reset(G)}},color:{get:function(){return l},set:function(a){l=
c.utils.getColor(a)}},useVoronoi:{get:function(){return aa},set:function(a){aa=a;!1===aa&&(P=!1)}}});c.utils.initOptions(a);return a};c.models.scatterChart=function(){function a(q){K.reset();K.models(e);I&&K.models(g);v&&K.models(t);A&&K.models(n);L&&K.models(p);q.each(function(q){B=d3.select(this);c.utils.initSVG(B);var x=c.utils.availableWidth(w,B,u),N=c.utils.availableHeight(H,B,u);a.update=function(){0===r?B.call(a):B.transition().duration(r).call(a)};a.container=this;U.setter(J(q),a.update).getter(Q(q)).update();
U.disabled=q.map(function(a){return!!a.disabled});if(!P)for(G in P={},U)P[G]=U[G]instanceof Array?U[G].slice(0):U[G];if(q&&q.length&&q.filter(function(a){return a.values.length}).length)B.selectAll(".nv-noData").remove();else return c.utils.noData(a,B),K.renderEnd("scatter immediate"),a;D=e.xScale();E=e.yScale();var M=B.selectAll("g.nv-wrap.nv-scatterChart").data([q]);var G=M.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g");var S=M.select("g");G.append("rect").attr("class",
"nvd3 nv-background").style("pointer-events","none");G.append("g").attr("class","nv-x nv-axis");G.append("g").attr("class","nv-y nv-axis");G.append("g").attr("class","nv-scatterWrap");G.append("g").attr("class","nv-regressionLinesWrap");G.append("g").attr("class","nv-distWrap");G.append("g").attr("class","nv-legendWrap");F&&S.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)");O&&(l.width(x),M.select(".nv-legendWrap").datum(q).call(l),u.top!=l.height()&&(u.top=l.height(),N=c.utils.availableHeight(H,
B,u)),M.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));M.attr("transform","translate("+u.left+","+u.top+")");e.width(x).height(N).color(q.map(function(a,c){a.color=a.color||C(a,c);return a.color}).filter(function(a,c){return!q[c].disabled}));M.select(".nv-scatterWrap").datum(q.filter(function(a){return!a.disabled})).call(e);M.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");M=M.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
M.enter().append("g").attr("class","nv-regLines");M=M.selectAll(".nv-regLine").data(function(a){return[a]});M.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);M.filter(function(a){return a.intercept&&a.slope}).watchTransition(K,"scatterPlusLineChart: regline").attr("x1",D.range()[0]).attr("x2",D.range()[1]).attr("y1",function(a,c){return E(D.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return E(D.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,
c,e){return C(a,e)}).style("stroke-opacity",function(a,c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});I&&(g.scale(D)._ticks(c.utils.calcTicksX(x/100,q)).tickSize(-N,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(g));v&&(t.scale(E)._ticks(c.utils.calcTicksY(N/36,q)).tickSize(-x,0),S.select(".nv-y.nv-axis").call(t));A&&(n.getData(e.x()).scale(D).width(x).color(q.map(function(a,c){return a.color||C(a,c)}).filter(function(a,
c){return!q[c].disabled})),G.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),S.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(q.filter(function(a){return!a.disabled})).call(n));L&&(p.getData(e.y()).scale(E).width(N).color(q.map(function(a,c){return a.color||C(a,c)}).filter(function(a,c){return!q[c].disabled})),G.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),S.select(".nv-distributionY").attr("transform","translate("+(F?
x:-p.size())+",0)").datum(q.filter(function(a){return!a.disabled})).call(p));l.dispatch.on("stateChange",function(c){for(var e in c)U[e]=c[e];R.stateChange(U);a.update()});R.on("changeState",function(c){"undefined"!==typeof c.disabled&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),U.disabled=c.disabled);a.update()});e.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0);B.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);B.select(".nv-chart-"+
e.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",p.size())});e.dispatch.on("elementMouseover.tooltip",function(a){B.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos.top-N-u.top);B.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos.left+n.size()-u.left);h.position(a.pos).data(a).hidden(!1)});D.copy();E.copy()});K.renderEnd("scatter with line immediate");return a}var e=c.models.scatter(),g=c.models.axis(),t=c.models.axis(),
l=c.models.legend(),n=c.models.distribution(),p=c.models.distribution(),h=c.models.tooltip(),u={top:30,right:20,bottom:50,left:75},w=null,H=null,B=null,C=c.utils.defaultColor(),D=e.xScale(),E=e.yScale(),A=!1,L=!1,O=!0,I=!0,v=!0,F=!1,U=c.utils.state(),P=null,R=d3.dispatch("stateChange","changeState","renderEnd"),M=null,r=250;e.xScale(D).yScale(E);g.orient("bottom").tickPadding(10);t.orient(F?"right":"left").tickPadding(10);n.axis("x");p.axis("y");h.headerFormatter(function(a,c){return g.tickFormat()(a,
c)}).valueFormatter(function(a,c){return t.tickFormat()(a,c)});var K=c.utils.renderWatch(R,r),Q=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},J=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=R;a.scatter=e;a.legend=l;a.xAxis=g;a.yAxis=t;a.distX=n;a.distY=p;a.tooltip=h;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return H},
set:function(a){H=a}},container:{get:function(){return B},set:function(a){B=a}},showDistX:{get:function(){return A},set:function(a){A=a}},showDistY:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return O},set:function(a){O=a}},showXAxis:{get:function(){return I},set:function(a){I=a}},showYAxis:{get:function(){return v},set:function(a){v=a}},defaultState:{get:function(){return P},set:function(a){P=a}},noData:{get:function(){return M},set:function(a){M=a}},duration:{get:function(){return r},
set:function(a){r=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},tooltipXContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},
tooltipYContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},rightAlignYAxis:{get:function(){return F},set:function(a){F=a;t.orient(a?"right":"left")}},color:{get:function(){return C},set:function(a){C=
c.utils.getColor(a);l.color(C);n.color(C);p.color(C)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sparkline=function(){function a(n){n.each(function(a){var n=g-e.left-e.right,A=t-e.top-e.bottom;l=d3.select(this);c.utils.initSVG(l);p.domain(B||d3.extent(a,u)).range(D||[0,n]);h.domain(C||d3.extent(a,w)).range(E||[A,0]);a=l.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform",
"translate("+e.left+","+e.top+")");n=a.selectAll("path").data(function(a){return[a]});n.enter().append("path");n.exit().remove();n.style("stroke",function(a,c){return a.color||H(a,c)}).attr("d",d3.svg.line().x(function(a,c){return p(u(a,c))}).y(function(a,c){return h(w(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return w(a,c)}),g=c(e.lastIndexOf(h.domain()[1])),l=c(e.indexOf(h.domain()[0])),
e=c(e.length-1);return[l,g,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,c){return p(u(a,a.pointIndex))}).attr("cy",function(a,c){return h(w(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return u(a,a.pointIndex)==p.domain()[1]?"nv-point nv-currentValue":w(a,a.pointIndex)==h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var e={top:2,right:0,bottom:2,left:0},g=400,t=32,l=null,n=!0,p=d3.scale.linear(),
h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},H=c.utils.getColor(["#000"]),B,C,D,E;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xDomain:{get:function(){return B},set:function(a){B=a}},yDomain:{get:function(){return C},set:function(a){C=a}},xRange:{get:function(){return D},set:function(a){D=a}},yRange:{get:function(){return E},set:function(a){E=
a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},animate:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return u},set:function(a){u=d3.functor(a)}},y:{get:function(){return w},set:function(a){w=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},
color:{get:function(){return H},set:function(a){H=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sparklinePlus=function(){function a(A){A.each(function(A){function E(){if(!u){var a=M.selectAll(".nv-hoverValue").data(h),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+n(e.x()(A[a],a))+
",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);h.length&&(c.append("line").attr("x1",0).attr("y1",-g.top).attr("x2",0).attr("y2",F),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-g.top).attr("text-anchor","end").attr("dy",".9em"),M.select(".nv-hoverValue .nv-xValue").text(w(e.x()(A[h[0]],h[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-g.top).attr("text-anchor","start").attr("dy",".9em"),M.select(".nv-hoverValue .nv-yValue").text(H(e.y()(A[h[0]],
h[0]))))}}var I=d3.select(this);c.utils.initSVG(I);var v=c.utils.availableWidth(t,I,g),F=c.utils.availableHeight(l,I,g);a.update=function(){I.call(a)};a.container=this;if(A&&A.length)I.selectAll(".nv-noData").remove();else return c.utils.noData(a,I),a;var L=e.y()(A[A.length-1],A.length-1);n=e.xScale();p=e.yScale();var P=I.selectAll("g.nv-wrap.nv-sparklineplus").data([A]),R=P.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),M=P.select("g");R.append("g").attr("class","nv-sparklineWrap");
R.append("g").attr("class","nv-valueWrap");R.append("g").attr("class","nv-hoverArea");P.attr("transform","translate("+g.left+","+g.top+")");P=M.select(".nv-sparklineWrap");e.width(v).height(F);P.call(e);B&&(P=M.select(".nv-valueWrap").selectAll(".nv-currentValue").data([L]),P.enter().append("text").attr("class","nv-currentValue").attr("dx",D?-8:8).attr("dy",".9em").style("text-anchor",D?"end":"start"),P.attr("x",v+(D?g.right:0)).attr("y",C?function(a){return p(a)}:0).style("fill",e.color()(A[A.length-
1],A.length-1)).text(H(L)));R.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!u){for(var a=d3.mouse(this)[0]-g.left,a=Math.round(n.invert(a)),c=Math.abs(e.x()(A[0],0)-a),l=0,p=0;p<A.length;p++)Math.abs(e.x()(A[p],p)-a)<c&&(c=Math.abs(e.x()(A[p],p)-a),l=p);h=[l];E()}}).on("click",function(){u=!u}).on("mouseout",function(){h=[];E()});M.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-g.left+","+-g.top+")"}).attr("width",v+g.left+g.right).attr("height",
F+g.top)});return a}var e=c.models.sparkline(),g={top:15,right:100,bottom:10,left:50},t=null,l=null,n,p,h=[],u=!1,w=d3.format(",r"),H=d3.format(",.2f"),B=!0,C=!0,D=!1,E=null;a.sparkline=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return l},set:function(a){l=a}},xTickFormat:{get:function(){return w},set:function(a){w=a}},yTickFormat:{get:function(){return H},set:function(a){H=a}},showLastValue:{get:function(){return B},
set:function(a){B=a}},alignValue:{get:function(){return C},set:function(a){C=a}},rightAlignValue:{get:function(){return D},set:function(a){D=a}},noData:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedArea=function(){function a(w){v.reset();
v.models(L);w.each(function(w){var F=g-e.left-e.right,O=t-e.top-e.bottom;p=d3.select(this);c.utils.initSVG(p);E=L.xScale();A=L.yScale();var M=w;w.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=c;return a})});w=w.filter(function(a){return!a.disabled});w=d3.layout.stack().order(B).offset(H).values(function(a){return a.values}).x(h).y(u).out(function(a,c,e){a.display={y:e,y0:c}})(w);var r=p.selectAll("g.nv-wrap.nv-stackedarea").data([w]),K=r.enter().append("g").attr("class",
"nvd3 nv-wrap nv-stackedarea"),Q=K.append("defs"),K=K.append("g"),J=r.select("g");K.append("g").attr("class","nv-areaWrap");K.append("g").attr("class","nv-scatterWrap");r.attr("transform","translate("+e.left+","+e.top+")");0==L.forceY().length&&L.forceY().push(0);L.width(F).height(O).x(h).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(w.map(function(a,c){return a.color||l(a,a.seriesIndex)}));J.select(".nv-scatterWrap").datum(w).call(L);Q.append("clipPath").attr("id","nv-edge-clip-"+
n).append("rect");r.select("#nv-edge-clip-"+n+" rect").attr("width",F).attr("height",O);J.attr("clip-path",D?"url(#nv-edge-clip-"+n+")":"");var q=d3.svg.area().x(function(a,c){return E(h(a,c))}).y0(function(a){return A(a.display.y0)}).y1(function(a){return A(a.display.y+a.display.y0)}).interpolate(C),N=d3.svg.area().x(function(a,c){return E(h(a,c))}).y0(function(a){return A(a.display.y0)}).y1(function(a){return A(a.display.y0)}),F=J.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});
F.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return N(a.values,a.seriesIndex)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",
!1);I.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});F.exit().remove();F.style("fill",function(a,c){return a.color||l(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||l(a,a.seriesIndex)});F.watchTransition(v,"stackedArea path").attr("d",function(a,c){return q(a.values,c)});L.dispatch.on("elementMouseover.area",function(a){J.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!0)});L.dispatch.on("elementMouseout.area",
function(a){J.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,e=a[0].length,g,h,l,n=[];for(h=0;h<e;++h){for(l=g=0;g<M.length;g++)l+=u(M[g].values[h]);if(l)for(g=0;g<c;g++)a[g][h][1]/=l;else for(g=0;g<c;g++)a[g][h][1]=0}for(h=0;h<e;++h)n[h]=0;return n}});v.renderEnd("stackedArea immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),p=null,h=function(a){return a.x},
u=function(a){return a.y},w="stack",H="zero",B="default",C="linear",D=!1,E,A,L=c.models.scatter(),O=250,I=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");L.pointSize(2.2).pointDomain([2.2,2.2]);var v=c.utils.renderWatch(I,O);a.dispatch=I;a.scatter=L;L.dispatch.on("elementClick",function(){I.elementClick.apply(this,arguments)});L.dispatch.on("elementMouseover",function(){I.elementMouseover.apply(this,arguments)});L.dispatch.on("elementMouseout",
function(){I.elementMouseout.apply(this,arguments)});a.interpolate=function(c){if(!arguments.length)return C;C=c;return a};a.duration=function(c){if(!arguments.length)return O;O=c;v.reset(O);L.duration(O);return a};a.dispatch=I;a.scatter=L;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},offset:{get:function(){return H},
set:function(a){H=a}},order:{get:function(){return B},set:function(a){B=a}},interpolate:{get:function(){return C},set:function(a){C=a}},x:{get:function(){return h},set:function(a){h=d3.functor(a)}},y:{get:function(){return u},set:function(a){u=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return l},set:function(a){l=
c.utils.getColor(a)}},style:{get:function(){return w},set:function(c){w=c;switch(w){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}}},duration:{get:function(){return O},set:function(a){O=a;v.reset(O);L.duration(O)}}});c.utils.inheritOptions(a,
L);c.utils.initOptions(a);return a};c.models.stackedAreaChart=function(){function a(h){N.reset();N.models(e);E&&N.models(g);A&&N.models(t);h.each(function(h){var G=d3.select(this),N=this;c.utils.initSVG(G);var P=c.utils.availableWidth(w,G,u),S=c.utils.availableHeight(H,G,u);a.update=function(){G.transition().duration(Q).call(a)};a.container=this;F.setter(Z(h),a.update).getter(x(h)).update();F.disabled=h.map(function(a){return!!a.disabled});if(!U)for(ia in U={},F)U[ia]=F[ia]instanceof Array?F[ia].slice(0):
F[ia];if(h&&h.length&&h.filter(function(a){return a.values.length}).length)G.selectAll(".nv-noData").remove();else return c.utils.noData(a,G),a;I=e.xScale();v=e.yScale();var ka=G.selectAll("g.nv-wrap.nv-stackedAreaChart").data([h]),fa=ka.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var ia=ka.select("g");fa.append("rect").style("opacity",0);fa.append("g").attr("class","nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-stackedWrap");
fa.append("g").attr("class","nv-legendWrap");fa.append("g").attr("class","nv-controlsWrap");fa.append("g").attr("class","nv-interactive");ia.select("rect").attr("width",P).attr("height",S);D&&(fa=C?P-M:P,l.width(fa),ia.select(".nv-legendWrap").datum(h).call(l),u.top!=l.height()&&(u.top=l.height(),S=c.utils.availableHeight(H,G,u)),ia.select(".nv-legendWrap").attr("transform","translate("+(P-fa)+","+-u.top+")"));if(C){var oa=[{key:K.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=e.style(),style:"stack"},
{key:K.stream||"Stream",metaKey:"Stream",disabled:"stream"!=e.style(),style:"stream"},{key:K.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:K.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];M=r.length/3*260;oa=oa.filter(function(a){return-1!==r.indexOf(a.metaKey)});n.width(M).color(["#444","#444","#444"]);ia.select(".nv-controlsWrap").datum(oa).call(n);u.top!=Math.max(n.height(),l.height())&&(u.top=
Math.max(n.height(),l.height()),S=c.utils.availableHeight(H,G,u));ia.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")}ka.attr("transform","translate("+u.left+","+u.top+")");L&&ia.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)");O&&(p.width(P).height(S).margin({left:u.left,top:u.top}).svgContainer(G).xScale(I),ka.select(".nv-interactive").call(p));e.width(P).height(S);ia.select(".nv-stackedWrap").datum(h).transition().call(e);E&&(g.scale(I)._ticks(c.utils.calcTicksX(P/
100,h)).tickSize(-S,0),ia.select(".nv-x.nv-axis").attr("transform","translate(0,"+S+")"),ia.select(".nv-x.nv-axis").transition().duration(0).call(g));A&&(S="wiggle"===e.offset()?0:c.utils.calcTicksY(S/36,h),t.scale(v)._ticks(S).tickSize(-P,0),"expand"===e.style()||"stack_percent"===e.style()?(P=t.tickFormat(),J&&P===aa||(J=P),t.tickFormat(aa)):J&&(t.tickFormat(J),J=null),ia.select(".nv-y.nv-axis").transition().duration(0).call(t));e.dispatch.on("areaClick.toggle",function(c){1===h.filter(function(a){return!a.disabled}).length?
h.forEach(function(a){a.disabled=!1}):h.forEach(function(a,e){a.disabled=e!=c.seriesIndex});F.disabled=h.map(function(a){return!!a.disabled});R.stateChange(F);a.update()});l.dispatch.on("stateChange",function(c){for(var e in c)F[e]=c[e];R.stateChange(F);a.update()});n.dispatch.on("legendClick",function(c,g){c.disabled&&(oa=oa.map(function(a){a.disabled=!0;return a}),c.disabled=!1,e.style(c.style),F.style=e.style(),R.stateChange(F),a.update())});p.dispatch.on("elementMousemove",function(l){e.clearHighlights();
var n,t,r,v=[];h.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,h){t=c.interactiveBisect(g.values,l.pointXValue,a.x());var q=g.values[t];null!=a.y()(q,t)&&e.highlightPoint(h,t,!0);if("undefined"!==typeof q){"undefined"===typeof n&&(n=q);"undefined"===typeof r&&(r=a.xScale()(a.x()(q,t)));var p="expand"==e.style()?q.display.y:a.y()(q,t);v.push({key:g.key,value:p,color:B(g,g.seriesIndex),stackedValue:q.display})}});v.reverse();if(2<v.length){var x=a.yScale().invert(l.mouseY),
w=null;v.forEach(function(a,c){x=Math.abs(x);var e=Math.abs(a.stackedValue.y0),g=Math.abs(a.stackedValue.y);x>=e&&x<=g+e&&(w=c)});null!=w&&(v[w].highlight=!0)}var G=g.tickFormat()(a.x()(n,t)),A=p.tooltip.valueFormatter();"expand"===e.style()||"stack_percent"===e.style()?(q||(q=A),A=d3.format(".1%")):q&&(A=q,q=null);p.tooltip.position({left:r+u.left,top:l.mouseY+u.top}).chartContainer(N.parentNode).valueFormatter(A).data({value:G,series:v})();p.renderGuideLine(r)});p.dispatch.on("elementMouseout",
function(a){e.clearHighlights()});R.on("changeState",function(c){"undefined"!==typeof c.disabled&&h.length===c.disabled.length&&(h.forEach(function(a,e){a.disabled=c.disabled[e]}),F.disabled=c.disabled);"undefined"!==typeof c.style&&e.style(c.style);a.update()})});N.renderEnd("stacked Area chart immediate");return a}var e=c.models.stackedArea(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend(),n=c.models.legend(),p=c.interactiveGuideline(),h=c.models.tooltip(),u={top:30,right:25,bottom:50,left:60},
w=null,H=null,B=c.utils.defaultColor(),C=!0,D=!0,E=!0,A=!0,L=!1,O=!1,I,v,F=c.utils.state(),U=null,P=null,R=d3.dispatch("stateChange","changeState","renderEnd"),M=250,r=["Stacked","Stream","Expanded"],K={},Q=250;F.style=e.style();g.orient("bottom").tickPadding(7);t.orient(L?"right":"left");h.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return t.tickFormat()(a,c)});p.tooltip.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,
c){return t.tickFormat()(a,c)});var J=null,q=null;n.updateState(!1);var N=c.utils.renderWatch(R);e.style();var x=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:e.style()}}},Z=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},aa=d3.format("%");e.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=e.x()(a.point);a.point.y=e.y()(a.point);h.data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",
function(a){h.hidden(!0)});a.dispatch=R;a.stacked=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=t;a.interactiveLayer=p;a.tooltip=h;a.dispatch=R;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return H},set:function(a){H=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return U},
set:function(a){U=a}},noData:{get:function(){return P},set:function(a){P=a}},showControls:{get:function(){return C},set:function(a){C=a}},controlLabels:{get:function(){return K},set:function(a){K=a}},controlOptions:{get:function(){return r},set:function(a){r=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},duration:{get:function(){return Q},set:function(a){Q=a;N.reset(Q);e.duration(Q);g.duration(Q);t.duration(Q)}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a);l.color(B);e.color(B)}},rightAlignYAxis:{get:function(){return L},
set:function(a){L=a;t.orient(L?"right":"left")}},useInteractiveGuideline:{get:function(){return O},set:function(c){O=!!c;a.interactive(!c);a.useVoronoi(!c);e.scatter.interactive(!c)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sunburst=function(){function a(v){I.reset();v.each(function(a){function v(a){a.x0=a.x;a.dx0=a.dx}function F(a){var c=d3.interpolate(B.domain(),[a.x,a.x+a.dx]),e=d3.interpolate(C.domain(),[a.y,1]),g=d3.interpolate(C.range(),[a.y?20:0,r]);return function(a,
h){return h?function(c){return E(a)}:function(h){B.domain(c(h));C.domain(e(h)).range(g(h));return E(a)}}}h=d3.select(this);var I=c.utils.availableWidth(g,h,e),M=c.utils.availableHeight(t,h,e),r=Math.min(I,M)/2;c.utils.initSVG(h);var K=h.selectAll(".nv-wrap.nv-sunburst").data(a),Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+p).selectAll("nv-sunburst");K.attr("transform","translate("+I/2+","+M/2+")");h.on("click",function(a,c){H.chartClick({data:a,index:c,pos:d3.event,id:p})});
C.range([0,r]);A=A||a;O=a[0];D.value(n[l]||n.count);var J=Q.data(D.nodes).enter().append("path").attr("d",E).style("fill",function(a){return u((a.children?a:a.parent).name)}).style("stroke","#FFF").on("click",function(a){L!==A&&A!==a&&(L=A);A=a;J.transition().duration(w).attrTween("d",F(a))}).each(v).on("dblclick",function(a){L.parent==a&&J.transition().duration(w).attrTween("d",F(O))}).each(v).on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("opacity",.8);H.elementMouseover({data:a,
color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);H.elementMouseout({data:a})}).on("mousemove",function(a,c){H.elementMousemove({data:a})})});I.renderEnd("sunburst immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l="count",n={count:function(a){return 1},size:function(a){return a.size}},p=Math.floor(1E4*Math.random()),h=null,u=c.utils.defaultColor(),w=500,H=d3.dispatch("chartClick","elementClick","elementDblClick",
"elementMousemove","elementMouseover","elementMouseout","renderEnd"),B=d3.scale.linear().range([0,2*Math.PI]),C=d3.scale.sqrt(),D=d3.layout.partition().sort(null).value(function(a){return 1}),E=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,B(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,B(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,C(a.y))}).outerRadius(function(a){return Math.max(0,C(a.y+a.dy))}),A,L,O,I=c.utils.renderWatch(H);a.dispatch=
H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},mode:{get:function(){return l},set:function(a){l=a}},id:{get:function(){return p},set:function(a){p=a}},duration:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;
e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sunburstChart=function(){function a(g){w.reset();w.models(e);g.each(function(g){var l=d3.select(this);c.utils.initSVG(l);var n=c.utils.availableWidth(null,l,t),p=c.utils.availableHeight(null,l,t);a.update=function(){0===h?l.call(a):l.transition().duration(h).call(a)};a.container=this;if(g&&g.length)l.selectAll(".nv-noData").remove();else return c.utils.noData(a,
l),a;var u=l.selectAll("g.nv-wrap.nv-sunburstChart").data(g),w=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),B=u.select("g");w.append("g").attr("class","nv-sunburstWrap");u.attr("transform","translate("+t.left+","+t.top+")");e.width(n).height(p);g=B.select(".nv-sunburstWrap").datum(g);d3.transition(g).call(e)});w.renderEnd("sunburstChart immediate");return a}var e=c.models.sunburst(),g=c.models.tooltip(),t={top:30,right:20,bottom:20,left:20},l=c.utils.defaultColor(),
n=null,p=null,h=250,u=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),w=c.utils.renderWatch(u);g.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return a});e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.size,color:a.color};g.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});
a.dispatch=u;a.sunburst=e;a.tooltip=g;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return p},set:function(a){p=a}},defaultState:{get:function(){return n},set:function(a){n=a}},color:{get:function(){return l},set:function(a){l=a;e.color(l)}},duration:{get:function(){return h},set:function(a){h=a;w.reset(h);e.duration(h)}},margin:{get:function(){return t},set:function(a){t.top=void 0!==a.top?a.top:t.top;t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==
a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.version="1.8.1"})();
(function(c,a){var e=0;c.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=e;e+=1;this.openRequest=this.chart=
this.table=null},_init:function(){var a=c(this.element),e=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var l=a.find(".pt-chart");this.chart=l.length?l.first():null;e.renderFilter||e.renderOptions?(l="#"+a.attr("id"),e.renderOptions?(c(l+"-options").show(),e.collapseOptions&&(c(l+"-options legend").siblings().toggle(),c(l+"-options legend").children().toggle())):c(l+
"-options").hide(),e.renderFilter?(c(l+"-filters").show(),e.collapseFilter&&(c(l+"-filters legend").siblings().toggle(),c(l+"-filters legend").children().toggle())):c(l+"-options").hide()):a.find(".pt-form-container").hide();e.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());e.numberFormatter=function(a){var c=e.precision;if(null===a||"undefined"==typeof a)return"-";c=c||0==c?a.toFixed(c):a.toString();c=c.split(".");
a=c[0];c=1<c.length?"."+c[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+e.thousandGrouping+"})+(?!\\d))","g"),e.thousandSeparator);return a+c};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=c(this.element),e=null;this._unbindEvents();var l=a.find('input[type="hidden"][name="pivotdata"]');l.length&&(e=JSON.parse(c(l).first().val()));e?"count"==e.method&&(this.options.precision=0,this.options.minTickSize=1):(e={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide());this.data=e;e.nodata?(a.find(".pt-table").first().empty().append(c('<div class="pt-no-data">'+e.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();e.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=
c(this.element),e=a.find(".pt-table").first().empty();this.table=null;var l=this.data;if(!l.empty)if(this.options.renderTable){var n=l.cells,p=l.cols,h=l.rows,u=l.total,w=l.labels,H=this.options,B=H.showTotals,C=!1;1==p.length&&null===p[0][4]&&(C=!0);n=l.cells.slice(0);if(C&&B)for(p=[],l=0;l<h.length;l++)n[l]=[];else{for(l=0;l<h.length;l++)n[l]=n[l].filter(function(a,c){return"__other__"!=p[c][0]});p=p.filter(function(a){return"__other__"!=a[0]})}l=!1;1==p.length&&null===p[0][4]&&(l=!0);l&&B?(h=[],
n=[]):(n=n.filter(function(a,c){return"__other__"!=h[c][0]}),h=h.filter(function(a){return"__other__"!=a[0]}));e=d3.select(e.get(0)).append("table").attr("class","dataTable display report");e.append("thead").call(this._renderHeader,p,w,H).call(this._renderColumns,p,w,H);e.append("tbody").call(this._renderRows,this,h,p,w,n,H);H.showTotals&&e.append("tfoot").call(this._renderFooter,h,p,w,u);this.table=c(e.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):
(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide()},_renderHeader:function(a,c,e,n){a=a.append("tr");a.append("th").attr("scope","col").text(e.layer);c.length&&a.append("th").attr({scope:"col",colspan:c.length}).text(e.cols);n.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(e.total);return a},_renderColumns:function(a,c,e,n){a=a.append("tr");a.append("th").attr({scope:"col",
"class":"pt-rows-header"}).text(e.rows);var g=!1;1==c.length&&null===c[0][4]&&(g=!0);a.selectAll("th.pt-data").data(c).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return g?"":a[4]});return a},_renderRows:function(a,c,e,n,p,h,u){e=a.selectAll("tr.pt-row").data(e).enter().append("tr").attr("class",function(a,c){return c%2?"odd":"even"});var g=!1;1==e.length&&null===e[0][4]&&(g=!0);e.append("td").text(function(a){return g?"":a[4]});e.selectAll("td.pt-cell").data(function(a,
c){return h[c]}).enter().append("td").attr("class","pt-cell").each(c._renderCell,p);u.showTotals&&e.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return e},_renderCell:function(a,e,l){e=d3.select(this);for(var g=a.items,p,h=0,t=g.length;h<t;h++){p=g[h];var w=e.append("div").attr("class","pt-cell-value");null===p?w.text(l.none):c.isArray(p)?w.append("ul").selectAll("li").data(p).enter().append("li").html(function(a){return a}):w.text(p);p=a.keys[h];g&&p&&p.length&&(c(w.node()).data("keys",
p).data("fact",h),w.append("div").attr("class","pt-cell-zoom"));1<t-h&&w.append("span").text(" / ")}},_renderFooter:function(a,c,e,n,p){c=c.length%2?"odd":"even";a=a.append("tr").attr("class",c+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(n.total);a.selectAll("td.pt-col-total").data(e).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(p);return a},_renderChartOptions:function(){var a=
c(this.element),e=a.find(".pt-chart-controls").first().empty(),l=this.data;if(!l.empty&&this.options.renderChart){var l=l.labels,n=a.attr("id"),a=l.layer,p=l.rows,h=l.cols,u=l.per,w=c('<div class="pt-chart-opts">'),H=n+"-pchart-rows",B=n+"-vchart-rows",C=n+"-hchart-rows",D=n+"-schart-rows",E=n+"-pchart-cols",A=n+"-vchart-cols",L=n+"-hchart-cols",n=n+"-schart-cols";a&&c(w).append(c('<span class="pt-chart-label">'+a+": </span>"));p&&c(w).append(c('<div id="'+H+'" class="pt-chart-icon pt-pchart"/><div id="'+
B+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+p+"</span>"));h&&c(w).append(c('<div id="'+E+'" class="pt-chart-icon pt-pchart"/><div id="'+A+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+h+"</span>"));p&&h&&c(w).append(c('<span class="pt-chart-label">| '+l.breakdown+': </span><div id="'+D+'" class="pt-chart-icon pt-schart"/><div id="'+C+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+p+'</span><div id="'+n+'"  class="pt-chart-icon pt-schart"/><div id="'+
L+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+h+"</span>"));c(e).append(w)}},_truncateLabel:function(a,c){return a&&a.length>c?a.substring(0,c-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var e=c(this.element),g=this.data;e.find(".pt-chart-contents").hide();if(e=this.chart)if(c(e).unbind("plothover").unbind("plotclick").empty(),!g.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{e=this.options.collapseChart;if("undefined"==typeof a||
!a){if(e)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(e)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;e=a.type;a=a.axis;var n=g.labels,p=n.per,h=n.layer+" "+p+" "+n.rows,n=n.layer+" "+p+" "+n.cols,p=g.filter,u=p[0],w=p[1];"piechart"==e?"rows"==a?this._renderPieChart(g.rows,h,u):this._renderPieChart(g.cols,n,w):"barchart"==e?"rows"==a?this._renderBarChart(g.rows,g.facts,h,u):this._renderBarChart(g.cols,
g.facts,n,w):"breakdown"==e?"rows"==a?this._renderBreakDown(g,0,h,p):this._renderBreakDown(g,1,n,p):"spectrum"==e&&this._renderSpectrum(g,a,p)}}},_renderPieChart:function(a,e,l){var g=this.chart;if(g){c(g).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});e?c(g).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):c(g).siblings(".pt-chart-title").empty();var p=[],h=0;for(e=0;e<a.length;e++){var t=a[e];!t[1]&&0<=t[2][0]&&(p.push({index:t[0],label:t[4],value:t[2][0],key:t[3]}),
h+=t[2][0])}var w=this;w.chartOptions.currentDataIndex=null;var H=function(a){var e=a.index;if(w.chartOptions.currentDataIndex!=e){w._removeChartTooltip();w.chartOptions.currentDataIndex=e;a=a.data;var g=a.value;w._renderChartTooltip(d3.event.x,d3.event.y,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+g+" ("+Math.round(g/h*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).labelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0);
a.tooltip.enabled(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",H).on("elementMouseout",function(a){c(".pt-tooltip").remove();w.chartOptions.currentDataIndex=null;w.chartOptions.currentSeriesIndex=null});if(w.options.exploreChart&&l)a.pie.dispatch.on("elementClick",function(a){a=a.data;w._chartExplore([["__other__"==a.index?l+"__belongs":l,a.key]])});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(p).transition().duration(1200).call(a);nv.utils.windowResize(a.update);
return a})}},_renderBarChart:function(a,e,l,n){var g=this.chart;if(g){c(g).closest(".pt-chart-contents").show().css({width:"96%"});for(var h=[],t=this._truncateLabel,w,H,B,C=0;C<e.length;C++){w={key:e[C][2]};H=[];for(var D=0;D<a.length;D++)B=a[D],H.push({label:B[4],value:B[2][C],filterIndex:B[0],filterKey:B[3]});w.values=H;h.push(w)}c(g).css({height:"360px"});l?c(g).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):c(g).siblings(".pt-chart-title").empty();var E=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},a.index)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},A=this,L=this.options.numberFormatter;nv.addGraph(function(){if(1<h.length){var a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showControls(!1);var e=a.multibar}else a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showValues(!0),a.valueFormat(L),e=a.discretebar;a.tooltip.contentGenerator(E);
a.yAxis.tickFormat(L);a.xAxis.tickFormat(function(a){return t(a,18)});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(h).transition().duration(500).call(a);if(A.options.exploreChart&&n)e.dispatch.on("elementClick",function(a){var c=a.data.filterKey;null===c&&(c="None");var e=n;"__other__"==a.data.filterIndex&&(e+="__belongs");A._chartExplore([[e,c]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,e,l,n){var g=this.chart;if(g){c(g).closest(".pt-chart-contents").show().css({width:"96%"});
var h=a.cells,t=[],w=[];if(0===e){var H=a.rows;var B=a.cols;a=function(a,c){return h[t[a]][w[c]].values[0]};var C=n[0];var D=n[1]}else H=a.cols,B=a.rows,a=function(a,c){return h[w[c]][t[a]].values[0]},C=n[1],D=n[0];var E;n=[];e=[];var A=0;for(E=H.length;A<E;A++)H[A][1]||(n.push(H[A]),t.push(A));A=0;for(E=B.length;A<E;A++)B[A][1]||(e.push(B[A]),w.push(A));var L=[];for(H=0;H<e.length;H++){B={key:e[H][4],filterIndex:e[H][0],filterKey:e[H][3]};A=[];for(E=0;E<n.length;E++)A.push({label:n[E][4],filterIndex:n[E][0],
filterKey:n[E][3],value:a(E,H)});B.values=A;L.push(B)}a=Math.max(n.length*Math.max(16*(e.length+1),50)+70,360);c(g).css({height:a+"px"});l?c(g).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):c(g).siblings(".pt-chart-title").empty();var O=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},a.index)+'">'+a.series+'</div><div class="pt-tooltip-text">'+a.label+': <span class="pt-tooltip-value">'+a.value+"</span></div></div>"},
I=this,v=this.options.numberFormatter,F=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).duration(350).showControls(!0);a.tooltip.contentGenerator(O);a.valueFormat(v);a.yAxis.tickFormat(v);a.xAxis.tickFormat(function(a){return F(a,24)});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(L).call(a);if(I.options.exploreChart&&C&&D)a.multibar.dispatch.on("elementClick",
function(a){a=a.data;var c=d3.event.currentTarget.parentElement.__data__,e=c.filterKey;null===e&&(e="None");var c="__other__"==c.filterIndex?D+"__belongs":D,g=a.filterKey;null===g&&(g="None");I._chartExplore([["__other__"==a.filterIndex?C+"__belongs":C,g],[c,e]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(e,t,l){var g=this.chart;if(g){var p=this,h=e.cells,u=e.labels;if("rows"==t){var w=e.rows;var H=e.cols;t=u.rows;var B=u.cols;var C=l[0];var D=l[1];var E=function(a,c){return h[a][c]}}else w=
e.cols,H=e.rows,t=u.cols,B=u.rows,C=l[1],D=l[0],E=function(a,c){return h[c][a]};var A=function(a,c){return null===a?H[c]:null===c?w[a]:E(a,c)},L=function(c,e){e===a&&(e="silver");for(var g=[],h,l,n=0;n<H.length;n++)h=A(null,n),l=null===c?h[2][0]:A(c,n).values[0],!h[1]&&0<=h[2][0]&&g.push({filterIndex:h[0],filterKey:h[3],label:h[4],value:l,color:e});return g},O=[],I=0;for(l=0;l<w.length;l++){var v=A(l,null);!v[1]&&0<=v[2][0]&&(O.push({position:l,filterIndex:v[0],filterKey:v[3],label:v[4],value:v[2][0]}),
I+=v[2][0])}p.chartOptions.currentDataIndex=null;c(g).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();c(g).siblings(".pt-chart-title").empty();l=c('<div class="pt-spectrum-pie">').appendTo(g);var g=c('<div class="pt-spectrum-bar">').appendTo(g),F=this.options.numberFormatter,U=this._truncateLabel,P=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0);P.tooltip.contentGenerator(function(a){a=
a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+F(a.value)+"</div></div>"});P.valueFormat(F);P.yAxis.tickFormat(F);P.xAxis.tickFormat(function(a){return U(a,18)});var R=d3.select(c(g).get(0)).append("svg").attr("class","nv"),g=Math.floor(l.width()/2)-30,M=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(g).margin({top:-20,left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35);
M.tooltip.enabled(!1);M.legend.align(!0).rightAlign(!1);M.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});M.pie.dispatch.on("elementMouseover",function(a){var e=a.index;if(p.chartOptions.currentDataIndex!=e){p._removeChartTooltip();p.chartOptions.currentDataIndex=e;a=a.data;var g=a.value;p._renderChartTooltip(d3.event.x,d3.event.y,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+g+" ("+Math.round(g/
I*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}}).on("elementMouseout",function(a){c(".pt-tooltip").remove();p.chartOptions.currentDataIndex=null;p.chartOptions.currentSeriesIndex=null});var r=d3.select(c(l).get(0)).append("svg").attr("class","nv").style({"min-width":g-30+"px"}),g=d3.select(c(l).get(0)).append("div").attr("class","pt-spectrum-form");g.append("h4").html(u.layer+" "+u.per+" "+B);g.append("label").html(t+":");var K=g.append("select");K.append("option").attr("value",
"null").style("font-weight","bold").html(p.options.textAll);K.selectAll(".pt-series-item").data(O).enter().append("option").attr("class","pt-series-item").attr("value",function(a,c){return c}).html(function(a){return a.label});g.append("label").html(u.total+":");var Q=g.append("span").text(e.total),J=function(a){if(null===a||p.chartOptions.currentSpectrumIndex==a){var c=function(a,c){return nv.utils.defaultColor()({},c)};r.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=L(null);R.datum([{key:null,
filterIndex:null,filterKey:null,values:c}]);P.update();p.chartOptions.currentSpectrumIndex=null;K.property("value","null");Q.text(e.total)}else{var g=O[a],h=nv.utils.defaultColor()({},a);c=function(c,e){return e==a?h:"silver"};r.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=L(g.position,h);R.datum([{key:g.position,filterIndex:g.filterIndex,filterKey:g.filterKey,values:c}]);P.update();p.chartOptions.currentSpectrumIndex=a;K.property("value",a);Q.text(O[a].value)}};M.pie.dispatch.on("elementClick",
function(a){J(a.index)});K.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?J(null):J(a)});nv.addGraph(function(){r.datum(O).transition().duration(1200).call(M);nv.utils.windowResize(M.update);return M});nv.addGraph(function(){R.datum([{key:null,filterIndex:null,filterKey:null,values:L(null)}]).transition().duration(500).call(P);if(p.options.exploreChart&&C&&D)P.discretebar.dispatch.on("elementClick",function(a){var c=a.data,e=d3.event.currentTarget.parentElement.__data__;
a=e.filterIndex;var e=e.filterKey,g=c.filterIndex,c=c.filterKey,h=[];null!==a&&h.push(["__other__"==a?C+"__belongs":C,e||"None"]);null!==g&&h.push(["__other__"==g?D+"__belongs":D,c||"None"]);p._chartExplore(h)});nv.utils.windowResize(P.update);return P})}},_chartExplore:function(e){var g=this.options,l=c(this.element).closest(".ui-tabs"),n=g.filterTab;if(l.length&&!1!==n)g=(g=g.filterForm)?c("#"+g):a,S3.search.setCurrentFilters(g,e),e=n?c("#"+n).index():0,l.tabs("option","active",e);else if(l=g.filterURL)e=
this._updateURL(l,e),window.open(e,"_blank")},_renderChartTooltip:function(a,e,l){c('<div class="pt-tooltip">'+l+"</div>").css({position:"absolute",display:"none",top:e-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){c(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=null},
_getOptions:function(){var a="#"+c(this.element).attr("id");return{rows:c(a+"-rows").val(),cols:c(a+"-cols").val(),fact:c(a+"-fact").val(),totals:c(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+c(this.element).attr("id"),e=null,a=c(a+"-filters");if(a.length)try{e=S3.search.getCurrentFilters(a.first())}catch(l){}return e},_updateURL:function(a,c){var e=[],g={},p;if(c){var h=0;for(p=c.length;h<p;h++){var t=c[h];var w=t[0];g[w]=!0;e.push(w+"="+t[1])}}t=this.options.ajaxURL.split("?");
if(1<t.length){var H=t[1].split("&");t={};h=0;for(p=H.length;h<p;h++){var B=H[h].split("=");1<B.length&&(w=decodeURIComponent(B[0]),g[w]||(e.push(w+"="+decodeURIComponent(B[1])),t[w]=!0))}for(w in t)g[w]=!0}t=a.split("?");if(1<t.length)for(H=t[1].split("&"),h=0,p=H.length;h<p;h++)B=H[h].split("="),1<B.length&&(w=decodeURIComponent(B[0]),g[w]||e.push(w+"="+decodeURIComponent(B[1])));e=e.join("&");g=t[0];e&&(g=g+"?"+e);return g},_updateAjaxURL:function(a,e){var g=this.options.ajaxURL.split("?"),n=[],
p=!1;if(1<g.length){var h=g[1];h=h.split("&")}else h=[];if(a)for(H in a){var t=a[H];var w=H+"="+t;"totals"==H?this.options.showTotals=t?!0:!1:p||-1!=c.inArray(w,h)||(p=!0);n.push(w)}var H={};t={};var B;if(e){var C=0;for(B=e.length;C<B;C++){w=e[C];var D=w[0];w=w[1];null===w?H[D]||(t[D]=!0):(t[D]&&(t[D]=!1),w=D+"="+encodeURIComponent(w),H[D]?H[D].push(w):H[D]=[w])}}C=0;for(B=h.length;C<B;C++)w=h[C].split("="),1<w.length&&(D=decodeURIComponent(w[0]),w=decodeURIComponent(w[1]),t[D]?p=!0:H[D]?p||-1!=c.inArray(D+
"="+w,H[D])||(p=!0):"aggregate"!=D&&(a&&a.hasOwnProperty(D)||n.push(h[C])));for(D in H)for(C=0,B=H[D].length;C<B;C++)p||-1!=c.inArray(H[D][C],h)||(p=!0),n.push(H[D][C]);n=n.join("&");g=g[0];n&&(g=g+"?"+n);this.options.ajaxURL=g;return p},reload:function(e,t,l){l="undefined"!=typeof l?l:!0;"undefined"==typeof t&&(t=this._getFilters());var g=this,p=this.element,h=p.find('input[type="hidden"][name="pivotdata"]');if(h.length){p.find(".pt-throbber").show();if(e||t)var u=this._updateAjaxURL(e,t);u||l?(e=
this.options.ajaxURL,t=this.options.timeout,l=c.ajaxS3,c.searchS3!==a&&(l=c.searchS3),p.find(".pt-empty").hide(),g.openRequest&&(g.openRequest.onreadystatechange=null,g.openRequest.abort()),g.openRequest=l({timeout:t,url:e,dataType:"json",type:"GET",success:function(a){g.openRequest=null;h.first().val(JSON.stringify(a));g.refresh()},error:function(a,c,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):g.refresh()}},_bindEvents:function(){var a=this,e=c(this.element),l=this.data,
n="#"+e.attr("id");c(n+"-options legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c(n+"-filters legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});e.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;e.find(".pt-table").hide();c(this).siblings(".pt-show-table").show();c(this).hide()});e.find(".pt-show-table").click(function(){a.table_options.hidden=!1;e.find(".pt-table").show();c(this).siblings(".pt-hide-table").show();
c(this).hide()});c(n+"-totals").click(function(){var e=c(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});c(n+"-rows,"+n+"-cols,"+n+"-fact").on("change.autosubmit",function(){c(n+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var p=this.options.autoSubmit;c(n+"-pt-form").on("optionChanged",function(){var e=c(this);if(!e.data("noAutoSubmit")){var g=e.data("autoSubmitTimeout");g&&clearTimeout(g);g=setTimeout(function(){var c=a._getOptions(),e=a._getFilters();
a.reload(c,e,!1)},p);e.data("autoSubmitTimeout",g)}})}else c(n+"-pt-form input.pt-submit").click(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});c(n+" div.pt-table div.pt-cell-zoom").click(function(a){a=c(a.currentTarget);var e=a.closest(".pt-cell-value"),g=e.find(".pt-cell-records");if(0<g.length)g.remove(),a.removeClass("opened");else{for(var h=e.data("keys"),g=e.data("fact"),e=l.lookups[l.facts[g][0]],g=c("<div/>").addClass("pt-cell-records"),n=c("<ul/>"),p=0;p<h.length;p++)n.append("<li>"+
e[h[p]]+"</li>");g.append(n);a.addClass("opened").after(g)}});c(n+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});c(n+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});c(n+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});c(n+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});c(n+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});c(n+"-vchart-cols").click(function(){a._renderChart({type:"barchart",
axis:"cols"})});c(n+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});c(n+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});e.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=c(this.element),e="#"+a.attr("id");c(e+" div.pt-table div.pt-cell-zoom").unbind("click");c(e+"-options legend").unbind("click");c(e+"-filters legend").unbind("click");c(e+"-totals").unbind("click");c(e+"-rows,"+e+"-cols,"+
e+"-fact").unbind("change.autosubmit");c(e+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");c(e+"-pchart-rows,"+e+"-vchart-rows,"+e+"-schart-rows,"+e+"-hchart-rows,"+e+"-pchart-cols,"+e+"-vchart-cols,"+e+"-schart-cols,"+e+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
