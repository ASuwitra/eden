/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[a]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,g={next:function(){if(e<c.length){var r=e++;return{value:a(r,c[r]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(c,a,e,g){if(a){e=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var r=c[g];r in e||(e[r]={});e=e[r]}c=c[c.length-1];g=e[c];a=a(g);a!=g&&null!=a&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6-impl","es3");$jscomp.findInternal=function(c,a,e){c instanceof String&&(c=String(c));for(var g=c.length,r=0;r<g;r++){var l=c[r];if(a.call(e,l,r,c))return{i:r,v:l}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
!function(){function c(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function e(b){return null===b?NaN:+b}function g(b){return!isNaN(b)}function r(b){return{left:function(d,f,k,m){3>arguments.length&&(k=0);4>arguments.length&&(m=d.length);for(;k<m;){var v=k+m>>>1;0>b(d[v],f)?k=v+1:m=v}return k},right:function(d,f,k,m){3>arguments.length&&(k=0);4>arguments.length&&(m=d.length);for(;k<m;){var v=k+m>>>1;0<b(d[v],
f)?m=v:k=v+1}return k}}}function l(b){return b.length}function n(b,d){for(var f in d)Object.defineProperty(b.prototype,f,{value:d[f],enumerable:!1})}function t(){this._=Object.create(null)}function h(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function u(b){return"\x00"===(b+="")[0]?b.slice(1):b}function z(b){return h(b)in this._}function I(b){return(b=h(b))in this._&&delete this._[b]}function C(){var b=[],d;for(d in this._)b.push(u(d));return b}function F(){var b=0,d;for(d in this._)++b;
return b}function D(){for(var b in this._)return!1;return!0}function B(){this._=Object.create(null)}function E(b){return b}function L(b,d,f){return function(){var k=f.apply(d,arguments);return k===d?b:k}}function M(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var f=0,k=Zd.length;f<k;++f){var m=Zd[f]+d;if(m in b)return m}}function K(){}function w(){}function G(b){function d(){for(var d=f,k=-1,a=d.length,Q;++k<a;)(Q=d[k].on)&&Q.apply(this,arguments);return b}var f=[],k=new t;d.on=
function(d,v){var m=k.get(d),Q;if(2>arguments.length)return m&&m.on;m&&(m.on=null,f=f.slice(0,Q=f.indexOf(m)).concat(f.slice(Q+1)),k.remove(d));v&&f.push(k.set(d,{on:v}));return b};return d}function U(){x.event.preventDefault()}function P(){for(var b=x.event,d;d=b.sourceEvent;)b=d;return b}function R(b){for(var d=new w,f=0,k=arguments.length;++f<k;)d[arguments[f]]=G(d);d.of=function(f,k){return function(m){try{var v=m.sourceEvent=x.event;m.target=b;x.event=m;d[m.type].apply(f,k)}finally{x.event=v}}};
return d}function N(b){Tb(b,ma);return b}function q(b){return"function"===typeof b?b:function(){return Rc(b,this)}}function J(b){return"function"===typeof b?b:function(){return Sc(b,this)}}function O(b,d){function f(){this.removeAttribute(b)}function k(){this.removeAttributeNS(b.space,b.local)}function m(){this.setAttribute(b,d)}function v(){this.setAttributeNS(b.space,b.local,d)}function a(){var f=d.apply(this,arguments);null==f?this.removeAttribute(b):this.setAttribute(b,f)}function Q(){var f=d.apply(this,
arguments);null==f?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,f)}b=x.ns.qualify(b);return null==d?b.local?k:f:"function"===typeof d?b.local?Q:a:b.local?v:m}function H(b){return new RegExp("(?:^|\\s+)"+x.requote(b)+"(?:\\s+|$)","g")}function p(b,d){function f(){for(var f=-1;++f<m;)b[f](this,d)}function k(){for(var f=-1,k=d.apply(this,arguments);++f<m;)b[f](this,k)}b=(b+"").trim().split(/^|\s+/).map(S);var m=b.length;return"function"===typeof d?k:f}function S(b){var d=
H(b);return function(f,k){if(m=f.classList)return k?m.add(b):m.remove(b);var m=f.getAttribute("class")||"";k?(d.lastIndex=0,d.test(m)||f.setAttribute("class",(m+" "+b).trim().replace(/\s+/g," "))):f.setAttribute("class",m.replace(d," ").trim().replace(/\s+/g," "))}}function y(b,d,f){function k(){this.style.removeProperty(b)}function m(){this.style.setProperty(b,d,f)}function v(){var k=d.apply(this,arguments);null==k?this.style.removeProperty(b):this.style.setProperty(b,k,f)}return null==d?k:"function"===
typeof d?v:m}function W(b,d){function f(){delete this[b]}function k(){this[b]=d}function m(){var f=d.apply(this,arguments);null==f?delete this[b]:this[b]=f}return null==d?f:"function"===typeof d?m:k}function Z(b){function d(){var d=this.ownerDocument,f=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===f&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(f,b)}function f(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=x.ns.qualify(b)).local?f:d}function A(){var b=this.parentNode;b&&b.removeChild(this)}function T(b){return function(){return Ub(this,b)}}function V(b){arguments.length||(b=a);return function(d,f){return d&&f?b(d.__data__,f.__data__):!d-!f}}function la(b,d){for(var f=0,k=b.length;f<k;f++)for(var m=b[f],v=0,a=m.length,Q;v<a;v++)(Q=m[v])&&d(Q,v,f);return b}function da(b){Tb(b,Ta);return b}function ua(b){var d,f;return function(k,m,v){k=b[v].update;var a=k.length;v!=f&&(f=v,d=0);for(m>=d&&
(d=m+1);!(m=k[d])&&++d<a;);return m}}function fa(b,d,f){function k(){var d=this[a];d&&(this.removeEventListener(b,d,d.$),delete this[a])}function m(){var m=aa(d,Qa(arguments));k.call(this);this.addEventListener(b,this[a]=m,m.$=f);m._=d}function v(){var d=new RegExp("^__on([^.]+)"+x.requote(b)+"$"),f,k;for(k in this)if(f=k.match(d)){var m=this[k];this.removeEventListener(f[1],m,m.$);delete this[k]}}var a="__on"+b,Q=b.indexOf("."),aa=ia;0<Q&&(b=b.slice(0,Q));var c=Tc.get(b);c&&(b=c,aa=ka);return Q?
d?m:k:d?K:v}function ia(b,d){return function(f){var k=x.event;x.event=f;d[0]=this.__data__;try{b.apply(this,d)}finally{x.event=k}}}function ka(b,d){var f=ia(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||f.call(this,b)}}function oa(b){var d=".dragsuppress-"+ ++pg,f="click"+d,k=x.select(c(b)).on("touchmove"+d,U).on("dragstart"+d,U).on("selectstart"+d,U);null==eb&&(eb="onselectstart"in b?!1:M(b.style,"userSelect"));if(eb){var m=(b&&(b.ownerDocument||
b.document||b).documentElement).style,v=m[eb];m[eb]="none"}return function(b){k.on(d,null);eb&&(m[eb]=v);if(b){var Q=function(){k.on(f,null)};k.on(f,function(){U();Q()},!0);setTimeout(Q,0)}}}function ha(b,d){d.changedTouches&&(d=d.changedTouches[0]);var f=b.ownerSVGElement||b;if(f.createSVGPoint){var k=f.createSVGPoint();if(0>Uc&&(f=c(b),f.scrollX||f.scrollY)){var f=x.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),m=f[0][0].getScreenCTM();
Uc=!(m.f||m.e);f.remove()}Uc?(k.x=d.pageX,k.y=d.pageY):(k.x=d.clientX,k.y=d.clientY);k=k.matrixTransform(b.getScreenCTM().inverse());return[k.x,k.y]}k=b.getBoundingClientRect();return[d.clientX-k.left-b.clientLeft,d.clientY-k.top-b.clientTop]}function ja(){return x.event.changedTouches[0].identifier}function qa(b,d,f){return(d[0]-b[0])*(f[1]-b[1])-(d[1]-b[1])*(f[0]-b[0])}function ya(b){return 1<b?0:-1>b?ba:Math.acos(b)}function na(b){return 1<b?wa:-1>b?-wa:Math.asin(b)}function Ha(b){return((b=Math.exp(b))+
1/b)/2}function Ia(b){return(b=Math.sin(b/2))*b}function sa(){}function za(b,d,f){return this instanceof za?void(this.h=+b,this.s=+d,this.l=+f):2>arguments.length?b instanceof za?new za(b.h,b.s,b.l):$d(""+b,ae,za):new za(b,d,f)}function Ma(b,d,f){function k(b){360<b?b-=360:0>b&&(b+=360);return 60>b?m+(v-m)*b/60:180>b?v:240>b?m+(v-m)*(240-b)/60:m}var m,v;b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;f=0>f?0:1<f?1:f;v=.5>=f?f*(1+d):f+d-f*d;m=2*f-v;return new Fa(Math.round(255*k(b+120)),
Math.round(255*k(b)),Math.round(255*k(b-120)))}function ra(b,d,f){return this instanceof ra?void(this.h=+b,this.c=+d,this.l=+f):2>arguments.length?b instanceof ra?new ra(b.h,b.c,b.l):b instanceof Ca?be(b.l,b.a,b.b):be((b=ce((b=x.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ra(b,d,f)}function va(b,d,f){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new Ca(f,Math.cos(b*=ca)*d,Math.sin(b)*d)}function Ca(b,d,f){return this instanceof Ca?void(this.l=+b,this.a=+d,this.b=+f):2>arguments.length?b instanceof Ca?new Ca(b.l,
b.a,b.b):b instanceof ra?va(b.h,b.c,b.l):ce((b=Fa(b)).r,b.g,b.b):new Ca(b,d,f)}function Db(b,d,f){b=(b+16)/116;f=b-f/200;d=Vc(b+d/500)*de;b=Vc(b)*ee;f=Vc(f)*fe;return new Fa(Wc(3.2404542*d-1.5371385*b-.4985314*f),Wc(-.969266*d+1.8760108*b+.041556*f),Wc(.0556434*d-.2040259*b+1.0572252*f))}function be(b,d,f){return 0<b?new ra(Math.atan2(f,d)*ta,Math.sqrt(d*d+f*f),b):new ra(NaN,NaN,b)}function Vc(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Xc(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function Wc(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Fa(b,d,f){return this instanceof Fa?void(this.r=~~b,this.g=~~d,this.b=~~f):2>arguments.length?b instanceof Fa?new Fa(b.r,b.g,b.b):$d(""+b,Fa,Ma):new Fa(b,d,f)}function Vb(b){return new Fa(b>>16,b>>8&255,b&255)+""}function pb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function $d(b,d,f){var k=0,m=0,v=0,a,Q;if(a=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase()))switch(Q=a[2].split(","),
a[1]){case "hsl":return f(parseFloat(Q[0]),parseFloat(Q[1])/100,parseFloat(Q[2])/100);case "rgb":return d(Yc(Q[0]),Yc(Q[1]),Yc(Q[2]))}if(f=Wb.get(b))return d(f.r,f.g,f.b);null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(k=(f&3840)>>4,k|=k>>4,m=f&240,m|=m>>4,v=f&15,v|=v<<4):7===b.length&&(k=(f&16711680)>>16,m=(f&65280)>>8,v=f&255));return d(k,m,v)}function ae(b,d,f){var k=Math.min(b/=255,d/=255,f/=255),m=Math.max(b,d,f),v=m-k,a=(m+k)/2;v?(k=.5>a?v/(m+k):v/(2-m-k),b=60*(b==
m?(d-f)/v+(d<f?6:0):d==m?(f-b)/v+2:(b-d)/v+4)):(b=NaN,k=0<a&&1>a?0:b);return new za(b,k,a)}function ce(b,d,f){b=Zc(b);d=Zc(d);f=Zc(f);var k=Xc((.4124564*b+.3575761*d+.1804375*f)/de),m=Xc((.2126729*b+.7151522*d+.072175*f)/ee);b=Xc((.0193339*b+.119192*d+.9503041*f)/fe);return Ca(116*m-16,500*(k-m),200*(m-b))}function Zc(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Yc(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function pa(b){return"function"===
typeof b?b:function(){return b}}function $c(b){return function(d,f,k){2===arguments.length&&"function"===typeof f&&(k=f,f=null);return Xb(d,f,b,k)}}function Xb(b,d,f,k){function m(){var b=c.status,d,k;if(k=!b)k=(k=c.responseType)&&"text"!==k?c.response:c.responseText;if(k||200<=b&&300>b||304===b){try{d=f.call(v,c)}catch(og){a.error.call(v,og);return}a.load.call(v,d)}else a.error.call(v,c)}var v={},a=x.dispatch("beforesend","progress","load","error"),Q={},c=new XMLHttpRequest,e=null;!this.XDomainRequest||
"withCredentials"in c||!/^(http(s)?:)?\/\//.test(b)||(c=new XDomainRequest);"onload"in c?c.onload=c.onerror=m:c.onreadystatechange=function(){3<c.readyState&&m()};c.onprogress=function(b){var d=x.event;x.event=b;try{a.progress.call(v,c)}finally{x.event=d}};v.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return Q[b];null==d?delete Q[b]:Q[b]=d+"";return v};v.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return v};v.responseType=function(b){if(!arguments.length)return e;
e=b;return v};v.response=function(b){f=b;return v};["get","post"].forEach(function(b){v[b]=function(){return v.send.apply(v,[b].concat(Qa(arguments)))}});v.send=function(f,k,m){2===arguments.length&&"function"===typeof k&&(m=k,k=null);c.open(f,b,!0);null==d||"accept"in Q||(Q.accept=d+",*/*");if(c.setRequestHeader)for(var aa in Q)c.setRequestHeader(aa,Q[aa]);null!=d&&c.overrideMimeType&&c.overrideMimeType(d);null!=e&&(c.responseType=e);if(null!=m)v.on("error",m).on("load",function(b){m(null,b)});a.beforesend.call(v,
c);c.send(null==k?null:k);return v};v.abort=function(){c.abort();return v};x.rebind(v,a,"on");return null==k?v:v.get(qg(k))}function qg(b){return 1===b.length?function(d,f){b(null==d?f:null)}:b}function Yb(b,d,f){var k=arguments.length;2>k&&(d=0);3>k&&(f=Date.now());k={c:b,t:f+d,n:null};Zb?Zb.n=k:$b=k;Zb=k;ac||(bc=clearTimeout(bc),ac=1,ge(ad));return k}function ad(){var b=he(),b=ie()-b;24<b?(isFinite(b)&&(clearTimeout(bc),bc=setTimeout(ad,b)),ac=0):(ac=1,ge(ad))}function he(){for(var b=Date.now(),
d=$b;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function ie(){for(var b,d=$b,f=Infinity;d;)d.c?(d.t<f&&(f=d.t),d=(b=d).n):d=b?b.n=d.n:$b=d.n;Zb=b;return f}function bd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function rg(b){var d=b.decimal,f=b.thousands,k=b.grouping,m=b.currency,v=k&&f?function(b,d){for(var m=b.length,v=[],a=0,Q=k[0],c=0;0<m&&0<Q;){c+Q+1>d&&(Q=Math.max(1,d-c));v.push(b.substring(m-=Q,m+Q));if((c+=Q+1)>d)break;Q=k[a=(a+1)%k.length]}return v.reverse().join(f)}:E;return function(b){b=
je.exec(b);var f=b[1]||" ",k=b[2]||">",a=b[3]||"-",c=b[4]||"",e=b[5],ga=+b[6],g=b[7],h=b[8],l=b[9],q=1,p="",y="",n=!1,r=!0;h&&(h=+h.substring(1));if(e||"0"===f&&"="===k)e=f="0",k="=";switch(l){case "n":g=!0;l="g";break;case "%":q=100;y="%";l="f";break;case "p":q=100;y="%";l="r";break;case "b":case "o":case "x":case "X":"#"===c&&(p="0"+l.toLowerCase());case "c":r=!1;case "d":n=!0;h=0;break;case "s":q=-1,l="r"}"$"===c&&(p=m[0],y=m[1]);"r"!=l||h||(l="g");if(null!=h)if("g"==l)h=Math.max(1,Math.min(21,
h));else if("e"==l||"f"==l)h=Math.max(0,Math.min(20,h));var l=sg.get(l)||tg,A=e&&g;return function(b){var m=y;if(n&&b%1)return"";var Q=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===a?"":a;0>q?(m=x.formatPrefix(b,h),b=m.scale(b),m=m.symbol+y):b*=q;b=l(b,h);var c=b.lastIndexOf("."),aa;0>c?(c=r?b.lastIndexOf("e"):-1,0>c?(aa=b,b=""):(aa=b.substring(0,c),b=b.substring(c))):(aa=b.substring(0,c),b=d+b.substring(c+1));!e&&g&&(aa=v(aa,Infinity));var c=p.length+aa.length+b.length+(A?0:Q.length),Y=c<ga?Array(c=ga-c+1).join(f):
"";A&&(aa=v(Y+aa,Y.length?ga-b.length:Infinity));Q+=p;b=aa+b;return("<"===k?Q+b+Y:">"===k?Y+Q+b:"^"===k?Y.substring(0,c>>=1)+Q+b+Y.substring(c):Q+(A?b:Y+b))+m}}}function tg(b){return b+""}function Ua(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function fb(b,d,f){function k(d){var f=b(d),k=v(f,1);return d-f<k-d?f:k}function m(f){d(f=b(new Da(f-1)),1);return f}function v(b,f){d(b=new Da(+b),f);return b}function a(b,k,v){b=m(b);var a=[];if(1<v)for(;b<k;)f(b)%v||
a.push(new Date(+b)),d(b,1);else for(;b<k;)a.push(new Date(+b)),d(b,1);return a}b.floor=b;b.round=k;b.ceil=m;b.offset=v;b.range=a;var Q=b.utc=cc(b);Q.floor=Q;Q.round=cc(k);Q.ceil=cc(m);Q.offset=cc(v);Q.range=function(b,d,f){try{Da=Ua;var k=new Ua;k._=b;return a(k,d,f)}finally{Da=Date}};return b}function cc(b){return function(d,f){try{Da=Ua;var k=new Ua;k._=d;return b(k,f)._}finally{Da=Date}}}function ug(b){function d(b){function d(d){for(var f=[],m=-1,v=0,a,c;++m<k;)if(37===b.charCodeAt(m)){f.push(b.slice(v,
m));null!=(a=ke[v=b.charAt(++m)])&&(v=b.charAt(++m));if(c=H[v])v=c(d,null==a?"e"===v?" ":"0":a);f.push(v);v=m+1}f.push(b.slice(v,m));return f.join("")}var k=b.length;d.parse=function(d){var k={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(k,b,d,0)!=d.length)return null;"p"in k&&(k.H=k.H%12+12*k.p);d=null!=k.Z&&Da!==Ua;var m=new (d?Ua:Da);"j"in k?m.setFullYear(k.y,0,k.j):"W"in k||"U"in k?("w"in k||(k.w="W"in k?1:0),m.setFullYear(k.y,0,1),m.setFullYear(k.y,0,"W"in k?(k.w+6)%7+7*k.W-(m.getDay()+5)%7:k.w+
7*k.U-(m.getDay()+6)%7)):m.setFullYear(k.y,k.m,k.d);m.setHours(k.H+(k.Z/100|0),k.M+k.Z%100,k.S,k.L);return d?m._:m};d.toString=function(){return b};return d}function f(b,d,f,k){for(var m,v=0,a=d.length,c=f.length;v<a;){if(k>=c)return-1;m=d.charCodeAt(v++);if(37===m){if(m=d.charAt(v++),m=w[m in ke?d.charAt(v++):m],!m||0>(k=m(b,f,k)))return-1}else if(m!=f.charCodeAt(k++))return-1}return k}var k=b.dateTime,m=b.date,v=b.time,a=b.periods,Q=b.days,c=b.shortDays,e=b.months,g=b.shortMonths;d.utc=function(b){function f(b){try{Da=
Ua;var d=new Da;d._=b;return k(d)}finally{Da=Date}}var k=d(b);f.parse=function(b){try{Da=Ua;var d=k.parse(b);return d&&d._}finally{Da=Date}};f.toString=k.toString;return f};d.multi=d.utc.multi=vg;var h=x.map(),l=dc(Q),q=ec(Q),p=dc(c),y=ec(c),n=dc(e),r=ec(e),A=dc(g),t=ec(g);a.forEach(function(b,d){h.set(b.toLowerCase(),d)});var H={a:function(b){return c[b.getDay()]},A:function(b){return Q[b.getDay()]},b:function(b){return g[b.getMonth()]},B:function(b){return e[b.getMonth()]},c:d(k),d:function(b,d){return Ga(b.getDate(),
d,2)},e:function(b,d){return Ga(b.getDate(),d,2)},H:function(b,d){return Ga(b.getHours(),d,2)},I:function(b,d){return Ga(b.getHours()%12||12,d,2)},j:function(b,d){return Ga(1+X.dayOfYear(b),d,3)},L:function(b,d){return Ga(b.getMilliseconds(),d,3)},m:function(b,d){return Ga(b.getMonth()+1,d,2)},M:function(b,d){return Ga(b.getMinutes(),d,2)},p:function(b){return a[+(12<=b.getHours())]},S:function(b,d){return Ga(b.getSeconds(),d,2)},U:function(b,d){return Ga(X.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Ga(X.mondayOfYear(b),d,2)},x:d(m),X:d(v),y:function(b,d){return Ga(b.getFullYear()%100,d,2)},Y:function(b,d){return Ga(b.getFullYear()%1E4,d,4)},Z:wg,"%":function(){return"%"}},w={a:function(b,d,f){p.lastIndex=0;return(d=p.exec(d.slice(f)))?(b.w=y.get(d[0].toLowerCase()),f+d[0].length):-1},A:function(b,d,f){l.lastIndex=0;return(d=l.exec(d.slice(f)))?(b.w=q.get(d[0].toLowerCase()),f+d[0].length):-1},b:function(b,d,f){A.lastIndex=0;return(d=A.exec(d.slice(f)))?(b.m=t.get(d[0].toLowerCase()),
f+d[0].length):-1},B:function(b,d,f){n.lastIndex=0;return(d=n.exec(d.slice(f)))?(b.m=r.get(d[0].toLowerCase()),f+d[0].length):-1},c:function(b,d,k){return f(b,H.c.toString(),d,k)},d:le,e:le,H:me,I:me,j:xg,L:yg,m:zg,M:Ag,p:function(b,d,f){d=h.get(d.slice(f,f+=2).toLowerCase());return null==d?-1:(b.p=d,f)},S:Bg,U:Cg,w:Dg,W:Eg,x:function(b,d,k){return f(b,H.x.toString(),d,k)},X:function(b,d,k){return f(b,H.X.toString(),d,k)},y:Fg,Y:Gg,Z:Hg,"%":Ig};return d}function Ga(b,d,f){var k=0>b?"-":"";b=(k?-b:
b)+"";var m=b.length;return k+(m<f?Array(f-m+1).join(d)+b:b)}function dc(b){return new RegExp("^(?:"+b.map(x.requote).join("|")+")","i")}function ec(b){for(var d=new t,f=-1,k=b.length;++f<k;)d.set(b[f].toLowerCase(),f);return d}function Dg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+1)))?(b.w=+d[0],f+d[0].length):-1}function Cg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f)))?(b.U=+d[0],f+d[0].length):-1}function Eg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f)))?(b.W=+d[0],f+d[0].length):
-1}function Gg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+4)))?(b.y=+d[0],f+d[0].length):-1}function Fg(b,d,f){xa.lastIndex=0;if(d=xa.exec(d.slice(f,f+2))){var k=+d[0];b=(b.y=k+(68<k?1900:2E3),f+d[0].length)}else b=-1;return b}function Hg(b,d,f){return/^[+-]\d{4}$/.test(d=d.slice(f,f+5))?(b.Z=-d,f+5):-1}function zg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.m=d[0]-1,f+d[0].length):-1}function le(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.d=+d[0],f+d[0].length):
-1}function xg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+3)))?(b.j=+d[0],f+d[0].length):-1}function me(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.H=+d[0],f+d[0].length):-1}function Ag(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.M=+d[0],f+d[0].length):-1}function Bg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.S=+d[0],f+d[0].length):-1}function yg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+3)))?(b.L=+d[0],f+d[0].length):-1}function wg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var f=ea(d)/60|0,d=ea(d)%60;return b+Ga(f,"0",2)+Ga(d,"0",2)}function Ig(b,d,f){ne.lastIndex=0;return(b=ne.exec(d.slice(f,f+1)))?f+b[0].length:-1}function vg(b){for(var d=b.length,f=-1;++f<d;)b[f][0]=this(b[f][0]);return function(d){for(var f=0,k=b[f];!k[1](d);)k=b[++f];return k[0](d)}}function cd(){}function oe(b,d,f){var k=f.s=b+d,m=k-b;f.t=b-(k-m)+(d-m)}function fc(b,d){if(b&&pe.hasOwnProperty(b.type))pe[b.type](b,d)}function dd(b,d,f){var k=-1;f=b.length-f;
var m;for(d.lineStart();++k<f;)m=b[k],d.point(m[0],m[1],m[2]);d.lineEnd()}function qe(b,d){var f=-1,k=b.length;for(d.polygonStart();++f<k;)dd(b[f],d,1);d.polygonEnd()}function Jg(){function b(b,d){b*=ca;d=d*ca/2+ba/4;var f=b-k,a=0<=f?1:-1,f=a*f,c=Math.cos(d),Q=Math.sin(d),e=v*Q;gb.add(Math.atan2(e*a*Math.sin(f),m*c+e*Math.cos(f)));k=b;m=c;v=Q}var d,f,k,m,v;Ja.point=function(a,c){Ja.point=b;k=(d=a)*ca;m=Math.cos(c=(f=c)*ca/2+ba/4);v=Math.sin(c)};Ja.lineEnd=function(){b(d,f)}}function hb(b){var d=b[0];
b=b[1];var f=Math.cos(b);return[f*Math.cos(d),f*Math.sin(d),Math.sin(b)]}function gc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function qb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function ed(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function hc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function ic(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function jc(b){return[Math.atan2(b[1],b[0]),na(b[2])]}function kc(b,d){return 1E-6>ea(b[0]-d[0])&&1E-6>ea(b[1]-
d[1])}function fd(b,d){b*=ca;var f=Math.cos(d*=ca);Eb(f*Math.cos(b),f*Math.sin(b),Math.sin(d))}function Eb(b,d,f){++Fb;ib+=(b-ib)/Fb;jb+=(d-jb)/Fb;Va+=(f-Va)/Fb}function re(){function b(b,v){b*=ca;var m=Math.cos(v*=ca),a=m*Math.cos(b),m=m*Math.sin(b),c=Math.sin(v),e=Math.atan2(Math.sqrt((e=f*c-k*m)*e+(e=k*a-d*c)*e+(e=d*m-f*a)*e),d*a+f*m+k*c);lc+=e;Ya+=e*(d+(d=a));Za+=e*(f+(f=m));Ra+=e*(k+(k=c));Eb(d,f,k)}var d,f,k;Na.point=function(m,v){m*=ca;var a=Math.cos(v*=ca);d=a*Math.cos(m);f=a*Math.sin(m);
k=Math.sin(v);Na.point=b;Eb(d,f,k)}}function se(){Na.point=fd}function Kg(){function b(b,d){b*=ca;var f=Math.cos(d*=ca),a=f*Math.cos(b),f=f*Math.sin(b),c=Math.sin(d),Q=m*c-v*f,e=v*a-k*c,ga=k*f-m*a,g=Math.sqrt(Q*Q+e*e+ga*ga),h=k*a+m*f+v*c,l=g&&-ya(h)/g,g=Math.atan2(g,h);rb+=l*Q;sb+=l*e;$a+=l*ga;lc+=g;Ya+=g*(k+(k=a));Za+=g*(m+(m=f));Ra+=g*(v+(v=c));Eb(k,m,v)}var d,f,k,m,v;Na.point=function(a,c){d=a;f=c;Na.point=b;a*=ca;var Q=Math.cos(c*=ca);k=Q*Math.cos(a);m=Q*Math.sin(a);v=Math.sin(c);Eb(k,m,v)};Na.lineEnd=
function(){b(d,f);Na.lineEnd=se;Na.point=fd}}function te(b,d){function f(f,m){return f=b(f,m),d(f[0],f[1])}b.invert&&d.invert&&(f.invert=function(f,m){return f=d.invert(f,m),f&&b.invert(f[0],f[1])});return f}function Gb(){return!0}function ue(b,d,f,k,m){var v=[],a=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,f=b[0],k=b[d];if(kc(f,k)){m.lineStart();for(k=0;k<d;++k)m.point((f=b[k])[0],f[1]);m.lineEnd()}else d=new mc(f,b,null,!0),f=new mc(f,null,d,!1),d.o=f,v.push(d),a.push(f),d=new mc(k,
b,null,!1),f=new mc(k,null,d,!0),d.o=f,v.push(d),a.push(f)}});a.sort(d);ve(v);ve(a);if(v.length){b=0;d=f;for(f=a.length;b<f;++b)a[b].e=d=!d;d=v[0];for(var c,e;;){for(var Y=d,g=!0;Y.v;)if((Y=Y.n)===d)return;c=Y.z;m.lineStart();do{Y.v=Y.o.v=!0;if(Y.e){if(g)for(b=0,f=c.length;b<f;++b)m.point((e=c[b])[0],e[1]);else k(Y.x,Y.n.x,1,m);Y=Y.n}else{if(g)for(c=Y.p.z,b=c.length-1;0<=b;--b)m.point((e=c[b])[0],e[1]);else k(Y.x,Y.p.x,-1,m);Y=Y.p}Y=Y.o;c=Y.z;g=!g}while(!Y.v);m.lineEnd()}}}function ve(b){if(d=b.length){for(var d,
f=0,k=b[0],m;++f<d;)k.n=m=b[f],m.p=k,k=m;k.n=m=b[0];m.p=k}}function mc(b,d,f,k){this.x=b;this.z=d;this.o=f;this.e=k;this.v=!1;this.n=this.p=null}function we(b,d,f,k){return function(m,v){function a(d,f){var k=m(d,f);b(d=k[0],f=k[1])&&v.point(d,f)}function c(b,d){var f=m(b,d);q.point(f[0],f[1])}function e(){y.point=c;q.lineStart()}function Y(){y.point=a;q.lineEnd()}function g(b,d){w.push([b,d]);var f=m(b,d);A.point(f[0],f[1])}function h(){A.lineStart();w=[]}function l(){g(w[0][0],w[0][1]);A.lineEnd();
var b=A.clean(),d=r.buffer(),f=d.length;w.pop();H.push(w);w=null;if(f)if(b&1){var b=d[0],f=b.length-1,d=-1,k;if(0<f){t||(v.polygonStart(),t=!0);for(v.lineStart();++d<f;)v.point((k=b[d])[0],k[1]);v.lineEnd()}}else 1<f&&b&2&&d.push(d.pop().concat(d.shift())),n.push(d.filter(Lg))}var q=d(v),p=m.invert(k[0],k[1]),y={point:a,lineStart:e,lineEnd:Y,polygonStart:function(){y.point=g;y.lineStart=h;y.lineEnd=l;n=[];H=[]},polygonEnd:function(){y.point=a;y.lineStart=e;y.lineEnd=Y;n=x.merge(n);var b,d=p;b=H;var k=
d[0],m=d[1],c=[Math.sin(k),-Math.cos(k),0],Q=0,aa=0;gb.reset();for(var ga=0,g=b.length;ga<g;++ga){var h=b[ga],l=h.length;if(l)for(var Ba=h[0],q=Ba[0],d=Ba[1]/2+ba/4,r=Math.sin(d),Bb=Math.cos(d),A=1;;){A===l&&(A=0);var d=h[A],w=d[0],S=d[1]/2+ba/4,Cb=Math.sin(S),S=Math.cos(S),u=w-q,V=0<=u?1:-1,T=V*u,G=T>ba,r=r*Cb;gb.add(Math.atan2(r*V*Math.sin(T),Bb*S+r*Math.cos(T)));Q+=G?u+V*Ka:u;G^q>=k^w>=k&&(Ba=qb(hb(Ba),hb(d)),ic(Ba),q=qb(c,Ba),ic(q),q=(G^0<=u?-1:1)*na(q[2]),m>q||m===q&&(Ba[0]||Ba[1]))&&(aa+=G^
0<=u?1:-1);if(!A++)break;q=w;r=Cb;Bb=S;Ba=d}}b=(-1E-6>Q||1E-6>Q&&-1E-6>gb)^aa&1;n.length?(t||(v.polygonStart(),t=!0),ue(n,Mg,b,f,v)):b&&(t||(v.polygonStart(),t=!0),v.lineStart(),f(null,null,1,v),v.lineEnd());t&&(v.polygonEnd(),t=!1);n=H=null},sphere:function(){v.polygonStart();v.lineStart();f(null,null,1,v);v.lineEnd();v.polygonEnd()}},n,r=xe(),A=d(r),t=!1,H,w;return y}}function Lg(b){return 1<b.length}function xe(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,k){d.push([b,
k])},lineEnd:K,buffer:function(){var f=b;b=[];d=null;return f},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Mg(b,d){return(0>(b=b.x)[0]?b[1]-wa-1E-6:wa-b[1])-(0>(d=d.x)[0]?d[1]-wa-1E-6:wa-d[1])}function Ng(b){function d(b,d){return Math.cos(b)*Math.cos(d)>m}function f(b,d,f){var k=hb(b),v=hb(d),a=[1,0,0],v=qb(k,v),c=gc(v,v),k=v[0],Q=c-k*k;if(!Q)return!f&&b;c=m*c/Q;Q=-m*k/Q;k=qb(a,v);a=hc(a,c);v=hc(v,Q);ed(a,v);v=gc(a,k);c=gc(k,k);Q=v*v-c*(gc(a,a)-1);if(!(0>Q)){var e=
Math.sqrt(Q),Q=hc(k,(-v-e)/c);ed(Q,a);Q=jc(Q);if(!f)return Q;f=b[0];var aa=d[0];b=b[1];d=d[1];var ga;aa<f&&(ga=f,f=aa,aa=ga);var Y=aa-f,g=1E-6>ea(Y-ba);!g&&d<b&&(ga=b,b=d,d=ga);if(g||1E-6>Y?g?0<b+d^Q[1]<(1E-6>ea(Q[0]-f)?b:d):b<=Q[1]&&Q[1]<=d:Y>ba^(f<=Q[0]&&Q[0]<=aa))return d=hc(k,(-v+e)/c),ed(d,a),[Q,jc(d)]}}function k(d,f){var k=v?b:ba-b,m=0;d<-k?m|=1:d>k&&(m|=2);f<-k?m|=4:f>k&&(m|=8);return m}var m=Math.cos(b),v=0<m,a=1E-6<ea(m),c=gd(b,6*ca);return we(d,function(b){var m,c,Q,e,aa;return{lineStart:function(){e=
Q=!1;aa=1},point:function(ga,Y){var g=[ga,Y],h,l=d(ga,Y),q=v?l?0:k(ga,Y):l?k(ga+(0>ga?ba:-ba),Y):0;!m&&(e=Q=l)&&b.lineStart();l!==Q&&(h=f(m,g),kc(m,h)||kc(g,h))&&(g[0]+=1E-6,g[1]+=1E-6,l=d(g[0],g[1]));if(l!==Q)aa=0,l?(b.lineStart(),h=f(g,m),b.point(h[0],h[1])):(h=f(m,g),b.point(h[0],h[1]),b.lineEnd()),m=h;else if(a&&m&&v^l){var p;q&c||!(p=f(g,m,!0))||(aa=0,v?(b.lineStart(),b.point(p[0][0],p[0][1]),b.point(p[1][0],p[1][1]),b.lineEnd()):(b.point(p[1][0],p[1][1]),b.lineEnd(),b.lineStart(),b.point(p[0][0],
p[0][1])))}!l||m&&kc(m,g)||b.point(g[0],g[1]);m=g;Q=l;c=q},lineEnd:function(){Q&&b.lineEnd();m=null},clean:function(){return aa|(e&&Q)<<1}}},c,v?[0,-b]:[-ba,b-ba])}function ye(b,d,f,k){return function(m){var v=m.a,a=m.b,c=v.x,v=v.y,e=0,Y=1,g=a.x-c,a=a.y-v,h;h=b-c;if(g||!(0<h)){h/=g;if(0>g){if(h<e)return;h<Y&&(Y=h)}else if(0<g){if(h>Y)return;h>e&&(e=h)}h=f-c;if(g||!(0>h)){h/=g;if(0>g){if(h>Y)return;h>e&&(e=h)}else if(0<g){if(h<e)return;h<Y&&(Y=h)}h=d-v;if(a||!(0<h)){h/=a;if(0>a){if(h<e)return;h<Y&&
(Y=h)}else if(0<a){if(h>Y)return;h>e&&(e=h)}h=k-v;if(a||!(0>h)){h/=a;if(0>a){if(h>Y)return;h>e&&(e=h)}else if(0<a){if(h<e)return;h<Y&&(Y=h)}0<e&&(m.a={x:c+e*g,y:v+e*a});1>Y&&(m.b={x:c+Y*g,y:v+Y*a});return m}}}}}}function ze(b,d,f,k){function m(k,m){return 1E-6>ea(k[0]-b)?0<m?0:3:1E-6>ea(k[0]-f)?0<m?2:1:1E-6>ea(k[1]-d)?0<m?1:0:0<m?3:2}function v(b,d){return a(b.x,d.x)}function a(b,d){var f=m(b,1),k=m(d,1);return f!==k?f-k:0===f?d[1]-b[1]:1===f?b[0]-d[0]:2===f?b[1]-d[1]:d[0]-b[0]}return function(c){function Q(v,
c,Q,e){var aa=0,ga=0;if(null==v||(aa=m(v,Q))!==(ga=m(c,Q))||0>a(v,c)^0<Q){do e.point(0===aa||3===aa?b:f,1<aa?k:d);while((aa=(aa+Q+4)%4)!==ga)}else e.point(c[0],c[1])}function e(m,v){b<=m&&m<=f&&d<=v&&v<=k&&c.point(m,v)}function ga(m,v){m=Math.max(-1E9,Math.min(1E9,m));v=Math.max(-1E9,Math.min(1E9,v));var a=b<=m&&m<=f&&d<=v&&v<=k;p&&y.push([m,v]);if(u)r=m,A=v,t=a,u=!1,a&&(c.lineStart(),c.point(m,v));else if(a&&S)c.point(m,v);else{var Q={a:{x:H,y:w},b:{x:m,y:v}};l(Q)?(S||(c.lineStart(),c.point(Q.a.x,
Q.a.y)),c.point(Q.b.x,Q.b.y),a||c.lineEnd(),V=!1):a&&(c.lineStart(),c.point(m,v),V=!1)}H=m;w=v;S=a}var g=c,h=xe(),l=ye(b,d,f,k),q,p,y,n={point:e,lineStart:function(){n.point=ga;p&&p.push(y=[]);u=!0;S=!1;H=w=NaN},lineEnd:function(){q&&(ga(r,A),t&&S&&h.rejoin(),q.push(h.buffer()));n.point=e;S&&c.lineEnd()},polygonStart:function(){c=h;q=[];p=[];V=!0},polygonEnd:function(){c=g;q=x.merge(q);var d;d=[b,k];for(var f=0,m=p.length,a=d[1],e=0;e<m;++e)for(var aa=1,ga=p[e],Y=ga.length,h=ga[0],l;aa<Y;++aa)l=ga[aa],
h[1]<=a?l[1]>a&&0<qa(h,l,d)&&++f:l[1]<=a&&0>qa(h,l,d)&&--f,h=l;d=0!==f;f=V&&d;m=q.length;if(f||m)c.polygonStart(),f&&(c.lineStart(),Q(null,null,1,c),c.lineEnd()),m&&ue(q,v,d,Q,c),c.polygonEnd();q=p=y=null}},r,A,t,H,w,S,u,V;return n}}function hd(b){var d=0,f=ba/3,k=id(b);b=k(d,f);b.parallels=function(b){return arguments.length?k(d=b[0]*ba/180,f=b[1]*ba/180):[d/ba*180,f/ba*180]};return b}function Ae(b,d){function f(b,d){var f=Math.sqrt(v-2*m*Math.sin(d))/m;return[f*Math.sin(b*=m),a-f*Math.cos(b)]}var k=
Math.sin(b),m=(k+Math.sin(d))/2,v=1+k*(2*m-k),a=Math.sqrt(v)/m;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,na((v-(b*b+f*f)*m*m)/(2*m))]};return f}function Og(){function b(b,d){jd+=m*b-k*d;k=b;m=d}var d,f,k,m;ab.point=function(v,a){ab.point=b;d=k=v;f=m=a};ab.lineEnd=function(){b(d,f)}}function Pg(){function b(b,d){a.push("M",b,",",d,v)}function d(b,d){a.push("M",b,",",d);c.point=f}function f(b,d){a.push("L",b,",",d)}function k(){c.point=b}function m(){a.push("Z")}var v=Be(4.5),a=[],c=
{point:b,lineStart:function(){c.point=d},lineEnd:k,polygonStart:function(){c.lineEnd=m},polygonEnd:function(){c.lineEnd=k;c.point=b},pointRadius:function(b){v=Be(b);return c},result:function(){if(a.length){var b=a.join("");a=[];return b}}};return c}function Be(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function kb(b,d){ib+=b;jb+=d;++Va}function Ce(){function b(b,m){var k=b-d,a=m-f,k=Math.sqrt(k*k+a*a);Ya+=k*(d+b)/2;Za+=k*(f+m)/2;Ra+=k;kb(d=b,f=m)}var d,f;Oa.point=
function(k,m){Oa.point=b;kb(d=k,f=m)}}function De(){Oa.point=kb}function Qg(){function b(b,d){var f=b-k,v=d-m,f=Math.sqrt(f*f+v*v);Ya+=f*(k+b)/2;Za+=f*(m+d)/2;Ra+=f;f=m*b-k*d;rb+=f*(k+b);sb+=f*(m+d);$a+=3*f;kb(k=b,m=d)}var d,f,k,m;Oa.point=function(v,a){Oa.point=b;kb(d=k=v,f=m=a)};Oa.lineEnd=function(){b(d,f)}}function Rg(b){function d(d,f){b.moveTo(d+a,f);b.arc(d,f,a,0,Ka)}function f(d,f){b.moveTo(d,f);c.point=k}function k(d,f){b.lineTo(d,f)}function m(){c.point=d}function v(){b.closePath()}var a=
4.5,c={point:d,lineStart:function(){c.point=f},lineEnd:m,polygonStart:function(){c.lineEnd=v},polygonEnd:function(){c.lineEnd=m;c.point=d},pointRadius:function(b){a=b;return c},result:K};return c}function Ee(b){function d(b){return(c?k:f)(b)}function f(d){return Fe(d,function(f,k){f=b(f,k);d.point(f[0],f[1])})}function k(d){function f(f,k){f=b(f,k);d.point(f[0],f[1])}function k(){n=NaN;w.point=v;d.lineStart()}function v(f,k){var v=hb([f,k]),a=b(f,k);m(n,r,y,A,t,H,n=a[0],r=a[1],y=f,A=v[0],t=v[1],H=
v[2],c,d);d.point(n,r)}function a(){w.point=f;d.lineEnd()}function e(){k();w.point=Q;w.lineEnd=g}function Q(b,d){v(ga=b,d);aa=n;h=r;l=A;q=t;p=H;w.point=v}function g(){m(n,r,y,A,t,H,aa,h,ga,l,q,p,c,d);w.lineEnd=a;a()}var ga,aa,h,l,q,p,y,n,r,A,t,H,w={point:f,lineStart:k,lineEnd:a,polygonStart:function(){d.polygonStart();w.lineStart=e},polygonEnd:function(){d.polygonEnd();w.lineStart=k}};return w}function m(d,f,k,c,e,Q,g,ga,h,l,q,p,y,n){var aa=g-d,Y=ga-f,r=aa*aa+Y*Y;if(r>4*v&&y--){var Ba=c+l,A=e+q,t=
Q+p,w=Math.sqrt(Ba*Ba+A*A+t*t),H=Math.asin(t/=w),S=1E-6>ea(ea(t)-1)||1E-6>ea(k-h)?(k+h)/2:Math.atan2(A,Ba),u=b(S,H),H=u[0],u=u[1],Bb=H-d,Cb=u-f,V=Y*Bb-aa*Cb;if(V*V/r>v||.3<ea((aa*Bb+Y*Cb)/r-.5)||c*l+e*q+Q*p<a)m(d,f,k,c,e,Q,H,u,S,Ba/=w,A/=w,t,y,n),n.point(H,u),m(H,u,S,Ba,A,t,g,ga,h,l,q,p,y,n)}}var v=.5,a=Math.cos(30*ca),c=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(v);c=0<(v=b*b)&&16;return d};return d}function Sg(b){var d=Ee(function(d,k){return b([d*ta,k*ta])});return function(b){return Ge(d(b))}}
function He(b){this.stream=b}function Fe(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function bb(b){return id(function(){return b})()}function id(b){function d(b){b=c(b[0]*ca,b[1]*ca);return[b[0]*g+A,t-b[1]*g]}function f(b){return(b=c.invert((b[0]-A)/g,(t-b[1])/g))&&[b[0]*ta,b[1]*ta]}function k(){c=te(a=kd(y,n,r),v);var b=v(q,p);A=h-b[0]*g;t=l+
b[1]*g;return m()}function m(){V&&(V.valid=!1,V=null);return d}var v,a,c,e=Ee(function(b,d){b=v(b,d);return[b[0]*g+A,t-b[1]*g]}),g=150,h=480,l=250,q=0,p=0,y=0,n=0,r=0,A,t,w=Ie,H=E,S=null,u=null,V;d.stream=function(b){V&&(V.valid=!1);V=Ge(w(a,e(H(b))));V.valid=!0;return V};d.clipAngle=function(b){if(!arguments.length)return S;w=null==b?(S=b,Ie):Ng((S=+b)*ca);return m()};d.clipExtent=function(b){if(!arguments.length)return u;H=(u=b)?ze(b[0][0],b[0][1],b[1][0],b[1][1]):E;return m()};d.scale=function(b){if(!arguments.length)return g;
g=+b;return k()};d.translate=function(b){if(!arguments.length)return[h,l];h=+b[0];l=+b[1];return k()};d.center=function(b){if(!arguments.length)return[q*ta,p*ta];q=b[0]%360*ca;p=b[1]%360*ca;return k()};d.rotate=function(b){if(!arguments.length)return[y*ta,n*ta,r*ta];y=b[0]%360*ca;n=b[1]%360*ca;r=2<b.length?b[2]%360*ca:0;return k()};x.rebind(d,e,"precision");return function(){v=b.apply(this,arguments);d.invert=v.invert&&f;return k()}}function Ge(b){return Fe(b,function(d,f){b.point(d*ca,f*ca)})}function Hb(b,
d){return[b,d]}function Je(b,d){return[b>ba?b-Ka:b<-ba?b+Ka:b,d]}function kd(b,d,f){return b?d||f?te(Ke(b),Le(d,f)):Ke(b):d||f?Le(d,f):Je}function Me(b){return function(d,f){return d+=b,[d>ba?d-Ka:d<-ba?d+Ka:d,f]}}function Ke(b){var d=Me(b);d.invert=Me(-b);return d}function Le(b,d){function f(b,d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),Q=e*k+c*m;return[Math.atan2(f*v-Q*a,c*k-e*m),na(Q*v+f*a)]}var k=Math.cos(b),m=Math.sin(b),v=Math.cos(d),a=Math.sin(d);f.invert=function(b,
d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),Q=e*v-f*a;return[Math.atan2(f*v+e*a,c*k+Q*m),na(Q*k-c*m)]};return f}function gd(b,d){var f=Math.cos(b),k=Math.sin(b);return function(m,v,a,c){var e=a*d;if(null!=m){if(m=Ne(f,m),v=Ne(f,v),0<a?m<v:m>v)m+=a*Ka}else m=b+a*Ka,v=b-.5*e;for(var Q;0<a?m>v:m<v;m-=e)c.point((Q=jc([f,-k*Math.cos(m),-k*Math.sin(m)]))[0],Q[1])}}function Ne(b,d){var f=hb(d);f[0]-=b;ic(f);var k=ya(-f[1]);return((0>-f[2]?-k:k)+2*Math.PI-1E-6)%(2*Math.PI)}function Oe(b,
d,f){var k=x.range(b,d-1E-6,f).concat(d);return function(b){return k.map(function(d){return[b,d]})}}function Pe(b,d,f){var k=x.range(b,d-1E-6,f).concat(d);return function(b){return k.map(function(d){return[d,b]})}}function ld(b){return b.source}function md(b){return b.target}function Tg(b,d,f,k){var m=Math.cos(d),v=Math.sin(d),a=Math.cos(k),c=Math.sin(k),e=m*Math.cos(b),g=m*Math.sin(b),h=a*Math.cos(f),l=a*Math.sin(f),q=2*Math.asin(Math.sqrt(Ia(k-d)+m*a*Ia(f-b))),p=1/Math.sin(q);f=q?function(b){var d=
Math.sin(b*=q)*p;b=Math.sin(q-b)*p;var f=b*e+d*h,k=b*g+d*l;return[Math.atan2(k,f)*ta,Math.atan2(b*v+d*c,Math.sqrt(f*f+k*k))*ta]}:function(){return[b*ta,d*ta]};f.distance=q;return f}function Ib(b,d){function f(d,f){var k=Math.cos(f),m=b(Math.cos(d)*k);return[m*k*Math.sin(d),m*Math.sin(f)]}f.invert=function(b,f){var k=Math.sqrt(b*b+f*f),m=d(k),a=Math.sin(m);return[Math.atan2(b*a,k*Math.cos(m)),Math.asin(k&&f*a/k)]};return f}function Qe(b,d){function f(b,d){0<v?d<-wa+1E-6&&(d=-wa+1E-6):d>wa-1E-6&&(d=
wa-1E-6);var f=v/Math.pow(Math.tan(ba/4+d/2),m);return[f*Math.sin(m*b),v-f*Math.cos(m*b)]}var k=Math.cos(b),m=b===d?Math.sin(b):Math.log(k/Math.cos(d))/Math.log(Math.tan(ba/4+d/2)/Math.tan(ba/4+b/2)),v=k*Math.pow(Math.tan(ba/4+b/2),m)/m;if(!m)return nc;f.invert=function(b,d){var f=v-d;return[Math.atan2(b,f)/m,2*Math.atan(Math.pow(v/((0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)),1/m))-wa]};return f}function Re(b,d){function f(b,d){var f=v-d;return[f*Math.sin(m*b),v-f*Math.cos(m*b)]}var k=Math.cos(b),m=b===
d?Math.sin(b):(k-Math.cos(d))/(d-b),v=k/m+b;if(1E-6>ea(m))return Hb;f.invert=function(b,d){var f=v-d;return[Math.atan2(b,f)/m,v-(0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)]};return f}function nc(b,d){return[b,Math.log(Math.tan(ba/4+d/2))]}function Se(b){var d=bb(b),f=d.scale,k=d.translate,m=d.clipExtent,v;d.scale=function(){var b=f.apply(d,arguments);return b===d?v?d.clipExtent(null):d:b};d.translate=function(){var b=k.apply(d,arguments);return b===d?v?d.clipExtent(null):d:b};d.clipExtent=function(b){var a=
m.apply(d,arguments);if(a===d){if(v=null==b){var c=ba*f(),e=k();m([[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]])}}else v&&(a=null);return a};return d.clipExtent(null)}function nd(b,d){return[Math.log(Math.tan(ba/4+d/2)),-b]}function tb(b){return b[0]}function Jb(b){return b[1]}function Te(b){for(var d=b.length,f=[0,1],k=2,m=2;m<d;m++){for(;1<k&&0>=qa(b[f[k-2]],b[f[k-1]],b[m]);)--k;f[k++]=m}return f.slice(0,k)}function Ug(b,d){return b[0]-d[0]||b[1]-d[1]}function od(b,d,f){return(f[0]-d[0])*(b[1]-d[1])<(f[1]-
d[1])*(b[0]-d[0])}function pd(b,d,f,k){var m=b[0],v=f[0],a=d[0]-m,c=k[0]-v;b=b[1];f=f[1];d=d[1]-b;k=k[1]-f;v=(c*(b-f)-k*(m-v))/(k*a-c*d);return[m+v*a,b+v*d]}function Ue(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Vg(){oc(this);this.edge=this.site=this.circle=null}function Ve(b){var d=We.pop()||new Vg;d.site=b;return d}function qd(b){ub(b);vb.remove(b);We.push(b);oc(b)}function Xe(b,d){var f=b.site,k=f.x,m=f.y,v=m-d;if(!v)return k;var a=b.P;if(!a)return-Infinity;var f=a.site,
a=f.x,f=f.y,c=f-d;if(!c)return a;var e=a-k,g=1/v-1/c,h=e/c;return g?(-h+Math.sqrt(h*h-2*g*(e*e/(-2*c)-f+c/2+m-v/2)))/g+k:(k+a)/2}function Ye(b){this.site=b;this.edges=[]}function Ze(b,d){return d.angle-b.angle}function Wg(){oc(this);this.x=this.y=this.arc=this.site=this.cy=null}function wb(b){var d=b.P,f=b.N;if(d&&f){var k=d.site,d=b.site,m=f.site;if(k!==m){var f=d.x,v=d.y,a=k.x-f,c=k.y-v,k=m.x-f,m=m.y-v,e=2*(a*m-c*k);if(!(-1E-12<=e)){var g=a*a+c*c,h=k*k+m*m,c=(m*g-c*h)/e,a=(a*h-k*g)/e,m=a+v,v=$e.pop()||
new Wg;v.arc=b;v.site=d;v.x=c+f;v.y=m+Math.sqrt(c*c+a*a);v.cy=m;b.circle=v;b=null;for(d=Kb._;d;)if(v.y<d.y||v.y===d.y&&v.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Kb.insert(b,v);b||(rd=v)}}}}function ub(b){var d=b.circle;d&&(d.P||(rd=d.N),Kb.remove(d),$e.push(d),oc(d),b.circle=null)}function Xg(b,d){var f=b.b;if(f)return!0;var k=b.a,f=d[0][0],m=d[1][0],v=d[0][1],a=d[1][1],c=b.l,e=b.r,g=c.x,c=c.y,h=e.x,e=e.y,l=(g+h)/2,q;if(e===c){if(l<f||l>=m)return;if(g>h){if(!k)k={x:l,
y:v};else if(k.y>=a)return;f={x:l,y:a}}else{if(!k)k={x:l,y:a};else if(k.y<v)return;f={x:l,y:v}}}else if(q=(g-h)/(e-c),l=(c+e)/2-q*l,-1>q||1<q)if(g>h){if(!k)k={x:(v-l)/q,y:v};else if(k.y>=a)return;f={x:(a-l)/q,y:a}}else{if(!k)k={x:(a-l)/q,y:a};else if(k.y<v)return;f={x:(v-l)/q,y:v}}else if(c<e){if(!k)k={x:f,y:q*f+l};else if(k.x>=m)return;f={x:m,y:q*m+l}}else{if(!k)k={x:m,y:q*m+l};else if(k.x<f)return;f={x:f,y:q*f+l}}b.a=k;b.b=f;return!0}function af(b,d){this.l=b;this.r=d;this.a=this.b=null}function Lb(b,
d,f,k){var m=new af(b,d);xb.push(m);f&&pc(m,b,d,f);k&&pc(m,d,b,k);lb[b.i].edges.push(new qc(m,b,d));lb[d.i].edges.push(new qc(m,d,b));return m}function Yg(b,d,f){b=new af(b,null);b.a=d;b.b=f;xb.push(b);return b}function pc(b,d,f,k){b.a||b.b?b.l===f?b.b=k:b.a=k:(b.a=k,b.l=d,b.r=f)}function qc(b,d,f){var k=b.a,m=b.b;this.edge=b;this.site=d;this.angle=f?Math.atan2(f.y-d.y,f.x-d.x):b.l===d?Math.atan2(m.x-k.x,k.y-m.y):Math.atan2(k.x-m.x,m.y-k.y)}function sd(){this._=null}function oc(b){b.U=b.C=b.L=b.R=
b.P=b.N=null}function Mb(b,d){var f=d.R,k=d.U;k?k.L===d?k.L=f:k.R=f:b._=f;f.U=k;d.U=f;d.R=f.L;d.R&&(d.R.U=d);f.L=d}function Nb(b,d){var f=d.L,k=d.U;k?k.L===d?k.L=f:k.R=f:b._=f;f.U=k;d.U=f;d.L=f.R;d.L&&(d.L.U=d);f.R=d}function bf(b){for(;b.L;)b=b.L;return b}function td(b,d){var f=b.sort(Zg).pop(),k,m,v;xb=[];lb=Array(b.length);vb=new sd;for(Kb=new sd;;)if(v=rd,f&&(!v||f.y<v.y||f.y===v.y&&f.x<v.x)){if(f.x!==k||f.y!==m){lb[f.i]=new Ye(f);var a,c;m=k=void 0;v=f;for(var e=v.x,g=v.y,h=vb._;h;)if(c=Xe(h,
g)-e,1E-6<c)h=h.L;else{var l=h;a=g;var q=l.N;q?a=Xe(q,a):(l=l.site,a=l.y===a?l.x:Infinity);a=e-a;if(1E-6<a){if(!h.R){m=h;break}h=h.R}else{-1E-6<c?(m=h.P,k=h):-1E-6<a?(m=h,k=h.N):m=k=h;break}}c=Ve(v);vb.insert(m,c);if(m||k)if(m===k)ub(m),k=Ve(m.site),vb.insert(c,k),c.edge=k.edge=Lb(m.site,c.site),wb(m),wb(k);else if(k){ub(m);ub(k);e=m.site;h=e.x;a=e.y;var l=v.x-h,q=v.y-a,g=k.site,p=g.x-h,y=g.y-a,n=2*(l*y-q*p),r=l*l+q*q,A=p*p+y*y,h={x:(y*r-q*A)/n+h,y:(l*A-p*r)/n+a};pc(k.edge,e,g,h);c.edge=Lb(e,v,null,
h);k.edge=Lb(v,g,null,h);wb(m);wb(k)}else c.edge=Lb(m.site,c.site);k=f.x;m=f.y}f=b.pop()}else if(v){g=v.arc;v=g.circle;e=v.x;h=v.cy;v={x:e,y:h};l=g.P;a=g.N;c=[g];qd(g);for(g=l;g.circle&&1E-6>ea(e-g.circle.x)&&1E-6>ea(h-g.circle.cy);)l=g.P,c.unshift(g),qd(g),g=l;c.unshift(g);ub(g);for(l=a;l.circle&&1E-6>ea(e-l.circle.x)&&1E-6>ea(h-l.circle.cy);)a=l.N,c.push(l),qd(l),l=a;c.push(l);ub(l);h=c.length;for(e=1;e<h;++e)l=c[e],g=c[e-1],pc(l.edge,g.site,l.site,v);g=c[0];l=c[h-1];l.edge=Lb(g.site,l.site,null,
v);wb(g);wb(l)}else break;if(d){f=xb;k=ye(d[0][0],d[0][1],d[1][0],d[1][1]);for(m=f.length;m--;)if(v=f[m],!Xg(v,d)||!k(v)||1E-6>ea(v.a.x-v.b.x)&&1E-6>ea(v.a.y-v.b.y))v.a=v.b=null,f.splice(m,1);f=d[0][0];k=d[1][0];m=d[0][1];v=d[1][1];h=lb;for(a=h.length;a--;)if((l=h[a])&&l.prepare())for(p=l.edges,y=p.length,q=0;q<y;)if(n=p[q].end(),e=n.x,g=n.y,r=p[++q%y].start(),c=r.x,r=r.y,1E-6<ea(e-c)||1E-6<ea(g-r))p.splice(q,0,new qc(Yg(l.site,n,1E-6>ea(e-f)&&1E-6<v-g?{x:f,y:1E-6>ea(c-f)?r:v}:1E-6>ea(g-v)&&1E-6<
k-e?{x:1E-6>ea(r-v)?c:k,y:v}:1E-6>ea(e-k)&&1E-6<g-m?{x:k,y:1E-6>ea(c-k)?r:m}:1E-6>ea(g-m)&&1E-6<e-f?{x:1E-6>ea(r-m)?c:f,y:m}:null),l.site,null)),++y}f={cells:lb,edges:xb};vb=Kb=xb=lb=null;return f}function Zg(b,d){return d.y-b.y||d.x-b.x}function $g(b){return b.x}function ah(b){return b.y}function cf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ob(b,d,f,k,m,a){if(!b(d,f,k,m,a)){var c=.5*(f+m),v=.5*(k+a);d=d.nodes;d[0]&&Ob(b,d[0],f,k,c,v);d[1]&&Ob(b,d[1],c,k,m,v);d[2]&&Ob(b,d[2],f,
v,c,a);d[3]&&Ob(b,d[3],c,v,m,a)}}function bh(b,d,f,k,m,a,c){var v=Infinity,e;(function Ba(b,g,Q,h,l){if(!(g>a||Q>c||h<k||l<m)){if(aa=b.point){var aa,q=d-b.x,ga=f-b.y,q=q*q+ga*ga;q<v&&(q=Math.sqrt(v=q),k=d-q,m=f-q,a=d+q,c=f+q,e=aa)}aa=b.nodes;for(var q=.5*(g+h),ga=.5*(Q+l),p=(f>=ga)<<1|d>=q,y=p+4;p<y;++p)if(b=aa[p&3])switch(p&3){case 0:Ba(b,g,Q,q,ga);break;case 1:Ba(b,q,Q,h,ga);break;case 2:Ba(b,g,ga,q,l);break;case 3:Ba(b,q,ga,h,l)}}})(b,k,m,a,c);return e}function ud(b,d){b=x.rgb(b);d=x.rgb(d);var f=
b.r,k=b.g,m=b.b,a=d.r-f,c=d.g-k,e=d.b-m;return function(b){return"#"+pb(Math.round(f+a*b))+pb(Math.round(k+c*b))+pb(Math.round(m+e*b))}}function df(b,d){var f={},k={},m;for(m in b)m in d?f[m]=mb(b[m],d[m]):k[m]=b[m];for(m in d)m in b||(k[m]=d[m]);return function(b){for(m in f)k[m]=f[m](b);return k}}function Wa(b,d){b=+b;d=+d;return function(f){return b*(1-f)+d*f}}function ef(b,d){var f=vd.lastIndex=wd.lastIndex=0,k,m,a,c=-1,e=[],g=[];b+="";for(d+="";(k=vd.exec(b))&&(m=wd.exec(d));)(a=m.index)>f&&
(a=d.slice(f,a),e[c]?e[c]+=a:e[++c]=a),(k=k[0])===(m=m[0])?e[c]?e[c]+=m:e[++c]=m:(e[++c]=null,g.push({i:c,x:Wa(k,m)})),f=wd.lastIndex;f<d.length&&(a=d.slice(f),e[c]?e[c]+=a:e[++c]=a);return 2>e.length?g[0]?(d=g[0].x,function(b){return d(b)+""}):function(){return d}:(d=g.length,function(b){for(var f=0,k;f<d;++f)e[(k=g[f]).i]=k.x(b);return e.join("")})}function mb(b,d){for(var f=x.interpolators.length,k;0<=--f&&!(k=x.interpolators[f](b,d)););return k}function rc(b,d){var f=[],k=[],m=b.length,a=d.length,
c=Math.min(b.length,d.length),e;for(e=0;e<c;++e)f.push(mb(b[e],d[e]));for(;e<m;++e)k[e]=b[e];for(;e<a;++e)k[e]=d[e];return function(b){for(e=0;e<c;++e)k[e]=f[e](b);return k}}function ch(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function ff(b){return function(d){return 1-b(1-d)}}function gf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function dh(b){return b*b}function eh(b){return b*b*b}function fh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,f=d*b;return 4*(.5>b?f:3*(b-d)+f-
.75)}function gh(b){return 1-Math.cos(b*wa)}function hh(b){return Math.pow(2,10*(b-1))}function ih(b){return 1-Math.sqrt(1-b*b)}function jh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function hf(b,d){d-=b;return function(f){return Math.round(b+d*f)}}function jf(b){var d=[b.a,b.b],f=[b.c,b.d],k=kf(d),m=d[0]*f[0]+d[1]*f[1],a=-m;f[0]+=a*d[0];f[1]+=a*d[1];a=kf(f)||0;d[0]*f[1]<f[0]*d[1]&&(d[0]*=-1,d[1]*=-1,
k*=-1,m*=-1);this.rotate=(k?Math.atan2(d[1],d[0]):Math.atan2(-f[0],f[1]))*ta;this.translate=[b.e,b.f];this.scale=[k,a];this.skew=a?Math.atan2(m,a)*ta:0}function kf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function yb(b){return b.length?b.pop()+",":""}function kh(b,d,f,k){b[0]!==d[0]||b[1]!==d[1]?(f=f.push("translate(",null,",",null,")"),k.push({i:f-4,x:Wa(b[0],d[0])},{i:f-2,x:Wa(b[1],d[1])})):(d[0]||d[1])&&f.push("translate("+d+")")}function lh(b,d,f,k){b!==d?(180<b-d?
d+=360:180<d-b&&(b+=360),k.push({i:f.push(yb(f)+"rotate(",null,")")-2,x:Wa(b,d)})):d&&f.push(yb(f)+"rotate("+d+")")}function mh(b,d,f,k){b!==d?k.push({i:f.push(yb(f)+"skewX(",null,")")-2,x:Wa(b,d)}):d&&f.push(yb(f)+"skewX("+d+")")}function nh(b,d,f,k){b[0]!==d[0]||b[1]!==d[1]?(f=f.push(yb(f)+"scale(",null,",",null,")"),k.push({i:f-4,x:Wa(b[0],d[0])},{i:f-2,x:Wa(b[1],d[1])})):1===d[0]&&1===d[1]||f.push(yb(f)+"scale("+d+")")}function lf(b,d){var f=[],k=[];b=x.transform(b);d=x.transform(d);kh(b.translate,
d.translate,f,k);lh(b.rotate,d.rotate,f,k);mh(b.skew,d.skew,f,k);nh(b.scale,d.scale,f,k);b=d=null;return function(b){for(var d=-1,m=k.length,a;++d<m;)f[(a=k[d]).i]=a.x(b);return f.join("")}}function oh(b,d){d=(d-=b=+b)||1/d;return function(f){return(f-b)/d}}function ph(b,d){d=(d-=b=+b)||1/d;return function(f){return Math.max(0,Math.min(1,(f-b)/d))}}function qh(b){var d=b.source;b=b.target;var f;var k=b;if(d===k)f=d;else{f=mf(d);for(var k=mf(k),m=f.pop(),a=k.pop(),c=null;m===a;)c=m,m=f.pop(),a=k.pop();
f=c}for(k=[d];d!==f;)d=d.parent,k.push(d);for(d=k.length;b!==f;)k.splice(d,0,b),b=b.parent;return k}function mf(b){for(var d=[],f=b.parent;null!=f;)d.push(b),b=f,f=f.parent;d.push(b);return d}function rh(b){b.fixed|=2}function sh(b){b.fixed&=-7}function th(b){b.fixed|=4;b.px=b.x;b.py=b.y}function uh(b){b.fixed&=-5}function nf(b,d,f){var k=0,m=0;b.charge=0;if(!b.leaf)for(var a=b.nodes,c=a.length,e=-1,g;++e<c;)g=a[e],null!=g&&(nf(g,d,f),b.charge+=g.charge,k+=g.charge*g.cx,m+=g.charge*g.cy);b.point&&
(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=f[b.point.index],b.charge+=b.pointCharge=d,k+=d*b.point.x,m+=d*b.point.y);b.cx=k/b.charge;b.cy=m/b.charge}function Pb(b,d){x.rebind(b,d,"sort","children","value");b.nodes=b;b.links=vh;return b}function Qb(b,d){for(var f=[b];null!=(b=f.pop());)if(d(b),(m=b.children)&&(k=m.length))for(var k,m;0<=--k;)f.push(m[k])}function Sa(b,d){for(var f=[b],k=[];null!=(b=f.pop());)if(k.push(b),(c=b.children)&&(a=c.length))for(var m=-1,a,c;++m<
a;)f.push(c[m]);for(;null!=(b=k.pop());)d(b)}function wh(b){return b.children}function xh(b){return b.value}function yh(b,d){return d.value-b.value}function vh(b){return x.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function zh(b){return b.x}function Ah(b){return b.y}function Bh(b,d,f){b.y0=d;b.y=f}function xd(b){return x.range(b.length)}function yd(b){var d=-1;b=b[0].length;for(var f=[];++d<b;)f[d]=0;return f}function Ch(b){for(var d=1,f=0,k=b[0][1],
m,a=b.length;d<a;++d)(m=b[d][1])>k&&(f=d,k=m);return f}function Dh(b){return b.reduce(Eh,0)}function Eh(b,d){return b+d[1]}function Fh(b,d){return of(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function of(b,d){for(var f=-1,k=+b[0],m=(b[1]-k)/d,a=[];++f<=d;)a[f]=m*f+k;return a}function Gh(b){return[x.min(b),x.max(b)]}function Hh(b,d){return b.value-d.value}function zd(b,d){var f=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=f;f._pack_prev=d}function pf(b,d){b._pack_next=d;d._pack_prev=b}
function qf(b,d){var f=d.x-b.x,k=d.y-b.y,m=b.r+d.r;return.999*m*m>f*f+k*k}function rf(b){function d(b){k=Math.min(b.x-b.r,k);m=Math.max(b.x+b.r,m);a=Math.min(b.y-b.r,a);c=Math.max(b.y+b.r,c)}if((f=b.children)&&(y=f.length)){var f,k=Infinity,m=-Infinity,a=Infinity,c=-Infinity,e,g,h,l,q,p,y;f.forEach(Ih);e=f[0];e.x=-e.r;e.y=0;d(e);if(1<y&&(g=f[1],g.x=g.r,g.y=0,d(g),2<y))for(h=f[2],sf(e,g,h),d(h),zd(e,h),e._pack_prev=h,zd(h,g),g=e._pack_next,l=3;l<y;l++){sf(e,g,h=f[l]);var n=0,r=1,A=1;for(q=g._pack_next;q!==
g;q=q._pack_next,r++)if(qf(q,h)){n=1;break}if(1==n)for(p=e._pack_prev;p!==q._pack_prev&&!qf(p,h);p=p._pack_prev,A++);n?(r<A||r==A&&g.r<e.r?pf(e,g=q):pf(e=p,g),l--):(zd(e,h),g=h,d(h))}e=(k+m)/2;g=(a+c)/2;for(l=q=0;l<y;l++)h=f[l],h.x-=e,h.y-=g,q=Math.max(q,h.r+Math.sqrt(h.x*h.x+h.y*h.y));b.r=q;f.forEach(Jh)}}function Ih(b){b._pack_next=b._pack_prev=b}function Jh(b){delete b._pack_next;delete b._pack_prev}function tf(b,d,f,k){var m=b.children;b.x=d+=k*b.x;b.y=f+=k*b.y;b.r*=k;if(m){b=-1;for(var a=m.length;++b<
a;)tf(m[b],d,f,k)}}function sf(b,d,f){var k=b.r+f.r,m=d.x-b.x,a=d.y-b.y;if(k&&(m||a)){var c=d.r+f.r,e=m*m+a*a,c=c*c,k=k*k;d=.5+(k-c)/(2*e);c=Math.sqrt(Math.max(0,2*c*(k+e)-(k-=e)*k-c*c))/(2*e);f.x=b.x+d*m+c*a;f.y=b.y+d*a-c*m}else f.x=b.x+k,f.y=b.y}function uf(b,d){return b.parent==d.parent?1:2}function Ad(b){var d=b.children;return d.length?d[0]:b.t}function Bd(b){var d=b.children,f;return(f=d.length)?d[f-1]:b.t}function Kh(b){return 1+x.max(b,function(b){return b.y})}function Lh(b){return b.reduce(function(b,
f){return b+f.x},0)/b.length}function vf(b){var d=b.children;return d&&d.length?vf(d[0]):b}function wf(b){var d=b.children,f;return d&&(f=d.length)?wf(d[f-1]):b}function Cd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function xf(b,d){var f=b.x+d[3],k=b.y+d[0],m=b.dx-d[1]-d[3],a=b.dy-d[0]-d[2];0>m&&(f+=m/2,m=0);0>a&&(k+=a/2,a=0);return{x:f,y:k,dx:m,dy:a}}function zb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function sc(b){return b.rangeExtent?b.rangeExtent():zb(b.range())}function Mh(b,d,f,k){var m=
f(b[0],b[1]),a=k(d[0],d[1]);return function(b){return a(m(b))}}function tc(b,d){var f=0,k=b.length-1,m=b[f],a=b[k],c;a<m&&(c=f,f=k,k=c,c=m,m=a,a=c);b[f]=d.floor(m);b[k]=d.ceil(a);return b}function yf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Nh}function Oh(b,d,f,k){var m=[],a=[],c=0,e=Math.min(b.length,d.length)-1;b[e]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++c<=e;)m.push(f(b[c-1],b[c])),a.push(k(d[c-1],d[c]));return function(d){var f=
x.bisect(b,d,1,e)-1;return a[f](m[f](d))}}function zf(b,d,f,k){function m(){var m=2<Math.min(b.length,d.length)?Oh:Mh,v=k?ph:oh;c=m(b,d,v,f);e=m(d,b,v,mb);return a}function a(b){return c(b)}var c,e;a.invert=function(b){return e(b)};a.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return m()};a.range=function(b){if(!arguments.length)return d;d=b;return m()};a.rangeRound=function(b){return a.range(b).interpolate(hf)};a.clamp=function(b){if(!arguments.length)return k;k=b;return m()};
a.interpolate=function(b){if(!arguments.length)return f;f=b;return m()};a.ticks=function(d){return x.range.apply(x,cb(b,d))};a.tickFormat=function(d,f){return Dd(b,d,f)};a.nice=function(d){Af(b,d);return m()};a.copy=function(){return zf(b,d,f,k)};return m()}function Ed(b,d){return x.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Af(b,d){tc(b,yf(cb(b,d)[2]));tc(b,yf(cb(b,d)[2]));return b}function cb(b,d){null==d&&(d=10);var f=zb(b),k=f[1]-f[0],m=Math.pow(10,Math.floor(Math.log(k/d)/
Math.LN10)),k=d/k*m;.15>=k?m*=10:.35>=k?m*=5:.75>=k&&(m*=2);f[0]=Math.ceil(f[0]/m)*m;f[1]=Math.floor(f[1]/m)*m+.5*m;f[2]=m;return f}function Dd(b,d,f){b=cb(b,d);if(f){d=je.exec(f);d.shift();if("s"===d[8]){var k=x.formatPrefix(Math.max(ea(b[0]),ea(b[1])));d[7]||(d[7]="."+uc(k.scale(b[2])));d[8]="f";f=x.format(d.join(""));return function(b){return f(k.scale(b))+k.symbol}}d[7]||(d[7]="."+Ph(d[8],b));f=d.join("")}else f=",."+uc(b[2])+"f";return x.format(f)}function uc(b){return-Math.floor(Math.log(b)/
Math.LN10+.01)}function Ph(b,d){var f=uc(d[2]);return b in Qh?Math.abs(f-uc(Math.max(ea(d[0]),ea(d[1]))))+ +("e"!==b):f-2*("%"===b)}function Bf(b,d,f,k){function m(b){return(f?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function a(b){return f?Math.pow(d,b):-Math.pow(d,-b)}function c(d){return b(m(d))}c.invert=function(d){return a(b.invert(d))};c.domain=function(d){if(!arguments.length)return k;f=0<=d[0];b.domain((k=d.map(Number)).map(m));return c};c.base=function(f){if(!arguments.length)return d;
d=+f;b.domain(k.map(m));return c};c.nice=function(){var d=tc(k.map(m),f?Math:Rh);b.domain(d);k=d.map(a);return c};c.ticks=function(){var b=zb(k),c=[],e=b[0],b=b[1],v=Math.floor(m(e)),g=Math.ceil(m(b)),h=d%1?2:d;if(isFinite(g-v)){if(f){for(;v<g;v++)for(var l=1;l<h;l++)c.push(a(v)*l);c.push(a(v))}else for(c.push(a(v));v++<g;)for(l=h-1;0<l;l--)c.push(a(v)*l);for(v=0;c[v]<e;v++);for(g=c.length;c[g-1]>b;g--);c=c.slice(v,g)}return c};c.tickFormat=function(b,f){if(!arguments.length)return Cf;2>arguments.length?
f=Cf:"function"!==typeof f&&(f=x.format(f));var k=Math.max(1,d*b/c.ticks().length);return function(b){var c=b/a(Math.round(m(b)));c*d<d-.5&&(c*=d);return c<=k?f(b):""}};c.copy=function(){return Bf(b.copy(),d,f,k)};return Ed(c,b)}function Df(b,d,f){function k(d){return b(m(d))}var m=vc(d),a=vc(1/d);k.invert=function(d){return a(b.invert(d))};k.domain=function(d){if(!arguments.length)return f;b.domain((f=d.map(Number)).map(m));return k};k.ticks=function(b){return x.range.apply(x,cb(f,b))};k.tickFormat=
function(b,d){return Dd(f,b,d)};k.nice=function(b){return k.domain(Af(f,b))};k.exponent=function(c){if(!arguments.length)return d;m=vc(d=c);a=vc(1/d);b.domain(f.map(m));return k};k.copy=function(){return Df(b.copy(),d,f)};return Ed(k,b)}function vc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ef(b,d){function f(f){return a[((m.get(f)||("range"===d.t?m.set(f,b.push(f)):NaN))-1)%a.length]}function k(d,f){return x.range(b.length).map(function(b){return d+f*b})}var m,a,c;f.domain=
function(k){if(!arguments.length)return b;b=[];m=new t;for(var a=-1,c=k.length,e;++a<c;)m.has(e=k[a])||m.set(e,b.push(e));return f[d.t].apply(f,d.a)};f.range=function(b){if(!arguments.length)return a;a=b;c=0;d={t:"range",a:arguments};return f};f.rangePoints=function(m,e){2>arguments.length&&(e=0);var v=m[0],g=m[1],g=2>b.length?(v=(v+g)/2,0):(g-v)/(b.length-1+e);a=k(v+g*e/2,g);c=0;d={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(m,e){2>arguments.length&&(e=0);var v=m[0],g=m[1],
h=2>b.length?(v=g=Math.round((v+g)/2),0):(g-v)/(b.length-1+e)|0;a=k(v+Math.round(h*e/2+(g-v-(b.length-1+e)*h)/2),h);c=0;d={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(m,e,v){2>arguments.length&&(e=0);3>arguments.length&&(v=e);var g=m[1]<m[0],h=m[g-0],l=(m[1-g]-h)/(b.length-e+2*v);a=k(h+l*v,l);g&&a.reverse();c=l*(1-e);d={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(m,e,v){2>arguments.length&&(e=0);3>arguments.length&&(v=e);var g=m[1]<m[0],h=m[g-0],l=m[1-g],
Q=Math.floor((l-h)/(b.length-e+2*v));a=k(h+Math.round((l-h-(b.length-e)*Q)/2),Q);g&&a.reverse();c=Math.round(Q*(1-e));d={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return c};f.rangeExtent=function(){return zb(d.a[0])};f.copy=function(){return Ef(b,d)};return f.domain(b)}function Ff(b,d){function f(){var f=0,a=d.length;for(m=[];++f<a;)m[f-1]=x.quantile(b,f/a);return k}function k(b){if(!isNaN(b=+b))return d[x.bisect(m,b)]}var m;k.domain=function(d){if(!arguments.length)return b;
b=d.map(e).filter(g).sort(a);return f()};k.range=function(b){if(!arguments.length)return d;d=b;return f()};k.quantiles=function(){return m};k.invertExtent=function(f){f=d.indexOf(f);return 0>f?[NaN,NaN]:[0<f?m[f-1]:b[0],f<m.length?m[f]:b[b.length-1]]};k.copy=function(){return Ff(b,d)};return f()}function Gf(b,d,f){function k(d){return f[Math.max(0,Math.min(c,Math.floor(a*(d-b))))]}function m(){a=f.length/(d-b);c=f.length-1;return k}var a,c;k.domain=function(f){if(!arguments.length)return[b,d];b=+f[0];
d=+f[f.length-1];return m()};k.range=function(b){if(!arguments.length)return f;f=b;return m()};k.invertExtent=function(d){d=f.indexOf(d);d=0>d?NaN:d/a+b;return[d,d+1/a]};k.copy=function(){return Gf(b,d,f)};return m()}function Hf(b,d){function f(f){if(f<=f)return d[x.bisect(b,f)]}f.domain=function(d){if(!arguments.length)return b;b=d;return f};f.range=function(b){if(!arguments.length)return d;d=b;return f};f.invertExtent=function(f){f=d.indexOf(f);return[b[f-1],b[f]]};f.copy=function(){return Hf(b,
d)};return f}function If(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(f){if(!arguments.length)return b;b=f.map(d);return d};d.ticks=function(d){return x.range.apply(x,cb(b,d))};d.tickFormat=function(d,k){return Dd(b,d,k)};d.copy=function(){return If(b)};return d}function Sh(){return 0}function Th(b){return b.innerRadius}function Uh(b){return b.outerRadius}function Jf(b){return b.startAngle}function Kf(b){return b.endAngle}function Vh(b){return b&&b.padAngle}function wc(b,d,f,k){return 0<
(b-f)*d-(d-k)*b?0:1}function xc(b,d,f,k,a){var m=b[0]-d[0],c=b[1]-d[1];a=(a?k:-k)/Math.sqrt(m*m+c*c);var c=a*c,m=-a*m,e=b[0]+c,g=b[1]+m,h=d[0]+c,l=d[1]+m;b=(e+h)/2;d=(g+l)/2;a=h-e;var q=l-g,p=a*a+q*q;k=f-k;var l=e*l-h*g,y=(0>q?-1:1)*Math.sqrt(Math.max(0,k*k*p-l*l)),e=(l*q-a*y)/p,g=(-l*a-q*y)/p,h=(l*q+a*y)/p;a=(-l*a+q*y)/p;q=e-b;p=g-d;b=h-b;d=a-d;q*q+p*p>b*b+d*d&&(e=h,g=a);return[[e-c,g-m],[e*f/k,g*f/k]]}function Lf(b){function d(d){function m(){e.push("M",c(b(v),g))}for(var e=[],v=[],h=-1,l=d.length,
q,Q=pa(f),p=pa(k);++h<l;)a.call(this,q=d[h],h)?v.push([+Q.call(this,q,h),+p.call(this,q,h)]):v.length&&(m(),v=[]);v.length&&m();return e.length?e.join(""):null}var f=tb,k=Jb,a=Gb,c=Pa,e=c.key,g=.7;d.x=function(b){if(!arguments.length)return f;f=b;return d};d.y=function(b){if(!arguments.length)return k;k=b;return d};d.defined=function(b){if(!arguments.length)return a;a=b;return d};d.interpolate=function(b){if(!arguments.length)return e;e="function"===typeof b?c=b:(c=Fd.get(b)||Pa).key;return d};d.tension=
function(b){if(!arguments.length)return g;g=b;return d};return d}function Pa(b){return 1<b.length?b.join("L"):b+"Z"}function Mf(b){return b.join("L")+"Z"}function Gd(b){for(var d=0,f=b.length,k=b[0],a=[k[0],",",k[1]];++d<f;)a.push("V",(k=b[d])[1],"H",k[0]);return a.join("")}function Hd(b){for(var d=0,f=b.length,k=b[0],a=[k[0],",",k[1]];++d<f;)a.push("H",(k=b[d])[0],"V",k[1]);return a.join("")}function yc(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Pa(b);var f=b.length!=d.length,
k="",a=b[0],c=b[1],e=d[0],g=e,h=1;f&&(k+="Q"+(c[0]-2*e[0]/3)+","+(c[1]-2*e[1]/3)+","+c[0]+","+c[1],a=b[1],h=2);if(1<d.length)for(g=d[1],c=b[h],h++,k+="C"+(a[0]+e[0])+","+(a[1]+e[1])+","+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1],a=2;a<d.length;a++,h++)c=b[h],g=d[a],k+="S"+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1];f&&(f=b[h],k+="Q"+(c[0]+2*g[0]/3)+","+(c[1]+2*g[1]/3)+","+f[0]+","+f[1]);return k}function Id(b,d){for(var f=[],k=(1-d)/2,a,c=b[0],e=b[1],g=1,h=b.length;++g<h;)a=c,c=e,e=b[g],f.push([k*
(e[0]-a[0]),k*(e[1]-a[1])]);return f}function Nf(b){if(3>b.length)return Pa(b);var d=1,f=b.length,k=b[0],a=k[0],c=k[1],e=[a,a,a,(k=b[1])[0]],g=[c,c,c,k[1]],a=[a,",",c,"L",La(db,e),",",La(db,g)];for(b.push(b[f-1]);++d<=f;)k=b[d],e.shift(),e.push(k[0]),g.shift(),g.push(k[1]),Jd(a,e,g);b.pop();a.push("L",k);return a.join("")}function La(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Jd(b,d,f){b.push("C",La(Of,d),",",La(Of,f),",",La(Pf,d),",",La(Pf,f),",",La(db,d),",",La(db,f))}function Kd(b,
d){return(d[1]-b[1])/(d[0]-b[0])}function Qf(b){for(var d,f=-1,k=b.length,a,c;++f<k;)d=b[f],a=d[0],c=d[1]-wa,d[0]=a*Math.cos(c),d[1]=a*Math.sin(c);return b}function Rf(b){function d(d){function m(){v.push("M",g(b(Q),p),q,l(b(h.reverse()),p),"Z")}for(var v=[],h=[],Q=[],y=-1,n=d.length,r,A=pa(f),Y=pa(a),t=f===k?function(){return H}:pa(k),w=a===c?function(){return aa}:pa(c),H,aa;++y<n;)e.call(this,r=d[y],y)?(h.push([H=+A.call(this,r,y),aa=+Y.call(this,r,y)]),Q.push([+t.call(this,r,y),+w.call(this,r,
y)])):h.length&&(m(),h=[],Q=[]);h.length&&m();return v.length?v.join(""):null}var f=tb,k=tb,a=0,c=Jb,e=Gb,g=Pa,h=g.key,l=g,q="L",p=.7;d.x=function(b){if(!arguments.length)return k;f=k=b;return d};d.x0=function(b){if(!arguments.length)return f;f=b;return d};d.x1=function(b){if(!arguments.length)return k;k=b;return d};d.y=function(b){if(!arguments.length)return c;a=c=b;return d};d.y0=function(b){if(!arguments.length)return a;a=b;return d};d.y1=function(b){if(!arguments.length)return c;c=b;return d};
d.defined=function(b){if(!arguments.length)return e;e=b;return d};d.interpolate=function(b){if(!arguments.length)return h;h="function"===typeof b?g=b:(g=Fd.get(b)||Pa).key;l=g.reverse||g;q=g.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return p;p=b;return d};return d}function Wh(b){return b.radius}function Sf(b){return[b.x,b.y]}function Xh(b){return function(){var d=b.apply(this,arguments),f=d[0],d=d[1]-wa;return[f*Math.cos(d),f*Math.sin(d)]}}function Yh(){return 64}function Zh(){return"circle"}
function Tf(b){b=Math.sqrt(b/ba);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Uf(b){return function(){var d,f,k;(d=this[b])&&(k=d[f=d.active])&&(k.timer.c=null,k.timer.t=NaN,--d.count?delete d[f]:delete this[b],d.active+=.5,k.event&&k.event.interrupt.call(this,this.__data__,k.index))}}function Rb(b,d,f){Tb(b,Aa);b.namespace=d;b.id=f;return b}function Ld(b,d,f,k){var a=b.id,c=b.namespace;return la(b,"function"===typeof f?function(b,m,e){b[c][a].tween.set(d,k(f.call(b,
b.__data__,m,e)))}:(f=k(f),function(b){b[c][a].tween.set(d,f)}))}function $h(b){null==b&&(b="");return function(){this.textContent=b}}function Md(b){return null==b?"__transition__":"__transition_"+b+"__"}function zc(b,d,f,k,a){function c(b){var d=h.delay;q.t=d+l;if(d<=b)return m(b-d);q.c=m}function m(f){var a=g.active,c=g[a];c&&(c.timer.c=null,c.timer.t=NaN,--g.count,delete g[a],c.event&&c.event.interrupt.call(b,b.__data__,c.index));for(var m in g)+m<k&&(a=g[m],a.timer.c=null,a.timer.t=NaN,--g.count,
delete g[m]);q.c=e;Yb(function(){q.c&&e(f||1)&&(q.c=null,q.t=NaN);return 1},0,l);g.active=k;h.event&&h.event.start.call(b,b.__data__,d);n=[];h.tween.forEach(function(f,k){(k=k.call(b,b.__data__,d))&&n.push(k)});y=h.ease;p=h.duration}function e(a){a/=p;for(var c=y(a),m=n.length;0<m;)n[--m].call(b,c);if(1<=a)return h.event&&h.event.end.call(b,b.__data__,d),--g.count?delete g[k]:delete b[f],1}var g=b[f]||(b[f]={active:0,count:0}),h=g[k],l,q,p,y,n;h||(l=a.time,q=Yb(c,0,l),h=g[k]={tween:new t,time:l,timer:q,
delay:a.delay,duration:a.duration,ease:a.ease,index:d},a=null,++g.count)}function ai(b,d,f){b.attr("transform",function(b){var k=d(b);return"translate("+(isFinite(k)?k:f(b))+",0)"})}function bi(b,d,f){b.attr("transform",function(b){var k=d(b);return"translate(0,"+(isFinite(k)?k:f(b))+")"})}function Nd(b){return b.toISOString()}function Od(b,d,f){function k(d){return b(d)}function a(b,f){var k=(b[1]-b[0])/f,a=x.bisect(Ac,k);return a==Ac.length?[d.year,cb(b.map(function(b){return b/31536E6}),f)[2]]:
a?d[k/Ac[a-1]<Ac[a]/k?a-1:a]:[ci,cb(b,f)[2]]}k.invert=function(d){return nb(b.invert(d))};k.domain=function(d){if(!arguments.length)return b.domain().map(nb);b.domain(d);return k};k.nice=function(b,d){function f(f){return!isNaN(f)&&!b.range(f,nb(+f+1),d).length}var c=k.domain(),m=zb(c);if(m=null==b?a(m,10):"number"===typeof b&&a(m,b))b=m[0],d=m[1];return k.domain(tc(c,1<d?{floor:function(d){for(;f(d=b.floor(d));)d=nb(d-1);return d},ceil:function(d){for(;f(d=b.ceil(d));)d=nb(+d+1);return d}}:b))};
k.ticks=function(b,d){var f=zb(k.domain()),c=null==b?a(f,10):"number"===typeof b?a(f,b):!b.range&&[{range:b},d];c&&(b=c[0],d=c[1]);return b.range(f[0],nb(+f[1]+1),1>d?1:d)};k.tickFormat=function(){return f};k.copy=function(){return Od(b.copy(),d,f)};return Ed(k,b)}function nb(b){return new Date(b)}function di(b){return JSON.parse(b.responseText)}function ei(b){var d=Ea.createRange();d.selectNode(Ea.body);return d.createContextualFragment(b.responseText)}var x={version:"3.5.17"},Vf=[].slice,Qa=function(b){return Vf.call(b)},
Ea=this.document;if(Ea)try{Qa(Ea.documentElement.childNodes)[0].nodeType}catch(b){Qa=function(b){for(var d=b.length,k=Array(d);d--;)k[d]=b[d];return k}}Date.now||(Date.now=function(){return+new Date});if(Ea)try{Ea.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Bc=this.Element.prototype,fi=Bc.setAttribute,gi=Bc.setAttributeNS,Wf=this.CSSStyleDeclaration.prototype,hi=Wf.setProperty;Bc.setAttribute=function(b,f){fi.call(this,b,f+"")};Bc.setAttributeNS=function(b,f,k){gi.call(this,
b,f,k+"")};Wf.setProperty=function(b,f,k){hi.call(this,b,f+"",k)}}x.ascending=a;x.descending=function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};x.min=function(b,d){var f=-1,k=b.length,a,c;if(1===arguments.length){for(;++f<k;)if(null!=(c=b[f])&&c>=c){a=c;break}for(;++f<k;)null!=(c=b[f])&&a>c&&(a=c)}else{for(;++f<k;)if(null!=(c=d.call(b,b[f],f))&&c>=c){a=c;break}for(;++f<k;)null!=(c=d.call(b,b[f],f))&&a>c&&(a=c)}return a};x.max=function(b,d){var f=-1,k=b.length,a,c;if(1===arguments.length){for(;++f<k;)if(null!=
(c=b[f])&&c>=c){a=c;break}for(;++f<k;)null!=(c=b[f])&&c>a&&(a=c)}else{for(;++f<k;)if(null!=(c=d.call(b,b[f],f))&&c>=c){a=c;break}for(;++f<k;)null!=(c=d.call(b,b[f],f))&&c>a&&(a=c)}return a};x.extent=function(b,d){var f=-1,k=b.length,a,c,e;if(1===arguments.length){for(;++f<k;)if(null!=(c=b[f])&&c>=c){a=e=c;break}for(;++f<k;)null!=(c=b[f])&&(a>c&&(a=c),e<c&&(e=c))}else{for(;++f<k;)if(null!=(c=d.call(b,b[f],f))&&c>=c){a=e=c;break}for(;++f<k;)null!=(c=d.call(b,b[f],f))&&(a>c&&(a=c),e<c&&(e=c))}return[a,
e]};x.sum=function(b,d){var f=0,k=b.length,a,c=-1;if(1===arguments.length)for(;++c<k;)isNaN(a=+b[c])||(f+=a);else for(;++c<k;)isNaN(a=+d.call(b,b[c],c))||(f+=a);return f};x.mean=function(b,d){var f=0,k=b.length,a,c=-1,g=k;if(1===arguments.length)for(;++c<k;)isNaN(a=e(b[c]))?--g:f+=a;else for(;++c<k;)isNaN(a=e(d.call(b,b[c],c)))?--g:f+=a;if(g)return f/g};x.quantile=function(b,d){var f=(b.length-1)*d+1,k=Math.floor(f),a=+b[k-1];return(f-=k)?a+f*(b[k]-a):a};x.median=function(b,d){var f=[],k=b.length,
c,g=-1;if(1===arguments.length)for(;++g<k;)isNaN(c=e(b[g]))||f.push(c);else for(;++g<k;)isNaN(c=e(d.call(b,b[g],g)))||f.push(c);if(f.length)return x.quantile(f.sort(a),.5)};x.variance=function(b,d){var f=b.length,k=0,a,c,g=0,h=-1,l=0;if(1===arguments.length)for(;++h<f;)isNaN(a=e(b[h]))||(c=a-k,k+=c/++l,g+=c*(a-k));else for(;++h<f;)isNaN(a=e(d.call(b,b[h],h)))||(c=a-k,k+=c/++l,g+=c*(a-k));if(1<l)return g/(l-1)};x.deviation=function(){var b=x.variance.apply(this,arguments);return b?Math.sqrt(b):b};
var Xf=r(a);x.bisectLeft=Xf.left;x.bisect=x.bisectRight=Xf.right;x.bisector=function(b){return r(1===b.length?function(d,f){return a(b(d),f)}:b)};x.shuffle=function(b,d,f){3>(k=arguments.length)&&(f=b.length,2>k&&(d=0));for(var k=f-d,a,c;k;)c=Math.random()*k--|0,a=b[k+d],b[k+d]=b[c+d],b[c+d]=a;return b};x.permute=function(b,d){for(var f=d.length,k=Array(f);f--;)k[f]=b[d[f]];return k};x.pairs=function(b){for(var d=0,f=b.length-1,k=b[0],a=Array(0>f?0:f);d<f;)a[d]=[k,k=b[++d]];return a};x.transpose=
function(b){if(!(c=b.length))return[];for(var d=-1,f=x.min(b,l),k=Array(f);++d<f;)for(var a=-1,c,e=k[d]=Array(c);++a<c;)e[a]=b[a][d];return k};x.zip=function(){return x.transpose(arguments)};x.keys=function(b){var d=[],f;for(f in b)d.push(f);return d};x.values=function(b){var d=[],f;for(f in b)d.push(b[f]);return d};x.entries=function(b){var d=[],f;for(f in b)d.push({key:f,value:b[f]});return d};x.merge=function(b){var d=b.length,f;f=-1;for(var k=0,a,c;++f<d;)k+=b[f].length;for(a=Array(k);0<=--d;)for(c=
b[d],f=c.length;0<=--f;)a[--k]=c[f];return a};var ea=Math.abs;x.range=function(b,d,f){3>arguments.length&&(f=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/f)throw Error("infinite range");var k=[],a;a=ea(f);for(var c=1;a*c%1;)c*=10;a=c;var c=-1,e;b*=a;d*=a;f*=a;if(0>f)for(;(e=b+f*++c)>d;)k.push(e/a);else for(;(e=b+f*++c)<d;)k.push(e/a);return k};x.map=function(b,d){var f=new t;if(b instanceof t)b.forEach(function(b,d){f.set(b,d)});else if(Array.isArray(b)){var a=-1,c=b.length,e;if(1===arguments.length)for(;++a<
c;)f.set(a,b[a]);else for(;++a<c;)f.set(d.call(b,e=b[a],a),e)}else for(a in b)f.set(a,b[a]);return f};n(t,{has:z,get:function(b){return this._[h(b)]},set:function(b,d){return this._[h(b)]=d},remove:I,keys:C,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:u(d),value:this._[d]});return b},size:F,empty:D,forEach:function(b){for(var d in this._)b.call(this,u(d),this._[d])}});x.nest=function(){function b(d,c,k){if(k>=a.length)return g?
g.call(f,c):e?c.sort(e):c;for(var m=-1,v=c.length,h=a[k++],l,q,p=new t,y;++m<v;)(y=p.get(l=h(q=c[m])))?y.push(q):p.set(l,[q]);d?(q=d(),c=function(f,a){q.set(f,b(d,a,k))}):(q={},c=function(f,a){q[f]=b(d,a,k)});p.forEach(c);return q}function d(b,f){if(f>=a.length)return b;var k=[],e=c[f++];b.forEach(function(b,a){k.push({key:b,values:d(a,f)})});return e?k.sort(function(b,d){return e(b.key,d.key)}):k}var f={},a=[],c=[],e,g;f.map=function(d,f){return b(f,d,0)};f.entries=function(f){return d(b(x.map,f,
0),0)};f.key=function(b){a.push(b);return f};f.sortKeys=function(b){c[a.length-1]=b;return f};f.sortValues=function(b){e=b;return f};f.rollup=function(b){g=b;return f};return f};x.set=function(b){var d=new B;if(b)for(var f=0,a=b.length;f<a;++f)d.add(b[f]);return d};n(B,{has:z,add:function(b){this._[h(b+="")]=!0;return b},remove:I,values:C,size:F,empty:D,forEach:function(b){for(var d in this._)b.call(this,u(d))}});x.behavior={};x.rebind=function(b,d){for(var f=1,a=arguments.length,c;++f<a;)b[c=arguments[f]]=
L(b,d,d[c]);return b};var Zd="webkit ms moz Moz o O".split(" ");x.dispatch=function(){for(var b=new w,d=-1,f=arguments.length;++d<f;)b[arguments[d]]=G(b);return b};w.prototype.on=function(b,d){var f=b.indexOf("."),a="";0<=f&&(a=b.slice(f+1),b=b.slice(0,f));if(b)return 2>arguments.length?this[b].on(a):this[b].on(a,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(a,null);return this}};x.event=null;x.requote=function(b){return b.replace(ii,"\\$&")};var ii=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
Tb={}.__proto__?function(b,d){b.__proto__=d}:function(b,d){for(var f in d)b[f]=d[f]},Rc=function(b,d){return d.querySelector(b)},Sc=function(b,d){return d.querySelectorAll(b)},Ub=function(b,d){var f=b.matches||b[M(b,"matchesSelector")];Ub=function(b,d){return f.call(b,d)};return Ub(b,d)};"function"===typeof Sizzle&&(Rc=function(b,d){return Sizzle(b,d)[0]||null},Sc=Sizzle,Ub=Sizzle.matchesSelector);x.selection=function(){return x.select(Ea.documentElement)};var ma=x.selection.prototype=[];ma.select=
function(b){var d=[],f,a,c,e;b=q(b);for(var g=-1,h=this.length;++g<h;){d.push(f=[]);f.parentNode=(c=this[g]).parentNode;for(var l=-1,p=c.length;++l<p;)(e=c[l])?(f.push(a=b.call(e,e.__data__,l,g)),a&&"__data__"in e&&(a.__data__=e.__data__)):f.push(null)}return N(d)};ma.selectAll=function(b){var d=[],f,a;b=J(b);for(var c=-1,e=this.length;++c<e;)for(var g=this[c],h=-1,l=g.length;++h<l;)if(a=g[h])d.push(f=Qa(b.call(a,a.__data__,h,c))),f.parentNode=a;return N(d)};var Pd={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};x.ns={prefix:Pd,qualify:function(b){var d=b.indexOf(":"),f=b;0<=d&&"xmlns"!==(f=b.slice(0,d))&&(b=b.slice(d+1));return Pd.hasOwnProperty(f)?{space:Pd[f],local:b}:b}};ma.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node();b=x.ns.qualify(b);return b.local?f.getAttributeNS(b.space,b.local):f.getAttribute(b)}for(d in b)this.each(O(d,
b[d]));return this}return this.each(O(b,d))};ma.classed=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node(),a=(b=(b+"").trim().split(/^|\s+/)).length,c=-1;if(d=f.classList)for(;++c<a;){if(!d.contains(b[c]))return!1}else for(d=f.getAttribute("class");++c<a;)if(!H(b[c]).test(d))return!1;return!0}for(d in b)this.each(p(d,b[d]));return this}return this.each(p(b,d))};ma.style=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d="");for(f in b)this.each(y(f,
b[f],d));return this}if(2>a)return a=this.node(),c(a).getComputedStyle(a,null).getPropertyValue(b);f=""}return this.each(y(b,d,f))};ma.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(W(d,b[d]));return this}return this.each(W(b,d))};ma.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=
b}):this.node().textContent};ma.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};ma.append=function(b){b=Z(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};ma.insert=function(b,d){b=Z(b);d=q(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,
arguments)||null)})};ma.remove=function(){return this.each(A)};ma.data=function(b,d){function f(b,f){var a,c=b.length,k=f.length,e=Math.min(c,k),m=Array(k),g=Array(k),v=Array(c),p,y;if(d){var e=new t,n=Array(c),r;for(a=-1;++a<c;)if(p=b[a])e.has(r=d.call(p,p.__data__,a))?v[a]=p:e.set(r,p),n[a]=r;for(a=-1;++a<k;)(p=e.get(r=d.call(f,y=f[a],a)))?!0!==p&&(m[a]=p,p.__data__=y):g[a]={__data__:y},e.set(r,!0);for(a=-1;++a<c;)a in n&&!0!==e.get(n[a])&&(v[a]=b[a])}else{for(a=-1;++a<e;)p=b[a],y=f[a],p?(p.__data__=
y,m[a]=p):g[a]={__data__:y};for(;a<k;++a)g[a]={__data__:f[a]};for(;a<c;++a)v[a]=b[a]}g.update=m;g.parentNode=m.parentNode=v.parentNode=b.parentNode;h.push(g);l.push(m);q.push(v)}var a=-1,c=this.length,e,g;if(!arguments.length){for(b=Array(c=(e=this[0]).length);++a<c;)if(g=e[a])b[a]=g.__data__;return b}var h=da([]),l=N([]),q=N([]);if("function"===typeof b)for(;++a<c;)f(e=this[a],b.call(e,e.parentNode.__data__,a));else for(;++a<c;)f(e=this[a],b);l.enter=function(){return h};l.exit=function(){return q};
return l};ma.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};ma.filter=function(b){var d=[],f,a,c;"function"!==typeof b&&(b=T(b));for(var e=0,g=this.length;e<g;e++){d.push(f=[]);f.parentNode=(a=this[e]).parentNode;for(var h=0,l=a.length;h<l;h++)(c=a[h])&&b.call(c,c.__data__,h,e)&&f.push(c)}return N(d)};ma.order=function(){for(var b=-1,d=this.length;++b<d;)for(var f=this[b],a=f.length-1,c=f[a],e;0<=--a;)if(e=f[a])c&&c!==e.nextSibling&&c.parentNode.insertBefore(e,
c),c=e;return this};ma.sort=function(b){b=V.apply(this,arguments);for(var d=-1,f=this.length;++d<f;)this[d].sort(b);return this.order()};ma.each=function(b){return la(this,function(d,f,a){b.call(d,d.__data__,f,a)})};ma.call=function(b){var d=Qa(arguments);b.apply(d[0]=this,d);return this};ma.empty=function(){return!this.node()};ma.node=function(){for(var b=0,d=this.length;b<d;b++)for(var f=this[b],a=0,c=f.length;a<c;a++){var e=f[a];if(e)return e}return null};ma.size=function(){var b=0;la(this,function(){++b});
return b};var Ta=[];x.selection.enter=da;x.selection.enter.prototype=Ta;Ta.append=ma.append;Ta.empty=ma.empty;Ta.node=ma.node;Ta.call=ma.call;Ta.size=ma.size;Ta.select=function(b){for(var d=[],f,a,c,e,g,h=-1,l=this.length;++h<l;){c=(e=this[h]).update;d.push(f=[]);f.parentNode=e.parentNode;for(var q=-1,p=e.length;++q<p;)(g=e[q])?(f.push(c[q]=a=b.call(e.parentNode,g.__data__,q,h)),a.__data__=g.__data__):f.push(null)}return N(d)};Ta.insert=function(b,d){2>arguments.length&&(d=ua(this));return ma.insert.call(this,
b,d)};x.select=function(b){var d;"string"===typeof b?(d=[Rc(b,Ea)],d.parentNode=Ea.documentElement):(d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement);return N([d])};x.selectAll=function(b){"string"===typeof b?(b=Qa(Sc(b,Ea)),b.parentNode=Ea.documentElement):(b=Qa(b),b.parentNode=null);return N([b])};ma.on=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d=!1);for(f in b)this.each(fa(f,b[f],d));return this}if(2>a)return(a=this.node()["__on"+b])&&a._;
f=!1}return this.each(fa(b,d,f))};var Tc=x.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ea&&Tc.forEach(function(b){"on"+b in Ea&&Tc.remove(b)});var eb,pg=0;x.mouse=function(b){return ha(b,P())};var Uc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;x.touch=function(b,d,f){3>arguments.length&&(f=d,d=P().changedTouches);if(d)for(var a=0,c=d.length,e;a<c;++a)if((e=d[a]).identifier===f)return ha(b,e)};x.behavior.drag=function(){function b(){this.on("mousedown.drag",e).on("touchstart.drag",
g)}function d(b,d,c,k,e){return function(){var m=x.event.target.correspondingElement||x.event.target,g=this.parentNode,h=f.of(this,arguments),v=0,l=b(),q=".drag"+(null==l?"":"-"+l),p,y=x.select(c(m)).on(k+q,function(){var b=d(g,l),f,a;b&&(f=b[0]-r[0],a=b[1]-r[1],v|=f|a,r=b,h({type:"drag",x:b[0]+p[0],y:b[1]+p[1],dx:f,dy:a}))}).on(e+q,function(){d(g,l)&&(y.on(k+q,null).on(e+q,null),n(v),h({type:"dragend"}))}),n=oa(m),r=d(g,l);a?(p=a.apply(this,arguments),p=[p.x-r[0],p.y-r[1]]):p=[0,0];h({type:"dragstart"})}}
var f=R(b,"drag","dragstart","dragend"),a=null,e=d(K,x.mouse,c,"mousemove","mouseup"),g=d(ja,x.touch,E,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return a;a=d;return b};return x.rebind(b,f,"on")};x.touches=function(b,d){2>arguments.length&&(d=P().touches);return d?Qa(d).map(function(d){var f=ha(b,d);f.identifier=d.identifier;return f}):[]};var ba=Math.PI,Ka=2*ba,ji=Ka-1E-6,wa=ba/2,ca=ba/180,ta=180/ba,Sb=Math.SQRT2;x.interpolateZoom=function(b,d){var f=b[0],a=b[1],c=b[2],e=d[2],
g=d[0]-f,h=d[1]-a,l=g*g+h*h,q,p;if(1E-12>l)p=Math.log(e/c)/Sb,q=function(b){return[f+b*g,a+b*h,c*Math.exp(Sb*b*p)]};else{var y=Math.sqrt(l);q=(e*e-c*c+4*l)/(4*c*y);var e=(e*e-c*c-4*l)/(4*e*y),n=Math.log(Math.sqrt(q*q+1)-q);p=(Math.log(Math.sqrt(e*e+1)-e)-n)/Sb;q=function(b){b*=p;var d=Ha(n),k=c/(2*y),e,m=Sb*b+n;e=((m=Math.exp(2*m))-1)/(m+1);var v=n,m=((v=Math.exp(v))-1/v)/2,k=k*(d*e-m);return[f+k*g,a+k*h,c*d/Ha(Sb*b+n)]}}q.duration=1E3*p;return q};x.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",
p).on(Qd+".zoom",n).on("dblclick.zoom",r).on("touchstart.zoom",y)}function d(b){return[(b[0]-A.x)/A.k,(b[1]-A.y)/A.k]}function f(b){A.k=Math.max(u[0],Math.min(u[1],b))}function a(b,d){d=[d[0]*A.k+A.x,d[1]*A.k+A.y];A.x+=b[0]-d[0];A.y+=b[1]-d[1]}function e(d,c,k,e){d.__chart__={x:A.x,y:A.y,k:A.k};f(Math.pow(2,e));a(H=c,k);d=x.select(d);0<V&&(d=d.transition().duration(V));d.call(b.event)}function g(){J&&J.domain(B.range().map(function(b){return(b-A.x)/A.k}).map(B.invert));O&&O.domain(Z.range().map(function(b){return(b-
A.y)/A.k}).map(Z.invert))}function h(b){T++||b({type:"zoomstart"})}function l(b){g();b({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function q(b){--T||(b({type:"zoomend"}),H=null)}function p(){var b=this,f=E.of(b,arguments),k=0,e=x.select(c(b)).on("mousemove.zoom",function(){k=1;a(x.mouse(b),m);l(f)}).on("mouseup.zoom",function(){e.on("mousemove.zoom",null).on("mouseup.zoom",null);g(k);q(f)}),m=d(x.mouse(b)),g=oa(b);Cc.call(b);h(f)}function y(){function b(){var b=x.touches(g);Q=A.k;b.forEach(function(b){b.identifier in
n&&(n[b.identifier]=d(b))});return b}function c(){var d=x.event.target;x.select(d).on(t,k).on(w,m);S.push(d);for(var d=x.event.changedTouches,f=0,a=d.length;f<a;++f)n[d[f].identifier]=null;f=b();a=Date.now();1===f.length?(500>a-z&&(d=f[0],e(g,d,n[d.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),U()),z=a):1<f.length&&(d=f[0],a=f[1],f=d[0]-a[0],d=d[1]-a[1],r=f*f+d*d)}function k(){var b=x.touches(g),d,c,k,e;Cc.call(g);for(var m=0,h=b.length;m<h;++m,e=null)if(k=b[m],e=n[k.identifier]){if(c)break;d=
k;c=e}if(e){var q=(q=k[0]-d[0])*q+(q=k[1]-d[1])*q,b=r&&Math.sqrt(q/r);d=[(d[0]+k[0])/2,(d[1]+k[1])/2];c=[(c[0]+e[0])/2,(c[1]+e[1])/2];f(b*Q)}z=null;a(d,c);l(v)}function m(){if(x.event.touches.length){for(var d=x.event.changedTouches,f=0,a=d.length;f<a;++f)delete n[d[f].identifier];for(var c in n)return void b()}x.selectAll(S).on(H,null);Y.on("mousedown.zoom",p).on("touchstart.zoom",y);u();q(v)}var g=this,v=E.of(g,arguments),n={},r=0,Q,H=".zoom-"+x.event.changedTouches[0].identifier,t="touchmove"+
H,w="touchend"+H,S=[],Y=x.select(g),u=oa(g);c();h(v);Y.on("mousedown.zoom",null).on("touchstart.zoom",c)}function n(){var b=E.of(this,arguments);G?clearTimeout(G):(Cc.call(this),t=d(H=w||x.mouse(this)),h(b));G=setTimeout(function(){G=null;q(b)},50);U();f(Math.pow(2,.002*Dc())*A.k);a(H,t);l(b)}function r(){var b=x.mouse(this),f=Math.log(A.k)/Math.LN2;e(this,b,d(b),x.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)}var A={x:0,y:0,k:1},t,H,w,S=[960,500],u=Yf,V=250,T=0,G,z,E=R(b,"zoomstart","zoom","zoomend"),
B,J,Z,O;Qd||(Qd="onwheel"in Ea?(Dc=function(){return-x.event.deltaY*(x.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ea?(Dc=function(){return x.event.wheelDelta},"mousewheel"):(Dc=function(){return-x.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=E.of(this,arguments),d=A;ob?x.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1};h(b)}).tween("zoom:zoom",function(){var f=S[0],a=S[1],c=H?H[0]:f/2,k=H?H[1]:a/2,e=x.interpolateZoom([(c-
A.x)/A.k,(k-A.y)/A.k,f/A.k],[(c-d.x)/d.k,(k-d.y)/d.k,f/d.k]);return function(d){d=e(d);var a=f/d[2];this.__chart__=A={x:c-d[0]*a,y:k-d[1]*a,k:a};l(b)}}).each("interrupt.zoom",function(){q(b)}).each("end.zoom",function(){q(b)}):(this.__chart__=A,h(b),l(b),q(b))})};b.translate=function(d){if(!arguments.length)return[A.x,A.y];A={x:+d[0],y:+d[1],k:A.k};g();return b};b.scale=function(d){if(!arguments.length)return A.k;A={x:A.x,y:A.y,k:null};f(+d);g();return b};b.scaleExtent=function(d){if(!arguments.length)return u;
u=null==d?Yf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return w;w=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return S;S=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return V;V=+d;return b};b.x=function(d){if(!arguments.length)return J;J=d;B=d.copy();A={x:0,y:0,k:1};return b};b.y=function(d){if(!arguments.length)return O;O=d;Z=d.copy();A={x:0,y:0,k:1};return b};return x.rebind(b,E,"on")};var Yf=[0,Infinity],Dc,Qd;x.color=sa;
sa.prototype.toString=function(){return this.rgb()+""};x.hsl=za;var Rd=za.prototype=new sa;Rd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new za(this.h,this.s,this.l/b)};Rd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new za(this.h,this.s,b*this.l)};Rd.rgb=function(){return Ma(this.h,this.s,this.l)};x.hcl=ra;var Sd=ra.prototype=new sa;Sd.brighter=function(b){return new ra(this.h,this.c,Math.min(100,this.l+Ec*(arguments.length?b:1)))};Sd.darker=function(b){return new ra(this.h,
this.c,Math.max(0,this.l-Ec*(arguments.length?b:1)))};Sd.rgb=function(){return va(this.h,this.c,this.l).rgb()};x.lab=Ca;var Ec=18,de=.95047,ee=1,fe=1.08883,Td=Ca.prototype=new sa;Td.brighter=function(b){return new Ca(Math.min(100,this.l+Ec*(arguments.length?b:1)),this.a,this.b)};Td.darker=function(b){return new Ca(Math.max(0,this.l-Ec*(arguments.length?b:1)),this.a,this.b)};Td.rgb=function(){return Db(this.l,this.a,this.b)};x.rgb=Fa;var Fc=Fa.prototype=new sa;Fc.brighter=function(b){b=Math.pow(.7,
arguments.length?b:1);var d=this.r,f=this.g,a=this.b;if(!d&&!f&&!a)return new Fa(30,30,30);d&&30>d&&(d=30);f&&30>f&&(f=30);a&&30>a&&(a=30);return new Fa(Math.min(255,d/b),Math.min(255,f/b),Math.min(255,a/b))};Fc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Fa(b*this.r,b*this.g,b*this.b)};Fc.hsl=function(){return ae(this.r,this.g,this.b)};Fc.toString=function(){return"#"+pb(this.r)+pb(this.g)+pb(this.b)};var Wb=x.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wb.forEach(function(b,d){Wb.set(b,new Fa(d>>16,d>>8&255,d&255))});x.functor=pa;x.xhr=$c(E);x.dsv=function(b,d){function f(b,f,k){3>arguments.length&&(k=f,f=null);var e=Xb(b,d,null==f?a:c(f),k);e.row=function(b){return arguments.length?e.response(null==(f=b)?a:c(b)):f};return e}function a(b){return f.parse(b.responseText)}function c(b){return function(d){return f.parse(d.responseText,b)}}function e(d){return d.map(g).join(b)}
function g(b){return h.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var h=new RegExp('["'+b+"\n]"),l=b.charCodeAt(0);f.parse=function(b,d){var a;return f.parseRows(b,function(b,f){if(a)return a(b,f-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");a=d?function(b,f){return d(c(b),f)}:c})};f.parseRows=function(b,d){function f(){if(m>=e)return c;if(v)return v=!1,a;var d=m;if(34===b.charCodeAt(d)){for(var f=d;f++<e;)if(34===b.charCodeAt(f)){if(34!==
b.charCodeAt(f+1))break;++f}m=f+2;var k=b.charCodeAt(f+1);13===k?(v=!0,10===b.charCodeAt(f+2)&&++m):10===k&&(v=!0);return b.slice(d+1,f).replace(/""/g,'"')}for(;m<e;){k=b.charCodeAt(m++);f=1;if(10===k)v=!0;else if(13===k)v=!0,10===b.charCodeAt(m)&&(++m,++f);else if(k!==l)continue;return b.slice(d,m-f)}return b.slice(d)}for(var a={},c={},k=[],e=b.length,m=0,g=0,h,v;(h=f())!==c;){for(var q=[];h!==a&&h!==c;)q.push(h),h=f();d&&null==(q=d(q,g++))||k.push(q)}return k};f.format=function(d){if(Array.isArray(d[0]))return f.formatRows(d);
var a=new B,c=[];d.forEach(function(b){for(var d in b)a.has(d)||c.push(a.add(d))});return[c.map(g).join(b)].concat(d.map(function(d){return c.map(function(b){return g(d[b])}).join(b)})).join("\n")};f.formatRows=function(b){return b.map(e).join("\n")};return f};x.csv=x.dsv(",","text/csv");x.tsv=x.dsv("\t","text/tab-separated-values");var $b,Zb,ac,bc,ge=this[M(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};x.timer=function(){Yb.apply(this,arguments)};x.timer.flush=function(){he();ie()};
x.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var f=Math.pow(10,3*ea(8-d));return{scale:8<d?function(b){return b/f}:function(b){return b*f},symbol:b}});x.formatPrefix=function(b,d){var f=0;if(b=+b)0>b&&(b*=-1),d&&(b=x.round(b,bd(b,d))),f=1+Math.floor(1E-12+Math.log(b)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3)));return ki[8+f/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
sg=x.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=x.round(b,bd(b,d))).toFixed(Math.max(0,Math.min(20,bd(b*(1+1E-15),d))))}}),X=x.time={},Da=Date;Ua.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xa.setUTCDate.apply(this._,
arguments)},setDay:function(){Xa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Xa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Xa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xa.setTime.apply(this._,arguments)}};
var Xa=Date.prototype;X.year=fb(function(b){b=X.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});X.years=X.year.range;X.years.utc=X.year.utc.range;X.day=fb(function(b){var d=new Da(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});X.days=X.day.range;X.days.utc=X.day.utc.range;X.dayOfYear=function(b){var d=X.year(b);return Math.floor((b-
d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var f=X[b]=fb(function(b){(b=X.day(b)).setDate(b.getDate()-(b.getDay()+d)%7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var f=X.year(b).getDay();return Math.floor((X.dayOfYear(b)+(f+d)%7)/7)-(f!==d)});X[b+"s"]=f.range;X[b+"s"].utc=f.utc.range;X[b+"OfYear"]=function(b){var f=X.year(b).getDay();return Math.floor((X.dayOfYear(b)+
(f+d)%7)/7)}});X.week=X.sunday;X.weeks=X.sunday.range;X.weeks.utc=X.sunday.utc.range;X.weekOfYear=X.sundayOfYear;var ke={"-":"",_:" ",0:"0"},xa=/^\s*\d+/,ne=/^%/;x.locale=function(b){return{numberFormat:rg(b),timeFormat:ug(b)}};var Zf=x.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});x.format=Zf.numberFormat;x.geo={};cd.prototype={s:0,t:0,add:function(b){oe(b,this.t,Gc);oe(Gc.s,this.s,this);this.s?this.t+=Gc.t:this.s=Gc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Gc=new cd;x.geo.stream=function(b,d){if(b&&$f.hasOwnProperty(b.type))$f[b.type](b,d);else fc(b,d)};var $f=
{Feature:function(b,d){fc(b.geometry,d)},FeatureCollection:function(b,d){for(var f=b.features,a=-1,c=f.length;++a<c;)fc(f[a].geometry,d)}},pe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)b=f[a],d.point(b[0],b[1],b[2])},LineString:function(b,d){dd(b.coordinates,d,0)},MultiLineString:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)dd(f[a],d,0)},Polygon:function(b,d){qe(b.coordinates,
d)},MultiPolygon:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)qe(f[a],d)},GeometryCollection:function(b,d){for(var f=b.geometries,a=-1,c=f.length;++a<c;)fc(f[a],d)}};x.geo.area=function(b){Hc=0;x.geo.stream(b,Ja);return Hc};var Hc,gb=new cd,Ja={sphere:function(){Hc+=4*ba},point:K,lineStart:K,lineEnd:K,polygonStart:function(){gb.reset();Ja.lineStart=Jg},polygonEnd:function(){var b=2*gb;Hc+=0>b?4*ba+b:b;Ja.lineStart=Ja.lineEnd=Ja.point=K}};x.geo.bounds=function(){function b(b,d){u.push(V=
[p=b,n=b]);d<y&&(y=d);d>r&&(r=d)}function d(d,f){var a=hb([d*ca,f*ca]);if(w){var c=qb(w,a),c=qb([c[1],-c[0],0],c);ic(c);var c=jc(c),k=d-A,e=0<k?1:-1,m=c[0]*ta*e,k=180<ea(k);k^(e*A<m&&m<e*d)?(c=c[1]*ta,c>r&&(r=c)):(m=(m+360)%360-180,k^(e*A<m&&m<e*d))?(c=-c[1]*ta,c<y&&(y=c)):(f<y&&(y=f),f>r&&(r=f));k?d<A?h(p,d)>h(p,n)&&(n=d):h(d,n)>h(p,n)&&(p=d):n>=p?(d<p&&(p=d),d>n&&(n=d)):d>A?h(p,d)>h(p,n)&&(n=d):h(d,n)>h(p,n)&&(p=d)}else b(d,f);w=a;A=d}function f(){T.point=d}function a(){V[0]=p;V[1]=n;T.point=b;
w=null}function c(b,f){if(w){var a=b-A;S+=180<ea(a)?a+(0<a?360:-360):a}else H=b,t=f;Ja.point(b,f);d(b,f)}function e(){Ja.lineStart()}function g(){c(H,t);Ja.lineEnd();1E-6<ea(S)&&(p=-(n=180));V[0]=p;V[1]=n;w=null}function h(b,d){return 0>(d-=b)?d+360:d}function l(b,d){return b[0]-d[0]}function q(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var p,y,n,r,A,H,t,w,S,u,V,T={point:b,lineStart:f,lineEnd:a,polygonStart:function(){T.point=c;T.lineStart=e;T.lineEnd=g;S=0;Ja.polygonStart()},polygonEnd:function(){Ja.polygonEnd();
T.point=b;T.lineStart=f;T.lineEnd=a;0>gb?(p=-(n=180),y=-(r=90)):1E-6<S?r=90:-1E-6>S&&(y=-90);V[0]=p;V[1]=n}};return function(b){r=n=-(p=y=Infinity);u=[];x.geo.stream(b,T);if(b=u.length){u.sort(l);for(var d=1,f=u[0],a,c=[f];d<b;++d)a=u[d],q(a[0],f)||q(a[1],f)?(h(f[0],a[1])>h(f[0],f[1])&&(f[1]=a[1]),h(a[0],f[1])>h(f[0],f[1])&&(f[0]=a[0])):c.push(f=a);var k=-Infinity,e;b=c.length-1;d=0;for(f=c[b];d<=b;f=a,++d)a=c[d],(e=h(f[1],a[0]))>k&&(k=e,p=a[0],n=f[1])}u=V=null;return Infinity===p||Infinity===y?[[NaN,
NaN],[NaN,NaN]]:[[p,y],[n,r]]}}();x.geo.centroid=function(b){Fb=lc=ib=jb=Va=Ya=Za=Ra=rb=sb=$a=0;x.geo.stream(b,Na);b=rb;var d=sb,f=$a,a=b*b+d*d+f*f;return 1E-12>a&&(b=Ya,d=Za,f=Ra,1E-6>lc&&(b=ib,d=jb,f=Va),a=b*b+d*d+f*f,1E-12>a)?[NaN,NaN]:[Math.atan2(d,b)*ta,na(f/Math.sqrt(a))*ta]};var Fb,lc,ib,jb,Va,Ya,Za,Ra,rb,sb,$a,Na={sphere:K,point:fd,lineStart:re,lineEnd:se,polygonStart:function(){Na.lineStart=Kg},polygonEnd:function(){Na.lineStart=re}},Ie=we(Gb,function(b){var d=NaN,f=NaN,a=NaN,c;return{lineStart:function(){b.lineStart();
c=1},point:function(k,e){var m=0<k?ba:-ba,g=ea(k-d);if(1E-6>ea(g-ba))b.point(d,f=0<(f+e)/2?wa:-wa),b.point(a,f),b.lineEnd(),b.lineStart(),b.point(m,f),b.point(k,f),c=0;else if(a!==m&&g>=ba){1E-6>ea(d-a)&&(d-=1E-6*a);1E-6>ea(k-m)&&(k-=1E-6*m);var g=d,h=f,v=k,l,q,p=Math.sin(g-v);f=1E-6<ea(p)?Math.atan((Math.sin(h)*(q=Math.cos(e))*Math.sin(v)-Math.sin(e)*(l=Math.cos(h))*Math.sin(g))/(l*q*p)):(h+e)/2;b.point(a,f);b.lineEnd();b.lineStart();b.point(m,f);c=0}b.point(d=k,f=e);a=m},lineEnd:function(){b.lineEnd();
d=f=NaN},clean:function(){return 2-c}}},function(b,d,f,a){null==b?(f*=wa,a.point(-ba,f),a.point(0,f),a.point(ba,f),a.point(ba,0),a.point(ba,-f),a.point(0,-f),a.point(-ba,-f),a.point(-ba,0),a.point(-ba,f)):1E-6<ea(b[0]-d[0])?(b=b[0]<d[0]?ba:-ba,f=f*b/2,a.point(-b,f),a.point(0,f),a.point(b,f)):a.point(d[0],d[1])},[-ba,-ba/2]);x.geo.clipExtent=function(){var b,d,f,a,c,e,g={stream:function(b){c&&(c.valid=!1);c=e(b);c.valid=!0;return c},extent:function(k){if(!arguments.length)return[[b,d],[f,a]];e=ze(b=
+k[0][0],d=+k[0][1],f=+k[1][0],a=+k[1][1]);c&&(c.valid=!1,c=null);return g}};return g.extent([[0,0],[960,500]])};(x.geo.conicEqualArea=function(){return hd(Ae)}).raw=Ae;x.geo.albers=function(){return x.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};x.geo.albersUsa=function(){function b(b){var d=b[0];b=b[1];c=null;(g(d,b),c)||(h(d,b),c)||l(d,b);return c}var d=x.geo.albers(),f=x.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=x.geo.conicEqualArea().rotate([157,
0]).center([-3,19.9]).parallels([8,18]),c,e={point:function(b,d){c=[b,d]}},g,h,l;b.invert=function(b){var c=d.scale(),k=d.translate(),e=(b[0]-k[0])/c,c=(b[1]-k[1])/c;return(.12<=c&&.234>c&&-.425<=e&&-.214>e?f:.166<=c&&.234>c&&-.214<=e&&-.115>e?a:d).invert(b)};b.stream=function(b){var c=d.stream(b),k=f.stream(b),e=a.stream(b);return{point:function(b,d){c.point(b,d);k.point(b,d);e.point(b,d)},sphere:function(){c.sphere();k.sphere();e.sphere()},lineStart:function(){c.lineStart();k.lineStart();e.lineStart()},
lineEnd:function(){c.lineEnd();k.lineEnd();e.lineEnd()},polygonStart:function(){c.polygonStart();k.polygonStart();e.polygonStart()},polygonEnd:function(){c.polygonEnd();k.polygonEnd();e.polygonEnd()}}};b.precision=function(c){if(!arguments.length)return d.precision();d.precision(c);f.precision(c);a.precision(c);return b};b.scale=function(c){if(!arguments.length)return d.scale();d.scale(c);f.scale(.35*c);a.scale(c);return b.translate(d.translate())};b.translate=function(c){if(!arguments.length)return d.translate();
var k=d.scale(),m=+c[0],v=+c[1];g=d.translate(c).clipExtent([[m-.455*k,v-.238*k],[m+.455*k,v+.238*k]]).stream(e).point;h=f.translate([m-.307*k,v+.201*k]).clipExtent([[m-.425*k+1E-6,v+.12*k+1E-6],[m-.214*k-1E-6,v+.234*k-1E-6]]).stream(e).point;l=a.translate([m-.205*k,v+.212*k]).clipExtent([[m-.214*k+1E-6,v+.166*k+1E-6],[m-.115*k-1E-6,v+.234*k-1E-6]]).stream(e).point;return b};return b.scale(1070)};var Ud,jd,ab={point:K,lineStart:K,lineEnd:K,polygonStart:function(){jd=0;ab.lineStart=Og},polygonEnd:function(){ab.lineStart=
ab.lineEnd=ab.point=K;Ud+=ea(jd/2)}},Ic,Jc,Kc,Lc,li={point:function(b,d){b<Ic&&(Ic=b);b>Kc&&(Kc=b);d<Jc&&(Jc=d);d>Lc&&(Lc=d)},lineStart:K,lineEnd:K,polygonStart:K,polygonEnd:K},Oa={point:kb,lineStart:Ce,lineEnd:De,polygonStart:function(){Oa.lineStart=Qg},polygonEnd:function(){Oa.point=kb;Oa.lineStart=Ce;Oa.lineEnd=De}};x.geo.path=function(){function b(b){b&&("function"===typeof f&&g.pointRadius(+f.apply(this,arguments)),h&&h.valid||(h=e(g)),x.geo.stream(b,h));return g.result()}function d(){h=null;
return b}var f=4.5,a,c,e,g,h;b.area=function(b){Ud=0;x.geo.stream(b,e(ab));return Ud};b.centroid=function(b){ib=jb=Va=Ya=Za=Ra=rb=sb=$a=0;x.geo.stream(b,e(Oa));return $a?[rb/$a,sb/$a]:Ra?[Ya/Ra,Za/Ra]:Va?[ib/Va,jb/Va]:[NaN,NaN]};b.bounds=function(b){Kc=Lc=-(Ic=Jc=Infinity);x.geo.stream(b,e(li));return[[Ic,Jc],[Kc,Lc]]};b.projection=function(b){if(!arguments.length)return a;e=(a=b)?b.stream||Sg(b):E;return d()};b.context=function(b){if(!arguments.length)return c;g=null==(c=b)?new Pg:new Rg(b);"function"!==
typeof f&&g.pointRadius(f);return d()};b.pointRadius=function(d){if(!arguments.length)return f;f="function"===typeof d?d:(g.pointRadius(+d),+d);return b};return b.projection(x.geo.albersUsa()).context(null)};x.geo.transform=function(b){return{stream:function(d){d=new He(d);for(var f in b)d[f]=b[f];return d}}};He.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};x.geo.projection=bb;x.geo.projectionMutator=id;(x.geo.equirectangular=function(){return bb(Hb)}).raw=Hb.invert=Hb;x.geo.rotation=function(b){function d(d){d=b(d[0]*ca,d[1]*ca);return d[0]*=ta,d[1]*=ta,d}b=kd(b[0]%360*ca,b[1]*ca,2<b.length?b[2]*ca:0);d.invert=function(d){d=b.invert(d[0]*ca,d[1]*ca);return d[0]*=ta,d[1]*=ta,d};return d};Je.invert=Hb;x.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,f=kd(-b[0]*
ca,-b[1]*ca,0).invert,a=[];c(null,null,1,{point:function(b,d){a.push(b=f(b,d));b[0]*=ta;b[1]*=ta}});return{type:"Polygon",coordinates:[a]}}var d=[0,0],f,a=6,c;b.origin=function(f){if(!arguments.length)return d;d=f;return b};b.angle=function(d){if(!arguments.length)return f;c=gd((f=+d)*ca,a*ca);return b};b.precision=function(d){if(!arguments.length)return a;c=gd(f*ca,(a=+d)*ca);return b};return b.angle(90)};x.geo.distance=function(b,d){var f=(d[0]-b[0])*ca,a=b[1]*ca,c=d[1]*ca,e=Math.cos(f),g=Math.sin(a),
a=Math.cos(a),h=Math.sin(c),c=Math.cos(c),l;return Math.atan2(Math.sqrt((l=c*Math.sin(f))*l+(l=a*h-g*c*e)*l),g*h+a*c*e)};x.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return x.range(Math.ceil(e/n)*n,c,n).map(t).concat(x.range(Math.ceil(q/r)*r,l,r).map(w)).concat(x.range(Math.ceil(a/p)*p,f,p).filter(function(b){return 1E-6<ea(b%n)}).map(A)).concat(x.range(Math.ceil(h/y)*y,g,y).filter(function(b){return 1E-6<ea(b%r)}).map(H))}var f,a,c,e,g,h,l,q,
p=10,y=p,n=90,r=360,A,H,t,w,S=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[t(e).concat(w(l).slice(1),t(c).reverse().slice(1),w(q).reverse().slice(1))]}};b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[e,q],[c,l]];e=+d[0][0];c=+d[1][0];q=+d[0][1];l=+d[1][1];e>c&&(d=e,e=c,c=d);q>l&&(d=q,q=l,l=d);return b.precision(S)};
b.minorExtent=function(d){if(!arguments.length)return[[a,h],[f,g]];a=+d[0][0];f=+d[1][0];h=+d[0][1];g=+d[1][1];a>f&&(d=a,a=f,f=d);h>g&&(d=h,h=g,g=d);return b.precision(S)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[n,r];n=+d[0];r=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[p,y];p=+d[0];y=+d[1];return b};b.precision=function(d){if(!arguments.length)return S;S=+d;A=Oe(h,g,90);H=Pe(a,
f,S);t=Oe(q,l,90);w=Pe(e,c,S);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};x.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[f||d.apply(this,arguments),c||a.apply(this,arguments)]}}var d=ld,f,a=md,c;b.distance=function(){return x.geo.distance(f||d.apply(this,arguments),c||a.apply(this,arguments))};b.source=function(a){if(!arguments.length)return d;d=a;f="function"===typeof a?null:a;return b};b.target=
function(d){if(!arguments.length)return a;a=d;c="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?b:0};return b};x.geo.interpolate=function(b,d){return Tg(b[0]*ca,b[1]*ca,d[0]*ca,d[1]*ca)};x.geo.length=function(b){Vd=0;x.geo.stream(b,Ab);return Vd};var Vd,Ab={sphere:K,point:K,lineStart:function(){function b(b,c){var k=Math.sin(c*=ca),e=Math.cos(c),m=ea((b*=ca)-d),g=Math.cos(m);Vd+=Math.atan2(Math.sqrt((m=e*Math.sin(m))*m+(m=a*k-f*e*g)*m),f*k+a*e*g);d=b;f=k;a=e}
var d,f,a;Ab.point=function(c,k){d=c*ca;f=Math.sin(k*=ca);a=Math.cos(k);Ab.point=b};Ab.lineEnd=function(){Ab.point=Ab.lineEnd=K}},lineEnd:K,polygonStart:K,polygonEnd:K},ag=Ib(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(x.geo.azimuthalEqualArea=function(){return bb(ag)}).raw=ag;var bg=Ib(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},E);(x.geo.azimuthalEquidistant=function(){return bb(bg)}).raw=bg;(x.geo.conicConformal=function(){return hd(Qe)}).raw=Qe;(x.geo.conicEquidistant=
function(){return hd(Re)}).raw=Re;var cg=Ib(function(b){return 1/b},Math.atan);(x.geo.gnomonic=function(){return bb(cg)}).raw=cg;nc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-wa]};(x.geo.mercator=function(){return Se(nc)}).raw=nc;var dg=Ib(function(){return 1},Math.asin);(x.geo.orthographic=function(){return bb(dg)}).raw=dg;var eg=Ib(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(x.geo.stereographic=function(){return bb(eg)}).raw=eg;nd.invert=function(b,d){return[-d,
2*Math.atan(Math.exp(b))-wa]};(x.geo.transverseMercator=function(){var b=Se(nd),d=b.center,f=b.rotate;b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?f([b[0],b[1],2<b.length?b[2]+90:90]):(b=f(),[b[0],b[1],b[2]-90])};return f([0,0,90])}).raw=nd;x.geom={};x.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=pa(f),c=pa(a),e,k=b.length,m=[],g=[];for(e=0;e<k;e++)m.push([+d.call(this,b[e],e),+c.call(this,b[e],e),e]);m.sort(Ug);for(e=0;e<k;e++)g.push([m[e][0],
-m[e][1]]);var d=Te(m),g=Te(g),c=g[0]===d[0],k=g[g.length-1]===d[d.length-1],h=[];for(e=d.length-1;0<=e;--e)h.push(b[m[d[e]][2]]);for(e=+c;e<g.length-k;++e)h.push(b[m[g[e]][2]]);return h}var f=tb,a=Jb;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(f=b,d):f};d.y=function(b){return arguments.length?(a=b,d):a};return d};x.geom.polygon=function(b){Tb(b,Mc);return b};var Mc=x.geom.polygon.prototype=[];Mc.area=function(){for(var b=-1,d=this.length,f,a=this[d-1],c=0;++b<d;)f=a,
a=this[b],c+=f[1]*a[0]-f[0]*a[1];return.5*c};Mc.centroid=function(b){var d=-1,f=this.length,a=0,c=0,e,g=this[f-1],h;for(arguments.length||(b=-1/(6*this.area()));++d<f;)e=g,g=this[d],h=e[0]*g[1]-g[0]*e[1],a+=(e[0]+g[0])*h,c+=(e[1]+g[1])*h;return[a*b,c*b]};Mc.clip=function(b){for(var d,f=Ue(b),a=-1,c=this.length-Ue(this),e,g,h=this[c-1],l,q,p;++a<c;){d=b.slice();b.length=0;l=this[a];q=d[(g=d.length-f)-1];for(e=-1;++e<g;)p=d[e],od(p,h,l)?(od(q,h,l)||b.push(pd(q,p,h,l)),b.push(p)):od(q,h,l)&&b.push(pd(q,
p,h,l)),q=p;f&&b.push(b[0]);h=l}return b};var xb,lb,vb,We=[],rd,Kb,$e=[];Ye.prototype.prepare=function(){for(var b=this.edges,d=b.length,f;d--;)f=b[d].edge,f.b&&f.a||b.splice(d,1);b.sort(Ze);return b.length};qc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};sd.prototype={insert:function(b,d){var f,a,c;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;f=b}else this._?
(b=bf(this._),d.P=null,d.N=b,b.P=b.L=d,f=b):(d.P=d.N=null,this._=d,f=null);d.L=d.R=null;d.U=f;d.C=!0;for(b=d;f&&f.C;)a=f.U,f===a.L?(c=a.R)&&c.C?(f.C=c.C=!1,a.C=!0,b=a):(b===f.R&&(Mb(this,f),b=f,f=b.U),f.C=!1,a.C=!0,Nb(this,a)):(c=a.L)&&c.C?(f.C=c.C=!1,a.C=!0,b=a):(b===f.L&&(Nb(this,f),b=f,f=b.U),f.C=!1,a.C=!0,Mb(this,a)),f=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,f=b.L,a=b.R,c,e;c=f?a?bf(a):f:a;d?d.L===b?d.L=c:d.R=c:this._=c;f&&a?(e=c.C,c.C=b.C,
c.L=f,f.U=c,c!==a?(d=c.U,c.U=b.U,b=c.R,d.L=b,c.R=a,a.U=c):(c.U=d,d=c,b=c.R)):(e=b.C,b=c);b&&(b.U=d);if(!e)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Mb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Nb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Mb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Nb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Mb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Nb(this,d);b=this._;break}b.C=
!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};x.geom.voronoi=function(b){function d(b){var d=Array(b.length),a=h[0][0],c=h[0][1],e=h[1][0],k=h[1][1];td(f(b),h).cells.forEach(function(f,g){var m=f.edges,h=f.site;(d[g]=m.length?m.map(function(b){b=b.start();return[b.x,b.y]}):h.x>=a&&h.x<=e&&h.y>=c&&h.y<=k?[[a,k],[e,k],[e,c],[a,c]]:[]).point=b[g]});return d}function f(b){return b.map(function(b,d){return{x:1E-6*Math.round(e(b,d)/1E-6),y:1E-6*Math.round(g(b,d)/1E-6),i:d}})}var a=tb,c=Jb,e=a,g=c,h=Nc;if(b)return d(b);
d.links=function(b){return td(f(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})};d.triangles=function(b){var d=[];td(f(b)).cells.forEach(function(f,a){for(var c=f.site,e=f.edges.sort(Ze),k=-1,g=e.length,m,h=e[g-1].edge,h=h.l===c?h.r:h.l;++k<g;)m=h,h=e[k].edge,h=h.l===c?h.r:h.l,a<m.i&&a<h.i&&0>(c.x-h.x)*(m.y-c.y)-(c.x-m.x)*(h.y-c.y)&&d.push([b[a],b[m.i],b[h.i]])});return d};d.x=function(b){return arguments.length?(e=pa(a=b),d):a};d.y=function(b){return arguments.length?
(g=pa(c=b),d):c};d.clipExtent=function(b){if(!arguments.length)return h===Nc?null:h;h=null==b?Nc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):h===Nc?null:h&&h[1]};return d};var Nc=[[-1E6,-1E6],[1E6,1E6]];x.geom.delaunay=function(b){return x.geom.voronoi().triangles(b)};x.geom.quadtree=function(b,d,f,a,c){function e(b){function e(b,d,f,a,c,e,k,g){if(!isNaN(f)&&!isNaN(a))if(b.leaf){var m=b.x,l=b.y;if(null!=m){if(!(.01>ea(m-f)+ea(l-a))){var q=b.point;b.x=b.y=b.point=
null;h(b,q,m,l,c,e,k,g)}h(b,d,f,a,c,e,k,g)}else b.x=f,b.y=a,b.point=d}else h(b,d,f,a,c,e,k,g)}function h(b,d,f,a,c,k,g,m){var h=.5*(c+g),l=.5*(k+m),q=f>=h,v=a>=l,p=v<<1|q;b.leaf=!1;b=b.nodes[p]||(b.nodes[p]=cf());q?c=h:g=h;v?k=l:m=l;e(b,d,f,a,c,k,g,m)}var l,q=pa(k),v=pa(g),p,y,n,r,A,H,t,w;if(null!=d)A=d,H=f,t=a,w=c;else if(t=w=-(A=H=Infinity),p=[],y=[],r=b.length,m)for(n=0;n<r;++n)l=b[n],l.x<A&&(A=l.x),l.y<H&&(H=l.y),l.x>t&&(t=l.x),l.y>w&&(w=l.y),p.push(l.x),y.push(l.y);else for(n=0;n<r;++n){var S=
+q(l=b[n],n);l=+v(l,n);S<A&&(A=S);l<H&&(H=l);S>t&&(t=S);l>w&&(w=l);p.push(S);y.push(l)}S=t-A;l=w-H;S>l?w=H+S:t=A+l;var u=cf();u.add=function(b){e(u,b,+q(b,++n),+v(b,n),A,H,t,w)};u.visit=function(b){Ob(b,u,A,H,t,w)};u.find=function(b){return bh(u,b[0],b[1],A,H,t,w)};n=-1;if(null==d){for(;++n<r;)e(u,b[n],p[n],y[n],A,H,t,w);--n}else b.forEach(u.add);p=y=b=l=null;return u}var k=tb,g=Jb,m;if(m=arguments.length)return k=$g,g=ah,3===m&&(c=f,a=d,f=d=0),e(b);e.x=function(b){return arguments.length?(k=b,e):
k};e.y=function(b){return arguments.length?(g=b,e):g};e.extent=function(b){if(!arguments.length)return null==d?null:[[d,f],[a,c]];null==b?d=f=a=c=null:(d=+b[0][0],f=+b[0][1],a=+b[1][0],c=+b[1][1]);return e};e.size=function(b){if(!arguments.length)return null==d?null:[a-d,c-f];null==b?d=f=a=c=null:(d=f=0,a=+b[0],c=+b[1]);return e};return e};x.interpolateRgb=ud;x.interpolateObject=df;x.interpolateNumber=Wa;x.interpolateString=ef;var vd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wd=new RegExp(vd.source,
"g");x.interpolate=mb;x.interpolators=[function(b,d){var f=typeof d;return("string"===f?Wb.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?ud:ef:d instanceof sa?ud:Array.isArray(d)?rc:"object"===f&&isNaN(d)?df:Wa)(b,d)}];x.interpolateArray=rc;var fg=function(){return E},mi=x.map({linear:fg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return dh},cubic:function(){return eh},sin:function(){return gh},exp:function(){return hh},circle:function(){return ih},elastic:function(b,
d){var f;2>arguments.length&&(d=.45);arguments.length?f=d/Ka*Math.asin(1/b):(b=1,f=d/4);return function(a){return 1+b*Math.pow(2,-10*a)*Math.sin((a-f)*Ka/d)}},back:function(b){b||(b=1.70158);return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return jh}}),ni=x.map({"in":E,out:ff,"in-out":gf,"out-in":function(b){return gf(ff(b))}});x.ease=function(b){var d=b.indexOf("-"),f=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):"in",f=mi.get(f)||fg,d=ni.get(d)||E;return ch(d(f.apply(null,Vf.call(arguments,
1))))};x.interpolateHcl=function(b,d){b=x.hcl(b);d=x.hcl(d);var f=b.h,a=b.c,c=b.l,e=d.h-f,g=d.c-a,h=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.c:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>e&&(e+=360);return function(b){return va(f+e*b,a+g*b,c+h*b)+""}};x.interpolateHsl=function(b,d){b=x.hsl(b);d=x.hsl(d);var f=b.h,a=b.s,c=b.l,e=d.h-f,g=d.s-a,h=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.s:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>e&&(e+=360);return function(b){return Ma(f+e*b,a+g*b,c+h*b)+""}};
x.interpolateLab=function(b,d){b=x.lab(b);d=x.lab(d);var f=b.l,a=b.a,c=b.b,e=d.l-f,g=d.a-a,h=d.b-c;return function(b){return Db(f+e*b,a+g*b,c+h*b)+""}};x.interpolateRound=hf;x.transform=function(b){var d=Ea.createElementNS(x.ns.prefix.svg,"g");return(x.transform=function(b){if(null!=b){d.setAttribute("transform",b);var f=d.transform.baseVal.consolidate()}return new jf(f?f.matrix:oi)})(b)};jf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+
")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};x.interpolateTransform=lf;x.layout={};x.layout.bundle=function(){return function(b){for(var d=[],f=-1,a=b.length;++f<a;)d.push(qh(b[f]));return d}};x.layout.chord=function(){function b(){var b={},f=[],k=x.range(g),m=[],v,y,n,r,A;a=[];c=[];v=0;for(r=-1;++r<g;){y=0;for(A=-1;++A<g;)y+=e[r][A];f.push(y);m.push(x.range(g));v+=y}l&&k.sort(function(b,d){return l(f[b],f[d])});q&&m.forEach(function(b,d){b.sort(function(b,f){return q(e[d][b],e[d][f])})});
v=(Ka-h*g)/v;y=0;for(r=-1;++r<g;){n=y;for(A=-1;++A<g;){var H=k[r],t=m[H][A],w=e[H][t],S=y,u=y+=w*v;b[H+"-"+t]={index:H,subindex:t,startAngle:S,endAngle:u,value:w}}c[H]={index:H,startAngle:n,endAngle:y,value:f[H]};y+=h}for(r=-1;++r<g;)for(A=r-1;++A<g;)k=b[r+"-"+A],m=b[A+"-"+r],(k.value||m.value)&&a.push(k.value<m.value?{source:m,target:k}:{source:k,target:m});p&&d()}function d(){a.sort(function(b,d){return p((b.source.value+b.target.value)/2,(d.source.value+d.target.value)/2)})}var f={},a,c,e,g,h=
0,l,q,p;f.matrix=function(b){if(!arguments.length)return e;g=(e=b)&&e.length;a=c=null;return f};f.padding=function(b){if(!arguments.length)return h;h=b;a=c=null;return f};f.sortGroups=function(b){if(!arguments.length)return l;l=b;a=c=null;return f};f.sortSubgroups=function(b){if(!arguments.length)return q;q=b;a=null;return f};f.sortChords=function(b){if(!arguments.length)return p;p=b;a&&d();return f};f.chords=function(){a||b();return a};f.groups=function(){c||b();return c};return f};x.layout.force=
function(){function b(b){return function(d,f,a,c){if(d.point!==b){a=d.cx-b.x;var e=d.cy-b.y;f=c-f;c=a*a+e*e;if(f*f/A<c)return c<n&&(f=d.charge/c,b.px-=a*f,b.py-=e*f),!0;d.point&&c&&c<n&&(f=d.pointCharge/c,b.px-=a*f,b.py-=e*f)}return!d.charge}}function d(b){b.px=x.event.x;b.py=x.event.y;f.resume()}var f={},a=x.dispatch("start","tick","end"),c,e=[1,1],g,h,l=.9,q=pi,p=qi,y=-30,n=ri,r=.1,A=.64,H=[],t=[],w,S,u;f.tick=function(){if(.005>(h*=.99))return c=null,a.end({type:"end",alpha:h=0}),!0;var d=H.length,
f=t.length,k,g,m,q,p,v,n;for(k=0;k<f;++k)if(g=t[k],m=g.source,q=g.target,v=q.x-m.x,n=q.y-m.y,p=v*v+n*n)p=h*S[k]*((p=Math.sqrt(p))-w[k])/p,v*=p,n*=p,q.x-=v*(p=m.weight+q.weight?m.weight/(m.weight+q.weight):.5),q.y-=n*p,m.x+=v*(p=1-p),m.y+=n*p;if(p=h*r)if(v=e[0]/2,n=e[1]/2,k=-1,p)for(;++k<d;)g=H[k],g.x+=(v-g.x)*p,g.y+=(n-g.y)*p;if(y)for(nf(f=x.geom.quadtree(H),h,u),k=-1;++k<d;)(g=H[k]).fixed||f.visit(b(g));for(k=-1;++k<d;)g=H[k],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*l,g.y-=(g.py-(g.py=
g.y))*l);a.tick({type:"tick",alpha:h})};f.nodes=function(b){if(!arguments.length)return H;H=b;return f};f.links=function(b){if(!arguments.length)return t;t=b;return f};f.size=function(b){if(!arguments.length)return e;e=b;return f};f.linkDistance=function(b){if(!arguments.length)return q;q="function"===typeof b?b:+b;return f};f.distance=f.linkDistance;f.linkStrength=function(b){if(!arguments.length)return p;p="function"===typeof b?b:+b;return f};f.friction=function(b){if(!arguments.length)return l;
l=+b;return f};f.charge=function(b){if(!arguments.length)return y;y="function"===typeof b?b:+b;return f};f.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(n);n=b*b;return f};f.gravity=function(b){if(!arguments.length)return r;r=+b;return f};f.theta=function(b){if(!arguments.length)return Math.sqrt(A);A=b*b;return f};f.alpha=function(b){if(!arguments.length)return h;b=+b;h?0<b?h=b:(c.c=null,c.t=NaN,c=null,a.end({type:"end",alpha:h=0})):0<b&&(a.start({type:"start",alpha:h=b}),c=Yb(f.tick));
return f};f.start=function(){function b(b,f){if(!m){m=Array(a);for(k=0;k<a;++k)m[k]=[];for(k=0;k<c;++k){var e=t[k];m[e.source.index].push(e.target);m[e.target.index].push(e.source)}}for(var e=m[d],k=-1,g=e.length,h;++k<g;)if(!isNaN(h=e[k][b]))return h;return Math.random()*f}var d,a=H.length,c=t.length,k=e[0],g=e[1],m,h;for(d=0;d<a;++d)(h=H[d]).index=d,h.weight=0;for(d=0;d<c;++d)h=t[d],"number"==typeof h.source&&(h.source=H[h.source]),"number"==typeof h.target&&(h.target=H[h.target]),++h.source.weight,
++h.target.weight;for(d=0;d<a;++d)h=H[d],isNaN(h.x)&&(h.x=b("x",k)),isNaN(h.y)&&(h.y=b("y",g)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);w=[];if("function"===typeof q)for(d=0;d<c;++d)w[d]=+q.call(this,t[d],d);else for(d=0;d<c;++d)w[d]=q;S=[];if("function"===typeof p)for(d=0;d<c;++d)S[d]=+p.call(this,t[d],d);else for(d=0;d<c;++d)S[d]=p;u=[];if("function"===typeof y)for(d=0;d<a;++d)u[d]=+y.call(this,H[d],d);else for(d=0;d<a;++d)u[d]=y;return f.resume()};f.resume=function(){return f.alpha(.1)};
f.stop=function(){return f.alpha(0)};f.drag=function(){g||(g=x.behavior.drag().origin(E).on("dragstart.force",rh).on("drag.force",d).on("dragend.force",sh));if(!arguments.length)return g;this.on("mouseover.force",th).on("mouseout.force",uh).call(g)};return x.rebind(f,a,"on")};var pi=20,qi=1,ri=Infinity;x.layout.hierarchy=function(){function b(c){var e=[c],k=[],g;for(c.depth=0;null!=(g=e.pop());)if(k.push(g),(h=f.call(b,g,g.depth))&&(m=h.length)){for(var m,h,l;0<=--m;)e.push(l=h[m]),l.parent=g,l.depth=
g.depth+1;a&&(g.value=0);g.children=h}else a&&(g.value=+a.call(b,g,g.depth)||0),delete g.children;Sa(c,function(b){var f,c;d&&(f=b.children)&&f.sort(d);a&&(c=b.parent)&&(c.value+=b.value)});return k}var d=yh,f=wh,a=xh;b.sort=function(f){if(!arguments.length)return d;d=f;return b};b.children=function(d){if(!arguments.length)return f;f=d;return b};b.value=function(d){if(!arguments.length)return a;a=d;return b};b.revalue=function(d){a&&(Qb(d,function(b){b.children&&(b.value=0)}),Sa(d,function(d){var f;
d.children||(d.value=+a.call(b,d,d.depth)||0);if(f=d.parent)f.value+=d.value}));return d};return b};x.layout.partition=function(){function b(d,f,a,c){var e=d.children;d.x=f;d.y=d.depth*c;d.dx=a;d.dy=c;if(e&&(g=e.length)){var k=-1,g,m;for(a=d.value?a/d.value:0;++k<g;)b(m=e[k],f,d=m.value*a,c),f+=d}}function d(b){b=b.children;var f=0;if(b&&(c=b.length))for(var a=-1,c;++a<c;)f=Math.max(f,d(b[a]));return 1+f}function f(f,e){var k=a.call(this,f,e);b(k[0],0,c[0],c[1]/d(k[0]));return k}var a=x.layout.hierarchy(),
c=[1,1];f.size=function(b){if(!arguments.length)return c;c=b;return f};return Pb(f,a)};x.layout.pie=function(){function b(k){var g=k.length,m=k.map(function(f,a){return+d.call(b,f,a)}),h=+("function"===typeof a?a.apply(this,arguments):a),l=("function"===typeof c?c.apply(this,arguments):c)-h,q=Math.min(Math.abs(l)/g,+("function"===typeof e?e.apply(this,arguments):e)),p=q*(0>l?-1:1),v=x.sum(m),y=v?(l-g*p)/v:0,g=x.range(g),n=[],r;null!=f&&g.sort(f===gg?function(b,d){return m[d]-m[b]}:function(b,d){return f(k[b],
k[d])});g.forEach(function(b){n[b]={data:k[b],value:r=m[b],startAngle:h,endAngle:h+=r*y+p,padAngle:q}});return n}var d=Number,f=gg,a=0,c=Ka,e=0;b.value=function(f){if(!arguments.length)return d;d=f;return b};b.sort=function(d){if(!arguments.length)return f;f=d;return b};b.startAngle=function(d){if(!arguments.length)return a;a=d;return b};b.endAngle=function(d){if(!arguments.length)return c;c=d;return b};b.padAngle=function(d){if(!arguments.length)return e;e=d;return b};return b};var gg={};x.layout.stack=
function(){function b(k,m){if(!(y=k.length))return k;var h=k.map(function(f,a){return d.call(b,f,a)}),l=h.map(function(d){return d.map(function(d,f){return[e.call(b,d,f),g.call(b,d,f)]})}),q=f.call(b,l,m),h=x.permute(h,q),l=x.permute(l,q),q=a.call(b,l,m),p=h[0].length,y,n,v,r;for(v=0;v<p;++v)for(c.call(b,h[0][v],r=q[v],l[0][v][1]),n=1;n<y;++n)c.call(b,h[n][v],r+=l[n-1][v][1],l[n][v][1]);return k}var d=E,f=xd,a=yd,c=Bh,e=zh,g=Ah;b.values=function(f){if(!arguments.length)return d;d=f;return b};b.order=
function(d){if(!arguments.length)return f;f="function"===typeof d?d:si.get(d)||xd;return b};b.offset=function(d){if(!arguments.length)return a;a="function"===typeof d?d:ti.get(d)||yd;return b};b.x=function(d){if(!arguments.length)return e;e=d;return b};b.y=function(d){if(!arguments.length)return g;g=d;return b};b.out=function(d){if(!arguments.length)return c;c=d;return b};return b};var si=x.map({"inside-out":function(b){var d=b.length,f,a=b.map(Ch),c=b.map(Dh),e=x.range(d).sort(function(b,d){return a[b]-
a[d]}),g=0,h=0,l=[],q=[];for(b=0;b<d;++b)f=e[b],g<h?(g+=c[f],l.push(f)):(h+=c[f],q.push(f));return q.reverse().concat(l)},reverse:function(b){return x.range(b.length).reverse()},"default":xd}),ti=x.map({silhouette:function(b){var d=b.length,f=b[0].length,a=[],c=0,e,g,h,l=[];for(g=0;g<f;++g){for(h=e=0;e<d;e++)h+=b[e][g][1];h>c&&(c=h);a.push(h)}for(g=0;g<f;++g)l[g]=(c-a[g])/2;return l},wiggle:function(b){var d=b.length,f=b[0],a=f.length,c,e,g,h,l,q,p,n,y,r=[];r[0]=n=y=0;for(e=1;e<a;++e){for(h=c=0;c<
d;++c)h+=b[c][e][1];l=c=0;for(p=f[e][0]-f[e-1][0];c<d;++c){g=0;for(q=(b[c][e][1]-b[c][e-1][1])/(2*p);g<c;++g)q+=(b[g][e][1]-b[g][e-1][1])/p;l+=q*b[c][e][1]}r[e]=n-=h?l/h*p:0;n<y&&(y=n)}for(e=0;e<a;++e)r[e]-=y;return r},expand:function(b){var d=b.length,f=b[0].length,a=1/d,c,e,g,h=[];for(e=0;e<f;++e){for(g=c=0;c<d;c++)g+=b[c][e][1];if(g)for(c=0;c<d;c++)b[c][e][1]/=g;else for(c=0;c<d;c++)b[c][e][1]=a}for(e=0;e<f;++e)h[e]=0;return h},zero:yd});x.layout.histogram=function(){function b(b,e){var k=[],g=
b.map(f,this),h=a.call(this,g,e),m=c.call(this,h,g,e),l;e=-1;for(var q=g.length,p=m.length-1,n=d?1:1/q;++e<p;)l=k[e]=[],l.dx=m[e+1]-(l.x=m[e]),l.y=0;if(0<p)for(e=-1;++e<q;)l=g[e],l>=h[0]&&l<=h[1]&&(l=k[x.bisect(m,l,1,p)-1],l.y+=n,l.push(b[e]));return k}var d=!0,f=Number,a=Gh,c=Fh;b.value=function(d){if(!arguments.length)return f;f=d;return b};b.range=function(d){if(!arguments.length)return a;a=pa(d);return b};b.bins=function(d){if(!arguments.length)return c;c="number"===typeof d?function(b){return of(b,
d)}:pa(d);return b};b.frequency=function(f){if(!arguments.length)return d;d=!!f;return b};return b};x.layout.pack=function(){function b(b,e){var k=d.call(this,b,e),g=k[0],h=a[0],m=a[1],l=null==c?Math.sqrt:"function"===typeof c?c:function(){return c};g.x=g.y=0;Sa(g,function(b){b.r=+l(b.value)});Sa(g,rf);if(f){var q=f*(c?1:Math.max(2*g.r/h,2*g.r/m))/2;Sa(g,function(b){b.r+=q});Sa(g,rf);Sa(g,function(b){b.r-=q})}tf(g,h/2,m/2,c?1:1/Math.max(2*g.r/h,2*g.r/m));return k}var d=x.layout.hierarchy().sort(Hh),
f=0,a=[1,1],c;b.size=function(d){if(!arguments.length)return a;a=d;return b};b.radius=function(d){if(!arguments.length)return c;c=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return f;f=+d;return b};return Pb(b,d)};x.layout.tree=function(){function b(b,k){var m=e.call(this,b,k),q=m[0],p=d(q);Sa(p,f);p.parent.m=-p.z;Qb(p,a);if(l)Qb(q,c);else{var n=q,y=q,r=q;Qb(q,function(b){b.x<n.x&&(n=b);b.x>y.x&&(y=b);b.depth>r.depth&&(r=b)});var A=g(n,y)/2-n.x,v=h[0]/
(y.x+g(y,n)/2+A),H=h[1]/(r.depth||1);Qb(q,function(b){b.x=(b.x+A)*v;b.y=b.depth*H})}return m}function d(b){b={A:null,children:[b]};for(var d=[b],f;null!=(f=d.pop());)for(var a=f.children,c,e=0,k=a.length;e<k;++e)d.push((a[e]=c={_:a[e],parent:f,children:(c=a[e].children)&&c.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=c);return b.children[0]}function f(b){var d=b.children,f=b.parent.children,a=b.i?f[b.i-1]:null;if(d.length){for(var c=0,e=0,k=b.children,h=k.length,m;0<=--h;)m=k[h],m.z+=
c,m.m+=c,c+=m.s+(e+=m.c);d=(d[0].z+d[d.length-1].z)/2;a?(b.z=a.z+g(b._,a._),b.m=b.z-d):b.z=d}else a&&(b.z=a.z+g(b._,a._));d=b.parent;f=b.parent.A||f[0];if(a){e=c=b;k=c.parent.children[0];h=c.m;m=e.m;for(var l=a.m,q=k.m,p;a=Bd(a),c=Ad(c),a&&c;){k=Ad(k);e=Bd(e);e.a=b;p=a.z+l-c.z-h+g(a._,c._);if(0<p){var n=a.a.parent===b.parent?a.a:f,y=b,r=p,A=r/(y.i-n.i);y.c-=A;y.s+=r;n.c+=A;y.z+=r;y.m+=r;h+=p;m+=p}l+=a.m;h+=c.m;q+=k.m;m+=e.m}a&&!Bd(e)&&(e.t=a,e.m+=l-m);c&&!Ad(k)&&(k.t=c,k.m+=h-q,f=b)}d.A=f}function a(b){b._.x=
b.z+b.parent.m;b.m+=b.parent.m}function c(b){b.x*=h[0];b.y=b.depth*h[1]}var e=x.layout.hierarchy().sort(null).value(null),g=uf,h=[1,1],l=null;b.separation=function(d){if(!arguments.length)return g;g=d;return b};b.size=function(d){if(!arguments.length)return l?null:h;l=null==(h=d)?c:null;return b};b.nodeSize=function(d){if(!arguments.length)return l?h:null;l=null==(h=d)?null:c;return b};return Pb(b,e)};x.layout.cluster=function(){function b(b,e){var k=d.call(this,b,e),g=k[0],h,m=0;Sa(g,function(b){var d=
b.children;d&&d.length?(b.x=Lh(d),b.y=Kh(d)):(b.x=h?m+=f(b,h):0,b.y=0,h=b)});var l=vf(g),q=wf(g),p=l.x-f(l,q)/2,y=q.x+f(q,l)/2;Sa(g,c?function(b){b.x=(b.x-g.x)*a[0];b.y=(g.y-b.y)*a[1]}:function(b){b.x=(b.x-p)/(y-p)*a[0];b.y=(1-(g.y?b.y/g.y:1))*a[1]});return k}var d=x.layout.hierarchy().sort(null).value(null),f=uf,a=[1,1],c=!1;b.separation=function(d){if(!arguments.length)return f;f=d;return b};b.size=function(d){if(!arguments.length)return c?null:a;c=null==(a=d);return b};b.nodeSize=function(d){if(!arguments.length)return c?
a:null;c=null!=(a=d);return b};return Pb(b,d)};x.layout.treemap=function(){function b(b,d){for(var f=-1,a=b.length,c,e;++f<a;)e=(c=b[f]).value*(0>d?0:d),c.area=isNaN(e)||0>=e?0:e}function d(f){var c=f.children;if(c&&c.length){var e=q(f),k=[],g=c.slice(),h=Infinity,m,l="slice"===n?e.dx:"dice"===n?e.dy:"slice-dice"===n?f.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);b(g,e.dx*e.dy/f.value);for(k.area=0;0<(f=g.length);){k.push(f=g[f-1]);k.area+=f.area;if(!(f="squarify"!==n)){f=l;for(var p=k.area,y=0,A=Infinity,
v=-1,H=k.length;++v<H;)if(m=k[v].area)m<A&&(A=m),m>y&&(y=m);p*=p;f*=f;f=(m=p?Math.max(f*y*r/p,p/(f*A*r)):Infinity)<=h}f?(g.pop(),h=m):(k.area-=k.pop().area,a(k,l,e,!1),l=Math.min(e.dx,e.dy),k.length=k.area=0,h=Infinity)}k.length&&(a(k,l,e,!0),k.length=k.area=0);c.forEach(d)}}function f(d){var c=d.children;if(c&&c.length){var e=q(d),k=c.slice(),g=[];b(k,e.dx*e.dy/d.value);for(g.area=0;d=k.pop();)g.push(d),g.area+=d.area,null!=d.z&&(a(g,d.z?e.dx:e.dy,e,!k.length),g.length=g.area=0);c.forEach(f)}}function a(b,
d,f,a){var c=-1,e=b.length,k=f.x,h=f.y,m=d?g(b.area/d):0,l;if(d==f.dx){if(a||m>f.dy)m=f.dy;for(;++c<e;)l=b[c],l.x=k,l.y=h,l.dy=m,k+=l.dx=Math.min(f.x+f.dx-k,m?g(l.area/m):0);l.z=!0;l.dx+=f.x+f.dx-k;f.y+=m;f.dy-=m}else{if(a||m>f.dx)m=f.dx;for(;++c<e;)l=b[c],l.x=k,l.y=h,l.dx=m,h+=l.dy=Math.min(f.y+f.dy-h,m?g(l.area/m):0);l.z=!1;l.dy+=f.y+f.dy-h;f.x+=m;f.dx-=m}}function c(a){a=y||e(a);var c=a[0];c.x=c.y=0;c.value?(c.dx=h[0],c.dy=h[1]):c.dx=c.dy=0;y&&e.revalue(c);b([c],c.dx*c.dy/c.value);(y?f:d)(c);p&&
(y=a);return a}var e=x.layout.hierarchy(),g=Math.round,h=[1,1],l=null,q=Cd,p=!1,y,n="squarify",r=.5*(1+Math.sqrt(5));c.size=function(b){if(!arguments.length)return h;h=b;return c};c.padding=function(b){function d(d){var f=b.call(c,d,d.depth);return null==f?Cd(d):xf(d,"number"===typeof f?[f,f,f,f]:f)}function f(d){return xf(d,b)}if(!arguments.length)return l;var a;q=null==(l=b)?Cd:"function"===(a=typeof b)?d:"number"===a?(b=[b,b,b,b],f):f;return c};c.round=function(b){if(!arguments.length)return g!=
Number;g=b?Math.round:Number;return c};c.sticky=function(b){if(!arguments.length)return p;p=b;y=null;return c};c.ratio=function(b){if(!arguments.length)return r;r=b;return c};c.mode=function(b){if(!arguments.length)return n;n=b+"";return c};return Pb(c,e)};x.random={normal:function(b,d){var f=arguments.length;2>f&&(d=1);1>f&&(b=0);return function(){var f,a;do f=2*Math.random()-1,a=2*Math.random()-1,a=f*f+a*a;while(!a||1<a);return b+d*f*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var b=x.random.normal.apply(x,
arguments);return function(){return Math.exp(b())}},bates:function(b){var d=x.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,f=0;f<b;f++)d+=Math.random();return d}}};x.scale={};var Nh={floor:E,ceil:E};x.scale.linear=function(){return zf([0,1],[0,1],mb,!1)};var Qh={s:1,g:1,p:1,r:1,e:1};x.scale.log=function(){return Bf(x.scale.linear().domain([0,1]),10,!0,[1,10])};var Cf=x.format(".0e"),Rh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};
x.scale.pow=function(){return Df(x.scale.linear(),1,[0,1])};x.scale.sqrt=function(){return x.scale.pow().exponent(.5)};x.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};x.scale.category10=function(){return x.scale.ordinal().range(ui)};x.scale.category20=function(){return x.scale.ordinal().range(vi)};x.scale.category20b=function(){return x.scale.ordinal().range(wi)};x.scale.category20c=function(){return x.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,
14907330,8355711,12369186,1556175].map(Vb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Vb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Vb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,
10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Vb);x.scale.quantile=function(){return Ff([],[])};x.scale.quantize=function(){return Gf(0,1,[0,1])};x.scale.threshold=function(){return Hf([.5],[0,1])};x.scale.identity=function(){return If([0,1])};x.svg={};x.svg.arc=function(){function b(){var b=Math.max(0,+f.apply(this,arguments)),k=Math.max(0,+a.apply(this,arguments)),m=g.apply(this,arguments)-wa,q=h.apply(this,arguments)-wa,p=Math.abs(q-m),y=m>q?0:1;k<
b&&(n=k,k=b,b=n);if(p>=ji)return d(k,y)+(b?d(b,1-y):"")+"Z";var n,r,A,v,H=0,t=0,w,S,u,V,T,G=[];if(v=(+l.apply(this,arguments)||0)/2)A=e===Oc?Math.sqrt(b*b+k*k):+e.apply(this,arguments),y||(t*=-1),k&&(t=na(A/k*Math.sin(v))),b&&(H=na(A/b*Math.sin(v)));k?(A=k*Math.cos(m+t),v=k*Math.sin(m+t),w=k*Math.cos(q-t),S=k*Math.sin(q-t),r=Math.abs(q-m-2*t)<=ba?0:1,t&&wc(A,v,w,S)===y^r&&(w=(m+q)/2,A=k*Math.cos(w),v=k*Math.sin(w),w=S=null)):A=v=0;if(b){t=b*Math.cos(q-H);u=b*Math.sin(q-H);V=b*Math.cos(m+H);T=b*Math.sin(m+
H);var x=Math.abs(m-q+2*H)<=ba?0:1;H&&wc(t,u,V,T)===1-y^x&&(V=(m+q)/2,t=b*Math.cos(V),u=b*Math.sin(V),V=T=null)}else t=u=0;1E-6<p&&.001<(n=Math.min(Math.abs(k-b)/2,+c.apply(this,arguments)))?(r=b<k^y?0:1,x=m=n,p<ba&&(p=null==V?[t,u]:null==w?[A,v]:pd([A,v],[V,T],[w,S],[t,u]),x=A-p[0],m=v-p[1],q=w-p[0],H=S-p[1],m=1/Math.sin(Math.acos((x*q+m*H)/(Math.sqrt(x*x+m*m)*Math.sqrt(q*q+H*H)))/2),p=Math.sqrt(p[0]*p[0]+p[1]*p[1]),x=Math.min(n,(b-p)/(m-1)),m=Math.min(n,(k-p)/(m+1))),null!=w?(p=xc(null==V?[t,u]:
[V,T],[A,v],k,m,y),q=xc([w,S],[t,u],k,m,y),n===m?G.push("M",p[0],"A",m,",",m," 0 0,",r," ",p[1],"A",k,",",k," 0 ",1-y^wc(p[1][0],p[1][1],q[1][0],q[1][1]),",",y," ",q[1],"A",m,",",m," 0 0,",r," ",q[0]):G.push("M",p[0],"A",m,",",m," 0 1,",r," ",q[0])):G.push("M",A,",",v),null!=V?(k=xc([A,v],[V,T],b,-x,y),w=xc([t,u],null==w?[A,v]:[w,S],b,-x,y),n===x?G.push("L",w[0],"A",x,",",x," 0 0,",r," ",w[1],"A",b,",",b," 0 ",y^wc(w[1][0],w[1][1],k[1][0],k[1][1]),",",1-y," ",k[1],"A",x,",",x," 0 0,",r," ",k[0]):
G.push("L",w[0],"A",x,",",x," 0 0,",r," ",k[0])):G.push("L",t,",",u)):(G.push("M",A,",",v),null!=w&&G.push("A",k,",",k," 0 ",r,",",y," ",w,",",S),G.push("L",t,",",u),null!=V&&G.push("A",b,",",b," 0 ",x,",",1-y," ",V,",",T));G.push("Z");return G.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var f=Th,a=Uh,c=Sh,e=Oc,g=Jf,h=Kf,l=Vh;b.innerRadius=function(d){if(!arguments.length)return f;f=pa(d);return b};b.outerRadius=function(d){if(!arguments.length)return a;
a=pa(d);return b};b.cornerRadius=function(d){if(!arguments.length)return c;c=pa(d);return b};b.padRadius=function(d){if(!arguments.length)return e;e=d==Oc?Oc:pa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=pa(d);return b};b.padAngle=function(d){if(!arguments.length)return l;l=pa(d);return b};b.centroid=function(){var b=(+f.apply(this,arguments)+ +a.apply(this,arguments))/2,d=(+g.apply(this,arguments)+ +h.apply(this,
arguments))/2-wa;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Oc="auto";x.svg.line=function(){return Lf(E)};var Fd=x.map({linear:Pa,"linear-closed":Mf,step:function(b){for(var d=0,f=b.length,a=b[0],c=[a[0],",",a[1]];++d<f;)c.push("H",(a[0]+(a=b[d])[0])/2,"V",a[1]);1<f&&c.push("H",a[0]);return c.join("")},"step-before":Gd,"step-after":Hd,basis:Nf,"basis-open":function(b){if(4>b.length)return Pa(b);for(var d=[],f=-1,a=b.length,c,e=[0],g=[0];3>++f;)c=b[f],e.push(c[0]),g.push(c[1]);d.push(La(db,
e)+","+La(db,g));for(--f;++f<a;)c=b[f],e.shift(),e.push(c[0]),g.shift(),g.push(c[1]),Jd(d,e,g);return d.join("")},"basis-closed":function(b){for(var d,f=-1,a=b.length,c=a+4,e,g=[],h=[];4>++f;)e=b[f%a],g.push(e[0]),h.push(e[1]);d=[La(db,g),",",La(db,h)];for(--f;++f<c;)e=b[f%a],g.shift(),g.push(e[0]),h.shift(),h.push(e[1]),Jd(d,g,h);return d.join("")},bundle:function(b,d){var f=b.length-1;if(f)for(var a=b[0][0],c=b[0][1],e=b[f][0]-a,g=b[f][1]-c,h=-1,l,q;++h<=f;)l=b[h],q=h/f,l[0]=d*l[0]+(1-d)*(a+q*e),
l[1]=d*l[1]+(1-d)*(c+q*g);return Nf(b)},cardinal:function(b,d){return 3>b.length?Pa(b):b[0]+yc(b,Id(b,d))},"cardinal-open":function(b,d){return 4>b.length?Pa(b):b[1]+yc(b.slice(1,-1),Id(b,d))},"cardinal-closed":function(b,d){return 3>b.length?Mf(b):b[0]+yc((b.push(b[0]),b),Id([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Pa(b);else{var d=b[0],f=[],a,c,e,g;a=0;c=b.length-1;var h=[];e=b[1];for(g=h[0]=Kd(b[0],e);++a<c;)h[a]=(g+(g=Kd(e,e=b[a+1])))/2;h[a]=g;for(var l=-1,q=
b.length-1;++l<q;)a=Kd(b[l],b[l+1]),1E-6>ea(a)?h[l]=h[l+1]=0:(c=h[l]/a,e=h[l+1]/a,g=c*c+e*e,9<g&&(g=3*a/Math.sqrt(g),h[l]=g*c,h[l+1]=g*e));for(l=-1;++l<=q;)g=(b[Math.min(q,l+1)][0]-b[Math.max(0,l-1)][0])/(6*(1+h[l]*h[l])),f.push([g||0,h[l]*g||0]);b=d+yc(b,f)}return b}});Fd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],db=[0,1/6,2/3,1/6];x.svg.line.radial=function(){var b=Lf(Qf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Gd.reverse=
Hd;Hd.reverse=Gd;x.svg.area=function(){return Rf(E)};x.svg.area.radial=function(){var b=Rf(Qf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};x.svg.chord=function(){function b(b,e){var g=d(this,a,b,e),k=d(this,c,b,e);return"M"+g.p0+f(g.r,g.p1,g.a1-g.a0)+(g.a0==k.a0&&g.a1==k.a1?"Q 0,0 "+g.p0:"Q 0,0 "+k.p0+f(k.r,k.p1,k.a1-k.a0)+("Q 0,0 "+g.p0))+"Z"}function d(b,d,f,a){var c=
d.call(b,f,a);d=e.call(b,c,a);f=g.call(b,c,a)-wa;b=h.call(b,c,a)-wa;return{r:d,a0:f,a1:b,p0:[d*Math.cos(f),d*Math.sin(f)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function f(b,d,f){return"A"+b+","+b+" 0 "+ +(f>ba)+",1 "+d}var a=ld,c=md,e=Wh,g=Jf,h=Kf;b.radius=function(d){if(!arguments.length)return e;e=pa(d);return b};b.source=function(d){if(!arguments.length)return a;a=pa(d);return b};b.target=function(d){if(!arguments.length)return c;c=pa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;
g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=pa(d);return b};return b};x.svg.diagonal=function(){function b(b,c){var e=d.call(this,b,c),g=f.call(this,b,c),k=(e.y+g.y)/2,e=[e,{x:e.x,y:k},{x:g.x,y:k},g],e=e.map(a);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var d=ld,f=md,a=Sf;b.source=function(f){if(!arguments.length)return d;d=pa(f);return b};b.target=function(d){if(!arguments.length)return f;f=pa(d);return b};b.projection=function(d){if(!arguments.length)return a;a=d;return b};
return b};x.svg.diagonal.radial=function(){var b=x.svg.diagonal(),d=Sf,f=b.projection;b.projection=function(b){return arguments.length?f(Xh(d=b)):d};return b};x.svg.symbol=function(){function b(b,a){return(hg.get(d.call(this,b,a))||Tf)(f.call(this,b,a))}var d=Zh,f=Yh;b.type=function(f){if(!arguments.length)return d;d=pa(f);return b};b.size=function(d){if(!arguments.length)return f;f=pa(d);return b};return b};var hg=x.map({circle:Tf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+
"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*ig));var d=b*ig;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Pc);var d=b*Pc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=Math.sqrt(b/Pc);var d=b*Pc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});x.svg.symbolTypes=
hg.keys();var Pc=Math.sqrt(3),ig=Math.tan(30*ca);ma.transition=function(b){var d=ob||++jg;b=Md(b);for(var f=[],a,c,e=Qc||{time:Date.now(),ease:fh,delay:0,duration:250},g=-1,h=this.length;++g<h;){f.push(a=[]);for(var l=this[g],q=-1,p=l.length;++q<p;)(c=l[q])&&zc(c,q,b,d,e),a.push(c)}return Rb(f,b,d)};ma.interrupt=function(b){return this.each(null==b?Cc:Uf(Md(b)))};var Cc=Uf(Md()),Aa=[],jg=0,ob,Qc;Aa.call=ma.call;Aa.empty=ma.empty;Aa.node=ma.node;Aa.size=ma.size;x.transition=function(b,d){return b&&
b.transition?ob?b.transition(d):b:x.selection().transition(b)};x.transition.prototype=Aa;Aa.select=function(b){var d=this.id,f=this.namespace,a=[],c,e,g;b=q(b);for(var h=-1,l=this.length;++h<l;){a.push(c=[]);for(var p=this[h],y=-1,n=p.length;++y<n;)(g=p[y])&&(e=b.call(g,g.__data__,y,h))?("__data__"in g&&(e.__data__=g.__data__),zc(e,y,f,d,g[f][d]),c.push(e)):c.push(null)}return Rb(a,f,d)};Aa.selectAll=function(b){var d=this.id,f=this.namespace,a=[],c,e,g,h;b=J(b);for(var l=-1,q=this.length;++l<q;)for(var p=
this[l],y=-1,n=p.length;++y<n;)if(c=p[y]){h=c[f][d];e=b.call(c,c.__data__,y,l);a.push(c=[]);for(var r=-1,A=e.length;++r<A;)(g=e[r])&&zc(g,r,f,d,h),c.push(g)}return Rb(a,f,d)};Aa.filter=function(b){var d=[],f,a,c;"function"!==typeof b&&(b=T(b));for(var e=0,g=this.length;e<g;e++){d.push(f=[]);a=this[e];for(var h=0,l=a.length;h<l;h++)(c=a[h])&&b.call(c,c.__data__,h,e)&&f.push(c)}return Rb(d,this.namespace,this.id)};Aa.tween=function(b,d){var f=this.id,a=this.namespace;return 2>arguments.length?this.node()[a][f].tween.get(b):
la(this,null==d?function(d){d[a][f].tween.remove(b)}:function(c){c[a][f].tween.set(b,d)})};Aa.attr=function(b,d){function f(){this.removeAttribute(h)}function a(){this.removeAttributeNS(h.space,h.local)}function c(b){return null==b?f:(b+="",function(){var d=this.getAttribute(h),f;return d!==b&&(f=g(d,b),function(b){this.setAttribute(h,f(b))})})}function e(b){return null==b?a:(b+="",function(){var d=this.getAttributeNS(h.space,h.local),f;return d!==b&&(f=g(d,b),function(b){this.setAttributeNS(h.space,
h.local,f(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var g="transform"==b?lf:mb,h=x.ns.qualify(b);return Ld(this,"attr."+b,d,h.local?e:c)};Aa.attrTween=function(b,d){function f(b,f){var a=d.call(this,b,f,this.getAttribute(c));return a&&function(b){this.setAttribute(c,a(b))}}function a(b,f){var a=d.call(this,b,f,this.getAttributeNS(c.space,c.local));return a&&function(b){this.setAttributeNS(c.space,c.local,a(b))}}var c=x.ns.qualify(b);return this.tween("attr."+b,c.local?
a:f)};Aa.style=function(b,d,f){function a(){this.style.removeProperty(b)}var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(d="");for(f in b)this.style(f,b[f],d);return this}f=""}return Ld(this,"style."+b,d,function(d){return null==d?a:(d+="",function(){var a=c(this).getComputedStyle(this,null).getPropertyValue(b),e;return a!==d&&(e=mb(a,d),function(d){this.style.setProperty(b,e(d),f)})})})};Aa.styleTween=function(b,d,f){3>arguments.length&&(f="");return this.tween("style."+b,function(a,
e){var g=d.call(this,a,e,c(this).getComputedStyle(this,null).getPropertyValue(b));return g&&function(d){this.style.setProperty(b,g(d),f)}})};Aa.text=function(b){return Ld(this,"text",b,$h)};Aa.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Aa.ease=function(b){var d=this.id,f=this.namespace;if(1>arguments.length)return this.node()[f][d].ease;"function"!==typeof b&&(b=x.ease.apply(x,arguments));return la(this,
function(a){a[f][d].ease=b})};Aa.delay=function(b){var d=this.id,f=this.namespace;return 1>arguments.length?this.node()[f][d].delay:la(this,"function"===typeof b?function(a,c,e){a[f][d].delay=+b.call(a,a.__data__,c,e)}:(b=+b,function(a){a[f][d].delay=b}))};Aa.duration=function(b){var d=this.id,f=this.namespace;return 1>arguments.length?this.node()[f][d].duration:la(this,"function"===typeof b?function(a,c,e){a[f][d].duration=Math.max(1,b.call(a,a.__data__,c,e))}:(b=Math.max(1,b),function(a){a[f][d].duration=
b}))};Aa.each=function(b,d){var f=this.id,a=this.namespace;if(2>arguments.length){var c=Qc,e=ob;try{ob=f,la(this,function(d,c,e){Qc=d[a][f];b.call(d,d.__data__,c,e)})}finally{Qc=c,ob=e}}else la(this,function(c){c=c[a][f];(c.event||(c.event=x.dispatch("start","end","interrupt"))).on(b,d)});return this};Aa.transition=function(){for(var b=this.id,d=++jg,f=this.namespace,a=[],c,e,g,h,l=0,q=this.length;l<q;l++){a.push(c=[]);e=this[l];for(var p=0,y=e.length;p<y;p++){if(g=e[p])h=g[f][b],zc(g,p,f,d,{time:h.time,
ease:h.ease,delay:h.delay+h.duration,duration:h.duration});c.push(g)}}return Rb(a,f,d)};x.svg.axis=function(){function b(b){b.each(function(){var b=x.select(this),k=this.__chart__||d,m=this.__chart__=d.copy(),q=null==h?m.ticks?m.ticks.apply(m,g):m.domain():h,p=null==l?m.tickFormat?m.tickFormat.apply(m,g):E:l,y=b.selectAll(".tick").data(q,m),q=y.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),n=x.transition(y.exit()).style("opacity",1E-6).remove(),r=x.transition(y.order()).style("opacity",
1),A=Math.max(a,0)+e,H=sc(m),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),x.transition(b));q.append("line");q.append("text");var t=q.select("line"),w=r.select("line"),y=y.select("text").text(p),v=q.select("text"),S=r.select("text"),u="top"===f||"left"===f?-1:1,V,T,G,z;"bottom"===f||"top"===f?(p=ai,V="x",G="y",T="x2",z="y2",y.attr("dy",0>u?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+H[0]+","+u*c+"V0H"+H[1]+"V"+u*c)):(p=bi,V="y",G="x",T="y2",
z="x2",y.attr("dy",".32em").style("text-anchor",0>u?"end":"start"),b.attr("d","M"+u*c+","+H[0]+"H0V"+H[1]+"H"+u*c));t.attr(z,u*a);v.attr(G,u*A);w.attr(T,0).attr(z,u*a);S.attr(V,0).attr(G,u*A);if(m.rangeBand)var B=m,J=B.rangeBand()/2,k=m=function(b){return B(b)+J};else k.rangeBand?k=m:n.call(p,m,k);q.call(p,k,m);r.call(p,m,m)})}var d=x.scale.linear(),f=kg,a=6,c=6,e=3,g=[10],h=null,l;b.scale=function(f){if(!arguments.length)return d;d=f;return b};b.orient=function(d){if(!arguments.length)return f;f=
d in yi?d+"":kg;return b};b.ticks=function(){if(!arguments.length)return g;g=Qa(arguments);return b};b.tickValues=function(d){if(!arguments.length)return h;h=d;return b};b.tickFormat=function(d){if(!arguments.length)return l;l=d;return b};b.tickSize=function(d){var f=arguments.length;if(!f)return a;a=+d;c=+arguments[f-1];return b};b.innerTickSize=function(d){if(!arguments.length)return a;a=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return c;c=+d;return b};b.tickPadding=function(d){if(!arguments.length)return e;
e=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var kg="bottom",yi={top:1,right:1,bottom:1,left:1};x.svg.brush=function(){function b(c){c.each(function(){var c=x.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=c.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var k=c.selectAll(".resize").data(H,E);k.exit().remove();k.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return zi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");k.style("display",b.empty()?"none":null);c=x.transition(c);g=x.transition(g);h&&(k=sc(h),g.attr("x",k[0]).attr("width",
k[1]-k[0]),f(c));l&&(k=sc(l),g.attr("y",k[0]).attr("height",k[1]-k[0]),a(c));d(c)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+q[+/e$/.test(b)]+","+p[+/^s/.test(b)]+")"})}function f(b){b.select(".extent").attr("x",q[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function a(b){b.select(".extent").attr("y",p[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function e(){function e(){var b=x.mouse(H),c=!1;B&&(b[0]+=B[0],
b[1]+=B[1]);T||(x.event.altKey?(z||(z=[(q[0]+q[1])/2,(p[0]+p[1])/2]),E[0]=q[+(b[0]<z[0])],E[1]=p[+(b[1]<z[1])]):z=null);u&&k(b,h,0)&&(f(S),c=!0);V&&k(b,l,1)&&(a(S),c=!0);c&&(d(S),w({type:"brush",mode:T?"move":"resize"}))}function k(b,d,f){var a=sc(d);d=a[0];var c=a[1],a=E[f],e=f?p:q,g=e[1]-e[0];T&&(d-=a,c-=g+a);b=(f?A:r)?Math.max(d,Math.min(c,b[f])):b[f];T?d=(b+=a)+g:(z&&(a=Math.max(d,Math.min(c,2*z[f]-b))),a<b?(d=b,b=a):d=a);if(e[0]!=b||e[1]!=d)return f?n=null:y=null,e[0]=b,e[1]=d,!0}function m(){e();
S.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);x.select("body").style("cursor",null);J.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);G();w({type:"brushend"})}var H=this,t=x.select(x.event.target),w=g.of(H,arguments),S=x.select(H),v=t.datum(),u=!/^(n|s)$/.test(v)&&h,V=!/^(e|w)$/.test(v)&&l,T=t.classed("extent"),G=oa(H),z,E=x.mouse(H),B,J=x.select(c(H)).on("keydown.brush",
function(){32==x.event.keyCode&&(T||(z=null,E[0]-=q[1],E[1]-=p[1],T=2),U())}).on("keyup.brush",function(){32==x.event.keyCode&&2==T&&(E[0]+=q[1],E[1]+=p[1],T=0,U())});if(x.event.changedTouches)J.on("touchmove.brush",e).on("touchend.brush",m);else J.on("mousemove.brush",e).on("mouseup.brush",m);S.interrupt().selectAll("*").interrupt();if(T)E[0]=q[0]-E[0],E[1]=p[0]-E[1];else if(v){var Z=+/w$/.test(v),v=+/^n/.test(v);B=[q[1-Z]-E[0],p[1-v]-E[1]];E[0]=q[Z];E[1]=p[v]}else x.event.altKey&&(z=E.slice());
S.style("pointer-events","none").selectAll(".resize").style("display",null);x.select("body").style("cursor",t.style("cursor"));w({type:"brushstart"});e()}var g=R(b,"brushstart","brush","brushend"),h=null,l=null,q=[0,0],p=[0,0],y,n,r=!0,A=!0,H=Wd[0];b.event=function(b){b.each(function(){var b=g.of(this,arguments),d={x:q,y:p,i:y,j:n},f=this.__chart__||d;this.__chart__=d;ob?x.select(this).transition().each("start.brush",function(){y=f.i;n=f.j;q=f.x;p=f.y;b({type:"brushstart"})}).tween("brush:brush",
function(){var f=rc(q,d.x),a=rc(p,d.y);y=n=null;return function(c){q=d.x=f(c);p=d.y=a(c);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=d.i;n=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return h;h=d;H=Wd[!h<<1|!l];return b};b.y=function(d){if(!arguments.length)return l;l=d;H=Wd[!h<<1|!l];return b};b.clamp=function(d){if(!arguments.length)return h&&
l?[r,A]:h?r:l?A:null;h&&l?(r=!!d[0],A=!!d[1]):h?r=!!d:l&&(A=!!d);return b};b.extent=function(d){var f,a,c,e,g;if(!arguments.length)return h&&(y?(f=y[0],a=y[1]):(f=q[0],a=q[1],h.invert&&(f=h.invert(f),a=h.invert(a)),a<f&&(g=f,f=a,a=g))),l&&(n?(c=n[0],e=n[1]):(c=p[0],e=p[1],l.invert&&(c=l.invert(c),e=l.invert(e)),e<c&&(g=c,c=e,e=g))),h&&l?[[f,c],[a,e]]:h?[f,a]:l&&[c,e];h&&(f=d[0],a=d[1],l&&(f=f[0],a=a[0]),y=[f,a],h.invert&&(f=h(f),a=h(a)),a<f&&(g=f,f=a,a=g),f!=q[0]||a!=q[1])&&(q=[f,a]);l&&(c=d[0],e=
d[1],h&&(c=c[1],e=e[1]),n=[c,e],l.invert&&(c=l(c),e=l(e)),e<c&&(g=c,c=e,e=g),c!=p[0]||e!=p[1])&&(p=[c,e]);return b};b.clear=function(){b.empty()||(q=[0,0],p=[0,0],y=n=null);return b};b.empty=function(){return!!h&&q[0]==q[1]||!!l&&p[0]==p[1]};return x.rebind(b,g,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Xd=X.format=Zf.timeFormat,lg=Xd.utc,mg=
lg("%Y-%m-%dT%H:%M:%S.%LZ");Xd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nd:mg;Nd.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Nd.toString=mg.toString;X.second=fb(function(b){return new Da(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});X.seconds=X.second.range;X.seconds.utc=X.second.utc.range;X.minute=fb(function(b){return new Da(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*
Math.floor(d))},function(b){return b.getMinutes()});X.minutes=X.minute.range;X.minutes.utc=X.minute.utc.range;X.hour=fb(function(b){var d=b.getTimezoneOffset()/60;return new Da(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});X.hours=X.hour.range;X.hours.utc=X.hour.utc.range;X.month=fb(function(b){b=X.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});X.months=X.month.range;
X.months.utc=X.month.utc.range;var Ac=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Yd=[[X.second,1],[X.second,5],[X.second,15],[X.second,30],[X.minute,1],[X.minute,5],[X.minute,15],[X.minute,30],[X.hour,1],[X.hour,3],[X.hour,6],[X.hour,12],[X.day,1],[X.day,2],[X.week,1],[X.month,1],[X.month,3],[X.year,1]],Ai=Xd.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],
["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Gb]]),ci={range:function(b,d,f){return x.range(Math.ceil(b/f)*f,+d,f).map(nb)},floor:E,ceil:E};Yd.year=X.year;X.scale=function(){return Od(x.scale.linear(),Yd,Ai)};var ng=Yd.map(function(b){return[b[0].utc,b[1]]}),Bi=lg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],
["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Gb]]);ng.year=X.year.utc;X.scale.utc=function(){return Od(x.scale.linear(),ng,Bi)};x.text=$c(function(b){return b.responseText});x.json=function(b,d){return Xb(b,"application/json",di,d)};x.html=function(b,d){return Xb(b,"text/html",ei,d)};x.xml=$c(function(b){return b.responseXML});
"function"===typeof define&&define.amd?(this.d3=x,define(x)):"object"===typeof module&&module.exports?module.exports=x:this.d3=x}();
(function(){var c={dev:!1};c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.logs={};c.dom={};c.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),g=this,r=function(){},l=function(){return g.apply(this instanceof r&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};
r.prototype=this.prototype;l.prototype=new r;return l});c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(a){c.logs.endTime=+new Date;c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)}));c.log=function(){c.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):c.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,
console).apply(console,arguments);return arguments[arguments.length-1]};c.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};c.render=function(a){a=a||1;c.render.active=!0;c.dispatch.render_start();var e=function(){for(var g,r,l=0;l<a&&(r=c.render.queue[l]);l++)g=r.generate(),typeof r.callback==typeof Function&&r.callback(g);c.render.queue.splice(0,l);c.render.queue.length?setTimeout(e):(c.dispatch.render_end(),c.render.active=!1)};setTimeout(e)};
c.render.active=!1;c.render.queue=[];c.addGraph=function(a,e){typeof a===typeof Function&&(a={generate:a,callback:e});c.render.queue.push(a);c.render.active||c.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=c);"undefined"!==typeof window&&(window.nv=c);c.dom.write=function(a){return void 0!==window.fastdom?fastdom.write(a):a()};c.dom.read=function(a){return void 0!==window.fastdom?fastdom.read(a):a()};c.interactiveGuideline=function(){function a(I){I.each(function(C){function F(){var c=
d3.mouse(this),g=c[0],c=c[1],h=!0,r=!1;z&&(g=d3.event.offsetX,c=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(h=!1),d3.event.target.className.baseVal.match("nv-legend")&&(r=!0));h&&(g-=l.left,c-=l.top);0>g||0>c||g>B||c>E||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||r?z&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(e.nvPointerEventsClass))||(t.elementMouseout({mouseX:g,
mouseY:c}),a.renderGuideLine(null),e.hidden(!0)):(e.hidden(!1),h=n.invert(g),t.elementMousemove({mouseX:g,mouseY:c,pointXValue:h}),"dblclick"===d3.event.type&&t.elementDblclick({mouseX:g,mouseY:c,pointXValue:h}),"click"===d3.event.type&&t.elementClick({mouseX:g,mouseY:c,pointXValue:h}))}var I=d3.select(this),B=g||960,E=r||400,L=I.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([C]);L.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");
u&&(u.on("touchmove",F).on("mousemove",F,!0).on("mouseout",F,!0).on("dblclick",F).on("click",F),a.guideLine=null,a.renderGuideLine=function(e){h&&(a.guideLine&&a.guideLine.attr("x1")===e||c.dom.write(function(){var a=L.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[c.utils.NaNtoZero(e)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",E).attr("y2",0);a.exit().remove()}))})})}var e=c.models.tooltip();
e.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var g=null,r=null,l={left:0,top:0},n=d3.scale.linear(),t=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),h=!0,u=null,z="ActiveXObject"in window;a.dispatch=t;a.tooltip=e;a.margin=function(c){if(!arguments.length)return l;l.top="undefined"!=typeof c.top?c.top:l.top;l.left="undefined"!=typeof c.left?c.left:l.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.height=function(c){if(!arguments.length)return r;
r=c;return a};a.xScale=function(c){if(!arguments.length)return n;n=c;return a};a.showGuideLine=function(c){if(!arguments.length)return h;h=c;return a};a.svgContainer=function(c){if(!arguments.length)return u;u=c;return a};return a};c.interactiveBisect=function(a,c,g){if(!(a instanceof Array))return null;var e;e="function"!==typeof g?function(a){return a.x}:g;g=d3.bisector(function(a,c){return e(a)-c}).left;g=d3.max([0,g(a,c)-1]);var l=e(a[g]);"undefined"===typeof l&&(l=g);if(l===c)return g;var n=
d3.min([g+1,a.length-1]);a=e(a[n]);"undefined"===typeof a&&(a=n);return Math.abs(a-c)>=Math.abs(l-c)?g:n};c.nearestValueIndex=function(a,c,g){var e=Infinity,l=null;a.forEach(function(a,r){var h=Math.abs(c-a);null!=a&&h<=e&&h<g&&(e=h,l=r)});return l};(function(){c.models.tooltip=function(){function a(){if(u){var a=d3.select(u);"svg"!==a.node().tagName&&(a=a.select("svg"));var c=a.node()?a.attr("viewBox"):null;c&&(c=c.split(" "),a=parseInt(a.style("width"),10)/c[2],D.left*=a,D.top*=a)}}function e(){if(E){var l;
a:{if(g&&g.series){if(g.series instanceof Array){l=!!g.series.length;break a}if(g.series instanceof Object){g.series=[g.series];l=!0;break a}}l=!1}if(l){a();var r=D.left,G=null!==t?t:D.top;c.dom.write(function(){C||(C=d3.select(u?u:document.body).append("div").attr("class","nvtooltip "+(h?h:"xy-tooltip")).attr("id",w),C.style("top",0).style("left",0),C.style("opacity",0),C.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0),C.classed("nv-pointer-events-none",!0),F=C.node());var a=
R(g);a&&(F.innerHTML=a);u&&K?c.dom.read(function(){var a=u.getElementsByTagName("svg")[0],c=0,e=0;if(a){a=a.getBoundingClientRect();c=u.getBoundingClientRect();e=a.top;if(0>e)var g=u.getBoundingClientRect(),e=Math.abs(e)>g.height?0:e;e=Math.abs(e-c.top);c=Math.abs(a.left-c.left)}r+=u.offsetLeft+c-2*u.scrollLeft;G+=u.offsetTop+e-2*u.scrollTop;n&&0<n&&(G=Math.floor(G/n)*n);N([r,G])}):N([r,G])});return e}}}var g=null,r="w",l=25,n=0,t=null,h=null,u=null,z=!0,I=400,C=null,F=null,D={left:null,top:null},
B={left:0,top:0},E=!0,L=100,M=!0,K=!1,w="nvtooltip-"+Math.floor(1E5*Math.random()),G=function(a,c){return a},U=function(a){return a},P=function(a,c){return a},R=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));M&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(U(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",
function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});e.append("td").classed("key",!0).html(function(a,c){return P(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return G(a.value,c)});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;
void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},N=function(a){F&&c.dom.read(function(){var e=parseInt(F.offsetHeight,10),g=parseInt(F.offsetWidth,10),h=c.utils.windowSize().width,q=c.utils.windowSize().height,n=window.pageYOffset,y=window.pageXOffset,t,w,q=window.innerWidth>=document.body.scrollWidth?q:q-16,h=window.innerHeight>=document.body.scrollHeight?h:h-16,A=function(a){var c=w;do isNaN(a.offsetTop)||(c+=a.offsetTop),a=a.offsetParent;while(a);return c},u=function(a){var c=
t;do isNaN(a.offsetLeft)||(c+=a.offsetLeft),a=a.offsetParent;while(a);return c};switch(r){case "e":t=a[0]-g-l;w=a[1]-e/2;u=u(F);A=A(F);u<y&&(t=a[0]+l>y?a[0]+l:y-u+t);A<n&&(w=n-A+w);A+e>n+q&&(w=n+q-A+w-e);break;case "w":t=a[0]+l;w=a[1]-e/2;u=u(F);A=A(F);u+g>h&&(t=a[0]-g-l);A<n&&(w=n+5);A+e>n+q&&(w=n+q-A+w-e);break;case "n":t=a[0]-g/2-5;w=a[1]+l;u=u(F);A=A(F);u<y&&(t=y+5);u+g>h&&(t=t-g/2+5);A+e>n+q&&(w=n+q-A+w-e);break;case "s":t=a[0]-g/2;w=a[1]-e-l;u=u(F);A=A(F);u<y&&(t=y+5);u+g>h&&(t=t-g/2+5);n>A&&
(w=n);break;case "none":t=a[0],w=a[1]-l,u=u(F),A=A(F)}t-=B.left;w-=B.top;var g=F.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop,y=window.pageXOffset||document.documentElement.scrollLeft,e="translate("+t+"px, "+w+"px)",V=d3.interpolateString("translate("+(g.left+y)+"px, "+(g.top+n)+"px)",e),n=.1>C.style("opacity");z?C.transition().delay(I).duration(0).style("opacity",0):C.interrupt().transition().duration(n?0:L).styleTween("transform",function(a){return V},"important").style("-webkit-transform",
e).style("opacity",1)})};e.nvPointerEventsClass="nv-pointer-events-none";e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{duration:{get:function(){return L},set:function(a){L=a}},gravity:{get:function(){return r},set:function(a){r=a}},distance:{get:function(){return l},set:function(a){l=a}},snapDistance:{get:function(){return n},set:function(a){n=a}},classes:{get:function(){return h},set:function(a){h=a}},chartContainer:{get:function(){return u},set:function(a){u=a}},fixedTop:{get:function(){return t},
set:function(a){t=a}},enabled:{get:function(){return E},set:function(a){E=a}},hideDelay:{get:function(){return I},set:function(a){I=a}},contentGenerator:{get:function(){return R},set:function(a){R=a}},valueFormatter:{get:function(){return G},set:function(a){G=a}},headerFormatter:{get:function(){return U},set:function(a){U=a}},keyFormatter:{get:function(){return P},set:function(a){P=a}},headerEnabled:{get:function(){return M},set:function(a){M=a}},_isInteractiveLayer:{get:function(){return K},set:function(a){K=
!!a}},position:{get:function(){return D},set:function(a){D.left=void 0!==a.left?a.left:D.left;D.top=void 0!==a.top?a.top:D.top}},offset:{get:function(){return B},set:function(a){B.left=void 0!==a.left?a.left:B.left;B.top=void 0!==a.top?a.top:B.top}},hidden:{get:function(){return z},set:function(a){z!=a&&(z=!!a,e())}},data:{get:function(){return g},set:function(a){a.point&&(a.value=a.point.x,a.series=a.series||{},a.series.value=a.point.y,a.series.color=a.point.color||a.series.color);g=a}},tooltipElem:{get:function(){return F},
set:function(a){}},id:{get:function(){return w},set:function(a){}}});c.utils.initOptions(e);return e}})();c.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&
(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};c.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):c.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};c.utils.getColor=function(a){if(void 0===a)return c.utils.defaultColor();if(Array.isArray(a)){var e=d3.scale.ordinal().range(a);return function(a,c){return a.color||e(void 0===c?a:c)}}return a};
c.utils.defaultColor=function(){return c.utils.getColor(d3.scale.category20().range())};c.utils.customTheme=function(a,c,g){c=c||function(a){return a.key};g=g||d3.scale.category20().range();var e=g.length;return function(l,n){var r=c(l);if("function"===typeof a[r])return a[r]();if(void 0!==a[r])return a[r];e||(e=g.length);--e;return g[e]}};c.utils.pjax=function(a,e){var g=function(g){d3.html(g,function(g){var l=d3.select(e).node();l.parentNode.replaceChild(d3.select(g).select(e).node(),l);c.utils.pjax(a,
e)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href);g(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&g(d3.event.state)})};c.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var c=parseInt(a.style("font-size").replace("px",""),10);return a.text().length*c*.5}return 0};c.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===
a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};c.utils.renderWatch=function(a,e){if(!(this instanceof c.utils.renderWatch))return new c.utils.renderWatch(a,e);var g=void 0!==e?e:250,r=[],l=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=!0;l.renderEnd("model")})})(a);0>r.indexOf(a)&&
r.push(a)});return this};this.reset=function(a){void 0!==a&&(g=a);r=[]};this.transition=function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==g?g:250;a.__rendered=!1;0>r.indexOf(a)&&r.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var h=0;return a.transition().duration(e).each(function(){++h}).each("end",
function(e,g){0===--h&&(a.__rendered=!0,l.renderEnd.apply(this,c))})};this.renderEnd=function(){r.every(function(a){return a.__rendered})&&(r.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};c.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(e){for(var g in e){var r=a[g]instanceof Array,l="object"===typeof e[g];"object"===typeof a[g]&&!r&&l?c.utils.deepExtend(a[g],e[g]):a[g]=e[g]}})};c.utils.state=function(){if(!(this instanceof
c.utils.state))return new c.utils.state;var a={},e=function(){},g=function(){return{}},r=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){e(a,!0)});this.getter=function(a){g=a;return this};this.setter=function(a,c){c||(c=function(){});e=function(e,g){a(e);g&&c()};return this};this.init=function(a){r=r||{};c.utils.deepExtend(r,a)};this.update=function(){r&&(e(r,!1),r=null);var c;c=g();if(JSON.stringify(c)===JSON.stringify(a))c=!1;else{for(var n in c)void 0===a[n]&&
(a[n]={}),a[n]=c[n];c=!0}c&&this.dispatch.change(a)}};c.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,c){if("function"===typeof this[a])this[a](c)}.bind(this));return this};c.utils.calcTicksX=function(a,e){var g=1,r=0;for(r;r<e.length;r+=1)var l=e[r]&&e[r].values?e[r].values.length:0,g=l>g?l:g;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.calcTicksY=function(a,
e){return c.utils.calcTicksX(a,e)};c.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]||(a._options[c]=e);return a})};c.utils.initOptions=function(a){a._overrides=a._overrides||{};var e=Object.getOwnPropertyNames(a._options||{}),g=Object.getOwnPropertyNames(a._calls||{}),e=e.concat(g),r;for(r in e)c.utils.initOption(a,
e[r])};c.utils.inheritOptionsD3=function(a,c,g){a._d3options=g.concat(a._d3options||[]);g.unshift(c);g.unshift(a);d3.rebind.apply(this,g)};c.utils.arrayUnique=function(a){return a.sort().filter(function(c,g){return!g||c!=a[g-1]})};c.utils.symbolMap=d3.map();c.utils.symbol=function(){function a(a,l){var n=e.call(this,a,l),r=g.call(this,a,l);return-1!==d3.svg.symbolTypes.indexOf(n)?d3.svg.symbol().type(n).size(r)():c.utils.symbolMap.get(n)(r)}var e,g=64;a.type=function(c){if(!arguments.length)return e;
e=d3.functor(c);return a};a.size=function(c){if(!arguments.length)return g;g=d3.functor(c);return a};return a};c.utils.inheritOptions=function(a,e){var g=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{}),l=e._inherited||[],n=e._d3options||[],t=g.concat(r).concat(l).concat(n);t.unshift(e);t.unshift(a);d3.rebind.apply(this,t);a._inherited=c.utils.arrayUnique(g.concat(r).concat(l).concat(g).concat(a._inherited||[]));a._d3options=c.utils.arrayUnique(n.concat(a._d3options||
[]))};c.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};c.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};c.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};c.utils.availableHeight=function(a,e,g){return c.utils.sanitizeHeight(a,e)-g.top-g.bottom};c.utils.availableWidth=function(a,e,g){return c.utils.sanitizeWidth(a,e)-g.left-g.right};c.utils.noData=function(a,e){var g=a.options(),r=g.margin(),l=g.noData(),l=null==l?["No Data Available."]:
[l],n=c.utils.availableHeight(g.height(),e,r),g=c.utils.availableWidth(g.width(),e,r),g=r.left+g/2,r=r.top+n/2;e.selectAll("g").remove();l=e.selectAll(".nv-noData").data(l);l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");l.attr("x",g).attr("y",r).text(function(a){return a})};c.models.axis=function(){function a(n){M.reset();n.each(function(a){var n=d3.select(this);c.utils.initSVG(n);a=n.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-axis").append("g");n=a.select("g");null!==F?e.ticks(F):"top"!=e.orient()&&"bottom"!=e.orient()||e.ticks(Math.abs(g.range()[1]-g.range()[0])/100);n.watchTransition(M,"axis").call(e);L=L||e.scale();var w=e.tickFormat();null==w&&(w=L.tickFormat());var E=n.selectAll("text.nv-axislabel").data([t||null]);E.exit().remove();var B,K;switch(e.orient()){case "top":E.enter().append("text").attr("class","nv-axislabel");K=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-
1]+(g.range()[1]-g.range()[0]);E.attr("text-anchor","middle").attr("y",0).attr("x",K/2);h&&(B=a.selectAll("g.nv-axisMaxMin").data(g.domain()),B.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),B.exit().remove(),B.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(a,
c){var e=w(a);return(""+e).match("NaN")?"":e}),B.watchTransition(M,"min-max top").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g.range()[e])+",0)"}));break;case "bottom":B=D+36;var q=30,J=0,O=n.selectAll("g").select("text"),H="";u%360&&(O.each(function(a,c){var e=this.getBoundingClientRect(),g=e.width;J=e.height;g>q&&(q=g)}),H="rotate("+u+" 0,"+(J/2+e.tickPadding())+")",B=Math.abs(Math.sin(u*Math.PI/180)),B=(B?B*q:q)+30,O.attr("transform",H).style("text-anchor",0<u%360?"start":
"end"));E.enter().append("text").attr("class","nv-axislabel");K=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);E.attr("text-anchor","middle").attr("y",B).attr("x",K/2);h&&(B=a.selectAll("g.nv-axisMaxMin").data([g.domain()[0],g.domain()[g.domain().length-1]]),B.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),B.exit().remove(),B.attr("transform",
function(a,e){return"translate("+c.utils.NaNtoZero(g(a)+(C?g.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",H).style("text-anchor",u?0<u%360?"start":"end":"middle").text(function(a,c){var e=w(a);return(""+e).match("NaN")?"":e}),B.watchTransition(M,"min-max bottom").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a)+(C?g.rangeBand()/2:0))+",0)"}));I&&O.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+
")"});break;case "right":E.enter().append("text").attr("class","nv-axislabel");E.style("text-anchor",z?"middle":"begin").attr("transform",z?"rotate(90)":"").attr("y",z?-Math.max(r.right,l)+12:-10).attr("x",z?d3.max(g.range())/2:e.tickPadding());h&&(B=a.selectAll("g.nv-axisMaxMin").data(g.domain()),B.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),B.exit().remove(),B.attr("transform",
function(a,e){return"translate(0,"+c.utils.NaNtoZero(g(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(a,c){var e=w(a);return(""+e).match("NaN")?"":e}),B.watchTransition(M,"min-max right").attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(g.range()[e])+")"}).select("text").style("opacity",1));break;case "left":E.enter().append("text").attr("class","nv-axislabel"),E.style("text-anchor",z?"middle":"end").attr("transform",
z?"rotate(-90)":"").attr("y",z?-Math.max(r.left,l)+25-(D||0):-10).attr("x",z?-d3.max(g.range())/2:-e.tickPadding()),h&&(B=a.selectAll("g.nv-axisMaxMin").data(g.domain()),B.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),B.exit().remove(),B.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(L(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor",
"end").text(function(a,c){var e=w(a);return(""+e).match("NaN")?"":e}),B.watchTransition(M,"min-max right").attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(g.range()[e])+")"}).select("text").style("opacity",1))}E.text(function(a){return a});!h||"left"!==e.orient()&&"right"!==e.orient()||(n.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(g(a)<g.range()[1]+10||g(a)>g.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",
0)}),g.domain()[0]==g.domain()[1]&&0==g.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(h&&("top"===e.orient()||"bottom"===e.orient())){var p=[];a.selectAll("g.nv-axisMaxMin").each(function(a,c){try{c?p.push(g(a)-this.getBoundingClientRect().width-4):p.push(g(a)+this.getBoundingClientRect().width+4)}catch(W){c?p.push(g(a)-4):p.push(g(a)+4)}});n.selectAll("g").each(function(a,c){if(g(a)<p[0]||g(a)>p[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}n.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*
a)/1E6)&&void 0!==a}).classed("zero",!0);L=g.copy()});M.renderEnd("axis immediate");return a}var e=d3.svg.axis(),g=d3.scale.linear(),r={top:0,right:0,bottom:0,left:0},l=75,n=60,t=null,h=!0,u=0,z=!0,I=!1,C=!1,F=null,D=0,B=250,E=d3.dispatch("renderEnd");e.scale(g).orient("bottom").tickFormat(function(a){return a});var L,M=c.utils.renderWatch(E,B);a.axis=e;a.dispatch=E;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return D},set:function(a){D=a}},
staggerLabels:{get:function(){return I},set:function(a){I=a}},rotateLabels:{get:function(){return u},set:function(a){u=a}},rotateYLabel:{get:function(){return z},set:function(a){z=a}},showMaxMin:{get:function(){return h},set:function(a){h=a}},axisLabel:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return n},set:function(a){n=a}},ticks:{get:function(){return F},set:function(a){F=a}},width:{get:function(){return l},set:function(a){l=a}},margin:{get:function(){return r},set:function(a){r.top=
void 0!==a.top?a.top:r.top;r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},duration:{get:function(){return B},set:function(a){B=a;M.reset(B)}},scale:{get:function(){return g},set:function(h){g=h;e.scale(g);C="function"===typeof g.rangeBands;c.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"])}}});c.utils.initOptions(a);c.utils.inheritOptionsD3(a,e,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));
c.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"]);return a};c.models.boxPlot=function(){function a(l){w.reset();l.each(function(a){var l=g-e.left-e.right,u=r-e.top-e.bottom;I=d3.select(this);c.utils.initSVG(I);n.domain(C||a.map(function(a,c){return h(a,c)})).rangeBands(D||[0,l],.1);l=[];if(!F)var l=d3.min(a.map(function(a){var c=[];c.push(a.values.Q1);a.values.hasOwnProperty("whisker_low")&&null!==a.values.whisker_low&&c.push(a.values.whisker_low);a.values.hasOwnProperty("outliers")&&
null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.min(c)})),G=d3.max(a.map(function(a){var c=[];c.push(a.values.Q3);a.values.hasOwnProperty("whisker_high")&&null!==a.values.whisker_high&&c.push(a.values.whisker_high);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.max(c)})),l=[l,G];t.domain(F||l);t.range(B||[u,0]);K=K||t.copy().range([t(0),t(0)]);u=I.selectAll("g.nv-wrap").data([a]);u.enter().append("g").attr("class","nvd3 nv-wrap");
u.attr("transform","translate("+e.left+","+e.top+")");var q=u.selectAll(".nv-boxplot").data(function(a){return a}),J=q.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);q.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(n(h(a,c))+.05*n.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});q.watchTransition(w,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(c,e){return e*L/a.length}).attr("transform",
function(a,c){return"translate("+(n(h(a,c))+.05*n.rangeBand())+", 0)"});q.exit().remove();J.each(function(a,c){var e=d3.select(this);["low","high"].forEach(function(g){a.values.hasOwnProperty("whisker_"+g)&&null!==a.values["whisker_"+g]&&(e.append("line").style("stroke",a.color?a.color:z(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+g),e.append("line").style("stroke",a.color?a.color:z(a,c)).attr("class","nv-boxplot-tick nv-boxplot-"+g))})});u=q.selectAll(".nv-boxplot-outlier").data(function(a){return a.values.hasOwnProperty("outliers")&&
null!==a.values.outliers?a.values.outliers:[]});u.enter().append("circle").style("fill",function(a,c,e){return z(a,e)}).style("stroke",function(a,c,e){return z(a,e)}).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);E.elementMouseover({series:{key:a,color:z(a,e)},e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);E.elementMouseout({series:{key:a,color:z(a,e)},e:d3.event})}).on("mousemove",function(a,c){E.elementMousemove({e:d3.event})});u.attr("class",
"nv-boxplot-outlier");u.watchTransition(w,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*n.rangeBand()).attr("cy",function(a,c,e){return t(a)}).attr("r","3");u.exit().remove();var O=function(){return null===M?.9*n.rangeBand():Math.min(75,.9*n.rangeBand())},H=function(){return.45*n.rangeBand()-O()/2},p=function(){return.45*n.rangeBand()+O()/2};["low","high"].forEach(function(a){var c="low"===a?"Q1":"Q3";q.select("line.nv-boxplot-whisker.nv-boxplot-"+a).watchTransition(w,"nv-boxplot: boxplots").attr("x1",
.45*n.rangeBand()).attr("y1",function(c,e){return t(c.values["whisker_"+a])}).attr("x2",.45*n.rangeBand()).attr("y2",function(a,e){return t(a.values[c])});q.select("line.nv-boxplot-tick.nv-boxplot-"+a).watchTransition(w,"nv-boxplot: boxplots").attr("x1",H).attr("y1",function(c,e){return t(c.values["whisker_"+a])}).attr("x2",p).attr("y2",function(c,e){return t(c.values["whisker_"+a])})});["low","high"].forEach(function(a){J.selectAll(".nv-boxplot-"+a).on("mouseover",function(c,e,g){d3.select(this).classed("hover",
!0);E.elementMouseover({series:{key:c.values["whisker_"+a],color:z(c,g)},e:d3.event})}).on("mouseout",function(c,e,g){d3.select(this).classed("hover",!1);E.elementMouseout({series:{key:c.values["whisker_"+a],color:z(c,g)},e:d3.event})}).on("mousemove",function(a,c){E.elementMousemove({e:d3.event})})});J.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);E.elementMouseover({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||
z(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||z(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||z(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);E.elementMouseout({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||z(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||z(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||z(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){E.elementMousemove({e:d3.event})});
q.select("rect.nv-boxplot-box").watchTransition(w,"nv-boxplot: boxes").attr("y",function(a,c){return t(a.values.Q3)}).attr("width",O).attr("x",H).attr("height",function(a,c){return Math.abs(t(a.values.Q3)-t(a.values.Q1))||1}).style("fill",function(a,c){return a.color||z(a,c)}).style("stroke",function(a,c){return a.color||z(a,c)});J.append("line").attr("class","nv-boxplot-median");q.select("line.nv-boxplot-median").watchTransition(w,"nv-boxplot: boxplots line").attr("x1",H).attr("y1",function(a,c){return t(a.values.Q2)}).attr("x2",
p).attr("y2",function(a,c){return t(a.values.Q2)});n.copy();K=t.copy()});w.renderEnd("nv-boxplot immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,r=500,l=Math.floor(1E4*Math.random()),n=d3.scale.ordinal(),t=d3.scale.linear(),h=function(a){return a.x},u=function(a){return a.y},z=c.utils.defaultColor(),I=null,C,F,D,B,E=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=250,M=null,K,w=c.utils.renderWatch(E,L);a.dispatch=E;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},maxBoxWidth:{get:function(){return M},set:function(a){M=a}},x:{get:function(){return h},set:function(a){h=a}},y:{get:function(){return u},set:function(a){u=a}},xScale:{get:function(){return n},set:function(a){n=a}},yScale:{get:function(){return t},set:function(a){t=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return F},set:function(a){F=
a}},xRange:{get:function(){return D},set:function(a){D=a}},yRange:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return l},set:function(a){l=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return z},set:function(a){z=c.utils.getColor(a)}},duration:{get:function(){return L},set:function(a){L=a;w.reset(L)}}});
c.utils.initOptions(a);return a};c.models.boxPlotChart=function(){function a(h){K.reset();K.models(e);u&&K.models(g);z&&K.models(r);h.each(function(h){var w=d3.select(this);c.utils.initSVG(w);var G=(n||parseInt(w.style("width"))||960)-l.left-l.right,F=(t||parseInt(w.style("height"))||400)-l.top-l.bottom;a.update=function(){L.beforeUpdate();w.transition().duration(M).call(a)};a.container=this;if(h&&h.length&&h.filter(function(a){return a.values.hasOwnProperty("Q1")&&a.values.hasOwnProperty("Q2")&&
a.values.hasOwnProperty("Q3")}).length)w.selectAll(".nv-noData").remove();else return h=w.selectAll(".nv-noData").data([E]),h.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),h.attr("x",l.left+G/2).attr("y",l.top+F/2).text(function(a){return a}),a;D=e.xScale();B=e.yScale().clamp(!0);var K=w.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([h]),q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),J=q.append("defs"),
K=K.select("g");q.append("g").attr("class","nv-x nv-axis");q.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");q.append("g").attr("class","nv-barsWrap");K.attr("transform","translate("+l.left+","+l.top+")");I&&K.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");e.width(G).height(F);K.select(".nv-barsWrap").datum(h.filter(function(a){return!a.disabled})).transition().call(e);J.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");
K.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",D.rangeBand()*(C?2:1)).attr("height",16).attr("x",-D.rangeBand()/(C?1:2));u&&(g.scale(D).ticks(c.utils.calcTicksX(G/100,h)).tickSize(-F,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")"),K.select(".nv-x.nv-axis").call(g),h=K.select(".nv-x.nv-axis").selectAll("g"),C&&h.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));z&&(r.scale(B).ticks(Math.floor(F/36)).tickSize(-G,
0),K.select(".nv-y.nv-axis").call(r));K.select(".nv-zeroLine line").attr("x1",0).attr("x2",G).attr("y1",B(0)).attr("y2",B(0))});K.renderEnd("nv-boxplot chart immediate");return a}var e=c.models.boxPlot(),g=c.models.axis(),r=c.models.axis(),l={top:15,right:10,bottom:50,left:60},n=null,t=null,h=c.utils.getColor(),u=!0,z=!0,I=!1,C=!1,F=c.models.tooltip(),D,B,E="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),M=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});
r.orient(I?"right":"left").tickFormat(d3.format(",.1f"));F.duration(0);var K=c.utils.renderWatch(L,M);e.dispatch.on("elementMouseover.tooltip",function(a){F.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){F.data(a).hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){F.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=L;a.boxplot=e;a.xAxis=g;a.yAxis=r;a.tooltip=F;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},
set:function(a){n=a}},height:{get:function(){return t},set:function(a){t=a}},staggerLabels:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return u},set:function(a){u=a}},showYAxis:{get:function(){return z},set:function(a){z=a}},tooltips:{get:function(){return tooltips},set:function(a){tooltips=a}},tooltipContent:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return l},set:function(a){l.top=void 0!==
a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return M},set:function(a){M=a;K.reset(M);e.duration(M);g.duration(M);r.duration(M)}},color:{get:function(){return h},set:function(a){h=c.utils.getColor(a);e.color(h)}},rightAlignYAxis:{get:function(){return I},set:function(a){I=a;r.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.bullet=
function(){function a(g){g.each(function(a,g){var B=u-e.left-e.right,E=z-e.top-e.bottom;I=d3.select(this);c.utils.initSVG(I);var w=l.call(this,a,g).slice().sort(d3.descending),G=n.call(this,a,g).slice().sort(d3.descending),C=t.call(this,a,g).slice().sort(d3.descending),L=(a.rangeLabels?a.rangeLabels:[]).slice(),R=(a.markerLabels?a.markerLabels:[]).slice(),N=(a.measureLabels?a.measureLabels:[]).slice(),q=d3.scale.linear().domain(d3.extent(d3.merge([h,w]))).range(r?[B,0]:[0,B]);this.__chart__||d3.scale.linear().domain([0,
Infinity]).range(q.range());this.__chart__=q;var J=d3.min(w),O=d3.max(w),H=w[1],w=I.selectAll("g.nv-wrap.nv-bullet").data([a]),B=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),p=w.select("g");B.append("rect").attr("class","nv-range nv-rangeMax");B.append("rect").attr("class","nv-range nv-rangeAvg");B.append("rect").attr("class","nv-range nv-rangeMin");B.append("rect").attr("class","nv-measure");w.attr("transform","translate("+e.left+","+e.top+")");var S=function(a){return Math.abs(q(a)-
q(0))},y=function(a){return 0>a?q(a):q(0)};p.select("rect.nv-rangeMax").attr("height",E).attr("width",S(0<O?O:J)).attr("x",y(0<O?O:J)).datum(0<O?O:J);p.select("rect.nv-rangeAvg").attr("height",E).attr("width",S(H)).attr("x",y(H)).datum(H);p.select("rect.nv-rangeMin").attr("height",E).attr("width",S(O)).attr("x",y(O)).attr("width",S(0<O?J:O)).attr("x",y(0<O?J:O)).datum(0<O?J:O);p.select("rect.nv-measure").style("fill",F).attr("height",E/3).attr("y",E/3).attr("width",0>C?q(0)-q(C[0]):q(C[0])-q(0)).attr("x",
y(C)).on("mouseover",function(){D.elementMouseover({value:C[0],label:N[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){D.elementMousemove({value:C[0],label:N[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){D.elementMouseout({value:C[0],label:N[0]||"Current",color:d3.select(this).style("fill")})});J=E/6;G=G.map(function(a,c){return{value:a,label:R[c]}});B.selectAll("path.nv-markerTriangle").data(G).enter().append("path").attr("class","nv-markerTriangle").attr("transform",
function(a){return"translate("+q(a.value)+","+E/2+")"}).attr("d","M0,"+J+"L"+J+","+-J+" "+-J+","+-J+"Z").on("mouseover",function(a){D.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[q(a.value),E/2]})}).on("mousemove",function(a){D.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});
w.selectAll(".nv-range").on("mouseover",function(a,c){D.elementMouseover({value:a,label:L[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",function(){D.elementMousemove({value:C[0],label:N[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a,label:L[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})});return a}var e={top:0,right:0,bottom:0,left:0},g="left",r=!1,l=function(a){return a.ranges},
n=function(a){return a.markers?a.markers:[0]},t=function(a){return a.measures},h=[0],u=380,z=30,I=null,C=null,F=c.utils.getColor(["#1f77b4"]),D=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return l},set:function(a){l=a}},markers:{get:function(){return n},set:function(a){n=a}},measures:{get:function(){return t},set:function(a){t=a}},forceX:{get:function(){return h},set:function(a){h=
a}},width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return z},set:function(a){z=a}},tickFormat:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},orient:{get:function(){return g},set:function(a){g=a;r="right"==g||"bottom"==g}},color:{get:function(){return F},set:function(a){F=
c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.bulletChart=function(){function a(g){g.each(function(r,E){var B=d3.select(this);c.utils.initSVG(B);var w=c.utils.availableWidth(z,B,n),G=I-n.top-n.bottom;a.update=function(){a(g)};a.container=this;if(r&&t.call(this,r,E))B.selectAll(".nv-noData").remove();else return c.utils.noData(a,B),a;var D=t.call(this,r,E).slice().sort(d3.descending),L=h.call(this,r,E).slice().sort(d3.descending),M=u.call(this,r,E).slice().sort(d3.descending),N=
B.selectAll("g.nv-wrap.nv-bulletChart").data([r]),q=N.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),B=N.select("g");q.append("g").attr("class","nv-bulletWrap");q.append("g").attr("class","nv-titles");N.attr("transform","translate("+n.left+","+n.top+")");var J=d3.scale.linear().domain([0,Math.max(D[0],L[0],M[0])]).range(l?[w,0]:[0,w]),O=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(J.range());this.__chart__=J;D=q.select(".nv-titles").append("g").attr("text-anchor",
"end").attr("transform","translate(-6,"+(I-n.top-n.bottom)/2+")");D.append("text").attr("class","nv-title").text(function(a){return a.title});D.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});e.width(w).height(G);D=B.select(".nv-bulletWrap");d3.transition(D).call(e);var H=C||J.tickFormat(w/100),w=B.selectAll("g.nv-tick").data(J.ticks(F?F:w/50),function(a){return this.textContent||H(a)}),B=w.enter().append("g").attr("class","nv-tick").attr("transform",
function(a){return"translate("+O(a)+",0)"}).style("opacity",1E-6);B.append("line").attr("y1",G).attr("y2",7*G/6);B.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*G/6).text(H);B=d3.transition(w).attr("transform",function(a){return"translate("+J(a)+",0)"}).style("opacity",1);B.select("line").attr("y1",G).attr("y2",7*G/6);B.select("text").attr("y",7*G/6);d3.transition(w.exit()).attr("transform",function(a){return"translate("+J(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();
return a}var e=c.models.bullet(),g=c.models.tooltip(),r="left",l=!1,n={top:5,right:40,bottom:20,left:120},t=function(a){return a.ranges},h=function(a){return a.markers?a.markers:[0]},u=function(a){return a.measures},z=null,I=55,C=null,F=null,D=null,B=d3.dispatch("tooltipShow","tooltipHide");g.duration(0).headerEnabled(!1);e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};g.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});
e.dispatch.on("elementMousemove.tooltip",function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});a.bullet=e;a.dispatch=B;a.tooltip=g;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return t},set:function(a){t=a}},markers:{get:function(){return h},set:function(a){h=a}},measures:{get:function(){return u},set:function(a){u=a}},width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return I},set:function(a){I=a}},tickFormat:{get:function(){return C},
set:function(a){C=a}},ticks:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return D},set:function(a){D=a}},tooltips:{get:function(){return g.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");g.enabled(!!a)}},tooltipContent:{get:function(){return g.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");g.contentGenerator(a)}},margin:{get:function(){return n},set:function(a){n.top=
void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},orient:{get:function(){return r},set:function(a){r=a;l="right"==r||"bottom"==r}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.candlestickBar=function(){function a(q){q.each(function(a){n=d3.select(this);var q=c.utils.availableWidth(g,n,e),H=c.utils.availableHeight(r,n,e);c.utils.initSVG(n);var p=q/a[0].values.length*.45;
t.domain(G||d3.extent(a[0].values.map(u).concat(B)));L?t.range(P||[.5*q/a[0].values.length,q*(a[0].values.length-.5)/a[0].values.length]):t.range(P||[5+p/2,q-p/2-5]);h.domain(U||[d3.min(a[0].values.map(D).concat(E)),d3.max(a[0].values.map(F).concat(E))]).range(R||[H,0]);t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-.01*t.domain()[0],t.domain()[1]+.01*t.domain()[1]]):t.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-
.01*h.domain()[1]]):h.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var w=a.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),y=w.append("defs"),w=w.append("g"),J=a.select("g");w.append("g").attr("class","nv-ticks");a.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){N.chartClick({data:a,index:c,pos:d3.event,id:l})});y.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");a.select("#nv-chart-clip-path-"+
l+" rect").attr("width",q).attr("height",H);J.attr("clip-path",M?"url(#nv-chart-clip-path-"+l+")":"");q=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});q.exit().remove();q=q.enter().append("g").attr("class",function(a,c,e){return(I(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});q.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+t(u(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return h(F(a,
c))}).attr("x2",0).attr("y2",function(a,c){return h(D(a,c))});q.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(t(u(a,c))-p/2)+","+(h(z(a,c))-(I(a,c)>C(a,c)?h(C(a,c))-h(I(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",p).attr("height",function(a,c){var e=I(a,c),g=C(a,c);return e>g?h(g)-h(e):h(e)-h(g)});n.selectAll(".nv-candlestick-lines").transition().attr("transform",function(a,c){return"translate("+t(u(a,c))+",0)"}).attr("x1",
0).attr("y1",function(a,c){return h(F(a,c))}).attr("x2",0).attr("y2",function(a,c){return h(D(a,c))});n.selectAll(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+(t(u(a,c))-p/2)+","+(h(z(a,c))-(I(a,c)>C(a,c)?h(C(a,c))-h(I(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",p).attr("height",function(a,c){var e=I(a,c),g=C(a,c);return e>g?h(g)-h(e):h(e)-h(g)})});return a}var e={top:0,right:0,bottom:0,left:0},g=null,r=null,l=Math.floor(1E4*Math.random()),n,t=d3.scale.linear(),
h=d3.scale.linear(),u=function(a){return a.x},z=function(a){return a.y},I=function(a){return a.open},C=function(a){return a.close},F=function(a){return a.high},D=function(a){return a.low},B=[],E=[],L=!1,M=!0,K=c.utils.defaultColor(),w=!1,G,U,P,R,N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-candlestickBar .nv-tick-0-"+
c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=N;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return G},set:function(a){G=a}},yDomain:{get:function(){return U},
set:function(a){U=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceX:{get:function(){return B},set:function(a){B=a}},forceY:{get:function(){return E},set:function(a){E=a}},padData:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return M},set:function(a){M=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return w},set:function(a){w=a}},x:{get:function(){return u},set:function(a){u=
a}},y:{get:function(){return z},set:function(a){z=a}},open:{get:function(){return I()},set:function(a){I=a}},close:{get:function(){return C()},set:function(a){C=a}},high:{get:function(){return F},set:function(a){F=a}},low:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return K},
set:function(a){K=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.cumulativeLineChart=function(){function a(p){W.reset();W.models(g);B&&W.models(r);E&&W.models(l);p.each(function(p){function q(){na.data([y]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var u=d3.select(this);c.utils.initSVG(u);u.classed("nv-chart-"+P,!0);var V=this,T=c.utils.availableWidth(C,u,z),W=c.utils.availableHeight(F,u,z);a.update=function(){0===H?u.call(a):u.transition().duration(H).call(a)};
a.container=this;R.setter(A(p),a.update).getter(Z(p)).update();R.disabled=p.map(function(a){return!!a.disabled});if(!N){var la;N={};for(la in R)N[la]=R[la]instanceof Array?R[la].slice(0):R[la]}la=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,c){y.x=d3.event.x;y.i=Math.round(S.invert(y.x));q()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");R.index=y.i;O.stateChange(R)});if(p&&p.length&&p.filter(function(a){return a.values.length}).length)u.selectAll(".nv-noData").remove();
else return c.utils.noData(a,u),a;G=g.xScale();U=g.yScale();if(w)g.yDomain(null);else{var ha=p.filter(function(a){return!a.disabled}).map(function(a,c){var e=d3.extent(a.values,g.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),ha=[d3.min(ha,function(a){return a[0]}),d3.max(ha,function(a){return a[1]})];g.yDomain(ha)}S.domain([0,p[0].values.length-1]).range([0,T]).clamp(!0);p=e(y.i,p);var ja=K?"none":"all",qa=u.selectAll("g.nv-wrap.nv-cumulativeLine").data([p]),ya=qa.enter().append("g").attr("class",
"nvd3 nv-wrap nv-cumulativeLine").append("g"),ha=qa.select("g");ya.append("g").attr("class","nv-interactive");ya.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ya.append("g").attr("class","nv-y nv-axis");ya.append("g").attr("class","nv-background");ya.append("g").attr("class","nv-linesWrap").style("pointer-events",ja);ya.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ya.append("g").attr("class","nv-legendWrap");ya.append("g").attr("class","nv-controlsWrap");
D&&(n.width(T),ha.select(".nv-legendWrap").datum(p).call(n),z.top!=n.height()&&(z.top=n.height(),W=c.utils.availableHeight(F,u,z)),ha.select(".nv-legendWrap").attr("transform","translate(0,"+-z.top+")"));M&&(ja=[{key:"Re-scale y-axis",disabled:!w}],t.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ha.select(".nv-controlsWrap").datum(ja).attr("transform","translate(0,"+-z.top+")").call(t));qa.attr("transform","translate("+z.left+","+z.top+")");L&&ha.select(".nv-y.nv-axis").attr("transform",
"translate("+T+",0)");ja=p.filter(function(a){return a.tempDisabled});qa.select(".tempDisabled").remove();ja.length&&qa.append("text").attr("class","tempDisabled").attr("x",T/2).attr("y","-.71em").style("text-anchor","end").text(ja.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");K&&(h.width(T).height(W).margin({left:z.left,top:z.top}).svgContainer(u).xScale(G),qa.select(".nv-interactive").call(h));ya.select(".nv-background").append("rect");ha.select(".nv-background rect").attr("width",
T).attr("height",W);g.y(function(a){return a.display.y}).width(T).height(W).color(p.map(function(a,c){return a.color||I(a,c)}).filter(function(a,c){return!p[c].disabled&&!p[c].tempDisabled}));qa=ha.select(".nv-linesWrap").datum(p.filter(function(a){return!a.disabled&&!a.tempDisabled}));qa.call(g);p.forEach(function(a,c){a.seriesIndex=c});ya=p.filter(function(a){return!a.disabled&&!!J(a)});ya=ha.select(".nv-avgLinesWrap").selectAll("line").data(ya,function(a){return a.key});ja=function(a){a=U(J(a));
return 0>a?0:a>W?W:a};ya.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,c){return g.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",T).attr("y1",ja).attr("y2",ja);ya.style("stroke-opacity",function(a){a=U(J(a));return 0>a||a>W?0:1}).attr("x1",0).attr("x2",T).attr("y1",ja).attr("y2",ja);ya.exit().remove();var na=qa.selectAll(".nv-indexLine").data([y]);na.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill",
"red").attr("fill-opacity",.5).style("pointer-events","all").call(la);na.attr("transform",function(a){return"translate("+S(a.i)+",0)"}).attr("height",W);B&&(r.scale(G)._ticks(c.utils.calcTicksX(T/70,p)).tickSize(-W,0),ha.select(".nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")"),ha.select(".nv-x.nv-axis").call(r));E&&(l.scale(U)._ticks(c.utils.calcTicksY(W/36,p)).tickSize(-T,0),ha.select(".nv-y.nv-axis").call(l));ha.select(".nv-background rect").on("click",function(){y.x=d3.mouse(this)[0];
y.i=Math.round(S.invert(y.x));R.index=y.i;O.stateChange(R);q()});g.dispatch.on("elementClick",function(a){y.i=a.pointIndex;y.x=S(y.i);R.index=y.i;O.stateChange(R);q()});t.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;w=!c.disabled;R.rescaleY=w;O.stateChange(R);a.update()});n.dispatch.on("stateChange",function(c){for(var e in c)R[e]=c[e];O.stateChange(R);a.update()});h.dispatch.on("elementMousemove",function(e){g.clearHighlights();var q,n,y,A=[];p.filter(function(a,c){a.seriesIndex=
c;return!a.disabled}).forEach(function(h,l){n=c.interactiveBisect(h.values,e.pointXValue,a.x());g.highlightPoint(l,n,!0);var p=h.values[n];"undefined"!==typeof p&&("undefined"===typeof q&&(q=p),"undefined"===typeof y&&(y=a.xScale()(a.x()(p,n))),A.push({key:h.key,value:a.y()(p,n),color:I(h,h.seriesIndex)}))});if(2<A.length){var t=a.yScale().invert(e.mouseY),H=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),t=c.nearestValueIndex(A.map(function(a){return a.value}),t,H);null!==t&&(A[t].highlight=
!0)}t=r.tickFormat()(a.x()(q,n),n);h.tooltip.position({left:y+z.left,top:e.mouseY+z.top}).chartContainer(V.parentNode).valueFormatter(function(a,c){return l.tickFormat()(a)}).data({value:t,series:A})();h.renderGuideLine(y)});h.dispatch.on("elementMouseout",function(a){g.clearHighlights()});O.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),R.disabled=c.disabled);"undefined"!==typeof c.index&&(y.i=c.index,y.x=S(y.i),R.index=c.index,na.data([y]));
"undefined"!==typeof c.rescaleY&&(w=c.rescaleY);a.update()})});W.renderEnd("cumulativeLineChart immediate");return a}function e(a,c){T||(T=g.y());return c.map(function(c,e){if(!c.values)return c;var g=c.values[a];if(null==g)return c;var h=T(g,a);if(-.95>h&&!p)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display={y:(T(a,c)-h)/(1+h)};return a});return c})}var g=c.models.line(),r=c.models.axis(),l=c.models.axis(),n=c.models.legend(),t=c.models.legend(),h=c.interactiveGuideline(),
u=c.models.tooltip(),z={top:30,right:30,bottom:50,left:60},I=c.utils.defaultColor(),C=null,F=null,D=!0,B=!0,E=!0,L=!1,M=!0,K=!1,w=!0,G,U,P=g.id(),R=c.utils.state(),N=null,q=null,J=function(a){return a.average},O=d3.dispatch("stateChange","changeState","renderEnd"),H=250,p=!1;R.index=0;R.rescaleY=w;r.orient("bottom").tickPadding(7);l.orient(L?"right":"left");u.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return r.tickFormat()(a,c)});t.updateState(!1);var S=
d3.scale.linear(),y={i:0,x:0},W=c.utils.renderWatch(O,H),Z=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:y.i,rescaleY:w}}},A=function(a){return function(c){void 0!==c.index&&(y.i=c.index);void 0!==c.rescaleY&&(w=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};g.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;u.data(c).position(c.pos).hidden(!1)});
g.dispatch.on("elementMouseout.tooltip",function(a){u.hidden(!0)});var T=null;a.dispatch=O;a.lines=g;a.legend=n;a.controls=t;a.xAxis=r;a.yAxis=l;a.interactiveLayer=h;a.state=R;a.tooltip=u;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return C},set:function(a){C=a}},height:{get:function(){return F},set:function(a){F=a}},rescaleY:{get:function(){return w},set:function(a){w=a}},showControls:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return D},
set:function(a){D=a}},average:{get:function(){return J},set:function(a){J=a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return q},set:function(a){q=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},noErrorCheck:{get:function(){return p},set:function(a){p=a}},tooltips:{get:function(){return u.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");u.enabled(!!a)}},
tooltipContent:{get:function(){return u.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");u.contentGenerator(a)}},margin:{get:function(){return z},set:function(a){z.top=void 0!==a.top?a.top:z.top;z.right=void 0!==a.right?a.right:z.right;z.bottom=void 0!==a.bottom?a.bottom:z.bottom;z.left=void 0!==a.left?a.left:z.left}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a);n.color(I)}},useInteractiveGuideline:{get:function(){return K},
set:function(c){K=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;l.orient(a?"right":"left")}},duration:{get:function(){return H},set:function(a){H=a;g.duration(H);r.duration(H);l.duration(H);W.reset(H)}}});c.utils.inheritOptions(a,g);c.utils.initOptions(a);return a};c.models.discreteBar=function(){function a(l){P.reset();l.each(function(a){var l=g-e.left-e.right,G=r-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);a.forEach(function(a,
c){a.values.forEach(function(a){a.series=c})});var O=B&&E?[]:a.map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:z(a,c),y0:a.y0}})});t.domain(B||d3.merge(O).map(function(a){return a.x})).rangeBands(L||[0,l],.1);h.domain(E||d3.extent(d3.merge(O).map(function(a){return a.y}).concat(I)));F?h.range(M||[G-(0>h.domain()[0]?12:0),0<h.domain()[1]?12:0]):h.range(M||[G,0]);U=U||h.copy().range([h(0),h(0)]);l=n.selectAll("g.nv-wrap.nv-discretebar").data([a]);G=l.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");l.select("g");G.append("g").attr("class","nv-groups");l.attr("transform","translate("+e.left+","+e.top+")");l=l.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);l.exit().watchTransition(P,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();l.attr("class",function(a,c){return"nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover});l.watchTransition(P,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);l=l.selectAll("g.nv-bar").data(function(a){return a.values});l.exit().remove();G=l.enter().append("g").attr("transform",function(a,c,e){return"translate("+(t(u(a,c))+.05*t.rangeBand())+", "+h(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);K.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,
c){d3.select(this).classed("hover",!1);K.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){K.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){K.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){K.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});G.append("rect").attr("height",0).attr("width",
.9*t.rangeBand()/a.length);F?(G.append("text").attr("text-anchor","middle"),l.select("text").text(function(a,c){return D(z(a,c))}).watchTransition(P,"discreteBar: bars text").attr("x",.9*t.rangeBand()/2).attr("y",function(a,c){return 0>z(a,c)?h(z(a,c))-h(0)+12:-4})):l.selectAll("text").remove();l.attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||C(a,c)}).style("stroke",function(a,c){return a.color||C(a,c)}).select("rect").attr("class",
w).watchTransition(P,"discreteBar: bars rect").attr("width",.9*t.rangeBand()/a.length);l.watchTransition(P,"discreteBar: bars").attr("transform",function(a,c){var e=t(u(a,c))+.05*t.rangeBand(),g=0>z(a,c)?h(0):1>h(0)-h(z(a,c))?h(0)-1:h(z(a,c));return"translate("+e+", "+g+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(h(z(a,c))-h(E&&E[0]||0))||1)});t.copy();U=h.copy()});P.renderEnd("discreteBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,r=500,l=Math.floor(1E4*
Math.random()),n,t=d3.scale.ordinal(),h=d3.scale.linear(),u=function(a){return a.x},z=function(a){return a.y},I=[0],C=c.utils.defaultColor(),F=!1,D=d3.format(",.2f"),B,E,L,M,K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",G=250,U,P=c.utils.renderWatch(K,G);a.dispatch=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},
set:function(a){r=a}},forceY:{get:function(){return I},set:function(a){I=a}},showValues:{get:function(){return F},set:function(a){F=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return z},set:function(a){z=a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return B},set:function(a){B=a}},yDomain:{get:function(){return E},set:function(a){E=a}},xRange:{get:function(){return L},set:function(a){L=
a}},yRange:{get:function(){return M},set:function(a){M=a}},valueFormat:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return l},set:function(a){l=a}},rectClass:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a)}},
duration:{get:function(){return G},set:function(a){G=a;P.reset(G)}}});c.utils.initOptions(a);return a};c.models.discreteBarChart=function(){function a(l){K.reset();K.models(e);z&&K.models(g);I&&K.models(r);l.each(function(l){var u=d3.select(this);c.utils.initSVG(u);var w=c.utils.availableWidth(t,u,n),E=c.utils.availableHeight(h,u,n);a.update=function(){L.beforeUpdate();u.transition().duration(M).call(a)};a.container=this;if(l&&l.length&&l.filter(function(a){return a.values.length}).length)u.selectAll(".nv-noData").remove();
else return c.utils.noData(a,u),a;D=e.xScale();B=e.yScale().clamp(!0);var G=u.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),q=G.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),J=q.append("defs"),G=G.select("g");q.append("g").attr("class","nv-x nv-axis");q.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");q.append("g").attr("class","nv-barsWrap");G.attr("transform","translate("+n.left+","+n.top+")");C&&G.select(".nv-y.nv-axis").attr("transform",
"translate("+w+",0)");e.width(w).height(E);G.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(e);J.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");G.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",D.rangeBand()*(F?2:1)).attr("height",16).attr("x",-D.rangeBand()/(F?1:2));z&&(g.scale(D)._ticks(c.utils.calcTicksX(w/100,l)).tickSize(-E,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+(B.range()[0]+(e.showValues()&&0>B.domain()[0]?
16:0))+")"),G.select(".nv-x.nv-axis").call(g),q=G.select(".nv-x.nv-axis").selectAll("g"),F&&q.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));I&&(r.scale(B)._ticks(c.utils.calcTicksY(E/36,l)).tickSize(-w,0),G.select(".nv-y.nv-axis").call(r));G.select(".nv-zeroLine line").attr("x1",0).attr("x2",w).attr("y1",B(0)).attr("y2",B(0))});K.renderEnd("discreteBar chart immediate");return a}var e=c.models.discreteBar(),g=c.models.axis(),r=c.models.axis(),l=c.models.tooltip(),
n={top:15,right:10,bottom:50,left:60},t=null,h=null,u=c.utils.getColor(),z=!0,I=!0,C=!1,F=!1,D,B,E=null,L=d3.dispatch("beforeUpdate","renderEnd"),M=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});r.orient(C?"right":"left").tickFormat(d3.format(",.1f"));l.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return r.tickFormat()(a,c)}).keyFormatter(function(a,c){return g.tickFormat()(a,c)});var K=c.utils.renderWatch(L,M);e.dispatch.on("elementMouseover.tooltip",function(c){c.series=
{key:a.x()(c.data),value:a.y()(c.data),color:c.color};l.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){l.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=L;a.discretebar=e;a.xAxis=g;a.yAxis=r;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return h},set:function(a){h=a}},staggerLabels:{get:function(){return F},
set:function(a){F=a}},showXAxis:{get:function(){return z},set:function(a){z=a}},showYAxis:{get:function(){return I},set:function(a){I=a}},noData:{get:function(){return E},set:function(a){E=a}},tooltips:{get:function(){return l.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!a)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(a)}},
margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},duration:{get:function(){return M},set:function(a){M=a;K.reset(M);e.duration(M);g.duration(M);r.duration(M)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);e.color(u)}},rightAlignYAxis:{get:function(){return C},set:function(a){C=a;r.orient(a?"right":"left")}}});c.utils.inheritOptions(a,
e);c.utils.initOptions(a);return a};c.models.distribution=function(){function a(g){C.reset();g.each(function(a){var g="x"==l?"y":"x",u=d3.select(this);c.utils.initSVG(u);I=I||h;a=u.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");u=a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");a=u.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+
c}).style("stroke",function(a,c){return t(a,c)});u=a.selectAll("line.nv-dist"+l).data(function(a){return a.values});u.enter().append("line").attr(l+"1",function(a,c){return I(n(a,c))}).attr(l+"2",function(a,c){return I(n(a,c))});C.transition(a.exit().selectAll("line.nv-dist"+l),"dist exit").attr(l+"1",function(a,c){return h(n(a,c))}).attr(l+"2",function(a,c){return h(n(a,c))}).style("stroke-opacity",0).remove();u.attr("class",function(a,c){return"nv-dist"+l+" nv-dist"+l+"-"+c}).attr(g+"1",0).attr(g+
"2",r);C.transition(u,"dist").attr(l+"1",function(a,c){return h(n(a,c))}).attr(l+"2",function(a,c){return h(n(a,c))});I=h.copy()});C.renderEnd("distribution immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=400,r=8,l="x",n=function(a){return a[l]},t=c.utils.defaultColor(),h=d3.scale.linear(),u=250,z=d3.dispatch("renderEnd"),I,C=c.utils.renderWatch(z,u);a.options=c.utils.optionsFunc.bind(a);a.dispatch=z;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:
e.top;e.right="undefined"!=typeof c.right?c.right:e.right;e.bottom="undefined"!=typeof c.bottom?c.bottom:e.bottom;e.left="undefined"!=typeof c.left?c.left:e.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.axis=function(c){if(!arguments.length)return l;l=c;return a};a.size=function(c){if(!arguments.length)return r;r=c;return a};a.getData=function(c){if(!arguments.length)return n;n=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return h;h=c;return a};
a.color=function(e){if(!arguments.length)return t;t=c.utils.getColor(e);return a};a.duration=function(c){if(!arguments.length)return u;u=c;C.reset(u);return a};return a};c.models.furiousLegend=function(){function a(B){function E(a,c){if("furious"!=D)return"#000";if(C)return a.disengaged?n(a,c):"#fff";if(!C)return a.disabled?n(a,c):"#fff"}function L(a,c){return C&&"furious"==D?a.disengaged?"#fff":n(a,c):a.disabled?"#fff":n(a,c)}B.each(function(a){var B=g-e.left-e.right,w=d3.select(this);c.utils.initSVG(w);
w=w.selectAll("g.nv-legend").data([a]);w.enter().append("g").attr("class","nvd3 nv-legend").append("g");a=w.select("g");w.attr("transform","translate("+e.left+","+e.top+")");var G=a.selectAll(".nv-series").data(function(a){return"furious"!=D?a:a.filter(function(a){return C?!0:!a.disengaged})}),w=G.enter().append("g").attr("class","nv-series"),M;"classic"==D?(w.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),M=G.select("circle")):"furious"==D&&(w.append("rect").style("stroke-width",
2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),M=G.select("rect"),w.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),G.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",E(a,c))}));w.append("text").attr("text-anchor",
"start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var P=G.select("text.nv-legend-text");G.on("mouseover",function(a,c){F.legendMouseover(a,c)}).on("mouseout",function(a,c){F.legendMouseout(a,c)}).on("click",function(a,c){F.legendClick(a,c);var e=G.data();z&&("classic"==D?I?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==D&&(C?(a.disengaged=!a.disengaged,
a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):C||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),F.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=D||!C)if(F.legendDblclick(a,c),z){var e=
G.data();e.forEach(function(a){a.disabled=!0;"furious"==D&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==D&&(a.userDisabled=a.disabled);F.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});G.classed("nv-disabled",function(a){return a.userDisabled});G.exit().remove();P.attr("fill",E).text(l);var R;switch(D){case "furious":R=23;break;case "classic":R=20}if(t){var N=[];G.each(function(a,e){var g=d3.select(this).select("text"),l;try{if(l=g.node().getComputedTextLength(),0>=l)throw Error();
}catch(la){l=c.utils.calcApproxTextWidth(g)}N.push(l+h)});for(var q=0,J=0,w=[];J<B&&q<N.length;)w[q]=N[q],J+=N[q++];for(0===q&&(q=1);J>B&&1<q;){w=[];q--;for(J=0;J<N.length;J++)N[J]>(w[J%q]||0)&&(w[J%q]=N[J]);J=w.reduce(function(a,c,e,g){return a+c})}for(var O=[],H=B=0;B<q;B++)O[B]=H,H+=w[B];G.attr("transform",function(a,c){return"translate("+O[c%q]+","+(5+Math.floor(c/q)*R)+")"});u?a.attr("transform","translate("+(g-e.right-J)+","+e.top+")"):a.attr("transform","translate(0,"+e.top+")");r=e.top+e.bottom+
Math.ceil(N.length/q)*R}else{var p=5,S=5,y=0,W;G.attr("transform",function(a,c){var l=d3.select(this).select("text").node().getComputedTextLength()+h;W=S;g<e.left+e.right+W+l&&(S=W=5,p+=R);S+=l;S>y&&(y=S);return"translate("+W+","+p+")"});a.attr("transform","translate("+(g-e.right-y)+","+e.top+")");r=e.top+e.bottom+p+15}"furious"==D&&M.attr("width",function(a,c){return P[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);M.style("fill",L).style("stroke",function(a,c){return a.color||
n(a,c)})});return a}var e={top:5,right:0,bottom:5,left:0},g=400,r=20,l=function(a){return a.key},n=c.utils.getColor(),t=!0,h=28,u=!0,z=!0,I=!1,C=!1,F=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),D="classic";a.dispatch=F;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},key:{get:function(){return l},set:function(a){l=a}},align:{get:function(){return t},
set:function(a){t=a}},rightAlign:{get:function(){return u},set:function(a){u=a}},padding:{get:function(){return h},set:function(a){h=a}},updateState:{get:function(){return z},set:function(a){z=a}},radioButtonMode:{get:function(){return I},set:function(a){I=a}},expanded:{get:function(){return C},set:function(a){C=a}},vers:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBar=function(){function a(P){P.each(function(a){U.reset();n=d3.select(this);var P=c.utils.availableWidth(g,n,e),q=c.utils.availableHeight(r,n,e);c.utils.initSVG(n);t.domain(E||d3.extent(a[0].values.map(u).concat(I)));F?t.range(M||[.5*P/a[0].values.length,P*(a[0].values.length-.5)/a[0].values.length]):
t.range(M||[0,P]);h.domain(L||d3.extent(a[0].values.map(z).concat(C))).range(K||[q,0]);t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-.01*t.domain()[0],t.domain()[1]+.01*t.domain()[1]]):t.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var J=n.selectAll("g.nv-wrap.nv-historicalBar-"+l).data([a[0].values]),O=J.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
l),H=O.append("defs"),O=O.append("g"),p=J.select("g");O.append("g").attr("class","nv-bars");J.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){w.chartClick({data:a,index:c,pos:d3.event,id:l})});H.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");J.select("#nv-chart-clip-path-"+l+" rect").attr("width",P).attr("height",q);p.attr("clip-path",D?"url(#nv-chart-clip-path-"+l+")":"");q=J.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
c){return u(a,c)});q.exit().remove();q.enter().append("rect").attr("x",0).attr("y",function(a,e){return c.utils.NaNtoZero(h(Math.max(0,z(a,e))))}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.abs(h(z(a,e))-h(0)))}).attr("transform",function(c,e){return"translate("+(t(u(c,e))-P/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){G&&(d3.select(this).classed("hover",!0),w.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,c){G&&(d3.select(this).classed("hover",
!1),w.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){G&&w.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){G&&(w.elementClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(a,c){G&&(w.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});q.attr("fill",function(a,c){return B(a,c)}).attr("class",
function(a,c,e){return(0>z(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(U,"bars").attr("transform",function(c,e){return"translate("+(t(u(c,e))-P/a[0].values.length*.45)+",0)"}).attr("width",P/a[0].values.length*.9);q.watchTransition(U,"bars").attr("y",function(a,e){var g=0>z(a,e)?h(0):1>h(0)-h(z(a,e))?h(0)-1:h(z(a,e));return c.utils.NaNtoZero(g)}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.max(Math.abs(h(z(a,e))-h(0)),1))})});U.renderEnd("historicalBar immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=null,r=null,l=Math.floor(1E4*Math.random()),n=null,t=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},z=function(a){return a.y},I=[],C=[0],F=!1,D=!0,B=c.utils.defaultColor(),E,L,M,K,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),G=!0,U=c.utils.renderWatch(w,0);a.highlightPoint=function(a,c){n.select(".nv-bars .nv-bar-0-"+a).classed("hover",c)};a.clearHighlights=
function(){n.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},forceX:{get:function(){return I},set:function(a){I=a}},forceY:{get:function(){return C},set:function(a){C=a}},padData:{get:function(){return F},set:function(a){F=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return z},set:function(a){z=
a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return E},set:function(a){E=a}},yDomain:{get:function(){return L},set:function(a){L=a}},xRange:{get:function(){return M},set:function(a){M=a}},yRange:{get:function(){return K},set:function(a){K=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return G},set:function(a){G=a}},
margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBarChart=function(a){function e(a){a.each(function(h){N.reset();N.models(g);D&&N.models(r);B&&N.models(l);var q=d3.select(this),H=this;c.utils.initSVG(q);var p=c.utils.availableWidth(I,
q,u),J=c.utils.availableHeight(C,q,u);e.update=function(){q.transition().duration(R).call(e)};e.container=this;w.disabled=h.map(function(a){return!!a.disabled});if(!G){var y;G={};for(y in w)G[y]=w[y]instanceof Array?w[y].slice(0):w[y]}if(h&&h.length&&h.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return c.utils.noData(e,q),e;M=g.xScale();K=g.yScale();var W=q.selectAll("g.nv-wrap.nv-historicalBarChart").data([h]);y=W.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var Z=W.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");F&&(n.width(p),Z.select(".nv-legendWrap").datum(h).call(n),u.top!=n.height()&&(u.top=n.height(),J=c.utils.availableHeight(C,q,u)),W.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));W.attr("transform","translate("+u.left+","+u.top+")");E&&Z.select(".nv-y.nv-axis").attr("transform",
"translate("+p+",0)");L&&(t.width(p).height(J).margin({left:u.left,top:u.top}).svgContainer(q).xScale(M),W.select(".nv-interactive").call(t));g.width(p).height(J).color(h.map(function(a,c){return a.color||z(a,c)}).filter(function(a,c){return!h[c].disabled}));Z.select(".nv-barsWrap").datum(h.filter(function(a){return!a.disabled})).transition().call(g);D&&(r.scale(M)._ticks(c.utils.calcTicksX(p/100,h)).tickSize(-J,0),Z.select(".nv-x.nv-axis").attr("transform","translate(0,"+K.range()[0]+")"),Z.select(".nv-x.nv-axis").transition().call(r));
B&&(l.scale(K)._ticks(c.utils.calcTicksY(J/36,h)).tickSize(-p,0),Z.select(".nv-y.nv-axis").transition().call(l));t.dispatch.on("elementMousemove",function(a){g.clearHighlights();var p,q,n,y=[];h.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){q=c.interactiveBisect(h.values,a.pointXValue,e.x());g.highlightPoint(q,!0);var r=h.values[q];void 0!==r&&(void 0===p&&(p=r),void 0===n&&(n=e.xScale()(e.x()(r,q))),y.push({key:h.key,value:e.y()(r,q),color:z(h,h.seriesIndex),data:h.values[q]}))});
var A=r.tickFormat()(e.x()(p,q));t.tooltip.position({left:n+u.left,top:a.mouseY+u.top}).chartContainer(H.parentNode).valueFormatter(function(a,c){return l.tickFormat()(a)}).data({value:A,index:q,series:y})();t.renderGuideLine(n)});t.dispatch.on("elementMouseout",function(a){P.tooltipHide();g.clearHighlights()});n.dispatch.on("legendClick",function(c,g){c.disabled=!c.disabled;h.filter(function(a){return!a.disabled}).length||h.map(function(a){a.disabled=!1;W.selectAll(".nv-series").classed("disabled",
!1);return a});w.disabled=h.map(function(a){return!!a.disabled});P.stateChange(w);a.transition().call(e)});n.dispatch.on("legendDblclick",function(a){h.forEach(function(a){a.disabled=!0});a.disabled=!1;w.disabled=h.map(function(a){return!!a.disabled});P.stateChange(w);e.update()});P.on("changeState",function(a){"undefined"!==typeof a.disabled&&(h.forEach(function(c,e){c.disabled=a.disabled[e]}),w.disabled=a.disabled);e.update()})});N.renderEnd("historicalBarChart immediate");return e}var g=a||c.models.historicalBar(),
r=c.models.axis(),l=c.models.axis(),n=c.models.legend(),t=c.interactiveGuideline(),h=c.models.tooltip(),u={top:30,right:90,bottom:50,left:90},z=c.utils.defaultColor(),I=null,C=null,F=!1,D=!0,B=!0,E=!1,L=!1,M,K,w={},G=null,U=null,P=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),R=250;r.orient("bottom").tickPadding(7);l.orient(E?"right":"left");h.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return r.tickFormat()(a,
c)});var N=c.utils.renderWatch(P,0);g.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:e.x()(a.data),value:e.y()(a.data),color:a.color};h.data(a).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0)});g.dispatch.on("elementMousemove.tooltip",function(a){h.position({top:d3.event.pageY,left:d3.event.pageX})()});e.dispatch=P;e.bars=g;e.legend=n;e.xAxis=r;e.yAxis=l;e.interactiveLayer=t;e.tooltip=h;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},
{width:{get:function(){return I},set:function(a){I=a}},height:{get:function(){return C},set:function(a){C=a}},showLegend:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return B},set:function(a){B=a}},defaultState:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return U},set:function(a){U=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");
h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},color:{get:function(){return z},set:function(a){z=c.utils.getColor(a);n.color(z);g.color(z)}},duration:{get:function(){return R},
set:function(a){R=a;N.reset(R);l.duration(R);r.duration(R)}},rightAlignYAxis:{get:function(){return E},set:function(a){E=a;l.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return L},set:function(a){L=a;!0===a&&e.interactive(!1)}}});c.utils.inheritOptions(e,g);c.utils.initOptions(e);return e};c.models.ohlcBarChart=function(){var a=c.models.historicalBarChart(c.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;
return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.candlestickBarChart=function(){var a=c.models.historicalBarChart(c.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=
c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.legend=function(){function a(B){function E(a,c){if("furious"!=D)return"#000";if(C)return a.disengaged?"#000":
"#fff";if(!C)return a.color||(a.color=n(a,c)),a.disabled?a.color:"#fff"}function L(a,c){return C&&"furious"==D?a.disengaged?"#eee":a.color||n(a,c):a.color||n(a,c)}function M(a,c){return C&&"furious"==D?1:a.disabled?0:1}B.each(function(a){var n=g-e.left-e.right,G=d3.select(this);c.utils.initSVG(G);var B=G.selectAll("g.nv-legend").data([a]);a=B.enter().append("g").attr("class","nvd3 nv-legend").append("g");G=B.select("g");B.attr("transform","translate("+e.left+","+e.top+")");var K=G.selectAll(".nv-series").data(function(a){return"furious"!=
D?a:a.filter(function(a){return C?!0:!a.disengaged})}),B=K.enter().append("g").attr("class","nv-series"),R,N;switch(D){case "furious":N=23;break;case "classic":N=20}"classic"==D?(B.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),R=K.select("circle")):"furious"==D&&(B.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),R=K.select(".nv-legend-symbol"),B.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),K.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",E(a,c))}));B.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var q=K.select("text.nv-legend-text");K.on("mouseover",function(a,c){F.legendMouseover(a,c)}).on("mouseout",function(a,c){F.legendMouseout(a,c)}).on("click",function(a,c){F.legendClick(a,c);var e=K.data();z&&("classic"==D?I?(e.forEach(function(a){a.disabled=
!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==D&&(C?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):C||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),F.stateChange({disabled:e.map(function(a){return!!a.disabled}),
disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=D||!C)if(F.legendDblclick(a,c),z){var e=K.data();e.forEach(function(a){a.disabled=!0;"furious"==D&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==D&&(a.userDisabled=a.disabled);F.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});K.classed("nv-disabled",function(a){return a.userDisabled});K.exit().remove();q.attr("fill",E).text(l);var J=0;if(t){var O=[];K.each(function(a,e){var g=
d3.select(this).select("text"),l;try{if(l=g.node().getComputedTextLength(),0>=l)throw Error();}catch(ua){l=c.utils.calcApproxTextWidth(g)}O.push(l+h)});for(var H=0,B=[],J=0;J<n&&H<O.length;)B[H]=O[H],J+=O[H++];for(0===H&&(H=1);J>n&&1<H;){B=[];H--;for(var p=0;p<O.length;p++)O[p]>(B[p%H]||0)&&(B[p%H]=O[p]);J=B.reduce(function(a,c,e,g){return a+c})}for(var S=[],p=n=0;n<H;n++)S[n]=p,p+=B[n];K.attr("transform",function(a,c){return"translate("+S[c%H]+","+(5+Math.floor(c/H)*N)+")"});u?G.attr("transform",
"translate("+(g-e.right-J)+","+e.top+")"):G.attr("transform","translate(0,"+e.top+")");r=e.top+e.bottom+Math.ceil(O.length/H)*N}else{var y=5,W=5,Z=0,A;K.attr("transform",function(a,c){var l=d3.select(this).select("text").node().getComputedTextLength()+h;A=W;g<e.left+e.right+A+l&&(W=A=5,y+=N);W+=l;W>Z&&(Z=W);J<A+Z&&(J=A+Z);return"translate("+A+","+y+")"});G.attr("transform","translate("+(g-e.right-Z)+","+e.top+")");r=e.top+e.bottom+y+15}"furious"==D&&(R.attr("width",function(a,c){return q[0][c].getComputedTextLength()+
27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),G.select(".nv-legend-bg").transition().duration(300).attr("x",-N).attr("width",J+N-12).attr("height",r+10).attr("y",-e.top-10).attr("opacity",C?1:0));R.style("fill",L).style("fill-opacity",M).style("stroke",L)});return a}var e={top:5,right:0,bottom:5,left:0},g=400,r=20,l=function(a){return a.key},n=c.utils.getColor(),t=!0,h=32,u=!0,z=!0,I=!1,C=!1,F=d3.dispatch("legendClick",
"legendDblclick","legendMouseover","legendMouseout","stateChange"),D="classic";a.dispatch=F;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},key:{get:function(){return l},set:function(a){l=a}},align:{get:function(){return t},set:function(a){t=a}},rightAlign:{get:function(){return u},set:function(a){u=a}},padding:{get:function(){return h},set:function(a){h=a}},updateState:{get:function(){return z},
set:function(a){z=a}},radioButtonMode:{get:function(){return I},set:function(a){I=a}},expanded:{get:function(){return C},set:function(a){C=a}},vers:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};
c.models.line=function(){function a(G){w.reset();w.models(e);G.each(function(a){n=d3.select(this);var G=c.utils.availableWidth(r,n,g),E=c.utils.availableHeight(l,n,g);c.utils.initSVG(n);F=e.xScale();D=e.yScale();M=M||F;K=K||D;a=n.selectAll("g.nv-wrap.nv-line").data([a]);var L=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),q=L.append("defs"),J=L.append("g"),L=a.select("g");J.append("g").attr("class","nv-groups");J.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+
g.left+","+g.top+")");e.width(G).height(E);J=a.select(".nv-scatterWrap");J.call(e);q.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect");a.select("#nv-edge-clip-"+e.id()+" rect").attr("width",G).attr("height",0<E?E:0);L.attr("clip-path",C?"url(#nv-edge-clip-"+e.id()+")":"");J.attr("clip-path",C?"url(#nv-edge-clip-"+e.id()+")":"");G=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});G.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",
function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);G.exit().remove();G.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return t(a,c)}).style("stroke",function(a,c){return t(a,c)});G.watchTransition(w,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||.5});E=G.selectAll("path.nv-area").data(function(a){return I(a)?[a]:[]});E.enter().append("path").attr("class",
"nv-area").attr("d",function(a){return d3.svg.area().interpolate(B).defined(z).x(function(a,e){return c.utils.NaNtoZero(M(h(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(K(u(a,e)))}).y1(function(a,c){return K(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});G.exit().selectAll("path.nv-area").remove();E.watchTransition(w,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(B).defined(z).x(function(a,e){return c.utils.NaNtoZero(F(h(a,
e)))}).y0(function(a,e){return c.utils.NaNtoZero(D(u(a,e)))}).y1(function(a,c){return D(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});G=G.selectAll("path.nv-line").data(function(a){return[a.values]});G.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(B).defined(z).x(function(a,e){return c.utils.NaNtoZero(M(h(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(K(u(a,e)))}));G.watchTransition(w,"line: linePaths").attr("d",
d3.svg.line().interpolate(B).defined(z).x(function(a,e){return c.utils.NaNtoZero(F(h(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(D(u(a,e)))}));M=F.copy();K=D.copy()});w.renderEnd("line immediate");return a}var e=c.models.scatter(),g={top:0,right:0,bottom:0,left:0},r=960,l=500,n=null,t=c.utils.defaultColor(),h=function(a){return a.x},u=function(a){return a.y},z=function(a,c){return!isNaN(u(a,c))&&null!==u(a,c)},I=function(a){return a.area},C=!1,F,D,B="linear",E=250,L=d3.dispatch("elementClick",
"elementMouseover","elementMouseout","renderEnd");e.pointSize(16).pointDomain([16,256]);var M,K,w=c.utils.renderWatch(L,E);a.dispatch=L;a.scatter=e;e.dispatch.on("elementClick",function(){L.elementClick.apply(this,arguments)});e.dispatch.on("elementMouseover",function(){L.elementMouseover.apply(this,arguments)});e.dispatch.on("elementMouseout",function(){L.elementMouseout.apply(this,arguments)});a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=
a}},height:{get:function(){return l},set:function(a){l=a}},defined:{get:function(){return z},set:function(a){z=a}},interpolate:{get:function(){return B},set:function(a){B=a}},clipEdge:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}},duration:{get:function(){return E},set:function(a){E=a;w.reset(E);
e.duration(E)}},isArea:{get:function(){return I},set:function(a){I=d3.functor(a)}},x:{get:function(){return h},set:function(a){h=a;e.x(a)}},y:{get:function(){return u},set:function(a){u=a;e.y(a)}},color:{get:function(){return t},set:function(a){t=c.utils.getColor(a);e.color(t)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineChart=function(){function a(t){R.reset();R.models(e);F&&R.models(g);D&&R.models(r);t.each(function(t){var H=d3.select(this),p=this;c.utils.initSVG(H);
var G=c.utils.availableWidth(z,H,h),y=c.utils.availableHeight(I,H,h);a.update=function(){0===P?H.call(a):H.transition().duration(P).call(a)};a.container=this;K.setter(q(t),a.update).getter(N(t)).update();K.disabled=t.map(function(a){return!!a.disabled});if(!w){var J;w={};for(J in K)w[J]=K[J]instanceof Array?K[J].slice(0):K[J]}if(t&&t.length&&t.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return c.utils.noData(a,H),a;L=e.xScale();M=e.yScale();J=H.selectAll("g.nv-wrap.nv-lineChart").data([t]);
var O=J.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),A=J.select("g");O.append("rect").style("opacity",0);O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis");O.append("g").attr("class","nv-linesWrap");O.append("g").attr("class","nv-legendWrap");O.append("g").attr("class","nv-interactive");A.select("rect").attr("width",G).attr("height",0<y?y:0);C&&(l.width(G),A.select(".nv-legendWrap").datum(t).call(l),h.top!=l.height()&&(h.top=l.height(),
y=c.utils.availableHeight(I,H,h)),J.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")"));J.attr("transform","translate("+h.left+","+h.top+")");B&&A.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");E&&(n.width(G).height(y).margin({left:h.left,top:h.top}).svgContainer(H).xScale(L),J.select(".nv-interactive").call(n));e.width(G).height(y).color(t.map(function(a,c){return a.color||u(a,c)}).filter(function(a,c){return!t[c].disabled}));A.select(".nv-linesWrap").datum(t.filter(function(a){return!a.disabled})).call(e);
F&&(g.scale(L)._ticks(c.utils.calcTicksX(G/100,t)).tickSize(-y,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")"),A.select(".nv-x.nv-axis").call(g));D&&(r.scale(M)._ticks(c.utils.calcTicksY(y/36,t)).tickSize(-G,0),A.select(".nv-y.nv-axis").call(r));l.dispatch.on("stateChange",function(c){for(var e in c)K[e]=c[e];U.stateChange(K);a.update()});n.dispatch.on("elementMousemove",function(l){e.clearHighlights();var q,y,A,H=[];t.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,
h){y=c.interactiveBisect(g.values,l.pointXValue,a.x());var p=g.values[y],n=a.y()(p,y);null!=n&&e.highlightPoint(h,y,!0);void 0!==p&&(void 0===q&&(q=p),void 0===A&&(A=a.xScale()(a.x()(p,y))),H.push({key:g.key,value:n,color:u(g,g.seriesIndex)}))});if(2<H.length){var w=a.yScale().invert(l.mouseY),z=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),w=c.nearestValueIndex(H.map(function(a){return a.value}),w,z);null!==w&&(H[w].highlight=!0)}w=g.tickFormat()(a.x()(q,y));n.tooltip.position({left:l.mouseX+
h.left,top:l.mouseY+h.top}).chartContainer(p.parentNode).valueFormatter(function(a,c){return null==a?"N/A":r.tickFormat()(a)}).data({value:w,index:y,series:H})();n.renderGuideLine(A)});n.dispatch.on("elementClick",function(g){var h,l=[];t.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(e){var p=c.interactiveBisect(e.values,g.pointXValue,a.x()),n=e.values[p];if("undefined"!==typeof n){"undefined"===typeof h&&(h=a.xScale()(a.x()(n,p)));var q=a.yScale()(a.y()(n,p));l.push({point:n,
pointIndex:p,pos:[h,q],seriesIndex:e.seriesIndex,series:e})}});e.dispatch.elementClick(l)});n.dispatch.on("elementMouseout",function(a){e.clearHighlights()});U.on("changeState",function(c){"undefined"!==typeof c.disabled&&t.length===c.disabled.length&&(t.forEach(function(a,e){a.disabled=c.disabled[e]}),K.disabled=c.disabled);a.update()})});R.renderEnd("lineChart immediate");return a}var e=c.models.line(),g=c.models.axis(),r=c.models.axis(),l=c.models.legend(),n=c.interactiveGuideline(),t=c.models.tooltip(),
h={top:30,right:20,bottom:50,left:60},u=c.utils.defaultColor(),z=null,I=null,C=!0,F=!0,D=!0,B=!1,E=!1,L,M,K=c.utils.state(),w=null,G=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),P=250;g.orient("bottom").tickPadding(7);r.orient(B?"right":"left");t.valueFormatter(function(a,c){return r.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});var R=c.utils.renderWatch(U,P),N=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
q=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){t.data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){t.hidden(!0)});a.dispatch=U;a.lines=e;a.legend=l;a.xAxis=g;a.yAxis=r;a.interactiveLayer=n;a.tooltip=t;a.dispatch=U;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return I},
set:function(a){I=a}},showLegend:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return F},set:function(a){F=a}},showYAxis:{get:function(){return D},set:function(a){D=a}},defaultState:{get:function(){return w},set:function(a){w=a}},noData:{get:function(){return G},set:function(a){G=a}},tooltips:{get:function(){return t.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");t.enabled(!!a)}},tooltipContent:{get:function(){return t.contentGenerator()},
set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");t.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return P},set:function(a){P=a;R.reset(P);e.duration(P);g.duration(P);r.duration(P)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);
l.color(u);e.color(u)}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;r.orient(B?"right":"left")}},useInteractiveGuideline:{get:function(){return E},set:function(a){if(E=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.linePlusBarChart=function(){function a(A){A.each(function(A){function D(){F.empty()||F.extent(O);Db.data([F.empty()?p.domain():O]).each(function(a,c){var e=p(a[0])-p.range()[0],g=p.range()[1]-p(a[1]);d3.select(this).select(".left").attr("width",
0>e?0:e);d3.select(this).select(".right").attr("x",p(a[1])).attr("width",0>g?0:g)})}function ha(){O=F.empty()?null:F.extent();J=F.empty()?p.domain():F.extent();T.brush({extent:J,brush:F});D();r.width(na).height(Ha).color(A.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!A[c].disabled&&A[c].bar}));e.width(na).height(Ha).color(A.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!A[c].disabled&&!A[c].bar}));var a=va.select(".nv-focus .nv-barsWrap").datum(za.length?
za.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return r.x()(a,c)>=J[0]&&r.x()(a,c)<=J[1]})}}):[{values:[]}]),g=va.select(".nv-focus .nv-linesWrap").datum(Ma[0].disabled?[{values:[]}]:Ma.map(function(a,c){return{area:a.area,fillOpacity:a.fillOpacity,key:a.key,values:a.values.filter(function(a,c){return e.x()(a,c)>=J[0]&&e.x()(a,c)<=J[1]})}}));H=za.length?r.xScale():e.xScale();n.scale(H)._ticks(c.utils.calcTicksX(na/100,A)).tickSize(-Ha,0);n.domain([Math.ceil(J[0]),Math.floor(J[1])]);
va.select(".nv-x.nv-axis").transition().duration(V).call(n);a.transition().duration(V).call(r);g.transition().duration(V).call(e);va.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")");h.scale(S)._ticks(c.utils.calcTicksY(Ha/36,A)).tickSize(-na,0);u.scale(y)._ticks(c.utils.calcTicksY(Ha/36,A)).tickSize(za.length?0:-na,0);va.select(".nv-focus .nv-y1.nv-axis").style("opacity",za.length?1:0);va.select(".nv-focus .nv-y2.nv-axis").style("opacity",Ma.length&&!Ma[0].disabled?
1:0).attr("transform","translate("+H.range()[1]+",0)");va.select(".nv-focus .nv-y1.nv-axis").transition().duration(V).call(h);va.select(".nv-focus .nv-y2.nv-axis").transition().duration(V).call(u)}var oa=d3.select(this);c.utils.initSVG(oa);var na=c.utils.availableWidth(L,oa,B),Ha=c.utils.availableHeight(M,oa,B)-(P?q:0),Ia=q-E.top-E.bottom;a.update=function(){oa.transition().duration(V).call(a)};a.container=this;la.setter(ka(A),a.update).getter(ia(A)).update();la.disabled=A.map(function(a){return!!a.disabled});
if(!da){var sa;da={};for(sa in la)da[sa]=la[sa]instanceof Array?la[sa].slice(0):la[sa]}if(A&&A.length&&A.filter(function(a){return a.values.length}).length)oa.selectAll(".nv-noData").remove();else return c.utils.noData(a,oa),a;var za=A.filter(function(a){return!a.disabled&&a.bar}),Ma=A.filter(function(a){return!a.bar});H=r.xScale();p=t.scale();S=r.yScale();y=e.yScale();W=l.yScale();Z=g.yScale();sa=A.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,c){return{x:K(a,
c),y:w(a,c)}})});var ra=A.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,c){return{x:K(a,c),y:w(a,c)}})});H.range([0,na]);p.domain(d3.extent(d3.merge(sa.concat(ra)),function(a){return a.x})).range([0,na]);sa=oa.selectAll("g.nv-wrap.nv-linePlusBar").data([A]);var ra=sa.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),va=sa.select("g");ra.append("g").attr("class","nv-legendWrap");var Ca=ra.append("g").attr("class","nv-focus");
Ca.append("g").attr("class","nv-x nv-axis");Ca.append("g").attr("class","nv-y1 nv-axis");Ca.append("g").attr("class","nv-y2 nv-axis");Ca.append("g").attr("class","nv-barsWrap");Ca.append("g").attr("class","nv-linesWrap");ra=ra.append("g").attr("class","nv-context");ra.append("g").attr("class","nv-x nv-axis");ra.append("g").attr("class","nv-y1 nv-axis");ra.append("g").attr("class","nv-y2 nv-axis");ra.append("g").attr("class","nv-barsWrap");ra.append("g").attr("class","nv-linesWrap");ra.append("g").attr("class",
"nv-brushBackground");ra.append("g").attr("class","nv-x nv-brush");U&&(ra=C.align()?na/2:na,Ca=C.align()?ra:0,C.width(ra),va.select(".nv-legendWrap").datum(A.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?ua:fa);return a})).call(C),B.top!=C.height()&&(B.top=C.height(),Ha=c.utils.availableHeight(M,oa,B)-q),va.select(".nv-legendWrap").attr("transform","translate("+Ca+","+-B.top+")"));sa.attr("transform","translate("+B.left+","+B.top+")");va.select(".nv-context").style("display",
P?"initial":"none");l.width(na).height(Ia).color(A.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!A[c].disabled&&A[c].bar}));g.width(na).height(Ia).color(A.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!A[c].disabled&&!A[c].bar}));sa=va.select(".nv-context .nv-barsWrap").datum(za.length?za:[{values:[]}]);ra=va.select(".nv-context .nv-linesWrap").datum(Ma[0].disabled?[{values:[]}]:Ma);va.select(".nv-context").attr("transform","translate(0,"+(Ha+B.bottom+
E.top)+")");sa.transition().call(l);ra.transition().call(g);N&&(t._ticks(c.utils.calcTicksX(na/100,A)).tickSize(-Ia,0),va.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+W.range()[0]+")"),va.select(".nv-context .nv-x.nv-axis").transition().call(t));R&&(z.scale(W)._ticks(Ia/36).tickSize(-na,0),I.scale(Z)._ticks(Ia/36).tickSize(za.length?0:-na,0),va.select(".nv-context .nv-y3.nv-axis").style("opacity",za.length?1:0).attr("transform","translate(0,"+p.range()[0]+")"),va.select(".nv-context .nv-y2.nv-axis").style("opacity",
Ma.length?1:0).attr("transform","translate("+p.range()[1]+",0)"),va.select(".nv-context .nv-y1.nv-axis").transition().call(z),va.select(".nv-context .nv-y2.nv-axis").transition().call(I));F.x(p).on("brush",ha);O&&F.extent(O);var Db=va.select(".nv-brushBackground").selectAll("g").data([O||F.extent()]);sa=Db.enter().append("g");sa.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Ia);sa.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Ia);sa=va.select(".nv-x.nv-brush").call(F);
sa.selectAll("rect").attr("height",Ia);sa.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=Ia/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});C.dispatch.on("stateChange",function(c){for(var e in c)la[e]=c[e];T.stateChange(la);a.update()});T.on("changeState",function(c){"undefined"!==typeof c.disabled&&(A.forEach(function(a,e){a.disabled=c.disabled[e]}),
la.disabled=c.disabled);a.update()});ha()});return a}var e=c.models.line(),g=c.models.line(),r=c.models.historicalBar(),l=c.models.historicalBar(),n=c.models.axis(),t=c.models.axis(),h=c.models.axis(),u=c.models.axis(),z=c.models.axis(),I=c.models.axis(),C=c.models.legend(),F=d3.svg.brush(),D=c.models.tooltip(),B={top:30,right:30,bottom:30,left:60},E={top:0,right:30,bottom:20,left:60},L=null,M=null,K=function(a){return a.x},w=function(a){return a.y},G=c.utils.defaultColor(),U=!0,P=!0,R=!1,N=!0,q=
50,J,O=null,H,p,S,y,W,Z,A=null,T=d3.dispatch("brush","stateChange","changeState"),V=0,la=c.utils.state(),da=null,ua=" (left axis)",fa=" (right axis)";e.clipEdge(!0);g.interactive(!1);n.orient("bottom").tickPadding(5);h.orient("left");u.orient("right");t.orient("bottom").tickPadding(5);z.orient("left");I.orient("right");D.headerEnabled(!0).headerFormatter(function(a,c){return n.tickFormat()(a,c)});var ia=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},ka=function(a){return function(c){void 0!==
c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){D.duration(100).valueFormatter(function(a,c){return u.tickFormat()(a,c)}).data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){D.hidden(!0)});r.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};D.duration(0).valueFormatter(function(a,c){return h.tickFormat()(a,c)}).data(c).hidden(!1)});
r.dispatch.on("elementMouseout.tooltip",function(a){D.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(a){D.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=T;a.legend=C;a.lines=e;a.lines2=g;a.bars=r;a.bars2=l;a.xAxis=n;a.x2Axis=t;a.y1Axis=h;a.y2Axis=u;a.y3Axis=z;a.y4Axis=I;a.tooltip=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return L},set:function(a){L=a}},height:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return U},
set:function(a){U=a}},brushExtent:{get:function(){return O},set:function(a){O=a}},noData:{get:function(){return A},set:function(a){A=a}},focusEnable:{get:function(){return P},set:function(a){P=a}},focusHeight:{get:function(){return q},set:function(a){q=a}},focusShowAxisX:{get:function(){return N},set:function(a){N=a}},focusShowAxisY:{get:function(){return R},set:function(a){R=a}},legendLeftAxisHint:{get:function(){return ua},set:function(a){ua=a}},legendRightAxisHint:{get:function(){return fa},set:function(a){fa=
a}},tooltips:{get:function(){return D.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");D.enabled(!!a)}},tooltipContent:{get:function(){return D.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");D.contentGenerator(a)}},margin:{get:function(){return B},set:function(a){B.top=void 0!==a.top?a.top:B.top;B.right=void 0!==a.right?a.right:B.right;B.bottom=void 0!==a.bottom?a.bottom:B.bottom;B.left=void 0!==
a.left?a.left:B.left}},duration:{get:function(){return V},set:function(a){V=a}},color:{get:function(){return G},set:function(a){G=c.utils.getColor(a);C.color(G)}},x:{get:function(){return K},set:function(a){K=a;e.x(a);g.x(a);r.x(a);l.x(a)}},y:{get:function(){return w},set:function(a){w=a;e.y(a);g.y(a);r.y(a);l.y(a)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineWithFocusChart=function(){function a(y){y.each(function(y){function z(){u.empty()||u.extent(R);ha.data([u.empty()?
G.domain():R]).each(function(a,c){var e=G(a[0])-K.range()[0],g=W-G(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",G(a[1])).attr("width",0>g?0:g)})}function A(){R=u.empty()?null:u.extent();var a=u.empty()?G.domain():u.extent();1>=Math.abs(a[0]-a[1])||(q.brush({extent:a,brush:u}),z(),ka.select(".nv-focus .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}).map(function(c,g){return{key:c.key,area:c.area,values:c.values.filter(function(c,
g){return e.x()(c,g)>=a[0]&&e.x()(c,g)<=a[1]})}})).transition().duration(J).call(e),ka.select(".nv-focus .nv-x.nv-axis").transition().duration(J).call(r),ka.select(".nv-focus .nv-y.nv-axis").transition().duration(J).call(l))}var T=d3.select(this),V=this;c.utils.initSVG(T);var W=c.utils.availableWidth(B,T,C),da=c.utils.availableHeight(E,T,C)-L,N=L-F.top-F.bottom;a.update=function(){T.transition().duration(J).call(a)};a.container=this;O.setter(S(y),a.update).getter(p(y)).update();O.disabled=y.map(function(a){return!!a.disabled});
if(!H){var fa;H={};for(fa in O)H[fa]=O[fa]instanceof Array?O[fa].slice(0):O[fa]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)T.selectAll(".nv-noData").remove();else return c.utils.noData(a,T),a;K=e.xScale();w=e.yScale();G=g.xScale();U=g.yScale();fa=T.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([y]);var ia=fa.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ka=fa.select("g");ia.append("g").attr("class","nv-legendWrap");var oa=ia.append("g").attr("class",
"nv-focus");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y nv-axis");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-interactive");ia=ia.append("g").attr("class","nv-context");ia.append("g").attr("class","nv-x nv-axis");ia.append("g").attr("class","nv-y nv-axis");ia.append("g").attr("class","nv-linesWrap");ia.append("g").attr("class","nv-brushBackground");ia.append("g").attr("class","nv-x nv-brush");P&&(h.width(W),ka.select(".nv-legendWrap").datum(y).call(h),
C.top!=h.height()&&(C.top=h.height(),da=c.utils.availableHeight(E,T,C)-L),ka.select(".nv-legendWrap").attr("transform","translate(0,"+-C.top+")"));fa.attr("transform","translate("+C.left+","+C.top+")");M&&(I.width(W).height(da).margin({left:C.left,top:C.top}).svgContainer(T).xScale(K),fa.select(".nv-interactive").call(I));e.width(W).height(da).color(y.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!y[c].disabled}));g.defined(e.defined()).width(W).height(N).color(y.map(function(a,
c){return a.color||D(a,c)}).filter(function(a,c){return!y[c].disabled}));ka.select(".nv-context").attr("transform","translate(0,"+(da+C.bottom+F.top)+")");fa=ka.select(".nv-context .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}));d3.transition(fa).call(g);r.scale(K)._ticks(c.utils.calcTicksX(W/100,y)).tickSize(-da,0);l.scale(w)._ticks(c.utils.calcTicksY(da/36,y)).tickSize(-W,0);ka.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+da+")");u.x(G).on("brush",function(){A()});
R&&u.extent(R);var ha=ka.select(".nv-brushBackground").selectAll("g").data([R||u.extent()]),da=ha.enter().append("g");da.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",N);da.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",N);da=ka.select(".nv-x.nv-brush").call(u);da.selectAll("rect").attr("height",N);da.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=N/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+
"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});A();n.scale(G)._ticks(c.utils.calcTicksX(W/100,y)).tickSize(-N,0);ka.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")");d3.transition(ka.select(".nv-context .nv-x.nv-axis")).call(n);t.scale(U)._ticks(c.utils.calcTicksY(N/36,y)).tickSize(-W,0);d3.transition(ka.select(".nv-context .nv-y.nv-axis")).call(t);ka.select(".nv-context .nv-x.nv-axis").attr("transform",
"translate(0,"+U.range()[0]+")");h.dispatch.on("stateChange",function(c){for(var e in c)O[e]=c[e];q.stateChange(O);a.update()});I.dispatch.on("elementMousemove",function(g){e.clearHighlights();var h,p,n,q=[];y.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(l,r){var y=u.empty()?G.domain():u.extent(),A=l.values.filter(function(a,c){return e.x()(a,c)>=y[0]&&e.x()(a,c)<=y[1]});p=c.interactiveBisect(A,g.pointXValue,e.x());A=A[p];null!=a.y()(A,p)&&e.highlightPoint(r,p,!0);void 0!==
A&&(void 0===h&&(h=A),void 0===n&&(n=a.xScale()(a.x()(A,p))),q.push({key:l.key,value:a.y()(A,p),color:D(l,l.seriesIndex)}))});if(2<q.length){var A=a.yScale().invert(g.mouseY),t=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),A=c.nearestValueIndex(q.map(function(a){return a.value}),A,t);null!==A&&(q[A].highlight=!0)}A=r.tickFormat()(a.x()(h,p));I.tooltip.position({left:g.mouseX+C.left,top:g.mouseY+C.top}).chartContainer(V.parentNode).valueFormatter(function(a,c){return null==a?"N/A":l.tickFormat()(a)}).data({value:A,
index:p,series:q})();I.renderGuideLine(n)});I.dispatch.on("elementMouseout",function(a){e.clearHighlights()});q.on("changeState",function(c){"undefined"!==typeof c.disabled&&y.forEach(function(a,e){a.disabled=c.disabled[e]});a.update()})});return a}var e=c.models.line(),g=c.models.line(),r=c.models.axis(),l=c.models.axis(),n=c.models.axis(),t=c.models.axis(),h=c.models.legend(),u=d3.svg.brush(),z=c.models.tooltip(),I=c.interactiveGuideline(),C={top:30,right:30,bottom:30,left:60},F={top:0,right:30,
bottom:20,left:60},D=c.utils.defaultColor(),B=null,E=null,L=50,M=!1,K,w,G,U,P=!0,R=null,N=null,q=d3.dispatch("brush","stateChange","changeState"),J=250,O=c.utils.state(),H=null;e.clipEdge(!0).duration(0);g.interactive(!1);r.orient("bottom").tickPadding(5);l.orient("left");n.orient("bottom").tickPadding(5);t.orient("left");z.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return r.tickFormat()(a,c)});var p=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
S=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){z.data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){z.hidden(!0)});a.dispatch=q;a.legend=h;a.lines=e;a.lines2=g;a.xAxis=r;a.yAxis=l;a.x2Axis=n;a.y2Axis=t;a.interactiveLayer=I;a.tooltip=z;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},
height:{get:function(){return E},set:function(a){E=a}},focusHeight:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return P},set:function(a){P=a}},brushExtent:{get:function(){return R},set:function(a){R=a}},defaultState:{get:function(){return H},set:function(a){H=a}},noData:{get:function(){return N},set:function(a){N=a}},tooltips:{get:function(){return z.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");z.enabled(!!a)}},tooltipContent:{get:function(){return z.contentGenerator()},
set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");z.contentGenerator(a)}},margin:{get:function(){return C},set:function(a){C.top=void 0!==a.top?a.top:C.top;C.right=void 0!==a.right?a.right:C.right;C.bottom=void 0!==a.bottom?a.bottom:C.bottom;C.left=void 0!==a.left?a.left:C.left}},color:{get:function(){return D},set:function(a){D=c.utils.getColor(a);h.color(D)}},interpolate:{get:function(){return e.interpolate()},set:function(a){e.interpolate(a);g.interpolate(a)}},
xTickFormat:{get:function(){return r.tickFormat()},set:function(a){r.tickFormat(a);n.tickFormat(a)}},yTickFormat:{get:function(){return l.tickFormat()},set:function(a){l.tickFormat(a);t.tickFormat(a)}},duration:{get:function(){return J},set:function(a){J=a;l.duration(J);t.duration(J);r.duration(J);n.duration(J)}},x:{get:function(){return e.x()},set:function(a){e.x(a);g.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);g.y(a)}},useInteractiveGuideline:{get:function(){return M},set:function(a){if(M=
a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBar=function(){function a(H){J.reset();H.each(function(a){var p=g-e.left-e.right,y=r-e.top-e.bottom;h=d3.select(this);c.utils.initSVG(h);var H=0;E&&a.length&&(E=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(F){var Z=d3.layout.stack().offset(D).values(function(a){return a.values}).y(z)(!a.length&&E?E:a);Z.forEach(function(c,e){c.nonStackable?
(a[e].nonStackableSeries=H++,Z[e]=a[e]):0<e&&Z[e-1].nonStackable&&Z[e].values.map(function(a,c){a.y0-=Z[e-1].values[c].y;a.y1=a.y0+a.y})});a=Z}a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});F&&a[0].values.map(function(c,e){var g=0,h=0;a.map(function(c,l){if(!a[l].nonStackable){var p=c.values[e];p.size=Math.abs(p.y);0>p.y?(p.y1=h,h-=p.size):(p.y1=p.size+g,g+=p.size)}})});var A=w&&G?[]:a.map(function(a,c){return a.values.map(function(a,e){return{x:u(a,e),y:z(a,e),y0:a.y0,
y1:a.y1,idx:c}})});l.domain(w||d3.merge(A).map(function(a){return a.x})).rangeBands(U||[0,p],R);n.domain(G||d3.extent(d3.merge(A).map(function(c){var e=c.y;F&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+c.y);return e}).concat(I))).range(P||[y,0]);l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1]));n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]+.01*n.domain()[0],n.domain()[1]-.01*n.domain()[1]]):
n.domain([-1,1]));q=q||n;var A=h.selectAll("g.nv-wrap.nv-multibar").data([a]),T=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),V=T.append("defs"),T=T.append("g"),la=A.select("g");T.append("g").attr("class","nv-groups");A.attr("transform","translate("+e.left+","+e.top+")");V.append("clipPath").attr("id","nv-edge-clip-"+t).append("rect");A.select("#nv-edge-clip-"+t+" rect").attr("width",p).attr("height",y);la.attr("clip-path",C?"url(#nv-edge-clip-"+t+")":"");p=A.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a,c){return c});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);y=J.transition(p.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,K)).attr("y",function(c,e,g){e=q(0)||0;F&&a[c.series]&&!a[c.series].nonStackable&&(e=q(c.y0));return e}).attr("height",0).remove();y.delay&&y.delay(function(a,c){return K/(O+1)*c-c});p.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return B(a,
c)}).style("stroke",function(a,c){return B(a,c)});p.style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("rect.nv-bar").data(function(c){return E&&!a.length?E.values:c.values});p.exit().remove();p.enter().append("rect").attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,g){return F&&!a[g].nonStackable?0:g*l.rangeBand()/a.length}).attr("y",function(c,e,g){return q(F&&!a[g].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,
e,g){return l.rangeBand()/(F&&!a[g].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+l(u(a,c))+",0)"});p.style("fill",function(a,c,e){return B(a,e,c)}).style("stroke",function(a,c,e){return B(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);N.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);N.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",
function(a,c){N.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){N.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){N.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});p.attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+l(u(a,c))+",0)"});L&&(M||(M=
a.map(function(){return!0})),p.style("fill",function(a,c,e){return d3.rgb(L(a,c)).darker(M.map(function(a,c){return c}).filter(function(a,c){return!M[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(L(a,c)).darker(M.map(function(a,c){return c}).filter(function(a,c){return!M[c]})[e]).toString()}));p=p.watchTransition(J,"multibar",Math.min(250,K)).delay(function(c,e){return e*K/a[0].values.length});F?p.attr("y",function(c,e,g){return a[g].nonStackable?0>z(c,e)?n(0):-1>n(0)-n(z(c,e))?
n(0)-1:n(z(c,e))||0:n(c.y1)}).attr("height",function(c,e,g){return a[g].nonStackable?Math.max(Math.abs(n(z(c,e))-n(0)),1)||0:Math.max(Math.abs(n(c.y+c.y0)-n(c.y0)),1)}).attr("x",function(c,e,g){e=0;a[g].nonStackable&&(e=c.series*l.rangeBand()/a.length,a.length!==H&&(e=a[g].nonStackableSeries*l.rangeBand()/(2*H)));return e}).attr("width",function(c,e,g){return a[g].nonStackable?(c=l.rangeBand()/H,a.length!==H&&(c=l.rangeBand()/(2*H)),c):l.rangeBand()}):p.attr("x",function(c,e){return c.series*l.rangeBand()/
a.length}).attr("width",l.rangeBand()/a.length).attr("y",function(a,c){return 0>z(a,c)?n(0):1>n(0)-n(z(a,c))?n(0)-1:n(z(a,c))||0}).attr("height",function(a,c){return Math.max(Math.abs(n(z(a,c))-n(0)),1)||0});l.copy();q=n.copy();a[0]&&a[0].values&&(O=a[0].values.length)});J.renderEnd("multibar immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,r=500,l=d3.scale.ordinal(),n=d3.scale.linear(),t=Math.floor(1E4*Math.random()),h=null,u=function(a){return a.x},z=function(a){return a.y},I=[0],
C=!0,F=!1,D="zero",B=c.utils.defaultColor(),E=!1,L=null,M,K=500,w,G,U,P,R=.1,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),q,J=c.utils.renderWatch(N,K),O=0;a.dispatch=N;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return z},
set:function(a){z=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return w},set:function(a){w=a}},yDomain:{get:function(){return G},set:function(a){G=a}},xRange:{get:function(){return U},set:function(a){U=a}},yRange:{get:function(){return P},set:function(a){P=a}},forceY:{get:function(){return I},set:function(a){I=a}},stacked:{get:function(){return F},set:function(a){F=a}},stackOffset:{get:function(){return D},
set:function(a){D=a}},clipEdge:{get:function(){return C},set:function(a){C=a}},disabled:{get:function(){return M},set:function(a){M=a}},id:{get:function(){return t},set:function(a){t=a}},hideable:{get:function(){return E},set:function(a){E=a}},groupSpacing:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:
e.left}},duration:{get:function(){return K},set:function(a){K=a;J.reset(K)}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a)}},barColor:{get:function(){return L},set:function(a){L=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarChart=function(){function a(t){O.reset();O.models(e);B&&O.models(g);E&&O.models(r);t.each(function(t){var y=d3.select(this);c.utils.initSVG(y);var A=c.utils.availableWidth(u,y,h),T=c.utils.availableHeight(z,y,h);a.update=
function(){0===J?y.call(a):y.transition().duration(J).call(a)};a.container=this;P.setter(S(t),a.update).getter(p(t)).update();P.disabled=t.map(function(a){return!!a.disabled});if(!R){var V;R={};for(V in P)R[V]=P[V]instanceof Array?P[V].slice(0):P[V]}if(t&&t.length&&t.filter(function(a){return a.values.length}).length)y.selectAll(".nv-noData").remove();else return c.utils.noData(a,y),a;G=e.xScale();U=e.yScale();var O=y.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([t]),W=O.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multiBarWithLegend").append("g");V=O.select("g");W.append("g").attr("class","nv-x nv-axis");W.append("g").attr("class","nv-y nv-axis");W.append("g").attr("class","nv-barsWrap");W.append("g").attr("class","nv-legendWrap");W.append("g").attr("class","nv-controlsWrap");D&&(l.width(A-(C?180:0)),V.select(".nv-legendWrap").datum(t).call(l),h.top!=l.height()&&(h.top=l.height(),T=c.utils.availableHeight(z,y,h)),V.select(".nv-legendWrap").attr("transform","translate("+(C?180:0)+","+-h.top+
")"));if(C){var N=[{key:F.grouped||"Grouped",disabled:e.stacked()},{key:F.stacked||"Stacked",disabled:!e.stacked()}];n.width(C?180:0).color(["#444","#444","#444"]);V.select(".nv-controlsWrap").datum(N).attr("transform","translate(0,"+-h.top+")").call(n)}O.attr("transform","translate("+h.left+","+h.top+")");L&&V.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)");e.disabled(t.map(function(a){return a.disabled})).width(A).height(T).color(t.map(function(a,c){return a.color||I(a,c)}).filter(function(a,
c){return!t[c].disabled}));V.select(".nv-barsWrap").datum(t.filter(function(a){return!a.disabled})).call(e);if(B){g.scale(G)._ticks(c.utils.calcTicksX(A/100,t)).tickSize(-T,0);V.select(".nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")");V.select(".nv-x.nv-axis").call(g);O=V.select(".nv-x.nv-axis > g").selectAll("g");O.selectAll("line, text").style("opacity",1);if(K){O.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var fa=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;
V.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==fa%2?17:5)+")"})}M&&O.filter(function(a,c){return 0!==c%Math.ceil(t[0].values.length/(A/100))}).selectAll("text, line").style("opacity",0);w&&O.selectAll(".tick text").attr("transform","rotate("+w+" 0,0)").style("text-anchor",0<w?"start":"end");V.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}E&&(r.scale(U)._ticks(c.utils.calcTicksY(T/36,t)).tickSize(-A,0),
V.select(".nv-y.nv-axis").call(r));l.dispatch.on("stateChange",function(c){for(var e in c)P[e]=c[e];q.stateChange(P);a.update()});n.dispatch.on("legendClick",function(c,g){if(c.disabled){N=N.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case F.grouped:e.stacked(!1);break;case "Stacked":case F.stacked:e.stacked(!0)}P.stacked=e.stacked();q.stateChange(P);a.update()}});q.on("changeState",function(c){"undefined"!==typeof c.disabled&&(t.forEach(function(a,e){a.disabled=
c.disabled[e]}),P.disabled=c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),H=P.stacked=c.stacked);a.update()})});O.renderEnd("multibarchart immediate");return a}var e=c.models.multiBar(),g=c.models.axis(),r=c.models.axis(),l=c.models.legend(),n=c.models.legend(),t=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=null,z=null,I=c.utils.defaultColor(),C=!0,F={},D=!0,B=!0,E=!0,L=!1,M=!0,K=!1,w=0,G,U,P=c.utils.state(),R=null,N=null,q=d3.dispatch("stateChange","changeState",
"renderEnd"),J=250;P.stacked=!1;e.stacked(!1);g.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});r.orient(L?"right":"left").tickFormat(d3.format(",.1f"));t.duration(0).valueFormatter(function(a,c){return r.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});n.updateState(!1);var O=c.utils.renderWatch(q),H=!1,p=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:H}}},S=function(a){return function(c){void 0!==
c.stacked&&(H=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};t.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){t.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){t.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=q;a.multibar=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=r;
a.state=P;a.tooltip=t;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return z},set:function(a){z=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showControls:{get:function(){return C},set:function(a){C=a}},controlLabels:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},defaultState:{get:function(){return R},
set:function(a){R=a}},noData:{get:function(){return N},set:function(a){N=a}},reduceXTicks:{get:function(){return M},set:function(a){M=a}},rotateLabels:{get:function(){return w},set:function(a){w=a}},staggerLabels:{get:function(){return K},set:function(a){K=a}},tooltips:{get:function(){return t.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");t.enabled(!!a)}},tooltipContent:{get:function(){return t.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");t.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return J},set:function(a){J=a;e.duration(J);g.duration(J);r.duration(J);O.reset(J)}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a);l.color(I)}},rightAlignYAxis:{get:function(){return L},
set:function(a){L=a;r.orient(L?"right":"left")}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);l.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBarHorizontal=function(){function a(l){O.reset();l.each(function(a){var l=g-e.left-e.right,p=r-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);E&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(z)(a));
a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});E&&a[0].values.map(function(c,e){var g=0,h=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=h-a.size,h-=a.size):(a.y1=g,g+=a.size)})});var H=G&&U?[]:a.map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:z(a,c),y0:a.y0,y1:a.y1}})});t.domain(G||d3.merge(H).map(function(a){return a.x})).rangeBands(P||[0,p],K);h.domain(U||d3.extent(d3.merge(H).map(function(a){return E?0<a.y?a.y1+a.y:a.y1:
a.y}).concat(C)));L&&!E?h.range(R||[0>h.domain()[0]?M:0,l-(0<h.domain()[1]?M:0)]):h.range(R||[0,l]);J=J||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);l=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);p=l.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");p.append("defs");p=p.append("g");l.select("g");p.append("g").attr("class","nv-groups");l.attr("transform","translate("+e.left+","+e.top+")");l=l.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a,c){return c});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);l.exit().watchTransition(O,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();l.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return F(a,c)}).style("stroke",function(a,c){return F(a,c)});l.watchTransition(O,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",
.75);l=l.selectAll("g.nv-bar").data(function(a){return a.values});l.exit().remove();p=l.enter().append("g").attr("transform",function(c,e,g){return"translate("+J(E?c.y0:0)+","+(E?0:g*t.rangeBand()/a.length+t(u(c,e)))+")"});p.append("rect").attr("width",0).attr("height",t.rangeBand()/(E?1:a.length));l.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);q.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);q.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){q.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){q.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){q.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){q.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});
d3.event.stopPropagation()});I(a[0],0)&&(p.append("polyline"),l.select("polyline").attr("fill","none").attr("points",function(c,e){var g=I(c,e),l=.8*t.rangeBand()/(2*(E?1:a.length)),g=g.length?g:[-Math.abs(g),Math.abs(g)],g=g.map(function(a){return h(a)-h(0)});return[[g[0],-l],[g[0],l],[g[0],0],[g[1],0],[g[1],-l],[g[1],l]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var g=t.rangeBand()/(2*(E?1:a.length));return"translate("+(0>z(c,e)?0:h(z(c,e))-h(0))+", "+g+")"}));
p.append("text");L&&!E?(l.select("text").attr("text-anchor",function(a,c){return 0>z(a,c)?"end":"start"}).attr("y",t.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=w(z(a,c)),g=I(a,c);return void 0===g?e:g.length?e+"+"+w(Math.abs(g[1]))+"-"+w(Math.abs(g[0])):e+"\u00b1"+w(Math.abs(g))}),l.watchTransition(O,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>z(a,c)?-4:h(z(a,c))-h(0)+4})):l.selectAll("text").text("");l.selectAll("text.nv-bar-label").text("");
l.attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"});D&&(B||(B=a.map(function(){return!0})),l.style("fill",function(a,c,e){return d3.rgb(D(a,c)).darker(B.map(function(a,c){return c}).filter(function(a,c){return!B[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(D(a,c)).darker(B.map(function(a,c){return c}).filter(function(a,c){return!B[c]})[e]).toString()}));E?l.watchTransition(O,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+
h(a.y1)+","+t(u(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(h(z(a,c)+a.y0)-h(a.y0))}).attr("height",t.rangeBand()):l.watchTransition(O,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>z(c,e)?h(z(c,e)):h(0))+","+(c.series*t.rangeBand()/a.length+t(u(c,e)))+")"}).select("rect").attr("height",t.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(h(z(a,c))-h(0)),1)});t.copy();J=h.copy()});O.renderEnd("multibarHorizontal immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=960,r=500,l=Math.floor(1E4*Math.random()),n=null,t=d3.scale.ordinal(),h=d3.scale.linear(),u=function(a){return a.x},z=function(a){return a.y},I=function(a){return a.yErr},C=[0],F=c.utils.defaultColor(),D=null,B,E=!1,L=!1,M=60,K=.1,w=d3.format(",.2f"),G,U,P,R,N=250,q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),J,O=c.utils.renderWatch(q,N);a.dispatch=q;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return z},set:function(a){z=a}},yErr:{get:function(){return I},set:function(a){I=a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return G},set:function(a){G=a}},yDomain:{get:function(){return U},set:function(a){U=
a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceY:{get:function(){return C},set:function(a){C=a}},stacked:{get:function(){return E},set:function(a){E=a}},showValues:{get:function(){return L},set:function(a){L=a}},disabled:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return l},set:function(a){l=a}},valueFormat:{get:function(){return w},set:function(a){w=a}},valuePadding:{get:function(){return M},set:function(a){M=
a}},groupSpacing:{get:function(){return K},set:function(a){K=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return N},set:function(a){N=a;O.reset(N)}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a)}},barColor:{get:function(){return D},set:function(a){D=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);
return a};c.models.multiBarHorizontalChart=function(){function a(t){J.reset();J.models(e);B&&J.models(g);E&&J.models(r);t.each(function(t){var p=d3.select(this);c.utils.initSVG(p);var H=c.utils.availableWidth(u,p,h),y=c.utils.availableHeight(z,p,h);a.update=function(){p.transition().duration(R).call(a)};a.container=this;L=e.stacked();w.setter(q(t),a.update).getter(N(t)).update();w.disabled=t.map(function(a){return!!a.disabled});if(!G){var J;G={};for(J in w)G[J]=w[J]instanceof Array?w[J].slice(0):
w[J]}if(t&&t.length&&t.filter(function(a){return a.values.length}).length)p.selectAll(".nv-noData").remove();else return c.utils.noData(a,p),a;M=e.xScale();K=e.yScale();J=p.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([t]);var O=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),A=J.select("g");O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");O.append("g").attr("class",
"nv-barsWrap");O.append("g").attr("class","nv-legendWrap");O.append("g").attr("class","nv-controlsWrap");D&&(l.width(H-(C?180:0)),A.select(".nv-legendWrap").datum(t).call(l),h.top!=l.height()&&(h.top=l.height(),y=c.utils.availableHeight(z,p,h)),A.select(".nv-legendWrap").attr("transform","translate("+(C?180:0)+","+-h.top+")"));if(C){var T=[{key:F.grouped||"Grouped",disabled:e.stacked()},{key:F.stacked||"Stacked",disabled:!e.stacked()}];n.width(C?180:0).color(["#444","#444","#444"]);A.select(".nv-controlsWrap").datum(T).attr("transform",
"translate(0,"+-h.top+")").call(n)}J.attr("transform","translate("+h.left+","+h.top+")");e.disabled(t.map(function(a){return a.disabled})).width(H).height(y).color(t.map(function(a,c){return a.color||I(a,c)}).filter(function(a,c){return!t[c].disabled}));A.select(".nv-barsWrap").datum(t.filter(function(a){return!a.disabled})).transition().call(e);B&&(g.scale(M)._ticks(c.utils.calcTicksY(y/24,t)).tickSize(-H,0),A.select(".nv-x.nv-axis").call(g),A.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));
E&&(r.scale(K)._ticks(c.utils.calcTicksX(H/100,t)).tickSize(-y,0),A.select(".nv-y.nv-axis").attr("transform","translate(0,"+y+")"),A.select(".nv-y.nv-axis").call(r));A.select(".nv-zeroLine line").attr("x1",K(0)).attr("x2",K(0)).attr("y1",0).attr("y2",-y);l.dispatch.on("stateChange",function(c){for(var e in c)w[e]=c[e];P.stateChange(w);a.update()});n.dispatch.on("legendClick",function(c,g){if(c.disabled){T=T.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":e.stacked(!1);
break;case "Stacked":e.stacked(!0)}w.stacked=e.stacked();P.stateChange(w);L=e.stacked();a.update()}});P.on("changeState",function(c){"undefined"!==typeof c.disabled&&(t.forEach(function(a,e){a.disabled=c.disabled[e]}),w.disabled=c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),L=w.stacked=c.stacked);a.update()})});J.renderEnd("multibar horizontal chart immediate");return a}var e=c.models.multiBarHorizontal(),g=c.models.axis(),r=c.models.axis(),l=c.models.legend().height(30),n=c.models.legend().height(30),
t=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=null,z=null,I=c.utils.defaultColor(),C=!0,F={},D=!0,B=!0,E=!0,L=!1,M,K,w=c.utils.state(),G=null,U=null,P=d3.dispatch("stateChange","changeState","renderEnd"),R=250;w.stacked=!1;e.stacked(L);g.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});r.orient("bottom").tickFormat(d3.format(",.1f"));t.duration(0).valueFormatter(function(a,c){return r.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,
c)});n.updateState(!1);var N=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:L}}},q=function(a){return function(c){void 0!==c.stacked&&(L=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},J=c.utils.renderWatch(P,R);e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};t.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){t.hidden(!0)});
e.dispatch.on("elementMousemove.tooltip",function(a){t.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=P;a.multibar=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=r;a.state=w;a.tooltip=t;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return z},set:function(a){z=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showControls:{get:function(){return C},set:function(a){C=a}},controlLabels:{get:function(){return F},
set:function(a){F=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},defaultState:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return U},set:function(a){U=a}},tooltips:{get:function(){return t.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");t.enabled(!!a)}},tooltipContent:{get:function(){return t.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");t.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return R},set:function(a){R=a;J.reset(R);e.duration(R);g.duration(R);r.duration(R)}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a);l.color(I)}},barColor:{get:function(){return e.barColor},
set:function(a){e.barColor(a);l.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiChart=function(){function a(t){t.each(function(p){function t(a){var c=2===p[a.seriesIndex].yAxis?N:R;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color};J.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function y(a){var c=2===p[a.seriesIndex].yAxis?
N:R;a.point.x=G.x()(a.point);a.point.y=G.y()(a.point);J.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function z(a){var c=2===p[a.data.series].yAxis?N:R;a.value=K.x()(a.data);a.series={value:K.y()(a.data),color:a.color};J.duration(0).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}var H=d3.select(this);c.utils.initSVG(H);a.update=function(){H.transition().call(a)};a.container=this;var A=c.utils.availableWidth(r,
H,e),F=c.utils.availableHeight(l,H,e),I=p.filter(function(a){return"line"==a.type&&1==a.yAxis}),O=p.filter(function(a){return"line"==a.type&&2==a.yAxis}),da=p.filter(function(a){return"bar"==a.type&&1==a.yAxis}),ua=p.filter(function(a){return"bar"==a.type&&2==a.yAxis}),fa=p.filter(function(a){return"area"==a.type&&1==a.yAxis}),ia=p.filter(function(a){return"area"==a.type&&2==a.yAxis});if(p&&p.length&&p.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return c.utils.noData(a,
H),a;var ka=p.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,y:a.y}})}),oa=p.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,y:a.y}})});D.domain(d3.extent(d3.merge(ka.concat(oa)),function(a){return a.x})).range([0,A]);var ha=H.selectAll("g.wrap.multiChart").data([p]),ja=ha.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ja.append("g").attr("class",
"nv-x nv-axis");ja.append("g").attr("class","nv-y1 nv-axis");ja.append("g").attr("class","nv-y2 nv-axis");ja.append("g").attr("class","lines1Wrap");ja.append("g").attr("class","lines2Wrap");ja.append("g").attr("class","bars1Wrap");ja.append("g").attr("class","bars2Wrap");ja.append("g").attr("class","stack1Wrap");ja.append("g").attr("class","stack2Wrap");ja.append("g").attr("class","legendWrap");ha=ha.select("g");ja=p.map(function(a,c){return p[c].color||g(a,c)});if(n){var qa=q.align()?A/2:A,ya=q.align()?
qa:0;q.width(qa);q.color(ja);ha.select(".legendWrap").datum(p.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(q);e.top!=q.height()&&(e.top=q.height(),F=c.utils.availableHeight(l,H,e));ha.select(".legendWrap").attr("transform","translate("+ya+","+-e.top+")")}L.width(A).height(F).interpolate(C).color(ja.filter(function(a,c){return!p[c].disabled&&1==p[c].yAxis&&"line"==p[c].type}));M.width(A).height(F).interpolate(C).color(ja.filter(function(a,
c){return!p[c].disabled&&2==p[c].yAxis&&"line"==p[c].type}));K.width(A).height(F).color(ja.filter(function(a,c){return!p[c].disabled&&1==p[c].yAxis&&"bar"==p[c].type}));w.width(A).height(F).color(ja.filter(function(a,c){return!p[c].disabled&&2==p[c].yAxis&&"bar"==p[c].type}));G.width(A).height(F).color(ja.filter(function(a,c){return!p[c].disabled&&1==p[c].yAxis&&"area"==p[c].type}));U.width(A).height(F).color(ja.filter(function(a,c){return!p[c].disabled&&2==p[c].yAxis&&"area"==p[c].type}));ha.attr("transform",
"translate("+e.left+","+e.top+")");var ja=ha.select(".lines1Wrap").datum(I.filter(function(a){return!a.disabled})),qa=ha.select(".bars1Wrap").datum(da.filter(function(a){return!a.disabled})),ya=ha.select(".stack1Wrap").datum(fa.filter(function(a){return!a.disabled})),na=ha.select(".lines2Wrap").datum(O.filter(function(a){return!a.disabled})),Ha=ha.select(".bars2Wrap").datum(ua.filter(function(a){return!a.disabled})),Ia=ha.select(".stack2Wrap").datum(ia.filter(function(a){return!a.disabled})),sa=fa.length?
fa.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[],za=ia.length?ia.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[];B.domain(h||d3.extent(d3.merge(ka).concat(sa),function(a){return a.y})).range([0,F]);E.domain(u||d3.extent(d3.merge(oa).concat(za),function(a){return a.y})).range([0,F]);L.yDomain(B.domain());K.yDomain(B.domain());
G.yDomain(B.domain());M.yDomain(E.domain());w.yDomain(E.domain());U.yDomain(E.domain());fa.length&&d3.transition(ya).call(G);ia.length&&d3.transition(Ia).call(U);da.length&&d3.transition(qa).call(K);ua.length&&d3.transition(Ha).call(w);I.length&&d3.transition(ja).call(L);O.length&&d3.transition(na).call(M);P._ticks(c.utils.calcTicksX(A/100,p)).tickSize(-F,0);ha.select(".nv-x.nv-axis").attr("transform","translate(0,"+F+")");d3.transition(ha.select(".nv-x.nv-axis")).call(P);R._ticks(c.utils.calcTicksY(F/
36,p)).tickSize(-A,0);d3.transition(ha.select(".nv-y1.nv-axis")).call(R);N._ticks(c.utils.calcTicksY(F/36,p)).tickSize(-A,0);d3.transition(ha.select(".nv-y2.nv-axis")).call(N);ha.select(".nv-y1.nv-axis").classed("nv-disabled",ka.length?!1:!0).attr("transform","translate("+D.range()[0]+",0)");ha.select(".nv-y2.nv-axis").classed("nv-disabled",oa.length?!1:!0).attr("transform","translate("+D.range()[1]+",0)");q.dispatch.on("stateChange",function(c){a.update()});L.dispatch.on("elementMouseover.tooltip",
t);M.dispatch.on("elementMouseover.tooltip",t);L.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});M.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});G.dispatch.on("elementMouseover.tooltip",y);U.dispatch.on("elementMouseover.tooltip",y);G.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});U.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});K.dispatch.on("elementMouseover.tooltip",z);w.dispatch.on("elementMouseover.tooltip",z);K.dispatch.on("elementMouseout.tooltip",
function(a){J.hidden(!0)});w.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});K.dispatch.on("elementMousemove.tooltip",function(a){J.position({top:d3.event.pageY,left:d3.event.pageX})()});w.dispatch.on("elementMousemove.tooltip",function(a){J.position({top:d3.event.pageY,left:d3.event.pageX})()})});return a}var e={top:30,right:20,bottom:50,left:60},g=c.utils.defaultColor(),r=null,l=null,n=!0,t=null,h,u,z=function(a){return a.x},I=function(a){return a.y},C="monotone",F=!0,D=d3.scale.linear(),
B=d3.scale.linear(),E=d3.scale.linear(),L=c.models.line().yScale(B),M=c.models.line().yScale(E),K=c.models.multiBar().stacked(!1).yScale(B),w=c.models.multiBar().stacked(!1).yScale(E),G=c.models.stackedArea().yScale(B),U=c.models.stackedArea().yScale(E),P=c.models.axis().scale(D).orient("bottom").tickPadding(5),R=c.models.axis().scale(B).orient("left"),N=c.models.axis().scale(E).orient("right"),q=c.models.legend().height(30),J=c.models.tooltip(),O=d3.dispatch();a.dispatch=O;a.lines1=L;a.lines2=M;
a.bars1=K;a.bars2=w;a.stack1=G;a.stack2=U;a.xAxis=P;a.yAxis1=R;a.yAxis2=N;a.tooltip=J;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return n},set:function(a){n=a}},yDomain1:{get:function(){return h},set:function(a){h=a}},yDomain2:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return t},set:function(a){t=a}},interpolate:{get:function(){return C},
set:function(a){C=a}},tooltips:{get:function(){return J.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");J.enabled(!!a)}},tooltipContent:{get:function(){return J.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");J.contentGenerator(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;
e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return g},set:function(a){g=c.utils.getColor(a)}},x:{get:function(){return z},set:function(a){z=a;L.x(a);M.x(a);K.x(a);w.x(a);G.x(a);U.x(a)}},y:{get:function(){return I},set:function(a){I=a;L.y(a);M.y(a);G.y(a);U.y(a);K.y(a);w.y(a)}},useVoronoi:{get:function(){return F},set:function(a){F=a;L.useVoronoi(a);M.useVoronoi(a);G.useVoronoi(a);U.useVoronoi(a)}}});c.utils.initOptions(a);return a};c.models.ohlcBar=function(){function a(q){q.each(function(a){n=
d3.select(this);var q=c.utils.availableWidth(g,n,e),w=c.utils.availableHeight(r,n,e);c.utils.initSVG(n);var p=q/a[0].values.length*.9;t.domain(G||d3.extent(a[0].values.map(u).concat(B)));L?t.range(P||[.5*q/a[0].values.length,q*(a[0].values.length-.5)/a[0].values.length]):t.range(P||[5+p/2,q-p/2-5]);h.domain(U||[d3.min(a[0].values.map(D).concat(E)),d3.max(a[0].values.map(F).concat(E))]).range(R||[w,0]);t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-.01*t.domain()[0],t.domain()[1]+
.01*t.domain()[1]]):t.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var J=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),y=J.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),W=y.append("defs"),y=y.append("g"),Z=J.select("g");y.append("g").attr("class","nv-ticks");J.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){N.chartClick({data:a,
index:c,pos:d3.event,id:l})});W.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");J.select("#nv-chart-clip-path-"+l+" rect").attr("width",q).attr("height",w);Z.attr("clip-path",M?"url(#nv-chart-clip-path-"+l+")":"");w=J.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});w.exit().remove();w.enter().append("path").attr("class",function(a,c,e){return(I(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+
(h(I(a,c))-h(F(a,c)))+"l"+-p/2+",0l"+p/2+",0l0,"+(h(D(a,c))-h(I(a,c)))+"l0,"+(h(C(a,c))-h(D(a,c)))+"l"+p/2+",0l"+-p/2+",0z"}).attr("transform",function(a,c){return"translate("+t(u(a,c))+","+h(F(a,c))+")"}).attr("fill",function(a,c){return K[0]}).attr("stroke",function(a,c){return K[0]}).attr("x",0).attr("y",function(a,c){return h(Math.max(0,z(a,c)))}).attr("height",function(a,c){return Math.abs(h(z(a,c))-h(0))});w.attr("class",function(a,c,e){return(I(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+
" nv-tick-"+e+"-"+c});d3.transition(w).attr("transform",function(a,c){return"translate("+t(u(a,c))+","+h(F(a,c))+")"}).attr("d",function(c,e){var g=q/a[0].values.length*.9;return"m0,0l0,"+(h(I(c,e))-h(F(c,e)))+"l"+-g/2+",0l"+g/2+",0l0,"+(h(D(c,e))-h(I(c,e)))+"l0,"+(h(C(c,e))-h(D(c,e)))+"l"+g/2+",0l"+-g/2+",0z"})});return a}var e={top:0,right:0,bottom:0,left:0},g=null,r=null,l=Math.floor(1E4*Math.random()),n=null,t=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},z=function(a){return a.y},
I=function(a){return a.open},C=function(a){return a.close},F=function(a){return a.high},D=function(a){return a.low},B=[],E=[],L=!1,M=!0,K=c.utils.defaultColor(),w=!1,G,U,P,R,N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-ohlcBar .nv-tick.hover").classed("hover",
!1)};a.dispatch=N;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return G},set:function(a){G=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return R},
set:function(a){R=a}},forceX:{get:function(){return B},set:function(a){B=a}},forceY:{get:function(){return E},set:function(a){E=a}},padData:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return M},set:function(a){M=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return w},set:function(a){w=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return z},set:function(a){z=a}},open:{get:function(){return I()},set:function(a){I=
a}},close:{get:function(){return C()},set:function(a){C=a}},high:{get:function(){return F},set:function(a){F=a}},low:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return K},set:function(a){K=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinates=
function(){function a(B){B.each(function(a){function E(a){return N(t.map(function(c){if(isNaN(a[c])||isNaN(parseFloat(a[c]))){var e=n[c].domain(),g=n[c].range(),h=e[0]-(e[1]-e[0])/9;0>p.indexOf(c)&&(e=d3.scale.linear().domain([h,e[1]]).range([U-12,g[1]]),n[c].brush.y(e),p.push(c));return[l(c),n[c](h)]}0<p.length?(J.style("display","inline"),O.style("display","inline")):(J.style("display","none"),O.style("display","none"));return[l(c),n[c](a[c])]}))}function B(){var a=t.filter(function(a){return!n[a].brush.empty()}),
c=a.map(function(a){return n[a].brush.extent()});z=[];a.forEach(function(a,e){z[e]={dimension:a,extent:c[e]}});I=[];W.style("display",function(e){var g=a.every(function(a,g){return isNaN(e[a])&&c[g][0]==n[a].brush.y().domain()[0]?!0:c[g][0]<=e[a]&&e[a]<=c[g][1]});g&&I.push(e);return g?null:"none"});D.brush({filters:z,active:I})}function K(a){var c=C[a];return null==c?l(a):c}var w=d3.select(this),G=c.utils.availableWidth(g,w,e),U=c.utils.availableHeight(r,w,e);c.utils.initSVG(w);I=a;l.rangePoints([0,
G],1).domain(t);t.forEach(function(c){var e=d3.extent(a,function(a){return+a[c]});void 0===e[0]&&(e[0]=0,e[1]=0);e[0]===e[1]&&(--e[0],e[1]+=1);n[c]=d3.scale.linear().domain(e).range([.9*(U-12),0]);n[c].brush=d3.svg.brush().y(n[c]).on("brush",B);return"name"!=c});var w=w.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),P=w.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),R=w.select("g");P.append("g").attr("class","nv-parallelCoordinates background");P.append("g").attr("class",
"nv-parallelCoordinates foreground");P.append("g").attr("class","nv-parallelCoordinates missingValuesline");w.attr("transform","translate("+e.left+","+e.top+")");var N=d3.svg.line().interpolate("cardinal").tension(F),q=d3.svg.axis().orient("left"),P=d3.behavior.drag().on("dragstart",function(a,c){C[a]=this.parentNode.__origin__=l(a);y.attr("visibility","hidden")}).on("drag",function(a,c){C[a]=Math.min(G,Math.max(0,this.parentNode.__origin__+=d3.event.x));W.attr("d",E);t.sort(function(a,c){return K(a)-
K(c)});l.domain(t);Z.attr("transform",function(a){return"translate("+K(a)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete C[a];d3.select(this.parentNode).attr("transform","translate("+l(a)+")");W.attr("d",E);y.attr("d",E).attr("visibility",null)}),J,O,H=l.range()[1]-l.range()[0],p=[],S=[0+H/2,U-12,G-H/2,U-12];J=w.select(".missingValuesline").selectAll("line").data([S]);J.enter().append("line");J.exit().remove();J.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",
function(a){return a[2]}).attr("y2",function(a){return a[3]});O=w.select(".missingValuesline").selectAll("text").data(["undefined values"]);O.append("text").data(["undefined values"]);O.enter().append("text");O.exit().remove();O.attr("y",U).attr("x",G-92-H/2).text(function(a){return a});var y=w.select(".background").selectAll("path").data(a);y.enter().append("path");y.exit().remove();y.attr("d",E);var W=w.select(".foreground").selectAll("path").data(a);W.enter().append("path");W.exit().remove();W.attr("d",
E).attr("stroke",u);W.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);D.elementMouseover({label:a.name,data:a.data,index:c,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});W.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);D.elementMouseout({label:a.name,data:a.data,index:c})});var Z=R.selectAll(".dimension").data(t),w=Z.enter().append("g").attr("class","nv-parallelCoordinates dimension");w.append("g").attr("class","nv-parallelCoordinates nv-axis");
w.append("g").attr("class","nv-parallelCoordinates-brush");w.append("text").attr("class","nv-parallelCoordinates nv-label");Z.attr("transform",function(a){return"translate("+l(a)+",0)"});Z.exit().remove();Z.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(a,c){D.elementMouseover({dim:a,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(a,c){D.elementMouseout({dim:a})}).call(P);
Z.select(".nv-axis").each(function(a,c){d3.select(this).call(q.scale(n[a]).tickFormat(d3.format(h[c])))});Z.select(".nv-parallelCoordinates-brush").each(function(a){d3.select(this).call(n[a].brush)}).selectAll("rect").attr("x",-8).attr("width",16)});return a}var e={top:30,right:0,bottom:10,left:0},g=null,r=null,l=d3.scale.ordinal(),n={},t=[],h=[],u=c.utils.defaultColor(),z=[],I=[],C=[],F=1,D=d3.dispatch("brush","elementMouseover","elementMouseout");a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},dimensionNames:{get:function(){return t},set:function(a){t=a}},dimensionFormats:{get:function(){return h},set:function(a){h=a}},lineTension:{get:function(){return F},set:function(a){F=a}},dimensions:{get:function(){return t},set:function(a){c.deprecated("dimensions","use dimensionNames instead");t=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==
a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.pie=function(){function a(p){H.reset();p.each(function(a){var p=g-e.left-e.right,S=r-e.top-e.bottom,Z=Math.min(p,S)/2,A=[],T=[];h=d3.select(this);if(0===N.length)for(var V=Z-Z/5,la=R*Z,da=0;da<a[0].length;da++)A.push(V),T.push(la);else A=N.map(function(a){return(a.outer-
a.outer/5)*Z}),T=N.map(function(a){return(a.inner-a.inner/5)*Z}),R=d3.min(N.map(function(a){return a.inner-a.inner/5}));c.utils.initSVG(h);var V=h.selectAll(".nv-wrap.nv-pie").data(a),da=V.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+t).append("g"),ua=V.select("g"),la=da.append("g").attr("class","nv-pie");da.append("g").attr("class","nv-pieLabels");V.attr("transform","translate("+e.left+","+e.top+")");ua.select(".nv-pie").attr("transform","translate("+p/2+","+S/2+")");ua.select(".nv-pieLabels").attr("transform",
"translate("+p/2+","+S/2+")");h.on("click",function(a,c){q.chartClick({data:a,index:c,pos:d3.event,id:t})});J=[];O=[];for(da=0;da<a[0].length;da++){var ua=d3.svg.arc().outerRadius(A[da]),fa=d3.svg.arc().outerRadius(A[da]+5);!1!==w&&(ua.startAngle(w),fa.startAngle(w));!1!==U&&(ua.endAngle(U),fa.endAngle(U));B&&(ua.innerRadius(T[da]),fa.innerRadius(T[da]));ua.cornerRadius&&P&&(ua.cornerRadius(P),fa.cornerRadius(P));J.push(ua);O.push(fa)}T=d3.layout.pie().sort(null).value(function(a){return a.disabled?
0:n(a)});T.padAngle&&G&&T.padAngle(G);B&&E&&(la.append("text").attr("class","nv-pie-title"),V.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return E}).style("font-size",Math.min(p,S)*R*2/(E.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+M+")"}));p=V.select(".nv-pie").selectAll(".nv-slice").data(T);S=V.select(".nv-pieLabels").selectAll(".nv-label").data(T);p.exit().remove();S.exit().remove();T=p.enter().append("g");T.attr("class","nv-slice");
T.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);L&&d3.select(this).select("path").transition().duration(70).attr("d",O[c]);q.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill")})});T.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);L&&d3.select(this).select("path").transition().duration(50).attr("d",J[c]);q.elementMouseout({data:a.data,index:c})});T.on("mousemove",function(a,c){q.elementMousemove({data:a.data,index:c})});T.on("click",function(a,
c){q.elementClick({data:a.data,index:c,color:d3.select(this).style("fill")})});T.on("dblclick",function(a,c){q.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});p.attr("fill",function(a,c){return u(a.data,c)});p.attr("stroke",function(a,c){return u(a.data,c)});T.append("path").each(function(a){this._current=a});p.select("path").transition().attr("d",function(a,c){return J[c](a)}).attrTween("d",function(a,c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?
0:a.startAngle;B||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return J[c](e(a))}});if(I){for(var ia=[],da=0;da<a[0].length;da++)ia.push(J[da]),C?B&&(ia[da]=d3.svg.arc().outerRadius(J[da].outerRadius()),!1!==w&&ia[da].startAngle(w),!1!==U&&ia[da].endAngle(U)):B||ia[da].innerRadius(0);S.enter().append("g").classed("nv-label",!0).each(function(a,c){var e=d3.select(this);e.attr("transform",function(a,c){if(K){a.outerRadius=A[c]+10;a.innerRadius=A[c]+15;
var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+ia[c].centroid(a)+") rotate("+e+")"}a.outerRadius=Z+10;a.innerRadius=Z+15;return"translate("+ia[c].centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",K?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var ka={},oa=function(a){return 140*Math.floor(a[0]/140)+","+
14*Math.floor(a[1]/14)};S.watchTransition(H,"pie labels").attr("transform",function(a,c){if(K){a.outerRadius=A[c]+10;a.innerRadius=A[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+ia[c].centroid(a)+") rotate("+e+")"}a.outerRadius=Z+10;a.innerRadius=Z+15;e=ia[c].centroid(a);if(a.value){var g=oa(e);ka[g]&&(e[1]-=14);ka[oa(e)]=!0}return"translate("+e+")"});S.select(".nv-label text").style("text-anchor",function(a,c){return K?(a.startAngle+
a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),g="";if(!a.value||e<D)return"";if("function"===typeof F)g=F(a,c,{key:l(a.data),value:n(a.data),percent:z(e)});else switch(F){case "key":g=l(a.data);break;case "value":g=z(n(a.data));break;case "percent":g=d3.format("%")(e)}return g})}});H.renderEnd("pie immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=500,r=500,l=function(a){return a.x},n=function(a){return a.y},t=Math.floor(1E4*
Math.random()),h=null,u=c.utils.defaultColor(),z=d3.format(",.2f"),I=!0,C=!1,F="key",D=.02,B=!1,E=!1,L=!0,M=0,K=!1,w=!1,G=!1,U=!1,P=0,R=.5,N=[],q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),J=[],O=[],H=c.utils.renderWatch(q);a.dispatch=q;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{arcsRadius:{get:function(){return N},set:function(a){N=a}},width:{get:function(){return g},set:function(a){g=a}},
height:{get:function(){return r},set:function(a){r=a}},showLabels:{get:function(){return I},set:function(a){I=a}},title:{get:function(){return E},set:function(a){E=a}},titleOffset:{get:function(){return M},set:function(a){M=a}},labelThreshold:{get:function(){return D},set:function(a){D=a}},valueFormat:{get:function(){return z},set:function(a){z=a}},x:{get:function(){return l},set:function(a){l=a}},id:{get:function(){return t},set:function(a){t=a}},endAngle:{get:function(){return U},set:function(a){U=
a}},startAngle:{get:function(){return w},set:function(a){w=a}},padAngle:{get:function(){return G},set:function(a){G=a}},cornerRadius:{get:function(){return P},set:function(a){P=a}},donutRatio:{get:function(){return R},set:function(a){R=a}},labelsOutside:{get:function(){return C},set:function(a){C=a}},labelSunbeamLayout:{get:function(){return K},set:function(a){K=a}},donut:{get:function(){return B},set:function(a){B=a}},growOnHover:{get:function(){return L},set:function(a){L=a}},pieLabelsOutside:{get:function(){return C},
set:function(a){C=a;c.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return C},set:function(a){C=a;c.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return z},set:function(a){z=a;c.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(a){e.top="undefined"!=typeof a.top?a.top:e.top;e.right="undefined"!=typeof a.right?a.right:e.right;e.bottom="undefined"!=typeof a.bottom?
a.bottom:e.bottom;e.left="undefined"!=typeof a.left?a.left:e.left}},y:{get:function(){return n},set:function(a){n=d3.functor(a)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}},labelType:{get:function(){return F},set:function(a){F=a||"key"}}});c.utils.initOptions(a);return a};c.models.pieChart=function(){function a(h){D.reset();D.models(e);h.each(function(h){var r=d3.select(this);c.utils.initSVG(r);var w=c.utils.availableWidth(null,r,l),C=c.utils.availableHeight(null,r,l);
a.update=function(){r.transition().call(a)};a.container=this;u.setter(E(h),a.update).getter(B(h)).update();u.disabled=h.map(function(a){return!!a.disabled});if(!z){var D;z={};for(D in u)z[D]=u[D]instanceof Array?u[D].slice(0):u[D]}if(h&&h.length)r.selectAll(".nv-noData").remove();else return c.utils.noData(a,r),a;D=r.selectAll("g.nv-wrap.nv-pieChart").data([h]);var I=D.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),L=D.select("g");I.append("g").attr("class","nv-pieWrap");
I.append("g").attr("class","nv-legendWrap");n&&("top"===t?(g.width(w).key(e.x()),D.select(".nv-legendWrap").datum(h).call(g),l.top!=g.height()&&(l.top=g.height(),C=c.utils.availableHeight(null,r,l)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")):"right"===t&&(I=c.models.legend().width(),w/2<I&&(I=w/2),g.height(C).key(e.x()),g.width(I),w-=g.width(),D.select(".nv-legendWrap").datum(h).call(g).attr("transform","translate("+w+",0)")));D.attr("transform","translate("+l.left+","+
l.top+")");e.width(w).height(C);w=L.select(".nv-pieWrap").datum([h]);d3.transition(w).call(e);g.dispatch.on("stateChange",function(c){for(var e in c)u[e]=c[e];F.stateChange(u);a.update()});F.on("changeState",function(c){"undefined"!==typeof c.disabled&&(h.forEach(function(a,e){a.disabled=c.disabled[e]}),u.disabled=c.disabled);a.update()})});D.renderEnd("pieChart immediate");return a}var e=c.models.pie(),g=c.models.legend(),r=c.models.tooltip(),l={top:30,right:20,bottom:20,left:20},n=!0,t="top",h=
c.utils.defaultColor(),u=c.utils.state(),z=null,I=null,C=250,F=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");r.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return e.valueFormat()(a,c)});var D=c.utils.renderWatch(F),B=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},E=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.series=
{key:a.x()(c.data),value:a.y()(c.data),color:c.color};r.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){r.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){r.position({top:d3.event.pageY,left:d3.event.pageX})()});a.legend=g;a.dispatch=F;a.pie=e;a.tooltip=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return I},set:function(a){I=a}},showLegend:{get:function(){return n},set:function(a){n=a}},legendPosition:{get:function(){return t},
set:function(a){t=a}},defaultState:{get:function(){return z},set:function(a){z=a}},tooltips:{get:function(){return r.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");r.enabled(!!a)}},tooltipContent:{get:function(){return r.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");r.contentGenerator(a)}},color:{get:function(){return h},set:function(a){h=a;g.color(h);e.color(h)}},duration:{get:function(){return C},
set:function(a){C=a;D.reset(C)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.scatter=function(){function a(A){ua.reset();A.each(function(a){t=d3.select(this);var A=c.utils.availableWidth(g,t,e),ia=c.utils.availableHeight(r,t,e);c.utils.initSVG(t);a.forEach(function(a,
c){a.values.forEach(function(a){a.series=c})});var ja=q&&J&&p?[]:d3.merge(a.map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:C(a,c),size:F(a,c)}})}));h.domain(q||d3.extent(ja.map(function(a){return a.x}).concat(B)));w&&a[0]?h.range(O||[(A*G+A)/(2*a[0].values.length),A-A*(1+G)/(2*a[0].values.length)]):h.range(O||[0,A]);u.domain(J||d3.extent(ja.map(function(a){return a.y}).concat(E))).range(H||[ia,0]);z.domain(p||d3.extent(ja.map(function(a){return a.size}).concat(L))).range(S||fa);
y=h.domain()[0]===h.domain()[1]||u.domain()[0]===u.domain()[1];h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):u.domain([-1,1]));isNaN(h.domain()[0])&&h.domain([-1,1]);isNaN(u.domain()[0])&&u.domain([-1,1]);T=T||h;V=V||u;var qa=t.selectAll("g.nv-wrap.nv-scatter").data([a]),ja=qa.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+n),ka=ja.append("defs"),na=ja.append("g"),Ha=qa.select("g");qa.classed("nv-single-point",y);na.append("g").attr("class","nv-groups");na.append("g").attr("class","nv-point-paths");ja.append("g").attr("class","nv-point-clips");qa.attr("transform","translate("+e.left+","+e.top+")");ka.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");qa.select("#nv-edge-clip-"+n+" rect").attr("width",A).attr("height",0<ia?ia:0);Ha.attr("clip-path",U?"url(#nv-edge-clip-"+
n+")":"");da=!0;A=qa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});A.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);A.exit().remove();A.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});A.watchTransition(ua,"scatter: groups").style("fill",function(a,c){return l(a,c)}).style("stroke",function(a,c){return l(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);ia=
A.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return K(a[0],c)})});ia.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a){return"translate("+T(I(a[0],a[1]))+","+V(C(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return D(a[0])}).size(function(a){return z(F(a[0],a[1]))}));ia.exit().remove();A.exit().selectAll("path.nv-point").watchTransition(ua,
"scatter exit").attr("transform",function(a){return"translate("+h(I(a[0],a[1]))+","+u(C(a[0],a[1]))+")"}).remove();ia.each(function(a){d3.select(this).classed("nv-point",!0).classed("nv-point-"+a[1],!0).classed("nv-noninteractive",!M).classed("hover",!1)});ia.watchTransition(ua,"scatter points").attr("transform",function(a){return"translate("+h(I(a[0],a[1]))+","+u(C(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return D(a[0])}).size(function(a){return z(F(a[0],a[1]))}));clearTimeout(la);
la=setTimeout(function(){da=!1;if(!M)return!1;if(!0===Z){var c=d3.merge(a.map(function(a,c){return a.values.map(function(a,e){var g=I(a,e),l=C(a,e);return[h(g)+1E-4*Math.random(),u(l)+1E-4*Math.random(),c,e,a]}).filter(function(a,c){return K(a[4],c)})}));if(0==c.length)return!1;3>c.length&&(c.push([h.range()[0]-20,u.range()[0]-20,null,null]),c.push([h.range()[1]+20,u.range()[1]+20,null,null]),c.push([h.range()[0]-20,u.range()[0]+20,null,null]),c.push([h.range()[1]+20,u.range()[1]-20,null,null]));
var n=d3.geom.polygon([[-10,-10],[-10,r+10],[g+10,r+10],[g+10,-10]]),p=d3.geom.voronoi(c).map(function(a,e){return{data:n.clip(a),series:c[e][2],point:c[e][3]}});qa.select(".nv-point-paths").selectAll("path").remove();var p=qa.select(".nv-point-paths").selectAll("path").data(p),q=p.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+c+
")"});R&&q.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));P&&(qa.select(".nv-point-clips").selectAll("clipPath").remove(),qa.select(".nv-point-clips").selectAll("clipPath").data(c).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",N));var w=function(c,g){if(da)return 0;var n=a[c.series];if(void 0!==
n){var p=n.values[c.point];p.color=l(n,c.series);p.x=I(p);p.y=C(p);var r=t.node().getBoundingClientRect(),q=window.pageYOffset||document.documentElement.scrollTop,w=window.pageXOffset||document.documentElement.scrollLeft,r={left:h(I(p,c.point))+r.left+w+e.left+10,top:u(C(p,c.point))+r.top+q+e.top+10};g({point:p,series:n,pos:r,seriesIndex:c.series,pointIndex:c.point})}};p.on("click",function(a){w(a,W.elementClick)}).on("dblclick",function(a){w(a,W.elementDblClick)}).on("mouseover",function(a){w(a,
W.elementMouseover)}).on("mouseout",function(a,c){w(a,W.elementMouseout)})}else qa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(c,g){if(da||!a[c.series])return 0;var l=a[c.series],p=l.values[g];W.elementClick({point:p,series:l,pos:[h(I(p,g))+e.left,u(C(p,g))+e.top],seriesIndex:c.series,pointIndex:g})}).on("dblclick",function(c,g){if(da||!a[c.series])return 0;var l=a[c.series],p=l.values[g];W.elementDblClick({point:p,series:l,pos:[h(I(p,g))+e.left,u(C(p,g))+
e.top],seriesIndex:c.series,pointIndex:g})}).on("mouseover",function(c,g){if(da||!a[c.series])return 0;var p=a[c.series],n=p.values[g];W.elementMouseover({point:n,series:p,pos:[h(I(n,g))+e.left,u(C(n,g))+e.top],seriesIndex:c.series,pointIndex:g,color:l(c,g)})}).on("mouseout",function(c,e){if(da||!a[c.series])return 0;var g=a[c.series];W.elementMouseout({point:g.values[e],series:g,seriesIndex:c.series,pointIndex:e,color:l(c,e)})})},300);T=h.copy();V=u.copy();z.copy()});ua.renderEnd("scatter immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=null,r=null,l=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),t=null,h=d3.scale.linear(),u=d3.scale.linear(),z=d3.scale.linear(),I=function(a){return a.x},C=function(a){return a.y},F=function(a){return a.size||1},D=function(a){return a.shape||"circle"},B=[],E=[],L=[],M=!0,K=function(a){return!a.notActive},w=!1,G=.1,U=!1,P=!0,R=!1,N=function(){return 25},q=null,J=null,O=null,H=null,p=null,S=null,y=!1,W=d3.dispatch("elementClick","elementDblClick",
"elementMouseover","elementMouseout","renderEnd"),Z=!0,A=250,T,V,la,da=!1,ua=c.utils.renderWatch(W,A),fa=[16,256];a.dispatch=W;a.options=c.utils.optionsFunc.bind(a);a._calls=new function(){this.clearHighlights=function(){c.dom.write(function(){t.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=function(a,e,g){c.dom.write(function(){t.select(" .nv-series-"+a+" .nv-point-"+e).classed("hover",g)})}};W.on("elementMouseover.point",function(c){M&&a._calls.highlightPoint(c.seriesIndex,
c.pointIndex,!0)});W.on("elementMouseout.point",function(c){M&&a._calls.highlightPoint(c.seriesIndex,c.pointIndex,!1)});a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},xScale:{get:function(){return h},set:function(a){h=a}},yScale:{get:function(){return u},set:function(a){u=a}},pointScale:{get:function(){return z},set:function(a){z=a}},xDomain:{get:function(){return q},set:function(a){q=a}},yDomain:{get:function(){return J},
set:function(a){J=a}},pointDomain:{get:function(){return p},set:function(a){p=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return H},set:function(a){H=a}},pointRange:{get:function(){return S},set:function(a){S=a}},forceX:{get:function(){return B},set:function(a){B=a}},forceY:{get:function(){return E},set:function(a){E=a}},forcePoint:{get:function(){return L},set:function(a){L=a}},interactive:{get:function(){return M},set:function(a){M=a}},pointActive:{get:function(){return K},
set:function(a){K=a}},padDataOuter:{get:function(){return G},set:function(a){G=a}},padData:{get:function(){return w},set:function(a){w=a}},clipEdge:{get:function(){return U},set:function(a){U=a}},clipVoronoi:{get:function(){return P},set:function(a){P=a}},clipRadius:{get:function(){return N},set:function(a){N=a}},showVoronoi:{get:function(){return R},set:function(a){R=a}},id:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return I},set:function(a){I=d3.functor(a)}},y:{get:function(){return C},
set:function(a){C=d3.functor(a)}},pointSize:{get:function(){return F},set:function(a){F=d3.functor(a)}},pointShape:{get:function(){return D},set:function(a){D=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return A},set:function(a){A=a;ua.reset(A)}},color:{get:function(){return l},set:function(a){l=
c.utils.getColor(a)}},useVoronoi:{get:function(){return Z},set:function(a){Z=a;!1===Z&&(P=!1)}}});c.utils.initOptions(a);return a};c.models.scatterChart=function(){function a(p){J.reset();J.models(e);K&&J.models(g);w&&J.models(r);E&&J.models(n);L&&J.models(t);p.each(function(p){C=d3.select(this);c.utils.initSVG(C);var y=c.utils.availableWidth(z,C,u),S=c.utils.availableHeight(I,C,u);a.update=function(){0===q?C.call(a):C.transition().duration(q).call(a)};a.container=this;U.setter(H(p),a.update).getter(O(p)).update();
U.disabled=p.map(function(a){return!!a.disabled});if(!P){var N;P={};for(N in U)P[N]=U[N]instanceof Array?U[N].slice(0):U[N]}if(p&&p.length&&p.filter(function(a){return a.values.length}).length)C.selectAll(".nv-noData").remove();else return c.utils.noData(a,C),J.renderEnd("scatter immediate"),a;D=e.xScale();B=e.yScale();var A=C.selectAll("g.nv-wrap.nv-scatterChart").data([p]);N=A.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g");var T=A.select("g");N.append("rect").attr("class",
"nvd3 nv-background").style("pointer-events","none");N.append("g").attr("class","nv-x nv-axis");N.append("g").attr("class","nv-y nv-axis");N.append("g").attr("class","nv-scatterWrap");N.append("g").attr("class","nv-regressionLinesWrap");N.append("g").attr("class","nv-distWrap");N.append("g").attr("class","nv-legendWrap");G&&T.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");M&&(l.width(y),A.select(".nv-legendWrap").datum(p).call(l),u.top!=l.height()&&(u.top=l.height(),S=c.utils.availableHeight(I,
C,u)),A.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));A.attr("transform","translate("+u.left+","+u.top+")");e.width(y).height(S).color(p.map(function(a,c){a.color=a.color||F(a,c);return a.color}).filter(function(a,c){return!p[c].disabled}));A.select(".nv-scatterWrap").datum(p.filter(function(a){return!a.disabled})).call(e);A.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");A=A.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
A.enter().append("g").attr("class","nv-regLines");A=A.selectAll(".nv-regLine").data(function(a){return[a]});A.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);A.filter(function(a){return a.intercept&&a.slope}).watchTransition(J,"scatterPlusLineChart: regline").attr("x1",D.range()[0]).attr("x2",D.range()[1]).attr("y1",function(a,c){return B(D.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return B(D.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,
c,e){return F(a,e)}).style("stroke-opacity",function(a,c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});K&&(g.scale(D)._ticks(c.utils.calcTicksX(y/100,p)).tickSize(-S,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")").call(g));w&&(r.scale(B)._ticks(c.utils.calcTicksY(S/36,p)).tickSize(-y,0),T.select(".nv-y.nv-axis").call(r));E&&(n.getData(e.x()).scale(D).width(y).color(p.map(function(a,c){return a.color||F(a,c)}).filter(function(a,
c){return!p[c].disabled})),N.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),T.select(".nv-distributionX").attr("transform","translate(0,"+B.range()[0]+")").datum(p.filter(function(a){return!a.disabled})).call(n));L&&(t.getData(e.y()).scale(B).width(S).color(p.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!p[c].disabled})),N.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),T.select(".nv-distributionY").attr("transform","translate("+(G?
y:-t.size())+",0)").datum(p.filter(function(a){return!a.disabled})).call(t));l.dispatch.on("stateChange",function(c){for(var e in c)U[e]=c[e];R.stateChange(U);a.update()});R.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),U.disabled=c.disabled);a.update()});e.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0);C.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);C.select(".nv-chart-"+
e.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",t.size())});e.dispatch.on("elementMouseover.tooltip",function(a){C.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos.top-S-u.top);C.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos.left+n.size()-u.left);h.position(a.pos).data(a).hidden(!1)});D.copy();B.copy()});J.renderEnd("scatter with line immediate");return a}var e=c.models.scatter(),g=c.models.axis(),r=c.models.axis(),
l=c.models.legend(),n=c.models.distribution(),t=c.models.distribution(),h=c.models.tooltip(),u={top:30,right:20,bottom:50,left:75},z=null,I=null,C=null,F=c.utils.defaultColor(),D=e.xScale(),B=e.yScale(),E=!1,L=!1,M=!0,K=!0,w=!0,G=!1,U=c.utils.state(),P=null,R=d3.dispatch("stateChange","changeState","renderEnd"),N=null,q=250;e.xScale(D).yScale(B);g.orient("bottom").tickPadding(10);r.orient(G?"right":"left").tickPadding(10);n.axis("x");t.axis("y");h.headerFormatter(function(a,c){return g.tickFormat()(a,
c)}).valueFormatter(function(a,c){return r.tickFormat()(a,c)});var J=c.utils.renderWatch(R,q),O=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},H=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=R;a.scatter=e;a.legend=l;a.xAxis=g;a.yAxis=r;a.distX=n;a.distY=t;a.tooltip=h;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return I},
set:function(a){I=a}},container:{get:function(){return C},set:function(a){C=a}},showDistX:{get:function(){return E},set:function(a){E=a}},showDistY:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return M},set:function(a){M=a}},showXAxis:{get:function(){return K},set:function(a){K=a}},showYAxis:{get:function(){return w},set:function(a){w=a}},defaultState:{get:function(){return P},set:function(a){P=a}},noData:{get:function(){return N},set:function(a){N=a}},duration:{get:function(){return q},
set:function(a){q=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},tooltipXContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},
tooltipYContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},rightAlignYAxis:{get:function(){return G},set:function(a){G=a;r.orient(a?"right":"left")}},color:{get:function(){return F},set:function(a){F=
c.utils.getColor(a);l.color(F);n.color(F);t.color(F)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sparkline=function(){function a(n){n.each(function(a){var n=g-e.left-e.right,E=r-e.top-e.bottom;l=d3.select(this);c.utils.initSVG(l);t.domain(C||d3.extent(a,u)).range(D||[0,n]);h.domain(F||d3.extent(a,z)).range(B||[E,0]);a=l.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform",
"translate("+e.left+","+e.top+")");n=a.selectAll("path").data(function(a){return[a]});n.enter().append("path");n.exit().remove();n.style("stroke",function(a,c){return a.color||I(a,c)}).attr("d",d3.svg.line().x(function(a,c){return t(u(a,c))}).y(function(a,c){return h(z(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return z(a,c)}),g=c(e.lastIndexOf(h.domain()[1])),l=c(e.indexOf(h.domain()[0])),
e=c(e.length-1);return[l,g,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,c){return t(u(a,a.pointIndex))}).attr("cy",function(a,c){return h(z(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return u(a,a.pointIndex)==t.domain()[1]?"nv-point nv-currentValue":z(a,a.pointIndex)==h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var e={top:2,right:0,bottom:2,left:0},g=400,r=32,l=null,n=!0,t=d3.scale.linear(),
h=d3.scale.linear(),u=function(a){return a.x},z=function(a){return a.y},I=c.utils.getColor(["#000"]),C,F,D,B;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return F},set:function(a){F=a}},xRange:{get:function(){return D},set:function(a){D=a}},yRange:{get:function(){return B},set:function(a){B=
a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return h},set:function(a){h=a}},animate:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return u},set:function(a){u=d3.functor(a)}},y:{get:function(){return z},set:function(a){z=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},
color:{get:function(){return I},set:function(a){I=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sparklinePlus=function(){function a(B){B.each(function(B){function E(){if(!u){var a=N.selectAll(".nv-hoverValue").data(h),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+n(e.x()(B[a],a))+
",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);h.length&&(c.append("line").attr("x1",0).attr("y1",-g.top).attr("x2",0).attr("y2",G),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-g.top).attr("text-anchor","end").attr("dy",".9em"),N.select(".nv-hoverValue .nv-xValue").text(z(e.x()(B[h[0]],h[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-g.top).attr("text-anchor","start").attr("dy",".9em"),N.select(".nv-hoverValue .nv-yValue").text(I(e.y()(B[h[0]],
h[0]))))}}var K=d3.select(this);c.utils.initSVG(K);var w=c.utils.availableWidth(r,K,g),G=c.utils.availableHeight(l,K,g);a.update=function(){K.call(a)};a.container=this;if(B&&B.length)K.selectAll(".nv-noData").remove();else return c.utils.noData(a,K),a;var L=e.y()(B[B.length-1],B.length-1);n=e.xScale();t=e.yScale();var P=K.selectAll("g.nv-wrap.nv-sparklineplus").data([B]),R=P.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),N=P.select("g");R.append("g").attr("class","nv-sparklineWrap");
R.append("g").attr("class","nv-valueWrap");R.append("g").attr("class","nv-hoverArea");P.attr("transform","translate("+g.left+","+g.top+")");P=N.select(".nv-sparklineWrap");e.width(w).height(G);P.call(e);C&&(P=N.select(".nv-valueWrap").selectAll(".nv-currentValue").data([L]),P.enter().append("text").attr("class","nv-currentValue").attr("dx",D?-8:8).attr("dy",".9em").style("text-anchor",D?"end":"start"),P.attr("x",w+(D?g.right:0)).attr("y",F?function(a){return t(a)}:0).style("fill",e.color()(B[B.length-
1],B.length-1)).text(I(L)));R.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!u){for(var a=d3.mouse(this)[0]-g.left,a=Math.round(n.invert(a)),c=Math.abs(e.x()(B[0],0)-a),l=0,r=0;r<B.length;r++)Math.abs(e.x()(B[r],r)-a)<c&&(c=Math.abs(e.x()(B[r],r)-a),l=r);h=[l];E()}}).on("click",function(){u=!u}).on("mouseout",function(){h=[];E()});N.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-g.left+","+-g.top+")"}).attr("width",w+g.left+g.right).attr("height",
G+g.top)});return a}var e=c.models.sparkline(),g={top:15,right:100,bottom:10,left:50},r=null,l=null,n,t,h=[],u=!1,z=d3.format(",r"),I=d3.format(",.2f"),C=!0,F=!0,D=!1,B=null;a.sparkline=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return l},set:function(a){l=a}},xTickFormat:{get:function(){return z},set:function(a){z=a}},yTickFormat:{get:function(){return I},set:function(a){I=a}},showLastValue:{get:function(){return C},
set:function(a){C=a}},alignValue:{get:function(){return F},set:function(a){F=a}},rightAlignValue:{get:function(){return D},set:function(a){D=a}},noData:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedArea=function(){function a(z){w.reset();
w.models(L);z.each(function(z){var G=g-e.left-e.right,M=r-e.top-e.bottom;t=d3.select(this);c.utils.initSVG(t);B=L.xScale();E=L.yScale();var N=z;z.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=c;return a})});z=z.filter(function(a){return!a.disabled});z=d3.layout.stack().order(C).offset(I).values(function(a){return a.values}).x(h).y(u).out(function(a,c,e){a.display={y:e,y0:c}})(z);var q=t.selectAll("g.nv-wrap.nv-stackedarea").data([z]),J=q.enter().append("g").attr("class",
"nvd3 nv-wrap nv-stackedarea"),O=J.append("defs"),J=J.append("g"),H=q.select("g");J.append("g").attr("class","nv-areaWrap");J.append("g").attr("class","nv-scatterWrap");q.attr("transform","translate("+e.left+","+e.top+")");0==L.forceY().length&&L.forceY().push(0);L.width(G).height(M).x(h).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(z.map(function(a,c){return a.color||l(a,a.seriesIndex)}));H.select(".nv-scatterWrap").datum(z).call(L);O.append("clipPath").attr("id","nv-edge-clip-"+
n).append("rect");q.select("#nv-edge-clip-"+n+" rect").attr("width",G).attr("height",M);H.attr("clip-path",D?"url(#nv-edge-clip-"+n+")":"");var p=d3.svg.area().x(function(a,c){return B(h(a,c))}).y0(function(a){return E(a.display.y0)}).y1(function(a){return E(a.display.y+a.display.y0)}).interpolate(F),S=d3.svg.area().x(function(a,c){return B(h(a,c))}).y0(function(a){return E(a.display.y0)}).y1(function(a){return E(a.display.y0)}),G=H.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});
G.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return S(a.values,a.seriesIndex)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);K.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);K.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",
!1);K.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});G.exit().remove();G.style("fill",function(a,c){return a.color||l(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||l(a,a.seriesIndex)});G.watchTransition(w,"stackedArea path").attr("d",function(a,c){return p(a.values,c)});L.dispatch.on("elementMouseover.area",function(a){H.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!0)});L.dispatch.on("elementMouseout.area",
function(a){H.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,e=a[0].length,g,h,l,n=[];for(h=0;h<e;++h){for(l=g=0;g<N.length;g++)l+=u(N[g].values[h]);if(l)for(g=0;g<c;g++)a[g][h][1]/=l;else for(g=0;g<c;g++)a[g][h][1]=0}for(h=0;h<e;++h)n[h]=0;return n}});w.renderEnd("stackedArea immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,r=500,l=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),t=null,h=function(a){return a.x},
u=function(a){return a.y},z="stack",I="zero",C="default",F="linear",D=!1,B,E,L=c.models.scatter(),M=250,K=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");L.pointSize(2.2).pointDomain([2.2,2.2]);var w=c.utils.renderWatch(K,M);a.dispatch=K;a.scatter=L;L.dispatch.on("elementClick",function(){K.elementClick.apply(this,arguments)});L.dispatch.on("elementMouseover",function(){K.elementMouseover.apply(this,arguments)});L.dispatch.on("elementMouseout",
function(){K.elementMouseout.apply(this,arguments)});a.interpolate=function(c){if(!arguments.length)return F;F=c;return a};a.duration=function(c){if(!arguments.length)return M;M=c;w.reset(M);L.duration(M);return a};a.dispatch=K;a.scatter=L;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},offset:{get:function(){return I},
set:function(a){I=a}},order:{get:function(){return C},set:function(a){C=a}},interpolate:{get:function(){return F},set:function(a){F=a}},x:{get:function(){return h},set:function(a){h=d3.functor(a)}},y:{get:function(){return u},set:function(a){u=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return l},set:function(a){l=
c.utils.getColor(a)}},style:{get:function(){return z},set:function(c){z=c;switch(z){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}}},duration:{get:function(){return M},set:function(a){M=a;w.reset(M);L.duration(M)}}});c.utils.inheritOptions(a,
L);c.utils.initOptions(a);return a};c.models.stackedAreaChart=function(){function a(h){S.reset();S.models(e);B&&S.models(g);E&&S.models(r);h.each(function(h){var A=d3.select(this),S=this;c.utils.initSVG(A);var P=c.utils.availableWidth(z,A,u),T=c.utils.availableHeight(I,A,u);a.update=function(){A.transition().duration(O).call(a)};a.container=this;G.setter(W(h),a.update).getter(y(h)).update();G.disabled=h.map(function(a){return!!a.disabled});if(!U){var fa;U={};for(fa in G)U[fa]=G[fa]instanceof Array?
G[fa].slice(0):G[fa]}if(h&&h.length&&h.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return c.utils.noData(a,A),a;K=e.xScale();w=e.yScale();var ia=A.selectAll("g.nv-wrap.nv-stackedAreaChart").data([h]),ka=ia.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");fa=ia.select("g");ka.append("rect").style("opacity",0);ka.append("g").attr("class","nv-x nv-axis");ka.append("g").attr("class","nv-y nv-axis");ka.append("g").attr("class",
"nv-stackedWrap");ka.append("g").attr("class","nv-legendWrap");ka.append("g").attr("class","nv-controlsWrap");ka.append("g").attr("class","nv-interactive");fa.select("rect").attr("width",P).attr("height",T);D&&(ka=F?P-N:P,l.width(ka),fa.select(".nv-legendWrap").datum(h).call(l),u.top!=l.height()&&(u.top=l.height(),T=c.utils.availableHeight(I,A,u)),fa.select(".nv-legendWrap").attr("transform","translate("+(P-ka)+","+-u.top+")"));if(F){var oa=[{key:J.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=
e.style(),style:"stack"},{key:J.stream||"Stream",metaKey:"Stream",disabled:"stream"!=e.style(),style:"stream"},{key:J.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:J.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];N=q.length/3*260;oa=oa.filter(function(a){return-1!==q.indexOf(a.metaKey)});n.width(N).color(["#444","#444","#444"]);fa.select(".nv-controlsWrap").datum(oa).call(n);u.top!=Math.max(n.height(),
l.height())&&(u.top=Math.max(n.height(),l.height()),T=c.utils.availableHeight(I,A,u));fa.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")}ia.attr("transform","translate("+u.left+","+u.top+")");L&&fa.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)");M&&(t.width(P).height(T).margin({left:u.left,top:u.top}).svgContainer(A).xScale(K),ia.select(".nv-interactive").call(t));e.width(P).height(T);fa.select(".nv-stackedWrap").datum(h).transition().call(e);B&&(g.scale(K)._ticks(c.utils.calcTicksX(P/
100,h)).tickSize(-T,0),fa.select(".nv-x.nv-axis").attr("transform","translate(0,"+T+")"),fa.select(".nv-x.nv-axis").transition().duration(0).call(g));E&&(T="wiggle"===e.offset()?0:c.utils.calcTicksY(T/36,h),r.scale(w)._ticks(T).tickSize(-P,0),"expand"===e.style()||"stack_percent"===e.style()?(P=r.tickFormat(),H&&P===Z||(H=P),r.tickFormat(Z)):H&&(r.tickFormat(H),H=null),fa.select(".nv-y.nv-axis").transition().duration(0).call(r));e.dispatch.on("areaClick.toggle",function(c){1===h.filter(function(a){return!a.disabled}).length?
h.forEach(function(a){a.disabled=!1}):h.forEach(function(a,e){a.disabled=e!=c.seriesIndex});G.disabled=h.map(function(a){return!!a.disabled});R.stateChange(G);a.update()});l.dispatch.on("stateChange",function(c){for(var e in c)G[e]=c[e];R.stateChange(G);a.update()});n.dispatch.on("legendClick",function(c,g){c.disabled&&(oa=oa.map(function(a){a.disabled=!0;return a}),c.disabled=!1,e.style(c.style),G.style=e.style(),R.stateChange(G),a.update())});t.dispatch.on("elementMousemove",function(l){e.clearHighlights();
var n,r,q,w=[];h.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,h){r=c.interactiveBisect(g.values,l.pointXValue,a.x());var p=g.values[r];null!=a.y()(p,r)&&e.highlightPoint(h,r,!0);if("undefined"!==typeof p){"undefined"===typeof n&&(n=p);"undefined"===typeof q&&(q=a.xScale()(a.x()(p,r)));var t="expand"==e.style()?p.display.y:a.y()(p,r);w.push({key:g.key,value:t,color:C(g,g.seriesIndex),stackedValue:p.display})}});w.reverse();if(2<w.length){var A=a.yScale().invert(l.mouseY),
y=null;w.forEach(function(a,c){A=Math.abs(A);var e=Math.abs(a.stackedValue.y0),g=Math.abs(a.stackedValue.y);A>=e&&A<=g+e&&(y=c)});null!=y&&(w[y].highlight=!0)}var z=g.tickFormat()(a.x()(n,r)),B=t.tooltip.valueFormatter();"expand"===e.style()||"stack_percent"===e.style()?(p||(p=B),B=d3.format(".1%")):p&&(B=p,p=null);t.tooltip.position({left:q+u.left,top:l.mouseY+u.top}).chartContainer(S.parentNode).valueFormatter(B).data({value:z,series:w})();t.renderGuideLine(q)});t.dispatch.on("elementMouseout",
function(a){e.clearHighlights()});R.on("changeState",function(c){"undefined"!==typeof c.disabled&&h.length===c.disabled.length&&(h.forEach(function(a,e){a.disabled=c.disabled[e]}),G.disabled=c.disabled);"undefined"!==typeof c.style&&e.style(c.style);a.update()})});S.renderEnd("stacked Area chart immediate");return a}var e=c.models.stackedArea(),g=c.models.axis(),r=c.models.axis(),l=c.models.legend(),n=c.models.legend(),t=c.interactiveGuideline(),h=c.models.tooltip(),u={top:30,right:25,bottom:50,left:60},
z=null,I=null,C=c.utils.defaultColor(),F=!0,D=!0,B=!0,E=!0,L=!1,M=!1,K,w,G=c.utils.state(),U=null,P=null,R=d3.dispatch("stateChange","changeState","renderEnd"),N=250,q=["Stacked","Stream","Expanded"],J={},O=250;G.style=e.style();g.orient("bottom").tickPadding(7);r.orient(L?"right":"left");h.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return r.tickFormat()(a,c)});t.tooltip.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,
c){return r.tickFormat()(a,c)});var H=null,p=null;n.updateState(!1);var S=c.utils.renderWatch(R);e.style();var y=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:e.style()}}},W=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},Z=d3.format("%");e.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=e.x()(a.point);a.point.y=e.y()(a.point);h.data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",
function(a){h.hidden(!0)});a.dispatch=R;a.stacked=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=r;a.interactiveLayer=t;a.tooltip=h;a.dispatch=R;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return I},set:function(a){I=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},defaultState:{get:function(){return U},
set:function(a){U=a}},noData:{get:function(){return P},set:function(a){P=a}},showControls:{get:function(){return F},set:function(a){F=a}},controlLabels:{get:function(){return J},set:function(a){J=a}},controlOptions:{get:function(){return q},set:function(a){q=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},duration:{get:function(){return O},set:function(a){O=a;S.reset(O);e.duration(O);g.duration(O);r.duration(O)}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a);l.color(C);e.color(C)}},rightAlignYAxis:{get:function(){return L},
set:function(a){L=a;r.orient(L?"right":"left")}},useInteractiveGuideline:{get:function(){return M},set:function(c){M=!!c;a.interactive(!c);a.useVoronoi(!c);e.scatter.interactive(!c)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sunburst=function(){function a(w){K.reset();w.each(function(a){function w(a){a.x0=a.x;a.dx0=a.dx}function G(a){var c=d3.interpolate(C.domain(),[a.x,a.x+a.dx]),e=d3.interpolate(F.domain(),[a.y,1]),g=d3.interpolate(F.range(),[a.y?20:0,q]);return function(a,
h){return h?function(c){return B(a)}:function(h){C.domain(c(h));F.domain(e(h)).range(g(h));return B(a)}}}h=d3.select(this);var K=c.utils.availableWidth(g,h,e),N=c.utils.availableHeight(r,h,e),q=Math.min(K,N)/2,J;c.utils.initSVG(h);var O=h.selectAll(".nv-wrap.nv-sunburst").data(a),H=O.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+t).selectAll("nv-sunburst");O.attr("transform","translate("+K/2+","+N/2+")");h.on("click",function(a,c){I.chartClick({data:a,index:c,pos:d3.event,
id:t})});F.range([0,q]);E=E||a;M=a[0];D.value(n[l]||n.count);J=H.data(D.nodes).enter().append("path").attr("d",B).style("fill",function(a){return u((a.children?a:a.parent).name)}).style("stroke","#FFF").on("click",function(a){L!==E&&E!==a&&(L=E);E=a;J.transition().duration(z).attrTween("d",G(a))}).each(w).on("dblclick",function(a){L.parent==a&&J.transition().duration(z).attrTween("d",G(M))}).each(w).on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("opacity",.8);I.elementMouseover({data:a,
color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);I.elementMouseout({data:a})}).on("mousemove",function(a,c){I.elementMousemove({data:a})})});K.renderEnd("sunburst immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=null,r=null,l="count",n={count:function(a){return 1},size:function(a){return a.size}},t=Math.floor(1E4*Math.random()),h=null,u=c.utils.defaultColor(),z=500,I=d3.dispatch("chartClick","elementClick","elementDblClick",
"elementMousemove","elementMouseover","elementMouseout","renderEnd"),C=d3.scale.linear().range([0,2*Math.PI]),F=d3.scale.sqrt(),D=d3.layout.partition().sort(null).value(function(a){return 1}),B=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,C(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,C(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,F(a.y))}).outerRadius(function(a){return Math.max(0,F(a.y+a.dy))}),E,L,M,K=c.utils.renderWatch(I);a.dispatch=
I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return r},set:function(a){r=a}},mode:{get:function(){return l},set:function(a){l=a}},id:{get:function(){return t},set:function(a){t=a}},duration:{get:function(){return z},set:function(a){z=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;
e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sunburstChart=function(){function a(g){z.reset();z.models(e);g.each(function(g){var l=d3.select(this);c.utils.initSVG(l);var n=c.utils.availableWidth(null,l,r),t=c.utils.availableHeight(null,l,r);a.update=function(){0===h?l.call(a):l.transition().duration(h).call(a)};a.container=this;if(g&&g.length)l.selectAll(".nv-noData").remove();else return c.utils.noData(a,
l),a;var u=l.selectAll("g.nv-wrap.nv-sunburstChart").data(g),z=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),C=u.select("g");z.append("g").attr("class","nv-sunburstWrap");u.attr("transform","translate("+r.left+","+r.top+")");e.width(n).height(t);g=C.select(".nv-sunburstWrap").datum(g);d3.transition(g).call(e)});z.renderEnd("sunburstChart immediate");return a}var e=c.models.sunburst(),g=c.models.tooltip(),r={top:30,right:20,bottom:20,left:20},l=c.utils.defaultColor(),
n=null,t=null,h=250,u=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),z=c.utils.renderWatch(u);g.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return a});e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.size,color:a.color};g.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});
a.dispatch=u;a.sunburst=e;a.tooltip=g;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return t},set:function(a){t=a}},defaultState:{get:function(){return n},set:function(a){n=a}},color:{get:function(){return l},set:function(a){l=a;e.color(l)}},duration:{get:function(){return h},set:function(a){h=a;z.reset(h);e.duration(h)}},margin:{get:function(){return r},set:function(a){r.top=void 0!==a.top?a.top:r.top;r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==
a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.version="1.8.1"})();
(function(c,a){var e=0;c.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=e;e+=1;this.openRequest=this.chart=
this.table=null},_init:function(){var a=c(this.element),e=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var l=a.find(".pt-chart");this.chart=l.length?l.first():null;e.renderFilter||e.renderOptions?(l="#"+a.attr("id"),e.renderOptions?(c(l+"-options").show(),e.collapseOptions&&(c(l+"-options legend").siblings().toggle(),c(l+"-options legend").children().toggle())):c(l+
"-options").hide(),e.renderFilter?(c(l+"-filters").show(),e.collapseFilter&&(c(l+"-filters legend").siblings().toggle(),c(l+"-filters legend").children().toggle())):c(l+"-options").hide()):a.find(".pt-form-container").hide();e.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());e.numberFormatter=function(a){var c=e.precision;if(null===a||"undefined"==typeof a)return"-";c=c||0==c?a.toFixed(c):a.toString();c=c.split(".");
a=c[0];c=1<c.length?"."+c[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+e.thousandGrouping+"})+(?!\\d))","g"),e.thousandSeparator);return a+c};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=c(this.element),e=null;this._unbindEvents();var l=a.find('input[type="hidden"][name="pivotdata"]');l.length&&(e=JSON.parse(c(l).first().val()));e?"count"==e.method&&(this.options.precision=0,this.options.minTickSize=1):(e={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide());this.data=e;e.nodata?(a.find(".pt-table").first().empty().append(c('<div class="pt-no-data">'+e.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();e.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=
c(this.element),e=a.find(".pt-table").first().empty();this.table=null;var l=this.data;if(!l.empty)if(this.options.renderTable){var n=l.cells,t=l.cols,h=l.rows,u=l.total,z=l.labels,I=this.options,C=I.showTotals,F=!1;1==t.length&&null===t[0][4]&&(F=!0);n=l.cells.slice(0);if(F&&C)for(t=[],l=0;l<h.length;l++)n[l]=[];else{for(l=0;l<h.length;l++)n[l]=n[l].filter(function(a,c){return"__other__"!=t[c][0]});t=t.filter(function(a){return"__other__"!=a[0]})}l=!1;1==t.length&&null===t[0][4]&&(l=!0);l&&C?(h=[],
n=[]):(n=n.filter(function(a,c){return"__other__"!=h[c][0]}),h=h.filter(function(a){return"__other__"!=a[0]}));e=d3.select(e.get(0)).append("table").attr("class","dataTable display report");e.append("thead").call(this._renderHeader,t,z,I).call(this._renderColumns,t,z,I);e.append("tbody").call(this._renderRows,this,h,t,z,n,I);I.showTotals&&e.append("tfoot").call(this._renderFooter,h,t,z,u);this.table=c(e.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):
(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide()},_renderHeader:function(a,c,e,n){a=a.append("tr");a.append("th").attr("scope","col").text(e.layer);c.length&&a.append("th").attr({scope:"col",colspan:c.length}).text(e.cols);n.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(e.total);return a},_renderColumns:function(a,c,e,n){a=a.append("tr");a.append("th").attr({scope:"col",
"class":"pt-rows-header"}).text(e.rows);var g=!1;1==c.length&&null===c[0][4]&&(g=!0);a.selectAll("th.pt-data").data(c).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return g?"":a[4]});return a},_renderRows:function(a,c,e,n,t,h,u){e=a.selectAll("tr.pt-row").data(e).enter().append("tr").attr("class",function(a,c){return c%2?"odd":"even"});var g=!1;1==e.length&&null===e[0][4]&&(g=!0);e.append("td").text(function(a){return g?"":a[4]});e.selectAll("td.pt-cell").data(function(a,
c){return h[c]}).enter().append("td").attr("class","pt-cell").each(c._renderCell,t);u.showTotals&&e.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return e},_renderCell:function(a,e,l){e=d3.select(this);for(var g=a.items,r,h=0,u=g.length;h<u;h++){r=g[h];var z=e.append("div").attr("class","pt-cell-value");null===r?z.text(l.none):c.isArray(r)?z.append("ul").selectAll("li").data(r).enter().append("li").html(function(a){return a}):z.text(r);r=a.keys[h];g&&r&&r.length&&(c(z.node()).data("keys",
r).data("fact",h),z.append("div").attr("class","pt-cell-zoom"));1<u-h&&z.append("span").text(" / ")}},_renderFooter:function(a,c,e,n,t){c=c.length%2?"odd":"even";a=a.append("tr").attr("class",c+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(n.total);a.selectAll("td.pt-col-total").data(e).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(t);return a},_renderChartOptions:function(){var a=
c(this.element),e=a.find(".pt-chart-controls").first().empty(),l=this.data;if(!l.empty&&this.options.renderChart){var l=l.labels,n=a.attr("id"),a=l.layer,t=l.rows,h=l.cols,u=l.per,z=c('<div class="pt-chart-opts">'),I=n+"-pchart-rows",C=n+"-vchart-rows",F=n+"-hchart-rows",D=n+"-schart-rows",B=n+"-pchart-cols",E=n+"-vchart-cols",L=n+"-hchart-cols",n=n+"-schart-cols";a&&c(z).append(c('<span class="pt-chart-label">'+a+": </span>"));t&&c(z).append(c('<div id="'+I+'" class="pt-chart-icon pt-pchart"/><div id="'+
C+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+t+"</span>"));h&&c(z).append(c('<div id="'+B+'" class="pt-chart-icon pt-pchart"/><div id="'+E+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+h+"</span>"));t&&h&&c(z).append(c('<span class="pt-chart-label">| '+l.breakdown+': </span><div id="'+D+'" class="pt-chart-icon pt-schart"/><div id="'+F+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+t+'</span><div id="'+n+'"  class="pt-chart-icon pt-schart"/><div id="'+
L+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+h+"</span>"));c(e).append(z)}},_truncateLabel:function(a,c){return a&&a.length>c?a.substring(0,c-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var e=c(this.element),g=this.data;e.find(".pt-chart-contents").hide();if(e=this.chart)if(c(e).unbind("plothover").unbind("plotclick").empty(),!g.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{e=this.options.collapseChart;if("undefined"==typeof a||
!a){if(e)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(e)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;e=a.type;a=a.axis;var n=g.labels,t=n.per,h=n.layer+" "+t+" "+n.rows,n=n.layer+" "+t+" "+n.cols,t=g.filter,u=t[0],z=t[1];"piechart"==e?"rows"==a?this._renderPieChart(g.rows,h,u):this._renderPieChart(g.cols,n,z):"barchart"==e?"rows"==a?this._renderBarChart(g.rows,g.facts,h,u):this._renderBarChart(g.cols,
g.facts,n,z):"breakdown"==e?"rows"==a?this._renderBreakDown(g,0,h,t):this._renderBreakDown(g,1,n,t):"spectrum"==e&&this._renderSpectrum(g,a,t)}}},_renderPieChart:function(a,e,l){var g=this.chart;if(g){c(g).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});e?c(g).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):c(g).siblings(".pt-chart-title").empty();var r=[],h=0;for(e=0;e<a.length;e++){var u=a[e];!u[1]&&0<=u[2][0]&&(r.push({index:u[0],label:u[4],value:u[2][0],key:u[3]}),
h+=u[2][0])}var z=this;z.chartOptions.currentDataIndex=null;var I=function(a){var e=a.index;if(z.chartOptions.currentDataIndex!=e){z._removeChartTooltip();z.chartOptions.currentDataIndex=e;a=a.data;var g=a.value;z._renderChartTooltip(d3.event.x,d3.event.y,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+g+" ("+Math.round(g/h*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).labelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0);
a.tooltip.enabled(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",I).on("elementMouseout",function(a){c(".pt-tooltip").remove();z.chartOptions.currentDataIndex=null;z.chartOptions.currentSeriesIndex=null});if(z.options.exploreChart&&l)a.pie.dispatch.on("elementClick",function(a){a=a.data;z._chartExplore([["__other__"==a.index?l+"__belongs":l,a.key]])});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(r).transition().duration(1200).call(a);nv.utils.windowResize(a.update);
return a})}},_renderBarChart:function(a,e,l,n){var g=this.chart;if(g){c(g).closest(".pt-chart-contents").show().css({width:"96%"});for(var h=[],r=this._truncateLabel,z,I,C,F=0;F<e.length;F++){z={key:e[F][2]};I=[];for(var D=0;D<a.length;D++)C=a[D],I.push({label:C[4],value:C[2][F],filterIndex:C[0],filterKey:C[3]});z.values=I;h.push(z)}c(g).css({height:"360px"});l?c(g).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):c(g).siblings(".pt-chart-title").empty();var B=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},a.index)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},E=this,L=this.options.numberFormatter;nv.addGraph(function(){var a,e;1<h.length?(a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showControls(!1),a.tooltip.contentGenerator(B),e=a.multibar):(a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showValues(!0),a.tooltip.contentGenerator(B),
a.valueFormat(L),e=a.discretebar);a.yAxis.tickFormat(L);a.xAxis.tickFormat(function(a){return r(a,18)});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(h).transition().duration(500).call(a);if(E.options.exploreChart&&n)e.dispatch.on("elementClick",function(a){var c=a.data.filterKey;null===c&&(c="None");var e=n;"__other__"==a.data.filterIndex&&(e+="__belongs");E._chartExplore([[e,c]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,e,l,n){var g=this.chart;if(g){c(g).closest(".pt-chart-contents").show().css({width:"96%"});
var h=a.cells,r,z,I=[],C=[],F,D;0===e?(r=a.rows,z=a.cols,a=function(a,c){return h[I[a]][C[c]].values[0]},F=n[0],D=n[1]):(r=a.cols,z=a.rows,a=function(a,c){return h[C[c]][I[a]].values[0]},F=n[1],D=n[0]);var B,E;n=[];e=[];B=0;for(E=r.length;B<E;B++)r[B][1]||(n.push(r[B]),I.push(B));B=0;for(E=z.length;B<E;B++)z[B][1]||(e.push(z[B]),C.push(B));var L=[];for(r=0;r<e.length;r++){z={key:e[r][4],filterIndex:e[r][0],filterKey:e[r][3]};B=[];for(E=0;E<n.length;E++)B.push({label:n[E][4],filterIndex:n[E][0],filterKey:n[E][3],
value:a(E,r)});z.values=B;L.push(z)}a=Math.max(n.length*Math.max(16*(e.length+1),50)+70,360);c(g).css({height:a+"px"});l?c(g).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):c(g).siblings(".pt-chart-title").empty();var M=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},a.index)+'">'+a.series+'</div><div class="pt-tooltip-text">'+a.label+': <span class="pt-tooltip-value">'+a.value+"</span></div></div>"},K=this,w=this.options.numberFormatter,
G=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).duration(350).showControls(!0);a.tooltip.contentGenerator(M);a.valueFormat(w);a.yAxis.tickFormat(w);a.xAxis.tickFormat(function(a){return G(a,24)});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(L).call(a);if(K.options.exploreChart&&F&&D)a.multibar.dispatch.on("elementClick",function(a){a=
a.data;var c=d3.event.currentTarget.parentElement.__data__,e=c.filterKey;null===e&&(e="None");var c="__other__"==c.filterIndex?D+"__belongs":D,g=a.filterKey;null===g&&(g="None");K._chartExplore([["__other__"==a.filterIndex?F+"__belongs":F,g],[c,e]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(e,r,l){var g=this.chart;if(g){var t=this,h=e.cells,u=e.labels,z,I,C,F,D,B;"rows"==r?(z=e.rows,I=e.cols,r=u.rows,C=u.cols,F=l[0],D=l[1],B=function(a,c){return h[a][c]}):(z=e.cols,I=
e.rows,r=u.cols,C=u.rows,F=l[1],D=l[0],B=function(a,c){return h[c][a]});var E=function(a,c){return null===a?I[c]:null===c?z[a]:B(a,c)},L=function(c,e){e===a&&(e="silver");for(var g=[],h,l,n=0;n<I.length;n++)h=E(null,n),l=null===c?h[2][0]:E(c,n).values[0],!h[1]&&0<=h[2][0]&&g.push({filterIndex:h[0],filterKey:h[3],label:h[4],value:l,color:e});return g},M=[],K=0;for(l=0;l<z.length;l++){var w=E(l,null);!w[1]&&0<=w[2][0]&&(M.push({position:l,filterIndex:w[0],filterKey:w[3],label:w[4],value:w[2][0]}),K+=
w[2][0])}t.chartOptions.currentDataIndex=null;c(g).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();c(g).siblings(".pt-chart-title").empty();l=c('<div class="pt-spectrum-pie">').appendTo(g);var g=c('<div class="pt-spectrum-bar">').appendTo(g),G=this.options.numberFormatter,U=this._truncateLabel,P=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0);P.tooltip.contentGenerator(function(a){a=
a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+G(a.value)+"</div></div>"});P.valueFormat(G);P.yAxis.tickFormat(G);P.xAxis.tickFormat(function(a){return U(a,18)});var R=d3.select(c(g).get(0)).append("svg").attr("class","nv"),g=Math.floor(l.width()/2)-30,N=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(g).margin({top:-20,left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35);
N.tooltip.enabled(!1);N.legend.align(!0).rightAlign(!1);N.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});N.pie.dispatch.on("elementMouseover",function(a){var e=a.index;if(t.chartOptions.currentDataIndex!=e){t._removeChartTooltip();t.chartOptions.currentDataIndex=e;a=a.data;var g=a.value;t._renderChartTooltip(d3.event.x,d3.event.y,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+g+" ("+Math.round(g/
K*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}}).on("elementMouseout",function(a){c(".pt-tooltip").remove();t.chartOptions.currentDataIndex=null;t.chartOptions.currentSeriesIndex=null});var q=d3.select(c(l).get(0)).append("svg").attr("class","nv").style({"min-width":g-30+"px"}),g=d3.select(c(l).get(0)).append("div").attr("class","pt-spectrum-form");g.append("h4").html(u.layer+" "+u.per+" "+C);g.append("label").html(r+":");var J=g.append("select");J.append("option").attr("value",
"null").style("font-weight","bold").html(t.options.textAll);J.selectAll(".pt-series-item").data(M).enter().append("option").attr("class","pt-series-item").attr("value",function(a,c){return c}).html(function(a){return a.label});g.append("label").html(u.total+":");var O=g.append("span").text(e.total),H=function(a){var c;if(null===a||t.chartOptions.currentSpectrumIndex==a)c=function(a,c){return nv.utils.defaultColor()({},c)},q.selectAll(".nv-slice").style("fill",c).style("stroke",c),c=L(null),R.datum([{key:null,
filterIndex:null,filterKey:null,values:c}]),P.update(),t.chartOptions.currentSpectrumIndex=null,J.property("value","null"),O.text(e.total);else{var g=M[a],h=nv.utils.defaultColor()({},a);c=function(c,e){return e==a?h:"silver"};q.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=L(g.position,h);R.datum([{key:g.position,filterIndex:g.filterIndex,filterKey:g.filterKey,values:c}]);P.update();t.chartOptions.currentSpectrumIndex=a;J.property("value",a);O.text(M[a].value)}};N.pie.dispatch.on("elementClick",
function(a){H(a.index)});J.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?H(null):H(a)});nv.addGraph(function(){q.datum(M).transition().duration(1200).call(N);nv.utils.windowResize(N.update);return N});nv.addGraph(function(){R.datum([{key:null,filterIndex:null,filterKey:null,values:L(null)}]).transition().duration(500).call(P);if(t.options.exploreChart&&F&&D)P.discretebar.dispatch.on("elementClick",function(a){var c=a.data,e=d3.event.currentTarget.parentElement.__data__;
a=e.filterIndex;var e=e.filterKey,g=c.filterIndex,c=c.filterKey,h=[];null!==a&&h.push(["__other__"==a?F+"__belongs":F,e||"None"]);null!==g&&h.push(["__other__"==g?D+"__belongs":D,c||"None"]);t._chartExplore(h)});nv.utils.windowResize(P.update);return P})}},_chartExplore:function(e){var g=this.options,l=c(this.element).closest(".ui-tabs"),n=g.filterTab;if(l.length&&!1!==n)g=(g=g.filterForm)?c("#"+g):a,S3.search.setCurrentFilters(g,e),e=n?c("#"+n).index():0,l.tabs("option","active",e);else if(l=g.filterURL)e=
this._updateURL(l,e),window.open(e,"_blank")},_renderChartTooltip:function(a,e,l){c('<div class="pt-tooltip">'+l+"</div>").css({position:"absolute",display:"none",top:e-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){c(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=null},
_getOptions:function(){var a="#"+c(this.element).attr("id");return{rows:c(a+"-rows").val(),cols:c(a+"-cols").val(),fact:c(a+"-fact").val(),totals:c(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+c(this.element).attr("id"),e=null,a=c(a+"-filters");if(a.length)try{e=S3.search.getCurrentFilters(a.first())}catch(l){}return e},_updateURL:function(a,c){var e,g,r=[],h={},u,z,I,C;if(c)for(u=0,z=c.length;u<z;u++)e=c[u],C=e[0],h[C]=!0,r.push(C+"="+e[1]);e=this.options.ajaxURL.split("?");
if(1<e.length){g=e[1].split("&");e={};u=0;for(z=g.length;u<z;u++)I=g[u].split("="),1<I.length&&(C=decodeURIComponent(I[0]),h[C]||(r.push(C+"="+decodeURIComponent(I[1])),e[C]=!0));for(C in e)h[C]=!0}e=a.split("?");if(1<e.length)for(g=e[1].split("&"),u=0,z=g.length;u<z;u++)I=g[u].split("="),1<I.length&&(C=decodeURIComponent(I[0]),h[C]||r.push(C+"="+decodeURIComponent(I[1])));r=r.join("&");h=e[0];r&&(h=h+"?"+r);return h},_updateAjaxURL:function(a,e){var g=this.options.ajaxURL.split("?"),n=[],r=!1,h;
1<g.length?(h=g[1],h=h.split("&")):h=[];var u,z,I;if(a)for(u in a)I=a[u],z=u+"="+I,"totals"==u?this.options.showTotals=I?!0:!1:r||-1!=c.inArray(z,h)||(r=!0),n.push(z);u={};I={};var C,F,D;if(e)for(C=0,F=e.length;C<F;C++)z=e[C],D=z[0],z=z[1],null===z?u[D]||(I[D]=!0):(I[D]&&(I[D]=!1),z=D+"="+encodeURIComponent(z),u[D]?u[D].push(z):u[D]=[z]);C=0;for(F=h.length;C<F;C++)z=h[C].split("="),1<z.length&&(D=decodeURIComponent(z[0]),z=decodeURIComponent(z[1]),I[D]?r=!0:u[D]?r||-1!=c.inArray(D+"="+z,u[D])||(r=
!0):"aggregate"!=D&&(a&&a.hasOwnProperty(D)||n.push(h[C])));for(D in u)for(C=0,F=u[D].length;C<F;C++)r||-1!=c.inArray(u[D][C],h)||(r=!0),n.push(u[D][C]);n=n.join("&");g=g[0];n&&(g=g+"?"+n);this.options.ajaxURL=g;return r},reload:function(e,r,l){l="undefined"!=typeof l?l:!0;"undefined"==typeof r&&(r=this._getFilters());var g=this,t=this.element,h,u=t.find('input[type="hidden"][name="pivotdata"]');if(u.length){t.find(".pt-throbber").show();if(e||r)h=this._updateAjaxURL(e,r);h||l?(e=this.options.ajaxURL,
r=this.options.timeout,l=c.ajaxS3,c.searchS3!==a&&(l=c.searchS3),t.find(".pt-empty").hide(),g.openRequest&&(g.openRequest.onreadystatechange=null,g.openRequest.abort()),g.openRequest=l({timeout:r,url:e,dataType:"json",type:"GET",success:function(a){g.openRequest=null;u.first().val(JSON.stringify(a));g.refresh()},error:function(a,c,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):g.refresh()}},_bindEvents:function(){var a=this,e=c(this.element),l=this.data,n="#"+e.attr("id");
c(n+"-options legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c(n+"-filters legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});e.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;e.find(".pt-table").hide();c(this).siblings(".pt-show-table").show();c(this).hide()});e.find(".pt-show-table").click(function(){a.table_options.hidden=!1;e.find(".pt-table").show();c(this).siblings(".pt-hide-table").show();c(this).hide()});
c(n+"-totals").click(function(){var e=c(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});c(n+"-rows,"+n+"-cols,"+n+"-fact").on("change.autosubmit",function(){c(n+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var t=this.options.autoSubmit;c(n+"-pt-form").on("optionChanged",function(){var e=c(this);if(!e.data("noAutoSubmit")){var g=e.data("autoSubmitTimeout");g&&clearTimeout(g);g=setTimeout(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,
e,!1)},t);e.data("autoSubmitTimeout",g)}})}else c(n+"-pt-form input.pt-submit").click(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});c(n+" div.pt-table div.pt-cell-zoom").click(function(a){a=c(a.currentTarget);var e=a.closest(".pt-cell-value"),g=e.find(".pt-cell-records");if(0<g.length)g.remove(),a.removeClass("opened");else{for(var h=e.data("keys"),g=e.data("fact"),e=l.lookups[l.facts[g][0]],g=c("<div/>").addClass("pt-cell-records"),n=c("<ul/>"),r=0;r<h.length;r++)n.append("<li>"+
e[h[r]]+"</li>");g.append(n);a.addClass("opened").after(g)}});c(n+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});c(n+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});c(n+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});c(n+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});c(n+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});c(n+"-vchart-cols").click(function(){a._renderChart({type:"barchart",
axis:"cols"})});c(n+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});c(n+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});e.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=c(this.element),e="#"+a.attr("id");c(e+" div.pt-table div.pt-cell-zoom").unbind("click");c(e+"-options legend").unbind("click");c(e+"-filters legend").unbind("click");c(e+"-totals").unbind("click");c(e+"-rows,"+e+"-cols,"+
e+"-fact").unbind("change.autosubmit");c(e+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");c(e+"-pchart-rows,"+e+"-vchart-rows,"+e+"-schart-rows,"+e+"-hchart-rows,"+e+"-pchart-cols,"+e+"-vchart-cols,"+e+"-schart-cols,"+e+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
